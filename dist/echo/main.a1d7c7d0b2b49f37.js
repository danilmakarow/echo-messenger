"use strict";(self.webpackChunkecho=self.webpackChunkecho||[]).push([[179],{2313:(wn,dt,L)=>{L.d(dt,{nm:()=>ji});var f=L(2122),ke=(L(4650),L(3692),L(259),L(5861)),He=L(9681),Ze=L(4859),xe=L(2090),ze=L(1877);const pe=new Map,Me={activated:!1,tokenObservers:[]},Ne={initialized:!1,enabled:!1};function yt(st){return pe.get(st)||Object.assign({},Me)}function Lt(){return Ne}const an="https://content-firebaseappcheck.googleapis.com/v1",Ae="exchangeDebugToken",_t={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class Ue{constructor(nt,wt,Bt,mn,Wn){if(this.operation=nt,this.retryPolicy=wt,this.getWaitDuration=Bt,this.lowerBound=mn,this.upperBound=Wn,this.pending=null,this.nextErrorWaitInterval=mn,mn>Wn)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(nt){var wt=this;return(0,ke.Z)(function*(){wt.stop();try{wt.pending=new xe.BH,yield function lt(st){return new Promise(nt=>{setTimeout(nt,st)})}(wt.getNextRun(nt)),wt.pending.resolve(),yield wt.pending.promise,wt.pending=new xe.BH,yield wt.operation(),wt.pending.resolve(),yield wt.pending.promise,wt.process(!0).catch(()=>{})}catch(Bt){wt.retryPolicy(Bt)?wt.process(!1).catch(()=>{}):wt.stop()}})()}getNextRun(nt){if(nt)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const wt=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),wt}}}const Ye=new xe.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function gn(st,nt){return vn.apply(this,arguments)}function vn(){return(vn=(0,ke.Z)(function*({url:st,body:nt},wt){const Bt={"Content-Type":"application/json"},mn=wt.getImmediate({optional:!0});if(mn){const dr=yield mn.getHeartbeatsHeader();dr&&(Bt["X-Firebase-Client"]=dr)}const Wn={method:"POST",body:JSON.stringify(nt),headers:Bt};let xn,_r;try{xn=yield fetch(st,Wn)}catch(dr){throw Ye.create("fetch-network-error",{originalErrorMessage:dr?.message})}if(200!==xn.status)throw Ye.create("fetch-status-error",{httpStatus:xn.status});try{_r=yield xn.json()}catch(dr){throw Ye.create("fetch-parse-error",{originalErrorMessage:dr?.message})}const Ii=_r.ttl.match(/^([\d.]+)(s)$/);if(!Ii||!Ii[2]||isNaN(Number(Ii[1])))throw Ye.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${_r.ttl}`});const ms=1e3*Number(Ii[1]),As=Date.now();return{token:_r.token,expireTimeMillis:As+ms,issuedAtTimeMillis:As}})).apply(this,arguments)}const jt="firebase-app-check-database",Gt=1,Tt="firebase-app-check-store";let Et=null;function fi(st,nt){return ui.apply(this,arguments)}function ui(){return(ui=(0,ke.Z)(function*(st,nt){const Bt=(yield function rn(){return Et||(Et=new Promise((st,nt)=>{try{const wt=indexedDB.open(jt,Gt);wt.onsuccess=Bt=>{st(Bt.target.result)},wt.onerror=Bt=>{var mn;nt(Ye.create("storage-open",{originalErrorMessage:null===(mn=Bt.target.error)||void 0===mn?void 0:mn.message}))},wt.onupgradeneeded=Bt=>{0===Bt.oldVersion&&Bt.target.result.createObjectStore(Tt,{keyPath:"compositeKey"})}}catch(wt){nt(Ye.create("storage-open",{originalErrorMessage:wt?.message}))}}),Et)}()).transaction(Tt,"readwrite"),Wn=Bt.objectStore(Tt).put({compositeKey:st,value:nt});return new Promise((xn,_r)=>{Wn.onsuccess=Ii=>{xn()},Bt.onerror=Ii=>{var ms;_r(Ye.create("storage-set",{originalErrorMessage:null===(ms=Ii.target.error)||void 0===ms?void 0:ms.message}))}})})).apply(this,arguments)}const Pi=new ze.Yd("@firebase/app-check");function Ai(st,nt){return(0,xe.hl)()?function _n(st,nt){return fi(function oi(st){return`${st.options.appId}-${st.name}`}(st),nt)}(st,nt).catch(wt=>{Pi.warn(`Failed to write token to IndexedDB. Error: ${wt}`)}):Promise.resolve()}function Ji(){return ri.apply(this,arguments)}function ri(){return(ri=(0,ke.Z)(function*(){const st=Lt();if(st.enabled&&st.token)return st.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const Yi={error:"UNKNOWN_ERROR"};function Pr(st){return xe.US.encodeString(JSON.stringify(st),!1)}function Hn(st){return Pn.apply(this,arguments)}function Pn(){return(Pn=(0,ke.Z)(function*(st,nt=!1){const wt=st.app;!function ct(st){if(!yt(st).activated)throw Ye.create("use-before-activation",{appName:st.name})}(wt);const Bt=yt(wt);let Wn,mn=Bt.token;if(mn&&!gr(mn)&&(Bt.token=void 0,mn=void 0),!mn){const Ii=yield Bt.cachedTokenPromise;Ii&&(gr(Ii)?mn=Ii:yield Ai(wt,void 0))}if(!nt&&mn&&gr(mn))return{token:mn.token};let _r,xn=!1;if(function Tn(){return Lt().enabled}()){Bt.exchangeTokenPromise||(Bt.exchangeTokenPromise=gn(function Ot(st,nt){const{projectId:wt,appId:Bt,apiKey:mn}=st.options;return{url:`${an}/projects/${wt}/apps/${Bt}:${Ae}?key=${mn}`,body:{debug_token:nt}}}(wt,yield Ji()),st.heartbeatServiceProvider).finally(()=>{Bt.exchangeTokenPromise=void 0}),xn=!0);const Ii=yield Bt.exchangeTokenPromise;return yield Ai(wt,Ii),Bt.token=Ii,{token:Ii.token}}try{Bt.exchangeTokenPromise||(Bt.exchangeTokenPromise=Bt.provider.getToken().finally(()=>{Bt.exchangeTokenPromise=void 0}),xn=!0),mn=yield yt(wt).exchangeTokenPromise}catch(Ii){"appCheck/throttled"===Ii.code?Pi.warn(Ii.message):Pi.error(Ii),Wn=Ii}return mn?Wn?_r=gr(mn)?{token:mn.token,internalError:Wn}:er(Wn):(_r={token:mn.token},Bt.token=mn,yield Ai(wt,mn)):_r=er(Wn),xn&&function Vi(st,nt){const wt=yt(st).tokenObservers;for(const Bt of wt)try{"EXTERNAL"===Bt.type&&null!=nt.error?Bt.error(nt.error):Bt.next(nt)}catch{}}(wt,_r),_r})).apply(this,arguments)}function Nn(st,nt){const wt=yt(st),Bt=wt.tokenObservers.filter(mn=>mn.next!==nt);0===Bt.length&&wt.tokenRefresher&&wt.tokenRefresher.isRunning()&&wt.tokenRefresher.stop(),wt.tokenObservers=Bt}function Ni(st){const{app:nt}=st,wt=yt(nt);let Bt=wt.tokenRefresher;Bt||(Bt=function Hi(st){const{app:nt}=st;return new Ue((0,ke.Z)(function*(){let Bt;if(Bt=yt(nt).token?yield Hn(st,!0):yield Hn(st),Bt.error)throw Bt.error;if(Bt.internalError)throw Bt.internalError}),()=>!0,()=>{const wt=yt(nt);if(wt.token){let Bt=wt.token.issuedAtTimeMillis+.5*(wt.token.expireTimeMillis-wt.token.issuedAtTimeMillis)+3e5;return Bt=Math.min(Bt,wt.token.expireTimeMillis-3e5),Math.max(0,Bt-Date.now())}return 0},_t.RETRIAL_MIN_WAIT,_t.RETRIAL_MAX_WAIT)}(st),wt.tokenRefresher=Bt),!Bt.isRunning()&&wt.isTokenAutoRefreshEnabled&&Bt.start()}function gr(st){return st.expireTimeMillis-Date.now()>0}function er(st){return{token:Pr(Yi),error:st}}class Fi{constructor(nt,wt){this.app=nt,this.heartbeatServiceProvider=wt}_delete(){const{tokenObservers:nt}=yt(this.app);for(const wt of nt)Nn(this.app,wt.next);return Promise.resolve()}}const is="app-check-internal";!function Gr(){(0,He._registerComponent)(new Ze.wA("app-check",st=>function $r(st,nt){return new Fi(st,nt)}(st.getProvider("app").getImmediate(),st.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((st,nt,wt)=>{st.getProvider(is).initialize()})),(0,He._registerComponent)(new Ze.wA(is,st=>function $n(st){return{getToken:nt=>Hn(st,nt),addTokenListener:nt=>function On(st,nt,wt,Bt){const{app:mn}=st,Wn=yt(mn);if(Wn.tokenObservers=[...Wn.tokenObservers,{next:wt,error:Bt,type:nt}],Wn.token&&gr(Wn.token)){const _r=Wn.token;Promise.resolve().then(()=>{wt({token:_r.token}),Ni(st)}).catch(()=>{})}Wn.cachedTokenPromise.then(()=>Ni(st))}(st,"INTERNAL",nt),removeTokenListener:nt=>Nn(st.app,nt)}}(st.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,He.registerVersion)("@firebase/app-check","0.6.4")}();class ji{constructor(){return(0,f.vb)("app-check")}}typeof window<"u"&&window},3692:(wn,dt,L)=>{L.d(dt,{Ot:()=>Te,ZF:()=>It,hX:()=>yt,z6:()=>ke});var f=L(259),_=L(4650),re=L(2122);class Te{constructor(Ue){return Ue}}class ke{constructor(){return(0,f.C6)()}}const xe=new _.OlP("angularfire2._apps"),ze={provide:Te,useFactory:function Ze(Qe){return Qe&&1===Qe.length?Qe[0]:new Te((0,f.Mq)())},deps:[[new _.FiY,xe]]},pe={provide:ke,deps:[[new _.FiY,xe]]};function Me(Qe){return(Ue,lt)=>{const kt=Ue.runOutsideAngular(()=>Qe(lt));return new Te(kt)}}let Ne=(()=>{class Qe{constructor(lt){(0,f.KN)("angularfire",re.q4.full,"core"),(0,f.KN)("angularfire",re.q4.full,"app"),(0,f.KN)("angular",_.q4F.full,lt.toString())}}return Qe.\u0275fac=function(lt){return new(lt||Qe)(_.LFG(_.Lbi))},Qe.\u0275mod=_.oAB({type:Qe}),Qe.\u0275inj=_.cJS({providers:[ze,pe]}),Qe})();function yt(Qe,...Ue){return{ngModule:Ne,providers:[{provide:xe,useFactory:Me(Qe),multi:!0,deps:[_.R0b,_.zs3,re.HU,...Ue]}]}}const It=(0,re.u3)(f.ZF,!0)},1205:(wn,dt,L)=>{L.d(dt,{zQ:()=>Pt,ww:()=>Ht,rT:()=>bt,f7:()=>gn,L6:()=>z,_Q:()=>ct,lh:()=>Ft,Qv:()=>Ye,nw:()=>vn});var f=L(4650),_=L(7579),re=L(9646),Te=L(9751),ke=L(8996),He=L(6451),Ze=L(5363),xe=L(3900),ze=L(4004),pe=L(6063);class Me extends _.x{constructor(jt=1/0,Gt=1/0,Tt=pe.l){super(),this._bufferSize=jt,this._windowTime=Gt,this._timestampProvider=Tt,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=Gt===1/0,this._bufferSize=Math.max(1,jt),this._windowTime=Math.max(1,Gt)}next(jt){const{isStopped:Gt,_buffer:Tt,_infiniteTimeWindow:Ut,_timestampProvider:Et,_windowTime:rn}=this;Gt||(Tt.push(jt),!Ut&&Tt.push(Et.now()+rn)),this._trimBuffer(),super.next(jt)}_subscribe(jt){this._throwIfClosed(),this._trimBuffer();const Gt=this._innerSubscribe(jt),{_infiniteTimeWindow:Tt,_buffer:Ut}=this,Et=Ut.slice();for(let rn=0;rn<Et.length&&!jt.closed;rn+=Tt?1:2)jt.next(Et[rn]);return this._checkFinalizedStatuses(jt),Gt}_trimBuffer(){const{_bufferSize:jt,_timestampProvider:Gt,_buffer:Tt,_infiniteTimeWindow:Ut}=this,Et=(Ut?1:2)*jt;if(jt<1/0&&Et<Tt.length&&Tt.splice(0,Tt.length-Et),!Ut){const rn=Gt.now();let Zt=0;for(let _n=1;_n<Tt.length&&Tt[_n]<=rn;_n+=2)Zt=_n;Zt&&Tt.splice(0,Zt+1)}}}var Ne=L(3099);function yt(Ot,jt,Gt){let Tt,Ut=!1;return Ot&&"object"==typeof Ot?({bufferSize:Tt=1/0,windowTime:jt=1/0,refCount:Ut=!1,scheduler:Gt}=Ot):Tt=Ot??1/0,(0,Ne.B)({connector:()=>new Me(Tt,jt,Gt),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:Ut})}var pt=L(590),Lt=L(576);function an(Ot,jt){return(0,Lt.m)(jt)?(0,xe.w)(()=>Ot,jt):(0,xe.w)(()=>Ot)}var It=L(9468),Mt=L(9300),Ae=L(2122),_t=L(2011),Qe=L(6895),Ue=L(2313),lt=L(9260);const Ye=new f.OlP("angularfire2.auth.use-emulator"),z=new f.OlP("angularfire2.auth.settings"),ct=new f.OlP("angularfire2.auth.tenant-id"),bt=new f.OlP("angularfire2.auth.langugage-code"),Ft=new f.OlP("angularfire2.auth.use-device-language"),gn=new f.OlP("angularfire.auth.persistence"),vn=(Ot,jt,Gt,Tt,Ut,Et,rn,Zt)=>(0,_t.cc)(`${Ot.name}.auth`,"AngularFireAuth",Ot.name,()=>{const _n=jt.runOutsideAngular(()=>Ot.auth());if(Gt&&_n.useEmulator(...Gt),Tt&&(_n.tenantId=Tt),_n.languageCode=Ut,Et&&_n.useDeviceLanguage(),rn)for(const[sn,bn]of Object.entries(rn))_n.settings[sn]=bn;return Zt&&_n.setPersistence(Zt),_n},[Gt,Tt,Ut,Et,rn,Zt]);let Pt=(()=>{class Ot{constructor(Gt,Tt,Ut,Et,rn,Zt,_n,sn,bn,fi,ui,Bn){const Qn=new _.x,oi=(0,re.of)(void 0).pipe((0,Ze.Q)(rn.outsideAngular),(0,xe.w)(()=>Et.runOutsideAngular(()=>Promise.resolve().then(L.bind(L,1848)))),(0,ze.U)(()=>(0,_t.on)(Gt,Et,Tt)),(0,ze.U)(Pi=>vn(Pi,Et,Zt,sn,bn,fi,_n,ui)),yt({bufferSize:1,refCount:!1}));if((0,Qe.PM)(Ut))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,re.of)(null);else{oi.pipe((0,pt.P)()).subscribe();const Cr=oi.pipe((0,xe.w)(zn=>zn.getRedirectResult().then(Mi=>Mi,()=>null)),Ae.iC,yt({bufferSize:1,refCount:!1})),ii=oi.pipe((0,xe.w)(zn=>new Te.y(Mi=>({unsubscribe:Et.runOutsideAngular(()=>zn.onAuthStateChanged(Tn=>Mi.next(Tn),Tn=>Mi.error(Tn),()=>Mi.complete()))})))),Ai=oi.pipe((0,xe.w)(zn=>new Te.y(Mi=>({unsubscribe:Et.runOutsideAngular(()=>zn.onIdTokenChanged(Tn=>Mi.next(Tn),Tn=>Mi.error(Tn),()=>Mi.complete()))}))));this.authState=Cr.pipe(an(ii),(0,It.R)(rn.outsideAngular),(0,Ze.Q)(rn.insideAngular)),this.user=Cr.pipe(an(Ai),(0,It.R)(rn.outsideAngular),(0,Ze.Q)(rn.insideAngular)),this.idToken=this.user.pipe((0,xe.w)(zn=>zn?(0,ke.D)(zn.getIdToken()):(0,re.of)(null))),this.idTokenResult=this.user.pipe((0,xe.w)(zn=>zn?(0,ke.D)(zn.getIdTokenResult()):(0,re.of)(null))),this.credential=(0,He.T)(Cr,Qn,this.authState.pipe((0,Mt.h)(zn=>!zn))).pipe((0,ze.U)(zn=>zn?.user?zn:null),(0,It.R)(rn.outsideAngular),(0,Ze.Q)(rn.insideAngular))}return(0,_t.pX)(this,oi,Et,{spy:{apply:(Pi,Cr,ii)=>{(Pi.startsWith("signIn")||Pi.startsWith("createUser"))&&ii.then(Ai=>Qn.next(Ai))}}})}}return Ot.\u0275fac=function(Gt){return new(Gt||Ot)(f.LFG(_t.Dh),f.LFG(_t.xv,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(Ae.HU),f.LFG(Ye,8),f.LFG(z,8),f.LFG(ct,8),f.LFG(bt,8),f.LFG(Ft,8),f.LFG(gn,8),f.LFG(Ue.nm,8))},Ot.\u0275prov=f.Yz7({token:Ot,factory:Ot.\u0275fac,providedIn:"any"}),Ot})(),Ht=(()=>{class Ot{constructor(){lt.Z.registerVersion("angularfire",Ae.q4.full,"auth-compat")}}return Ot.\u0275fac=function(Gt){return new(Gt||Ot)},Ot.\u0275mod=f.oAB({type:Ot}),Ot.\u0275inj=f.cJS({providers:[Pt]}),Ot})()},5197:(wn,dt,L)=>{L.d(dt,{JS:()=>qd});var f=L(4650),_=L(4986),re=L(9751),Te=L(9646),ke=L(6451),He=L(4004),Ze=L(3099),xe=L(3900),ze=L(5026),pe=L(1884),Me=L(4482),Ne=L(5403),yt=L(8421),pt=L(4671),Lt=L(5032),an=L(3269),Ae=L(2122),_t=L(2011),Ue=(L(1848),L(3942)),lt=L(4859),kt=L(5861),Ye=L(9681),z=L(2090),ct=L(1877);const bt="@firebase/database";let gn="";function vn(m){gn=m}class Pt{constructor(c){this.domStorage_=c,this.prefix_="firebase:"}set(c,u){null==u?this.domStorage_.removeItem(this.prefixedName_(c)):this.domStorage_.setItem(this.prefixedName_(c),(0,z.Wl)(u))}get(c){const u=this.domStorage_.getItem(this.prefixedName_(c));return null==u?null:(0,z.cI)(u)}remove(c){this.domStorage_.removeItem(this.prefixedName_(c))}prefixedName_(c){return this.prefix_+c}toString(){return this.domStorage_.toString()}}class Ht{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(c,u){null==u?delete this.cache_[c]:this.cache_[c]=u}get(c){return(0,z.r3)(this.cache_,c)?this.cache_[c]:null}remove(c){delete this.cache_[c]}}const Ot=function(m){try{if(typeof window<"u"&&typeof window[m]<"u"){const c=window[m];return c.setItem("firebase:sentinel","cache"),c.removeItem("firebase:sentinel"),new Pt(c)}}catch{}return new Ht},jt=Ot("localStorage"),Gt=Ot("sessionStorage"),Tt=new ct.Yd("@firebase/database"),Ut=function(){let m=1;return function(){return m++}}(),Et=function(m){const c=(0,z.dS)(m),u=new z.gQ;u.update(c);const I=u.digest();return z.US.encodeByteArray(I)},rn=function(...m){let c="";for(let u=0;u<m.length;u++){const I=m[u];Array.isArray(I)||I&&"object"==typeof I&&"number"==typeof I.length?c+=rn.apply(null,I):c+="object"==typeof I?(0,z.Wl)(I):I,c+=" "}return c};let Zt=null,_n=!0;const sn=function(m,c){(0,z.hu)(!c||!0===m||!1===m,"Can't turn on custom loggers persistently."),!0===m?(Tt.logLevel=ct.in.VERBOSE,Zt=Tt.log.bind(Tt),c&&Gt.set("logging_enabled",!0)):"function"==typeof m?Zt=m:(Zt=null,Gt.remove("logging_enabled"))},bn=function(...m){if(!0===_n&&(_n=!1,null===Zt&&!0===Gt.get("logging_enabled")&&sn(!0)),Zt){const c=rn.apply(null,m);Zt(c)}},fi=function(m){return function(...c){bn(m,...c)}},ui=function(...m){const c="FIREBASE INTERNAL ERROR: "+rn(...m);Tt.error(c)},Bn=function(...m){const c=`FIREBASE FATAL ERROR: ${rn(...m)}`;throw Tt.error(c),new Error(c)},Qn=function(...m){const c="FIREBASE WARNING: "+rn(...m);Tt.warn(c)},Pi=function(m){return"number"==typeof m&&(m!=m||m===Number.POSITIVE_INFINITY||m===Number.NEGATIVE_INFINITY)},ii="[MIN_NAME]",Ai="[MAX_NAME]",zn=function(m,c){if(m===c)return 0;if(m===ii||c===Ai)return-1;if(c===ii||m===Ai)return 1;{const u=Hi(m),I=Hi(c);return null!==u?null!==I?u-I==0?m.length-c.length:u-I:-1:null!==I?1:m<c?-1:1}},Mi=function(m,c){return m===c?0:m<c?-1:1},Tn=function(m,c){if(c&&m in c)return c[m];throw new Error("Missing required key ("+m+") in object: "+(0,z.Wl)(c))},Ji=function(m){if("object"!=typeof m||null===m)return(0,z.Wl)(m);const c=[];for(const I in m)c.push(I);c.sort();let u="{";for(let I=0;I<c.length;I++)0!==I&&(u+=","),u+=(0,z.Wl)(c[I]),u+=":",u+=Ji(m[c[I]]);return u+="}",u},ri=function(m,c){const u=m.length;if(u<=c)return[m];const I=[];for(let O=0;O<u;O+=c)I.push(m.substring(O,O+c>u?u:O+c));return I};function Gn(m,c){for(const u in m)m.hasOwnProperty(u)&&c(u,m[u])}const Yi=function(m){(0,z.hu)(!Pi(m),"Invalid JSON number");const I=1023;let O,W,ae,Ie,qe;0===m?(W=0,ae=0,O=1/m==-1/0?1:0):(O=m<0,(m=Math.abs(m))>=Math.pow(2,1-I)?(Ie=Math.min(Math.floor(Math.log(m)/Math.LN2),I),W=Ie+I,ae=Math.round(m*Math.pow(2,52-Ie)-Math.pow(2,52))):(W=0,ae=Math.round(m/Math.pow(2,-1074))));const ut=[];for(qe=52;qe;qe-=1)ut.push(ae%2?1:0),ae=Math.floor(ae/2);for(qe=11;qe;qe-=1)ut.push(W%2?1:0),W=Math.floor(W/2);ut.push(O?1:0),ut.reverse();const cn=ut.join("");let fn="";for(qe=0;qe<64;qe+=8){let En=parseInt(cn.substr(qe,8),2).toString(16);1===En.length&&(En="0"+En),fn+=En}return fn.toLowerCase()},On=new RegExp("^-?(0*)\\d{1,10}$"),Hi=function(m){if(On.test(m)){const c=Number(m);if(c>=-2147483648&&c<=2147483647)return c}return null},Vi=function(m){try{m()}catch(c){setTimeout(()=>{throw Qn("Exception was thrown by user callback.",c.stack||""),c},Math.floor(0))}},gr=function(){return("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},er=function(m,c){const u=setTimeout(m,c);return"number"==typeof u&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(u):"object"==typeof u&&u.unref&&u.unref(),u};class Fi{constructor(c,u){this.appName_=c,this.appCheckProvider=u,this.appCheck=u?.getImmediate({optional:!0}),this.appCheck||u?.get().then(I=>this.appCheck=I)}getToken(c){return this.appCheck?this.appCheck.getToken(c):new Promise((u,I)=>{setTimeout(()=>{this.appCheck?this.getToken(c).then(u,I):u(null)},0)})}addTokenChangeListener(c){var u;null===(u=this.appCheckProvider)||void 0===u||u.get().then(I=>I.addTokenListener(c))}notifyForInvalidToken(){Qn(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class $r{constructor(c,u,I){this.appName_=c,this.firebaseOptions_=u,this.authProvider_=I,this.auth_=null,this.auth_=I.getImmediate({optional:!0}),this.auth_||I.onInit(O=>this.auth_=O)}getToken(c){return this.auth_?this.auth_.getToken(c).catch(u=>u&&"auth/token-not-initialized"===u.code?(bn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(u)):new Promise((u,I)=>{setTimeout(()=>{this.auth_?this.getToken(c).then(u,I):u(null)},0)})}addTokenChangeListener(c){this.auth_?this.auth_.addAuthTokenListener(c):this.authProvider_.get().then(u=>u.addAuthTokenListener(c))}removeTokenChangeListener(c){this.authProvider_.get().then(u=>u.removeAuthTokenListener(c))}notifyForInvalidToken(){let c='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';c+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Qn(c)}}let $n=(()=>{class m{constructor(u){this.accessToken=u}getToken(u){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(u){u(this.accessToken)}removeTokenChangeListener(u){}notifyForInvalidToken(){}}return m.OWNER="owner",m})();const de=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Le="websocket",Be="long_polling";class it{constructor(c,u,I,O,W=!1,ae="",Ie=!1,qe=!1){this.secure=u,this.namespace=I,this.webSocketOnly=O,this.nodeAdmin=W,this.persistenceKey=ae,this.includeNamespaceInQueryParams=Ie,this.isUsingEmulator=qe,this._host=c.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=jt.get("host:"+c)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(c){c!==this.internalHost&&(this.internalHost=c,this.isCacheableHost()&&jt.set("host:"+this._host,this.internalHost))}toString(){let c=this.toURLString();return this.persistenceKey&&(c+="<"+this.persistenceKey+">"),c}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function St(m,c,u){let I;if((0,z.hu)("string"==typeof c,"typeof type must == string"),(0,z.hu)("object"==typeof u,"typeof params must == object"),c===Le)I=(m.secure?"wss://":"ws://")+m.internalHost+"/.ws?";else{if(c!==Be)throw new Error("Unknown connection type: "+c);I=(m.secure?"https://":"http://")+m.internalHost+"/.lp?"}(function qt(m){return m.host!==m.internalHost||m.isCustomHost()||m.includeNamespaceInQueryParams})(m)&&(u.ns=m.namespace);const O=[];return Gn(u,(W,ae)=>{O.push(W+"="+ae)}),I+O.join("&")}class Mn{constructor(){this.counters_={}}incrementCounter(c,u=1){(0,z.r3)(this.counters_,c)||(this.counters_[c]=0),this.counters_[c]+=u}get(){return(0,z.p$)(this.counters_)}}const Je={},ot={};function Fe(m){const c=m.toString();return Je[c]||(Je[c]=new Mn),Je[c]}class Yt{constructor(c){this.onMessage_=c,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(c,u){this.closeAfterResponse=c,this.onClose=u,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(c,u){for(this.pendingResponses[c]=u;this.pendingResponses[this.currentResponseNum];){const I=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let O=0;O<I.length;++O)I[O]&&Vi(()=>{this.onMessage_(I[O])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class wr{constructor(c,u,I,O,W,ae,Ie){this.connId=c,this.repoInfo=u,this.applicationId=I,this.appCheckToken=O,this.authToken=W,this.transportSessionId=ae,this.lastSessionId=Ie,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=fi(c),this.stats_=Fe(u),this.urlFn=qe=>(this.appCheckToken&&(qe.ac=this.appCheckToken),St(u,Be,qe))}open(c,u){this.curSegmentNum=0,this.onDisconnect_=u,this.myPacketOrderer=new Yt(c),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(m){if((0,z.Yr)()||"complete"===document.readyState)m();else{let c=!1;const u=function(){document.body?c||(c=!0,m()):setTimeout(u,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",u,!1),window.addEventListener("load",u,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&u()}),window.attachEvent("onload",u))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Vt((...W)=>{const[ae,Ie,qe,ut,cn]=W;if(this.incrementIncomingBytes_(W),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===ae)this.id=Ie,this.password=qe;else{if("close"!==ae)throw new Error("Unrecognized command received: "+ae);Ie?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(Ie,()=>{this.onClosed_()})):this.onClosed_()}},(...W)=>{const[ae,Ie]=W;this.incrementIncomingBytes_(W),this.myPacketOrderer.handleResponse(ae,Ie)},()=>{this.onClosed_()},this.urlFn);const I={start:"t"};I.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(I.cb=this.scriptTagHolder.uniqueCallbackIdentifier),I.v="5",this.transportSessionId&&(I.s=this.transportSessionId),this.lastSessionId&&(I.ls=this.lastSessionId),this.applicationId&&(I.p=this.applicationId),this.appCheckToken&&(I.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&de.test(location.hostname)&&(I.r="f");const O=this.urlFn(I);this.log_("Connecting via long-poll to "+O),this.scriptTagHolder.addTag(O,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){wr.forceAllow_=!0}static forceDisallow(){wr.forceDisallow_=!0}static isAvailable(){return!((0,z.Yr)()||!wr.forceAllow_&&(wr.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(c){const u=(0,z.Wl)(c);this.bytesSent+=u.length,this.stats_.incrementCounter("bytes_sent",u.length);const I=(0,z.h$)(u),O=ri(I,1840);for(let W=0;W<O.length;W++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,O.length,O[W]),this.curSegmentNum++}addDisconnectPingFrame(c,u){if((0,z.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const I={dframe:"t"};I.id=c,I.pw=u,this.myDisconnFrame.src=this.urlFn(I),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(c){const u=(0,z.Wl)(c).length;this.bytesReceived+=u,this.stats_.incrementCounter("bytes_received",u)}}class Vt{constructor(c,u,I,O){if(this.onDisconnect=I,this.urlFn=O,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,z.Yr)())this.commandCB=c,this.onMessageCB=u;else{this.uniqueCallbackIdentifier=Ut(),window["pLPCommand"+this.uniqueCallbackIdentifier]=c,window["pRTLPCB"+this.uniqueCallbackIdentifier]=u,this.myIFrame=Vt.createIFrame_();let W="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(W='<script>document.domain="'+document.domain+'";<\/script>');const ae="<html><body>"+W+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(ae),this.myIFrame.doc.close()}catch(Ie){bn("frame writing exception"),Ie.stack&&bn(Ie.stack),bn(Ie)}}}static createIFrame_(){const c=document.createElement("iframe");if(c.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(c);try{c.contentWindow.document||bn("No IE domain setting required")}catch{const I=document.domain;c.src="javascript:void((function(){document.open();document.domain='"+I+"';document.close();})())"}return c.contentDocument?c.doc=c.contentDocument:c.contentWindow?c.doc=c.contentWindow.document:c.document&&(c.doc=c.document),c}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const c=this.onDisconnect;c&&(this.onDisconnect=null,c())}startLongPoll(c,u){for(this.myID=c,this.myPW=u,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const c={};c.id=this.myID,c.pw=this.myPW,c.ser=this.currentSerial;let u=this.urlFn(c),I="",O=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+I.length<=1870;){const ae=this.pendingSegs.shift();I=I+"&seg"+O+"="+ae.seg+"&ts"+O+"="+ae.ts+"&d"+O+"="+ae.d,O++}return u+=I,this.addLongPollTag_(u,this.currentSerial),!0}return!1}enqueueSegment(c,u,I){this.pendingSegs.push({seg:c,ts:u,d:I}),this.alive&&this.newRequest_()}addLongPollTag_(c,u){this.outstandingRequests.add(u);const I=()=>{this.outstandingRequests.delete(u),this.newRequest_()},O=setTimeout(I,Math.floor(25e3));this.addTag(c,()=>{clearTimeout(O),I()})}addTag(c,u){(0,z.Yr)()?this.doNodeLongPoll(c,u):setTimeout(()=>{try{if(!this.sendNewPolls)return;const I=this.myIFrame.doc.createElement("script");I.type="text/javascript",I.async=!0,I.src=c,I.onload=I.onreadystatechange=function(){const O=I.readyState;(!O||"loaded"===O||"complete"===O)&&(I.onload=I.onreadystatechange=null,I.parentNode&&I.parentNode.removeChild(I),u())},I.onerror=()=>{bn("Long-poll script failed to load: "+c),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(I)}catch{}},Math.floor(1))}}let Ge=null;typeof MozWebSocket<"u"?Ge=MozWebSocket:typeof WebSocket<"u"&&(Ge=WebSocket);let vt=(()=>{class m{constructor(u,I,O,W,ae,Ie,qe){this.connId=u,this.applicationId=O,this.appCheckToken=W,this.authToken=ae,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=fi(this.connId),this.stats_=Fe(I),this.connURL=m.connectionURL_(I,Ie,qe,W,O),this.nodeAdmin=I.nodeAdmin}static connectionURL_(u,I,O,W,ae){const Ie={v:"5"};return!(0,z.Yr)()&&typeof location<"u"&&location.hostname&&de.test(location.hostname)&&(Ie.r="f"),I&&(Ie.s=I),O&&(Ie.ls=O),W&&(Ie.ac=W),ae&&(Ie.p=ae),St(u,Le,Ie)}open(u,I){this.onDisconnect=I,this.onMessage=u,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,jt.set("previous_websocket_failure",!0);try{let O;if((0,z.Yr)()){O={headers:{"User-Agent":`Firebase/5/${gn}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(O.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(O.headers["X-Firebase-AppCheck"]=this.appCheckToken);const ae=process.env,Ie=0===this.connURL.indexOf("wss://")?ae.HTTPS_PROXY||ae.https_proxy:ae.HTTP_PROXY||ae.http_proxy;Ie&&(O.proxy={origin:Ie})}this.mySock=new Ge(this.connURL,[],O)}catch(O){this.log_("Error instantiating WebSocket.");const W=O.message||O.data;return W&&this.log_(W),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=O=>{this.handleIncomingFrame(O)},this.mySock.onerror=O=>{this.log_("WebSocket error.  Closing connection.");const W=O.message||O.data;W&&this.log_(W),this.onClosed_()}}start(){}static forceDisallow(){m.forceDisallow_=!0}static isAvailable(){let u=!1;if(typeof navigator<"u"&&navigator.userAgent){const O=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);O&&O.length>1&&parseFloat(O[1])<4.4&&(u=!0)}return!u&&null!==Ge&&!m.forceDisallow_}static previouslyFailed(){return jt.isInMemoryStorage||!0===jt.get("previous_websocket_failure")}markConnectionHealthy(){jt.remove("previous_websocket_failure")}appendFrame_(u){if(this.frames.push(u),this.frames.length===this.totalFrames){const I=this.frames.join("");this.frames=null;const O=(0,z.cI)(I);this.onMessage(O)}}handleNewFrameCount_(u){this.totalFrames=u,this.frames=[]}extractFrameCount_(u){if((0,z.hu)(null===this.frames,"We already have a frame buffer"),u.length<=6){const I=Number(u);if(!isNaN(I))return this.handleNewFrameCount_(I),null}return this.handleNewFrameCount_(1),u}handleIncomingFrame(u){if(null===this.mySock)return;const I=u.data;if(this.bytesReceived+=I.length,this.stats_.incrementCounter("bytes_received",I.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(I);else{const O=this.extractFrameCount_(I);null!==O&&this.appendFrame_(O)}}send(u){this.resetKeepAlive();const I=(0,z.Wl)(u);this.bytesSent+=I.length,this.stats_.incrementCounter("bytes_sent",I.length);const O=ri(I,16384);O.length>1&&this.sendString_(String(O.length));for(let W=0;W<O.length;W++)this.sendString_(O[W])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(u){try{this.mySock.send(u)}catch(I){this.log_("Exception thrown from WebSocket.send():",I.message||I.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return m.responsesRequiredToBeHealthy=2,m.healthyTimeout=3e4,m})(),Kt=(()=>{class m{constructor(u){this.initTransports_(u)}static get ALL_TRANSPORTS(){return[wr,vt]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(u){const I=vt&&vt.isAvailable();let O=I&&!vt.previouslyFailed();if(u.webSocketOnly&&(I||Qn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),O=!0),O)this.transports_=[vt];else{const W=this.transports_=[];for(const ae of m.ALL_TRANSPORTS)ae&&ae.isAvailable()&&W.push(ae);m.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return m.globalTransportInitialized_=!1,m})();class bs{constructor(c,u,I,O,W,ae,Ie,qe,ut,cn){this.id=c,this.repoInfo_=u,this.applicationId_=I,this.appCheckToken_=O,this.authToken_=W,this.onMessage_=ae,this.onReady_=Ie,this.onDisconnect_=qe,this.onKill_=ut,this.lastSessionId=cn,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=fi("c:"+this.id+":"),this.transportManager_=new Kt(u),this.log_("Connection created"),this.start_()}start_(){const c=this.transportManager_.initialTransport();this.conn_=new c(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=c.responsesRequiredToBeHealthy||0;const u=this.connReceiver_(this.conn_),I=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(u,I)},Math.floor(0));const O=c.healthyTimeout||0;O>0&&(this.healthyTimeout_=er(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(O)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(c){return u=>{c===this.conn_?this.onConnectionLost_(u):c===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(c){return u=>{2!==this.state_&&(c===this.rx_?this.onPrimaryMessageReceived_(u):c===this.secondaryConn_?this.onSecondaryMessageReceived_(u):this.log_("message on old connection"))}}sendRequest(c){this.sendData_({t:"d",d:c})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(c){if("t"in c){const u=c.t;"a"===u?this.upgradeIfSecondaryHealthy_():"r"===u?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===u&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(c){const u=Tn("t",c),I=Tn("d",c);if("c"===u)this.onSecondaryControl_(I);else{if("d"!==u)throw new Error("Unknown protocol layer: "+u);this.pendingDataMessages.push(I)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(c){const u=Tn("t",c),I=Tn("d",c);"c"===u?this.onControl_(I):"d"===u&&this.onDataMessage_(I)}onDataMessage_(c){this.onPrimaryResponse_(),this.onMessage_(c)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(c){const u=Tn("t",c);if("d"in c){const I=c.d;if("h"===u){const O=Object.assign({},I);this.repoInfo_.isUsingEmulator&&(O.h=this.repoInfo_.host),this.onHandshake_(O)}else if("n"===u){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let O=0;O<this.pendingDataMessages.length;++O)this.onDataMessage_(this.pendingDataMessages[O]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===u?this.onConnectionShutdown_(I):"r"===u?this.onReset_(I):"e"===u?ui("Server Error: "+I):"o"===u?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):ui("Unknown control packet command: "+u)}}onHandshake_(c){const u=c.ts,I=c.v,O=c.h;this.sessionId=c.s,this.repoInfo_.host=O,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,u),"5"!==I&&Qn("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const c=this.transportManager_.upgradeTransport();c&&this.startUpgrade_(c)}startUpgrade_(c){this.secondaryConn_=new c(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=c.responsesRequiredToBeHealthy||0;const u=this.connReceiver_(this.secondaryConn_),I=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(u,I),er(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(c){this.log_("Reset packet received.  New host: "+c),this.repoInfo_.host=c,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(c,u){this.log_("Realtime connection established."),this.conn_=c,this.state_=1,this.onReady_&&(this.onReady_(u,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):er(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const c=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===c||this.rx_===c)&&this.close()}onConnectionLost_(c){this.conn_=null,c||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(jt.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(c){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(c),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(c){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(c)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class Vr{put(c,u,I,O){}merge(c,u,I,O){}refreshAuthToken(c){}refreshAppCheckToken(c){}onDisconnectPut(c,u,I){}onDisconnectMerge(c,u,I){}onDisconnectCancel(c,u){}reportStats(c){}}class Qr{constructor(c){this.allowedEvents_=c,this.listeners_={},(0,z.hu)(Array.isArray(c)&&c.length>0,"Requires a non-empty array")}trigger(c,...u){if(Array.isArray(this.listeners_[c])){const I=[...this.listeners_[c]];for(let O=0;O<I.length;O++)I[O].callback.apply(I[O].context,u)}}on(c,u,I){this.validateEventType_(c),this.listeners_[c]=this.listeners_[c]||[],this.listeners_[c].push({callback:u,context:I});const O=this.getInitialEvent(c);O&&u.apply(I,O)}off(c,u,I){this.validateEventType_(c);const O=this.listeners_[c]||[];for(let W=0;W<O.length;W++)if(O[W].callback===u&&(!I||I===O[W].context))return void O.splice(W,1)}validateEventType_(c){(0,z.hu)(this.allowedEvents_.find(u=>u===c),"Unknown event: "+c)}}class ao extends Qr{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,z.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new ao}getInitialEvent(c){return(0,z.hu)("online"===c,"Unknown event type: "+c),[this.online_]}currentlyOnline(){return this.online_}}const Ci=32,Ls=768;class lr{constructor(c,u){if(void 0===u){this.pieces_=c.split("/");let I=0;for(let O=0;O<this.pieces_.length;O++)this.pieces_[O].length>0&&(this.pieces_[I]=this.pieces_[O],I++);this.pieces_.length=I,this.pieceNum_=0}else this.pieces_=c,this.pieceNum_=u}toString(){let c="";for(let u=this.pieceNum_;u<this.pieces_.length;u++)""!==this.pieces_[u]&&(c+="/"+this.pieces_[u]);return c||"/"}}function or(){return new lr("")}function _i(m){return m.pieceNum_>=m.pieces_.length?null:m.pieces_[m.pieceNum_]}function wi(m){return m.pieces_.length-m.pieceNum_}function Xn(m){let c=m.pieceNum_;return c<m.pieces_.length&&c++,new lr(m.pieces_,c)}function cr(m){return m.pieceNum_<m.pieces_.length?m.pieces_[m.pieces_.length-1]:null}function Li(m,c=0){return m.pieces_.slice(m.pieceNum_+c)}function ar(m){if(m.pieceNum_>=m.pieces_.length)return null;const c=[];for(let u=m.pieceNum_;u<m.pieces_.length-1;u++)c.push(m.pieces_[u]);return new lr(c,0)}function vr(m,c){const u=[];for(let I=m.pieceNum_;I<m.pieces_.length;I++)u.push(m.pieces_[I]);if(c instanceof lr)for(let I=c.pieceNum_;I<c.pieces_.length;I++)u.push(c.pieces_[I]);else{const I=c.split("/");for(let O=0;O<I.length;O++)I[O].length>0&&u.push(I[O])}return new lr(u,0)}function Ti(m){return m.pieceNum_>=m.pieces_.length}function nr(m,c){const u=_i(m),I=_i(c);if(null===u)return c;if(u===I)return nr(Xn(m),Xn(c));throw new Error("INTERNAL ERROR: innerPath ("+c+") is not within outerPath ("+m+")")}function Or(m,c){const u=Li(m,0),I=Li(c,0);for(let O=0;O<u.length&&O<I.length;O++){const W=zn(u[O],I[O]);if(0!==W)return W}return u.length===I.length?0:u.length<I.length?-1:1}function Us(m,c){if(wi(m)!==wi(c))return!1;for(let u=m.pieceNum_,I=c.pieceNum_;u<=m.pieces_.length;u++,I++)if(m.pieces_[u]!==c.pieces_[I])return!1;return!0}function as(m,c){let u=m.pieceNum_,I=c.pieceNum_;if(wi(m)>wi(c))return!1;for(;u<m.pieces_.length;){if(m.pieces_[u]!==c.pieces_[I])return!1;++u,++I}return!0}class zi{constructor(c,u){this.errorPrefix_=u,this.parts_=Li(c,0),this.byteLength_=Math.max(1,this.parts_.length);for(let I=0;I<this.parts_.length;I++)this.byteLength_+=(0,z.ug)(this.parts_[I]);Ao(this)}}function Ao(m){if(m.byteLength_>Ls)throw new Error(m.errorPrefix_+"has a key path longer than "+Ls+" bytes ("+m.byteLength_+").");if(m.parts_.length>Ci)throw new Error(m.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Ci+") or object contains a cycle "+bo(m))}function bo(m){return 0===m.parts_.length?"":"in property '"+m.parts_.join(".")+"'"}class qo extends Qr{constructor(){let c,u;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(u="visibilitychange",c="hidden"):typeof document.mozHidden<"u"?(u="mozvisibilitychange",c="mozHidden"):typeof document.msHidden<"u"?(u="msvisibilitychange",c="msHidden"):typeof document.webkitHidden<"u"&&(u="webkitvisibilitychange",c="webkitHidden")),this.visible_=!0,u&&document.addEventListener(u,()=>{const I=!document[c];I!==this.visible_&&(this.visible_=I,this.trigger("visible",I))},!1)}static getInstance(){return new qo}getInitialEvent(c){return(0,z.hu)("visible"===c,"Unknown event type: "+c),[this.visible_]}}const Mo=1e3;let gs,kr=(()=>{class m extends Vr{constructor(u,I,O,W,ae,Ie,qe,ut){if(super(),this.repoInfo_=u,this.applicationId_=I,this.onDataUpdate_=O,this.onConnectStatus_=W,this.onServerInfoUpdate_=ae,this.authTokenProvider_=Ie,this.appCheckTokenProvider_=qe,this.authOverride_=ut,this.id=m.nextPersistentConnectionId_++,this.log_=fi("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Mo,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,ut&&!(0,z.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");qo.getInstance().on("visible",this.onVisible_,this),-1===u.host.indexOf("fblocal")&&ao.getInstance().on("online",this.onOnline_,this)}sendRequest(u,I,O){const W=++this.requestNumber_,ae={r:W,a:u,b:I};this.log_((0,z.Wl)(ae)),(0,z.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(ae),O&&(this.requestCBHash_[W]=O)}get(u){this.initConnection_();const I=new z.BH,W={action:"g",request:{p:u._path.toString(),q:u._queryObject},onComplete:Ie=>{const qe=Ie.d;"ok"===Ie.s?I.resolve(qe):I.reject(qe)}};return this.outstandingGets_.push(W),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),I.promise}listen(u,I,O,W){this.initConnection_();const ae=u._queryIdentifier,Ie=u._path.toString();this.log_("Listen called for "+Ie+" "+ae),this.listens.has(Ie)||this.listens.set(Ie,new Map),(0,z.hu)(u._queryParams.isDefault()||!u._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,z.hu)(!this.listens.get(Ie).has(ae),"listen() called twice for same path/queryId.");const qe={onComplete:W,hashFn:I,query:u,tag:O};this.listens.get(Ie).set(ae,qe),this.connected_&&this.sendListen_(qe)}sendGet_(u){const I=this.outstandingGets_[u];this.sendRequest("g",I.request,O=>{delete this.outstandingGets_[u],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),I.onComplete&&I.onComplete(O)})}sendListen_(u){const I=u.query,O=I._path.toString(),W=I._queryIdentifier;this.log_("Listen on "+O+" for "+W);const ae={p:O};u.tag&&(ae.q=I._queryObject,ae.t=u.tag),ae.h=u.hashFn(),this.sendRequest("q",ae,qe=>{const ut=qe.d,cn=qe.s;m.warnOnListenWarnings_(ut,I),(this.listens.get(O)&&this.listens.get(O).get(W))===u&&(this.log_("listen response",qe),"ok"!==cn&&this.removeListen_(O,W),u.onComplete&&u.onComplete(cn,ut))})}static warnOnListenWarnings_(u,I){if(u&&"object"==typeof u&&(0,z.r3)(u,"w")){const O=(0,z.DV)(u,"w");if(Array.isArray(O)&&~O.indexOf("no_index")){const W='".indexOn": "'+I._queryParams.getIndex().toString()+'"',ae=I._path.toString();Qn(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${W} at ${ae} to your security rules for better performance.`)}}}refreshAuthToken(u){this.authToken_=u,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(u)}reduceReconnectDelayIfAdminCredential_(u){(u&&40===u.length||(0,z.GJ)(u))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(u){this.appCheckToken_=u,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const u=this.authToken_,I=(0,z.w9)(u)?"auth":"gauth",O={cred:u};null===this.authOverride_?O.noauth=!0:"object"==typeof this.authOverride_&&(O.authvar=this.authOverride_),this.sendRequest(I,O,W=>{const ae=W.s,Ie=W.d||"error";this.authToken_===u&&("ok"===ae?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(ae,Ie))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},u=>{const I=u.s,O=u.d||"error";"ok"===I?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(I,O)})}unlisten(u,I){const O=u._path.toString(),W=u._queryIdentifier;this.log_("Unlisten called for "+O+" "+W),(0,z.hu)(u._queryParams.isDefault()||!u._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(O,W)&&this.connected_&&this.sendUnlisten_(O,W,u._queryObject,I)}sendUnlisten_(u,I,O,W){this.log_("Unlisten on "+u+" for "+I);const ae={p:u};W&&(ae.q=O,ae.t=W),this.sendRequest("n",ae)}onDisconnectPut(u,I,O){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",u,I,O):this.onDisconnectRequestQueue_.push({pathString:u,action:"o",data:I,onComplete:O})}onDisconnectMerge(u,I,O){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",u,I,O):this.onDisconnectRequestQueue_.push({pathString:u,action:"om",data:I,onComplete:O})}onDisconnectCancel(u,I){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",u,null,I):this.onDisconnectRequestQueue_.push({pathString:u,action:"oc",data:null,onComplete:I})}sendOnDisconnect_(u,I,O,W){const ae={p:I,d:O};this.log_("onDisconnect "+u,ae),this.sendRequest(u,ae,Ie=>{W&&setTimeout(()=>{W(Ie.s,Ie.d)},Math.floor(0))})}put(u,I,O,W){this.putInternal("p",u,I,O,W)}merge(u,I,O,W){this.putInternal("m",u,I,O,W)}putInternal(u,I,O,W,ae){this.initConnection_();const Ie={p:I,d:O};void 0!==ae&&(Ie.h=ae),this.outstandingPuts_.push({action:u,request:Ie,onComplete:W}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+I)}sendPut_(u){const I=this.outstandingPuts_[u].action,O=this.outstandingPuts_[u].request,W=this.outstandingPuts_[u].onComplete;this.outstandingPuts_[u].queued=this.connected_,this.sendRequest(I,O,ae=>{this.log_(I+" response",ae),delete this.outstandingPuts_[u],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),W&&W(ae.s,ae.d)})}reportStats(u){if(this.connected_){const I={c:u};this.log_("reportStats",I),this.sendRequest("s",I,O=>{"ok"!==O.s&&this.log_("reportStats","Error sending stats: "+O.d)})}}onDataMessage_(u){if("r"in u){this.log_("from server: "+(0,z.Wl)(u));const I=u.r,O=this.requestCBHash_[I];O&&(delete this.requestCBHash_[I],O(u.b))}else{if("error"in u)throw"A server-side error has occurred: "+u.error;"a"in u&&this.onDataPush_(u.a,u.b)}}onDataPush_(u,I){this.log_("handleServerMessage",u,I),"d"===u?this.onDataUpdate_(I.p,I.d,!1,I.t):"m"===u?this.onDataUpdate_(I.p,I.d,!0,I.t):"c"===u?this.onListenRevoked_(I.p,I.q):"ac"===u?this.onAuthRevoked_(I.s,I.d):"apc"===u?this.onAppCheckRevoked_(I.s,I.d):"sd"===u?this.onSecurityDebugPacket_(I):ui("Unrecognized action received from server: "+(0,z.Wl)(u)+"\nAre you using the latest client?")}onReady_(u,I){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(u),this.lastSessionId=I,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(u){(0,z.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(u))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(u){u&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Mo,this.realtime_||this.scheduleConnect_(0)),this.visible_=u}onOnline_(u){u?(this.log_("Browser went online."),this.reconnectDelay_=Mo,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Mo),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const u=(new Date).getTime()-this.lastConnectionAttemptTime_;let I=Math.max(0,this.reconnectDelay_-u);I=Math.random()*I,this.log_("Trying to reconnect in "+I+"ms"),this.scheduleConnect_(I),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var u=this;return(0,kt.Z)(function*(){if(u.shouldReconnect_()){u.log_("Making a connection attempt"),u.lastConnectionAttemptTime_=(new Date).getTime(),u.lastConnectionEstablishedTime_=null;const I=u.onDataMessage_.bind(u),O=u.onReady_.bind(u),W=u.onRealtimeDisconnect_.bind(u),ae=u.id+":"+m.nextConnectionId_++,Ie=u.lastSessionId;let qe=!1,ut=null;const cn=function(){ut?ut.close():(qe=!0,W())};u.realtime_={close:cn,sendRequest:function(hi){(0,z.hu)(ut,"sendRequest call when we're not connected not allowed."),ut.sendRequest(hi)}};const En=u.forceTokenRefresh_;u.forceTokenRefresh_=!1;try{const[hi,$i]=yield Promise.all([u.authTokenProvider_.getToken(En),u.appCheckTokenProvider_.getToken(En)]);qe?bn("getToken() completed but was canceled"):(bn("getToken() completed. Creating connection."),u.authToken_=hi&&hi.accessToken,u.appCheckToken_=$i&&$i.token,ut=new bs(ae,u.repoInfo_,u.applicationId_,u.appCheckToken_,u.authToken_,I,O,W,qr=>{Qn(qr+" ("+u.repoInfo_.toString()+")"),u.interrupt("server_kill")},Ie))}catch(hi){u.log_("Failed to get token: "+hi),qe||(u.repoInfo_.nodeAdmin&&Qn(hi),cn())}}})()}interrupt(u){bn("Interrupting connection for reason: "+u),this.interruptReasons_[u]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(u){bn("Resuming connection for reason: "+u),delete this.interruptReasons_[u],(0,z.xb)(this.interruptReasons_)&&(this.reconnectDelay_=Mo,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(u){const I=u-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:I})}cancelSentTransactions_(){for(let u=0;u<this.outstandingPuts_.length;u++){const I=this.outstandingPuts_[u];I&&"h"in I.request&&I.queued&&(I.onComplete&&I.onComplete("disconnect"),delete this.outstandingPuts_[u],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(u,I){let O;O=I?I.map(ae=>Ji(ae)).join("$"):"default";const W=this.removeListen_(u,O);W&&W.onComplete&&W.onComplete("permission_denied")}removeListen_(u,I){const O=new lr(u).toString();let W;if(this.listens.has(O)){const ae=this.listens.get(O);W=ae.get(I),ae.delete(I),0===ae.size&&this.listens.delete(O)}else W=void 0;return W}onAuthRevoked_(u,I){bn("Auth token revoked: "+u+"/"+I),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===u||"permission_denied"===u)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(u,I){bn("App check token revoked: "+u+"/"+I),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===u||"permission_denied"===u)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(u){this.securityDebugCallback_?this.securityDebugCallback_(u):"msg"in u&&console.log("FIREBASE: "+u.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const u of this.listens.values())for(const I of u.values())this.sendListen_(I);for(let u=0;u<this.outstandingPuts_.length;u++)this.outstandingPuts_[u]&&this.sendPut_(u);for(;this.onDisconnectRequestQueue_.length;){const u=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(u.action,u.pathString,u.data,u.onComplete)}for(let u=0;u<this.outstandingGets_.length;u++)this.outstandingGets_[u]&&this.sendGet_(u)}sendConnectStats_(){const u={};let I="js";(0,z.Yr)()&&(I=this.repoInfo_.nodeAdmin?"admin_node":"node"),u["sdk."+I+"."+gn.replace(/\./g,"-")]=1,(0,z.uI)()?u["framework.cordova"]=1:(0,z.b$)()&&(u["framework.reactnative"]=1),this.reportStats(u)}shouldReconnect_(){const u=ao.getInstance().currentlyOnline();return(0,z.xb)(this.interruptReasons_)&&u}}return m.nextPersistentConnectionId_=0,m.nextConnectionId_=0,m})();class ir{constructor(c,u){this.name=c,this.node=u}static Wrap(c,u){return new ir(c,u)}}class Rs{getCompare(){return this.compare.bind(this)}indexedValueChanged(c,u){const I=new ir(ii,c),O=new ir(ii,u);return 0!==this.compare(I,O)}minPost(){return ir.MIN}}class Js extends Rs{static get __EMPTY_NODE(){return gs}static set __EMPTY_NODE(c){gs=c}compare(c,u){return zn(c.name,u.name)}isDefinedOn(c){throw(0,z.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(c,u){return!1}minPost(){return ir.MIN}maxPost(){return new ir(Ai,gs)}makePost(c,u){return(0,z.hu)("string"==typeof c,"KeyIndex indexValue must always be a string."),new ir(c,gs)}toString(){return".key"}}const Bs=new Js;class Hs{constructor(c,u,I,O,W=null){this.isReverse_=O,this.resultGenerator_=W,this.nodeStack_=[];let ae=1;for(;!c.isEmpty();)if(ae=u?I(c.key,u):1,O&&(ae*=-1),ae<0)c=this.isReverse_?c.left:c.right;else{if(0===ae){this.nodeStack_.push(c);break}this.nodeStack_.push(c),c=this.isReverse_?c.right:c.left}}getNext(){if(0===this.nodeStack_.length)return null;let u,c=this.nodeStack_.pop();if(u=this.resultGenerator_?this.resultGenerator_(c.key,c.value):{key:c.key,value:c.value},this.isReverse_)for(c=c.left;!c.isEmpty();)this.nodeStack_.push(c),c=c.right;else for(c=c.right;!c.isEmpty();)this.nodeStack_.push(c),c=c.left;return u}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const c=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(c.key,c.value):{key:c.key,value:c.value}}}let Eo,Ks=(()=>{class m{constructor(u,I,O,W,ae){this.key=u,this.value=I,this.color=O??m.RED,this.left=W??Zr.EMPTY_NODE,this.right=ae??Zr.EMPTY_NODE}copy(u,I,O,W,ae){return new m(u??this.key,I??this.value,O??this.color,W??this.left,ae??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(u){return this.left.inorderTraversal(u)||!!u(this.key,this.value)||this.right.inorderTraversal(u)}reverseTraversal(u){return this.right.reverseTraversal(u)||u(this.key,this.value)||this.left.reverseTraversal(u)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(u,I,O){let W=this;const ae=O(u,W.key);return W=ae<0?W.copy(null,null,null,W.left.insert(u,I,O),null):0===ae?W.copy(null,I,null,null,null):W.copy(null,null,null,null,W.right.insert(u,I,O)),W.fixUp_()}removeMin_(){if(this.left.isEmpty())return Zr.EMPTY_NODE;let u=this;return!u.left.isRed_()&&!u.left.left.isRed_()&&(u=u.moveRedLeft_()),u=u.copy(null,null,null,u.left.removeMin_(),null),u.fixUp_()}remove(u,I){let O,W;if(O=this,I(u,O.key)<0)!O.left.isEmpty()&&!O.left.isRed_()&&!O.left.left.isRed_()&&(O=O.moveRedLeft_()),O=O.copy(null,null,null,O.left.remove(u,I),null);else{if(O.left.isRed_()&&(O=O.rotateRight_()),!O.right.isEmpty()&&!O.right.isRed_()&&!O.right.left.isRed_()&&(O=O.moveRedRight_()),0===I(u,O.key)){if(O.right.isEmpty())return Zr.EMPTY_NODE;W=O.right.min_(),O=O.copy(W.key,W.value,null,null,O.right.removeMin_())}O=O.copy(null,null,null,null,O.right.remove(u,I))}return O.fixUp_()}isRed_(){return this.color}fixUp_(){let u=this;return u.right.isRed_()&&!u.left.isRed_()&&(u=u.rotateLeft_()),u.left.isRed_()&&u.left.left.isRed_()&&(u=u.rotateRight_()),u.left.isRed_()&&u.right.isRed_()&&(u=u.colorFlip_()),u}moveRedLeft_(){let u=this.colorFlip_();return u.right.left.isRed_()&&(u=u.copy(null,null,null,null,u.right.rotateRight_()),u=u.rotateLeft_(),u=u.colorFlip_()),u}moveRedRight_(){let u=this.colorFlip_();return u.left.left.isRed_()&&(u=u.rotateRight_(),u=u.colorFlip_()),u}rotateLeft_(){const u=this.copy(null,null,m.RED,null,this.right.left);return this.right.copy(null,null,this.color,u,null)}rotateRight_(){const u=this.copy(null,null,m.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,u)}colorFlip_(){const u=this.left.copy(null,null,!this.left.color,null,null),I=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,u,I)}checkMaxDepth_(){const u=this.check_();return Math.pow(2,u)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const u=this.left.check_();if(u!==this.right.check_())throw new Error("Black depths differ");return u+(this.isRed_()?0:1)}}return m.RED=!0,m.BLACK=!1,m})();class Zr{constructor(c,u=Zr.EMPTY_NODE){this.comparator_=c,this.root_=u}insert(c,u){return new Zr(this.comparator_,this.root_.insert(c,u,this.comparator_).copy(null,null,Ks.BLACK,null,null))}remove(c){return new Zr(this.comparator_,this.root_.remove(c,this.comparator_).copy(null,null,Ks.BLACK,null,null))}get(c){let u,I=this.root_;for(;!I.isEmpty();){if(u=this.comparator_(c,I.key),0===u)return I.value;u<0?I=I.left:u>0&&(I=I.right)}return null}getPredecessorKey(c){let u,I=this.root_,O=null;for(;!I.isEmpty();){if(u=this.comparator_(c,I.key),0===u){if(I.left.isEmpty())return O?O.key:null;for(I=I.left;!I.right.isEmpty();)I=I.right;return I.key}u<0?I=I.left:u>0&&(O=I,I=I.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(c){return this.root_.inorderTraversal(c)}reverseTraversal(c){return this.root_.reverseTraversal(c)}getIterator(c){return new Hs(this.root_,null,this.comparator_,!1,c)}getIteratorFrom(c,u){return new Hs(this.root_,c,this.comparator_,!1,u)}getReverseIteratorFrom(c,u){return new Hs(this.root_,c,this.comparator_,!0,u)}getReverseIterator(c){return new Hs(this.root_,null,this.comparator_,!0,c)}}function eo(m,c){return zn(m.name,c.name)}function co(m,c){return zn(m,c)}Zr.EMPTY_NODE=new class lo{copy(c,u,I,O,W){return this}insert(c,u,I){return new Ks(c,u,null)}remove(c,u){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(c){return!1}reverseTraversal(c){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const go=function(m){return"number"==typeof m?"number:"+Yi(m):"string:"+m},uo=function(m){if(m.isLeafNode()){const c=m.val();(0,z.hu)("string"==typeof c||"number"==typeof c||"object"==typeof c&&(0,z.r3)(c,".sv"),"Priority must be a string or number.")}else(0,z.hu)(m===Eo||m.isEmpty(),"priority of unexpected type.");(0,z.hu)(m===Eo||m.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let Ps,ho,Kr,Xi=(()=>{class m{constructor(u,I=m.__childrenNodeConstructor.EMPTY_NODE){this.value_=u,this.priorityNode_=I,this.lazyHash_=null,(0,z.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),uo(this.priorityNode_)}static set __childrenNodeConstructor(u){Ps=u}static get __childrenNodeConstructor(){return Ps}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(u){return new m(this.value_,u)}getImmediateChild(u){return".priority"===u?this.priorityNode_:m.__childrenNodeConstructor.EMPTY_NODE}getChild(u){return Ti(u)?this:".priority"===_i(u)?this.priorityNode_:m.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(u,I){return null}updateImmediateChild(u,I){return".priority"===u?this.updatePriority(I):I.isEmpty()&&".priority"!==u?this:m.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(u,I).updatePriority(this.priorityNode_)}updateChild(u,I){const O=_i(u);return null===O?I:I.isEmpty()&&".priority"!==O?this:((0,z.hu)(".priority"!==O||1===wi(u),".priority must be the last token in a path"),this.updateImmediateChild(O,m.__childrenNodeConstructor.EMPTY_NODE.updateChild(Xn(u),I)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(u,I){return!1}val(u){return u&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let u="";this.priorityNode_.isEmpty()||(u+="priority:"+go(this.priorityNode_.val())+":");const I=typeof this.value_;u+=I+":",u+="number"===I?Yi(this.value_):this.value_,this.lazyHash_=Et(u)}return this.lazyHash_}getValue(){return this.value_}compareTo(u){return u===m.__childrenNodeConstructor.EMPTY_NODE?1:u instanceof m.__childrenNodeConstructor?-1:((0,z.hu)(u.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(u))}compareToLeafNode_(u){const I=typeof u.value_,O=typeof this.value_,W=m.VALUE_TYPE_ORDER.indexOf(I),ae=m.VALUE_TYPE_ORDER.indexOf(O);return(0,z.hu)(W>=0,"Unknown leaf type: "+I),(0,z.hu)(ae>=0,"Unknown leaf type: "+O),W===ae?"object"===O?0:this.value_<u.value_?-1:this.value_===u.value_?0:1:ae-W}withIndex(){return this}isIndexed(){return!0}equals(u){return u===this||!!u.isLeafNode()&&(this.value_===u.value_&&this.priorityNode_.equals(u.priorityNode_))}}return m.VALUE_TYPE_ORDER=["object","boolean","number","string"],m})();const Bi=new class Ts extends Rs{compare(c,u){const I=c.node.getPriority(),O=u.node.getPriority(),W=I.compareTo(O);return 0===W?zn(c.name,u.name):W}isDefinedOn(c){return!c.getPriority().isEmpty()}indexedValueChanged(c,u){return!c.getPriority().equals(u.getPriority())}minPost(){return ir.MIN}maxPost(){return new ir(Ai,new Xi("[PRIORITY-POST]",Kr))}makePost(c,u){const I=ho(c);return new ir(u,new Xi("[PRIORITY-POST]",I))}toString(){return".priority"}},Bo=Math.log(2);class Mr{constructor(c){this.count=parseInt(Math.log(c+1)/Bo,10),this.current_=this.count-1;const O=(W=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=c+1&O}nextBitIsOne(){const c=!(this.bits_&1<<this.current_);return this.current_--,c}}const Es=function(m,c,u,I){m.sort(c);const O=function(qe,ut){const cn=ut-qe;let fn,En;if(0===cn)return null;if(1===cn)return fn=m[qe],En=u?u(fn):fn,new Ks(En,fn.node,Ks.BLACK,null,null);{const hi=parseInt(cn/2,10)+qe,$i=O(qe,hi),qr=O(hi+1,ut);return fn=m[hi],En=u?u(fn):fn,new Ks(En,fn.node,Ks.BLACK,$i,qr)}},Ie=function(qe){let ut=null,cn=null,fn=m.length;const En=function($i,qr){const Sa=fn-$i,wc=fn;fn-=$i;const Ll=O(Sa+1,wc),id=m[Sa],rd=u?u(id):id;hi(new Ks(rd,id.node,qr,null,Ll))},hi=function($i){ut?(ut.left=$i,ut=$i):(cn=$i,ut=$i)};for(let $i=0;$i<qe.count;++$i){const qr=qe.nextBitIsOne(),Sa=Math.pow(2,qe.count-($i+1));qr?En(Sa,Ks.BLACK):(En(Sa,Ks.BLACK),En(Sa,Ks.RED))}return cn}(new Mr(m.length));return new Zr(I||c,Ie)};let Yr;const qs={};class Jr{constructor(c,u){this.indexes_=c,this.indexSet_=u}static get Default(){return(0,z.hu)(qs&&Bi,"ChildrenNode.ts has not been loaded"),Yr=Yr||new Jr({".priority":qs},{".priority":Bi}),Yr}get(c){const u=(0,z.DV)(this.indexes_,c);if(!u)throw new Error("No index defined for "+c);return u instanceof Zr?u:null}hasIndex(c){return(0,z.r3)(this.indexSet_,c.toString())}addIndex(c,u){(0,z.hu)(c!==Bs,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const I=[];let O=!1;const W=u.getIterator(ir.Wrap);let Ie,ae=W.getNext();for(;ae;)O=O||c.isDefinedOn(ae.node),I.push(ae),ae=W.getNext();Ie=O?Es(I,c.getCompare()):qs;const qe=c.toString(),ut=Object.assign({},this.indexSet_);ut[qe]=c;const cn=Object.assign({},this.indexes_);return cn[qe]=Ie,new Jr(cn,ut)}addToIndexes(c,u){const I=(0,z.UI)(this.indexes_,(O,W)=>{const ae=(0,z.DV)(this.indexSet_,W);if((0,z.hu)(ae,"Missing index implementation for "+W),O===qs){if(ae.isDefinedOn(c.node)){const Ie=[],qe=u.getIterator(ir.Wrap);let ut=qe.getNext();for(;ut;)ut.name!==c.name&&Ie.push(ut),ut=qe.getNext();return Ie.push(c),Es(Ie,ae.getCompare())}return qs}{const Ie=u.get(c.name);let qe=O;return Ie&&(qe=qe.remove(new ir(c.name,Ie))),qe.insert(c,c.node)}});return new Jr(I,this.indexSet_)}removeFromIndexes(c,u){const I=(0,z.UI)(this.indexes_,O=>{if(O===qs)return O;{const W=u.get(c.name);return W?O.remove(new ir(c.name,W)):O}});return new Jr(I,this.indexSet_)}}let Io,ai=(()=>{class m{constructor(u,I,O){this.children_=u,this.priorityNode_=I,this.indexMap_=O,this.lazyHash_=null,this.priorityNode_&&uo(this.priorityNode_),this.children_.isEmpty()&&(0,z.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Io||(Io=new m(new Zr(co),null,Jr.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Io}updatePriority(u){return this.children_.isEmpty()?this:new m(this.children_,u,this.indexMap_)}getImmediateChild(u){if(".priority"===u)return this.getPriority();{const I=this.children_.get(u);return null===I?Io:I}}getChild(u){const I=_i(u);return null===I?this:this.getImmediateChild(I).getChild(Xn(u))}hasChild(u){return null!==this.children_.get(u)}updateImmediateChild(u,I){if((0,z.hu)(I,"We should always be passing snapshot nodes"),".priority"===u)return this.updatePriority(I);{const O=new ir(u,I);let W,ae;I.isEmpty()?(W=this.children_.remove(u),ae=this.indexMap_.removeFromIndexes(O,this.children_)):(W=this.children_.insert(u,I),ae=this.indexMap_.addToIndexes(O,this.children_));const Ie=W.isEmpty()?Io:this.priorityNode_;return new m(W,Ie,ae)}}updateChild(u,I){const O=_i(u);if(null===O)return I;{(0,z.hu)(".priority"!==_i(u)||1===wi(u),".priority must be the last token in a path");const W=this.getImmediateChild(O).updateChild(Xn(u),I);return this.updateImmediateChild(O,W)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(u){if(this.isEmpty())return null;const I={};let O=0,W=0,ae=!0;if(this.forEachChild(Bi,(Ie,qe)=>{I[Ie]=qe.val(u),O++,ae&&m.INTEGER_REGEXP_.test(Ie)?W=Math.max(W,Number(Ie)):ae=!1}),!u&&ae&&W<2*O){const Ie=[];for(const qe in I)Ie[qe]=I[qe];return Ie}return u&&!this.getPriority().isEmpty()&&(I[".priority"]=this.getPriority().val()),I}hash(){if(null===this.lazyHash_){let u="";this.getPriority().isEmpty()||(u+="priority:"+go(this.getPriority().val())+":"),this.forEachChild(Bi,(I,O)=>{const W=O.hash();""!==W&&(u+=":"+I+":"+W)}),this.lazyHash_=""===u?"":Et(u)}return this.lazyHash_}getPredecessorChildName(u,I,O){const W=this.resolveIndex_(O);if(W){const ae=W.getPredecessorKey(new ir(u,I));return ae?ae.name:null}return this.children_.getPredecessorKey(u)}getFirstChildName(u){const I=this.resolveIndex_(u);if(I){const O=I.minKey();return O&&O.name}return this.children_.minKey()}getFirstChild(u){const I=this.getFirstChildName(u);return I?new ir(I,this.children_.get(I)):null}getLastChildName(u){const I=this.resolveIndex_(u);if(I){const O=I.maxKey();return O&&O.name}return this.children_.maxKey()}getLastChild(u){const I=this.getLastChildName(u);return I?new ir(I,this.children_.get(I)):null}forEachChild(u,I){const O=this.resolveIndex_(u);return O?O.inorderTraversal(W=>I(W.name,W.node)):this.children_.inorderTraversal(I)}getIterator(u){return this.getIteratorFrom(u.minPost(),u)}getIteratorFrom(u,I){const O=this.resolveIndex_(I);if(O)return O.getIteratorFrom(u,W=>W);{const W=this.children_.getIteratorFrom(u.name,ir.Wrap);let ae=W.peek();for(;null!=ae&&I.compare(ae,u)<0;)W.getNext(),ae=W.peek();return W}}getReverseIterator(u){return this.getReverseIteratorFrom(u.maxPost(),u)}getReverseIteratorFrom(u,I){const O=this.resolveIndex_(I);if(O)return O.getReverseIteratorFrom(u,W=>W);{const W=this.children_.getReverseIteratorFrom(u.name,ir.Wrap);let ae=W.peek();for(;null!=ae&&I.compare(ae,u)>0;)W.getNext(),ae=W.peek();return W}}compareTo(u){return this.isEmpty()?u.isEmpty()?0:-1:u.isLeafNode()||u.isEmpty()?1:u===_s?-1:0}withIndex(u){if(u===Bs||this.indexMap_.hasIndex(u))return this;{const I=this.indexMap_.addIndex(u,this.children_);return new m(this.children_,this.priorityNode_,I)}}isIndexed(u){return u===Bs||this.indexMap_.hasIndex(u)}equals(u){if(u===this)return!0;if(u.isLeafNode())return!1;{const I=u;if(this.getPriority().equals(I.getPriority())){if(this.children_.count()===I.children_.count()){const O=this.getIterator(Bi),W=I.getIterator(Bi);let ae=O.getNext(),Ie=W.getNext();for(;ae&&Ie;){if(ae.name!==Ie.name||!ae.node.equals(Ie.node))return!1;ae=O.getNext(),Ie=W.getNext()}return null===ae&&null===Ie}return!1}return!1}}resolveIndex_(u){return u===Bs?null:this.indexMap_.get(u.toString())}}return m.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,m})();const _s=new class fo extends ai{constructor(){super(new Zr(co),ai.EMPTY_NODE,Jr.Default)}compareTo(c){return c===this?0:1}equals(c){return c===this}getPriority(){return this}getImmediateChild(c){return ai.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(ir,{MIN:{value:new ir(ii,ai.EMPTY_NODE)},MAX:{value:new ir(Ai,_s)}}),Js.__EMPTY_NODE=ai.EMPTY_NODE,Xi.__childrenNodeConstructor=ai,function Vo(m){Eo=m}(_s),function _o(m){Kr=m}(_s);const si=!0;function ie(m,c=null){if(null===m)return ai.EMPTY_NODE;if("object"==typeof m&&".priority"in m&&(c=m[".priority"]),(0,z.hu)(null===c||"string"==typeof c||"number"==typeof c||"object"==typeof c&&".sv"in c,"Invalid priority type found: "+typeof c),"object"==typeof m&&".value"in m&&null!==m[".value"]&&(m=m[".value"]),"object"!=typeof m||".sv"in m)return new Xi(m,ie(c));if(m instanceof Array||!si){let u=ai.EMPTY_NODE;return Gn(m,(I,O)=>{if((0,z.r3)(m,I)&&"."!==I.substring(0,1)){const W=ie(O);(W.isLeafNode()||!W.isEmpty())&&(u=u.updateImmediateChild(I,W))}}),u.updatePriority(ie(c))}{const u=[];let I=!1;if(Gn(m,(ae,Ie)=>{if("."!==ae.substring(0,1)){const qe=ie(Ie);qe.isEmpty()||(I=I||!qe.getPriority().isEmpty(),u.push(new ir(ae,qe)))}}),0===u.length)return ai.EMPTY_NODE;const W=Es(u,eo,ae=>ae.name,co);if(I){const ae=Es(u,Bi.getCompare());return new ai(W,ie(c),new Jr({".priority":ae},{".priority":Bi}))}return new ai(W,ie(c),Jr.Default)}}!function rr(m){ho=m}(ie);class ee extends Rs{constructor(c){super(),this.indexPath_=c,(0,z.hu)(!Ti(c)&&".priority"!==_i(c),"Can't create PathIndex with empty path or .priority key")}extractChild(c){return c.getChild(this.indexPath_)}isDefinedOn(c){return!c.getChild(this.indexPath_).isEmpty()}compare(c,u){const I=this.extractChild(c.node),O=this.extractChild(u.node),W=I.compareTo(O);return 0===W?zn(c.name,u.name):W}makePost(c,u){const I=ie(c),O=ai.EMPTY_NODE.updateChild(this.indexPath_,I);return new ir(u,O)}maxPost(){const c=ai.EMPTY_NODE.updateChild(this.indexPath_,_s);return new ir(Ai,c)}toString(){return Li(this.indexPath_,0).join("/")}}const De=new class Q extends Rs{compare(c,u){const I=c.node.compareTo(u.node);return 0===I?zn(c.name,u.name):I}isDefinedOn(c){return!0}indexedValueChanged(c,u){return!c.equals(u)}minPost(){return ir.MIN}maxPost(){return ir.MAX}makePost(c,u){const I=ie(c);return new ir(u,I)}toString(){return".value"}};function en(m){return{type:"value",snapshotNode:m}}function ti(m,c){return{type:"child_added",snapshotNode:c,childName:m}}function Br(m,c){return{type:"child_removed",snapshotNode:c,childName:m}}function tr(m,c,u){return{type:"child_changed",snapshotNode:c,childName:m,oldSnap:u}}class Si{constructor(c){this.index_=c}updateChild(c,u,I,O,W,ae){(0,z.hu)(c.isIndexed(this.index_),"A node must be indexed if only a child is updated");const Ie=c.getImmediateChild(u);return Ie.getChild(O).equals(I.getChild(O))&&Ie.isEmpty()===I.isEmpty()||(null!=ae&&(I.isEmpty()?c.hasChild(u)?ae.trackChildChange(Br(u,Ie)):(0,z.hu)(c.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):Ie.isEmpty()?ae.trackChildChange(ti(u,I)):ae.trackChildChange(tr(u,I,Ie))),c.isLeafNode()&&I.isEmpty())?c:c.updateImmediateChild(u,I).withIndex(this.index_)}updateFullNode(c,u,I){return null!=I&&(c.isLeafNode()||c.forEachChild(Bi,(O,W)=>{u.hasChild(O)||I.trackChildChange(Br(O,W))}),u.isLeafNode()||u.forEachChild(Bi,(O,W)=>{if(c.hasChild(O)){const ae=c.getImmediateChild(O);ae.equals(W)||I.trackChildChange(tr(O,W,ae))}else I.trackChildChange(ti(O,W))})),u.withIndex(this.index_)}updatePriority(c,u){return c.isEmpty()?ai.EMPTY_NODE:c.updatePriority(u)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class Zo{constructor(c){this.indexedFilter_=new Si(c.getIndex()),this.index_=c.getIndex(),this.startPost_=Zo.getStartPost_(c),this.endPost_=Zo.getEndPost_(c),this.startIsInclusive_=!c.startAfterSet_,this.endIsInclusive_=!c.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(c){const u=this.startIsInclusive_?this.index_.compare(this.getStartPost(),c)<=0:this.index_.compare(this.getStartPost(),c)<0,I=this.endIsInclusive_?this.index_.compare(c,this.getEndPost())<=0:this.index_.compare(c,this.getEndPost())<0;return u&&I}updateChild(c,u,I,O,W,ae){return this.matches(new ir(u,I))||(I=ai.EMPTY_NODE),this.indexedFilter_.updateChild(c,u,I,O,W,ae)}updateFullNode(c,u,I){u.isLeafNode()&&(u=ai.EMPTY_NODE);let O=u.withIndex(this.index_);O=O.updatePriority(ai.EMPTY_NODE);const W=this;return u.forEachChild(Bi,(ae,Ie)=>{W.matches(new ir(ae,Ie))||(O=O.updateImmediateChild(ae,ai.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(c,O,I)}updatePriority(c,u){return c}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(c){if(c.hasStart()){const u=c.getIndexStartName();return c.getIndex().makePost(c.getIndexStartValue(),u)}return c.getIndex().minPost()}static getEndPost_(c){if(c.hasEnd()){const u=c.getIndexEndName();return c.getIndex().makePost(c.getIndexEndValue(),u)}return c.getIndex().maxPost()}}class ma{constructor(c){this.withinDirectionalStart=u=>this.reverse_?this.withinEndPost(u):this.withinStartPost(u),this.withinDirectionalEnd=u=>this.reverse_?this.withinStartPost(u):this.withinEndPost(u),this.withinStartPost=u=>{const I=this.index_.compare(this.rangedFilter_.getStartPost(),u);return this.startIsInclusive_?I<=0:I<0},this.withinEndPost=u=>{const I=this.index_.compare(u,this.rangedFilter_.getEndPost());return this.endIsInclusive_?I<=0:I<0},this.rangedFilter_=new Zo(c),this.index_=c.getIndex(),this.limit_=c.getLimit(),this.reverse_=!c.isViewFromLeft(),this.startIsInclusive_=!c.startAfterSet_,this.endIsInclusive_=!c.endBeforeSet_}updateChild(c,u,I,O,W,ae){return this.rangedFilter_.matches(new ir(u,I))||(I=ai.EMPTY_NODE),c.getImmediateChild(u).equals(I)?c:c.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(c,u,I,O,W,ae):this.fullLimitUpdateChild_(c,u,I,W,ae)}updateFullNode(c,u,I){let O;if(u.isLeafNode()||u.isEmpty())O=ai.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<u.numChildren()&&u.isIndexed(this.index_)){let W;O=ai.EMPTY_NODE.withIndex(this.index_),W=this.reverse_?u.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):u.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let ae=0;for(;W.hasNext()&&ae<this.limit_;){const Ie=W.getNext();if(this.withinDirectionalStart(Ie)){if(!this.withinDirectionalEnd(Ie))break;O=O.updateImmediateChild(Ie.name,Ie.node),ae++}}}else{let W;O=u.withIndex(this.index_),O=O.updatePriority(ai.EMPTY_NODE),W=this.reverse_?O.getReverseIterator(this.index_):O.getIterator(this.index_);let ae=0;for(;W.hasNext();){const Ie=W.getNext();ae<this.limit_&&this.withinDirectionalStart(Ie)&&this.withinDirectionalEnd(Ie)?ae++:O=O.updateImmediateChild(Ie.name,ai.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(c,O,I)}updatePriority(c,u){return c}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(c,u,I,O,W){let ae;if(this.reverse_){const fn=this.index_.getCompare();ae=(En,hi)=>fn(hi,En)}else ae=this.index_.getCompare();const Ie=c;(0,z.hu)(Ie.numChildren()===this.limit_,"");const qe=new ir(u,I),ut=this.reverse_?Ie.getFirstChild(this.index_):Ie.getLastChild(this.index_),cn=this.rangedFilter_.matches(qe);if(Ie.hasChild(u)){const fn=Ie.getImmediateChild(u);let En=O.getChildAfterChild(this.index_,ut,this.reverse_);for(;null!=En&&(En.name===u||Ie.hasChild(En.name));)En=O.getChildAfterChild(this.index_,En,this.reverse_);const hi=null==En?1:ae(En,qe);if(cn&&!I.isEmpty()&&hi>=0)return W?.trackChildChange(tr(u,I,fn)),Ie.updateImmediateChild(u,I);{W?.trackChildChange(Br(u,fn));const qr=Ie.updateImmediateChild(u,ai.EMPTY_NODE);return null!=En&&this.rangedFilter_.matches(En)?(W?.trackChildChange(ti(En.name,En.node)),qr.updateImmediateChild(En.name,En.node)):qr}}return I.isEmpty()?c:cn&&ae(ut,qe)>=0?(null!=W&&(W.trackChildChange(Br(ut.name,ut.node)),W.trackChildChange(ti(u,I))),Ie.updateImmediateChild(u,I).updateImmediateChild(ut.name,ai.EMPTY_NODE)):c}}class es{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Bi}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,z.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,z.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:ii}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,z.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,z.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Ai}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,z.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Bi}copy(){const c=new es;return c.limitSet_=this.limitSet_,c.limit_=this.limit_,c.startSet_=this.startSet_,c.startAfterSet_=this.startAfterSet_,c.indexStartValue_=this.indexStartValue_,c.startNameSet_=this.startNameSet_,c.indexStartName_=this.indexStartName_,c.endSet_=this.endSet_,c.endBeforeSet_=this.endBeforeSet_,c.indexEndValue_=this.indexEndValue_,c.endNameSet_=this.endNameSet_,c.indexEndName_=this.indexEndName_,c.index_=this.index_,c.viewFrom_=this.viewFrom_,c}}function _a(m,c,u){const I=m.copy();return I.startSet_=!0,void 0===c&&(c=null),I.indexStartValue_=c,null!=u?(I.startNameSet_=!0,I.indexStartName_=u):(I.startNameSet_=!1,I.indexStartName_=""),I}function Ro(m,c,u){const I=m.copy();return I.endSet_=!0,void 0===c&&(c=null),I.indexEndValue_=c,void 0!==u?(I.endNameSet_=!0,I.indexEndName_=u):(I.endNameSet_=!1,I.indexEndName_=""),I}function ca(m,c){const u=m.copy();return u.index_=c,u}function Rr(m){const c={};if(m.isDefault())return c;let u;if(m.index_===Bi?u="$priority":m.index_===De?u="$value":m.index_===Bs?u="$key":((0,z.hu)(m.index_ instanceof ee,"Unrecognized index type!"),u=m.index_.toString()),c.orderBy=(0,z.Wl)(u),m.startSet_){const I=m.startAfterSet_?"startAfter":"startAt";c[I]=(0,z.Wl)(m.indexStartValue_),m.startNameSet_&&(c[I]+=","+(0,z.Wl)(m.indexStartName_))}if(m.endSet_){const I=m.endBeforeSet_?"endBefore":"endAt";c[I]=(0,z.Wl)(m.indexEndValue_),m.endNameSet_&&(c[I]+=","+(0,z.Wl)(m.indexEndName_))}return m.limitSet_&&(m.isViewFromLeft()?c.limitToFirst=m.limit_:c.limitToLast=m.limit_),c}function Os(m){const c={};if(m.startSet_&&(c.sp=m.indexStartValue_,m.startNameSet_&&(c.sn=m.indexStartName_),c.sin=!m.startAfterSet_),m.endSet_&&(c.ep=m.indexEndValue_,m.endNameSet_&&(c.en=m.indexEndName_),c.ein=!m.endBeforeSet_),m.limitSet_){c.l=m.limit_;let u=m.viewFrom_;""===u&&(u=m.isViewFromLeft()?"l":"r"),c.vf=u}return m.index_!==Bi&&(c.i=m.index_.toString()),c}class No extends Vr{constructor(c,u,I,O){super(),this.repoInfo_=c,this.onDataUpdate_=u,this.authTokenProvider_=I,this.appCheckTokenProvider_=O,this.log_=fi("p:rest:"),this.listens_={}}reportStats(c){throw new Error("Method not implemented.")}static getListenId_(c,u){return void 0!==u?"tag$"+u:((0,z.hu)(c._queryParams.isDefault(),"should have a tag if it's not a default query."),c._path.toString())}listen(c,u,I,O){const W=c._path.toString();this.log_("Listen called for "+W+" "+c._queryIdentifier);const ae=No.getListenId_(c,I),Ie={};this.listens_[ae]=Ie;const qe=Rr(c._queryParams);this.restRequest_(W+".json",qe,(ut,cn)=>{let fn=cn;if(404===ut&&(fn=null,ut=null),null===ut&&this.onDataUpdate_(W,fn,!1,I),(0,z.DV)(this.listens_,ae)===Ie){let En;En=ut?401===ut?"permission_denied":"rest_error:"+ut:"ok",O(En,null)}})}unlisten(c,u){const I=No.getListenId_(c,u);delete this.listens_[I]}get(c){const u=Rr(c._queryParams),I=c._path.toString(),O=new z.BH;return this.restRequest_(I+".json",u,(W,ae)=>{let Ie=ae;404===W&&(Ie=null,W=null),null===W?(this.onDataUpdate_(I,Ie,!1,null),O.resolve(Ie)):O.reject(new Error(Ie))}),O.promise}refreshAuthToken(c){}restRequest_(c,u={},I){return u.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([O,W])=>{O&&O.accessToken&&(u.auth=O.accessToken),W&&W.token&&(u.ac=W.token);const ae=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+c+"?ns="+this.repoInfo_.namespace+(0,z.xO)(u);this.log_("Sending REST request for "+ae);const Ie=new XMLHttpRequest;Ie.onreadystatechange=()=>{if(I&&4===Ie.readyState){this.log_("REST Response for "+ae+" received. status:",Ie.status,"response:",Ie.responseText);let qe=null;if(Ie.status>=200&&Ie.status<300){try{qe=(0,z.cI)(Ie.responseText)}catch{Qn("Failed to parse JSON response for "+ae+": "+Ie.responseText)}I(null,qe)}else 401!==Ie.status&&404!==Ie.status&&Qn("Got unsuccessful REST response for "+ae+" Status: "+Ie.status),I(Ie.status);I=null}},Ie.open("GET",ae,!0),Ie.send()})}}class Ho{constructor(){this.rootNode_=ai.EMPTY_NODE}getNode(c){return this.rootNode_.getChild(c)}updateSnapshot(c,u){this.rootNode_=this.rootNode_.updateChild(c,u)}}function wo(){return{value:null,children:new Map}}function Co(m,c,u){if(Ti(c))m.value=u,m.children.clear();else if(null!==m.value)m.value=m.value.updateChild(c,u);else{const I=_i(c);m.children.has(I)||m.children.set(I,wo()),Co(m.children.get(I),c=Xn(c),u)}}function Zs(m,c){if(Ti(c))return m.value=null,m.children.clear(),!0;if(null!==m.value){if(m.value.isLeafNode())return!1;{const u=m.value;return m.value=null,u.forEachChild(Bi,(I,O)=>{Co(m,new lr(I),O)}),Zs(m,c)}}if(m.children.size>0){const u=_i(c);return c=Xn(c),m.children.has(u)&&Zs(m.children.get(u),c)&&m.children.delete(u),0===m.children.size}return!0}function ya(m,c,u){null!==m.value?u(c,m.value):function jo(m,c){m.children.forEach((u,I)=>{c(I,u)})}(m,(I,O)=>{ya(O,new lr(c.toString()+"/"+I),u)})}class To{constructor(c){this.collection_=c,this.last_=null}get(){const c=this.collection_.get(),u=Object.assign({},c);return this.last_&&Gn(this.last_,(I,O)=>{u[I]=u[I]-O}),this.last_=c,u}}class El{constructor(c,u){this.server_=u,this.statsToReport_={},this.statsListener_=new To(c);const I=1e4+2e4*Math.random();er(this.reportStats_.bind(this),Math.floor(I))}reportStats_(){const c=this.statsListener_.get(),u={};let I=!1;Gn(c,(O,W)=>{W>0&&(0,z.r3)(this.statsToReport_,O)&&(u[O]=W,I=!0)}),I&&this.server_.reportStats(u),er(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var ds=(()=>{return(m=ds||(ds={}))[m.OVERWRITE=0]="OVERWRITE",m[m.MERGE=1]="MERGE",m[m.ACK_USER_WRITE=2]="ACK_USER_WRITE",m[m.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",ds;var m})();function $a(m){return{fromUser:!1,fromServer:!0,queryId:m,tagged:!0}}class Xo{constructor(c,u,I){this.path=c,this.affectedTree=u,this.revert=I,this.type=ds.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(c){if(Ti(this.path)){if(null!=this.affectedTree.value)return(0,z.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const u=this.affectedTree.subtree(new lr(c));return new Xo(or(),u,this.revert)}}return(0,z.hu)(_i(this.path)===c,"operationForChild called for unrelated child."),new Xo(Xn(this.path),this.affectedTree,this.revert)}}class il{constructor(c,u){this.source=c,this.path=u,this.type=ds.LISTEN_COMPLETE}operationForChild(c){return Ti(this.path)?new il(this.source,or()):new il(this.source,Xn(this.path))}}class ls{constructor(c,u,I){this.source=c,this.path=u,this.snap=I,this.type=ds.OVERWRITE}operationForChild(c){return Ti(this.path)?new ls(this.source,or(),this.snap.getImmediateChild(c)):new ls(this.source,Xn(this.path),this.snap)}}class $o{constructor(c,u,I){this.source=c,this.path=u,this.children=I,this.type=ds.MERGE}operationForChild(c){if(Ti(this.path)){const u=this.children.subtree(new lr(c));return u.isEmpty()?null:u.value?new ls(this.source,or(),u.value):new $o(this.source,or(),u)}return(0,z.hu)(_i(this.path)===c,"Can't get a merge for a child not on the path of the operation"),new $o(this.source,Xn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Do{constructor(c,u,I){this.node_=c,this.fullyInitialized_=u,this.filtered_=I}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(c){if(Ti(c))return this.isFullyInitialized()&&!this.filtered_;const u=_i(c);return this.isCompleteForChild(u)}isCompleteForChild(c){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(c)}getNode(){return this.node_}}class no{constructor(c){this.query_=c,this.index_=this.query_._queryParams.getIndex()}}function S(m,c,u,I,O,W){const ae=I.filter(Ie=>Ie.type===u);ae.sort((Ie,qe)=>function J(m,c,u){if(null==c.childName||null==u.childName)throw(0,z.g5)("Should only compare child_ events.");const I=new ir(c.childName,c.snapshotNode),O=new ir(u.childName,u.snapshotNode);return m.index_.compare(I,O)}(m,Ie,qe)),ae.forEach(Ie=>{const qe=function N(m,c,u){return"value"===c.type||"child_removed"===c.type||(c.prevName=u.getPredecessorChildName(c.childName,c.snapshotNode,m.index_)),c}(m,Ie,W);O.forEach(ut=>{ut.respondsTo(Ie.type)&&c.push(ut.createEvent(qe,m.query_))})})}function _e(m,c){return{eventCache:m,serverCache:c}}function ve(m,c,u,I){return _e(new Do(c,u,I),m.serverCache)}function $e(m,c,u,I){return _e(m.eventCache,new Do(c,u,I))}function gt(m){return m.eventCache.isFullyInitialized()?m.eventCache.getNode():null}function at(m){return m.serverCache.isFullyInitialized()?m.serverCache.getNode():null}let Ke;class te{constructor(c,u=(()=>(Ke||(Ke=new Zr(Mi)),Ke))()){this.value=c,this.children=u}static fromObject(c){let u=new te(null);return Gn(c,(I,O)=>{u=u.set(new lr(I),O)}),u}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(c,u){if(null!=this.value&&u(this.value))return{path:or(),value:this.value};if(Ti(c))return null;{const I=_i(c),O=this.children.get(I);if(null!==O){const W=O.findRootMostMatchingPathAndValue(Xn(c),u);return null!=W?{path:vr(new lr(I),W.path),value:W.value}:null}return null}}findRootMostValueAndPath(c){return this.findRootMostMatchingPathAndValue(c,()=>!0)}subtree(c){if(Ti(c))return this;{const u=_i(c),I=this.children.get(u);return null!==I?I.subtree(Xn(c)):new te(null)}}set(c,u){if(Ti(c))return new te(u,this.children);{const I=_i(c),W=(this.children.get(I)||new te(null)).set(Xn(c),u),ae=this.children.insert(I,W);return new te(this.value,ae)}}remove(c){if(Ti(c))return this.children.isEmpty()?new te(null):new te(null,this.children);{const u=_i(c),I=this.children.get(u);if(I){const O=I.remove(Xn(c));let W;return W=O.isEmpty()?this.children.remove(u):this.children.insert(u,O),null===this.value&&W.isEmpty()?new te(null):new te(this.value,W)}return this}}get(c){if(Ti(c))return this.value;{const u=_i(c),I=this.children.get(u);return I?I.get(Xn(c)):null}}setTree(c,u){if(Ti(c))return u;{const I=_i(c),W=(this.children.get(I)||new te(null)).setTree(Xn(c),u);let ae;return ae=W.isEmpty()?this.children.remove(I):this.children.insert(I,W),new te(this.value,ae)}}fold(c){return this.fold_(or(),c)}fold_(c,u){const I={};return this.children.inorderTraversal((O,W)=>{I[O]=W.fold_(vr(c,O),u)}),u(c,this.value,I)}findOnPath(c,u){return this.findOnPath_(c,or(),u)}findOnPath_(c,u,I){const O=!!this.value&&I(u,this.value);if(O)return O;if(Ti(c))return null;{const W=_i(c),ae=this.children.get(W);return ae?ae.findOnPath_(Xn(c),vr(u,W),I):null}}foreachOnPath(c,u){return this.foreachOnPath_(c,or(),u)}foreachOnPath_(c,u,I){if(Ti(c))return this;{this.value&&I(u,this.value);const O=_i(c),W=this.children.get(O);return W?W.foreachOnPath_(Xn(c),vr(u,O),I):new te(null)}}foreach(c){this.foreach_(or(),c)}foreach_(c,u){this.children.inorderTraversal((I,O)=>{O.foreach_(vr(c,I),u)}),this.value&&u(c,this.value)}foreachChild(c){this.children.inorderTraversal((u,I)=>{I.value&&c(u,I.value)})}}class G{constructor(c){this.writeTree_=c}static empty(){return new G(new te(null))}}function ge(m,c,u){if(Ti(c))return new G(new te(u));{const I=m.writeTree_.findRootMostValueAndPath(c);if(null!=I){const O=I.path;let W=I.value;const ae=nr(O,c);return W=W.updateChild(ae,u),new G(m.writeTree_.set(O,W))}{const O=new te(u),W=m.writeTree_.setTree(c,O);return new G(W)}}}function Ve(m,c,u){let I=m;return Gn(u,(O,W)=>{I=ge(I,vr(c,O),W)}),I}function Dt(m,c){if(Ti(c))return G.empty();{const u=m.writeTree_.setTree(c,new te(null));return new G(u)}}function tn(m,c){return null!=An(m,c)}function An(m,c){const u=m.writeTree_.findRootMostValueAndPath(c);return null!=u?m.writeTree_.get(u.path).getChild(nr(u.path,c)):null}function xi(m){const c=[],u=m.writeTree_.value;return null!=u?u.isLeafNode()||u.forEachChild(Bi,(I,O)=>{c.push(new ir(I,O))}):m.writeTree_.children.inorderTraversal((I,O)=>{null!=O.value&&c.push(new ir(I,O.value))}),c}function li(m,c){if(Ti(c))return m;{const u=An(m,c);return new G(null!=u?new te(u):m.writeTree_.subtree(c))}}function Ui(m){return m.writeTree_.isEmpty()}function yi(m,c){return Nr(or(),m.writeTree_,c)}function Nr(m,c,u){if(null!=c.value)return u.updateChild(m,c.value);{let I=null;return c.children.inorderTraversal((O,W)=>{".priority"===O?((0,z.hu)(null!==W.value,"Priority writes must always be leaf nodes"),I=W.value):u=Nr(vr(m,O),W,u)}),!u.getChild(m).isEmpty()&&null!==I&&(u=u.updateChild(vr(m,".priority"),I)),u}}function Rn(m,c){return ua(c,m)}function hs(m,c){if(m.snap)return as(m.path,c);for(const u in m.children)if(m.children.hasOwnProperty(u)&&as(vr(m.path,u),c))return!0;return!1}function Po(m){return m.visible}function ts(m,c,u){let I=G.empty();for(let O=0;O<m.length;++O){const W=m[O];if(c(W)){const ae=W.path;let Ie;if(W.snap)as(u,ae)?(Ie=nr(u,ae),I=ge(I,Ie,W.snap)):as(ae,u)&&(Ie=nr(ae,u),I=ge(I,or(),W.snap.getChild(Ie)));else{if(!W.children)throw(0,z.g5)("WriteRecord should have .snap or .children");if(as(u,ae))Ie=nr(u,ae),I=Ve(I,Ie,W.children);else if(as(ae,u))if(Ie=nr(ae,u),Ti(Ie))I=Ve(I,or(),W.children);else{const qe=(0,z.DV)(W.children,_i(Ie));if(qe){const ut=qe.getChild(Xn(Ie));I=ge(I,or(),ut)}}}}}return I}function Jt(m,c,u,I,O){if(I||O){const W=li(m.visibleWrites,c);return!O&&Ui(W)?u:O||null!=u||tn(W,or())?yi(ts(m.allWrites,function(ut){return(ut.visible||O)&&(!I||!~I.indexOf(ut.writeId))&&(as(ut.path,c)||as(c,ut.path))},c),u||ai.EMPTY_NODE):null}{const W=An(m.visibleWrites,c);if(null!=W)return W;{const ae=li(m.visibleWrites,c);return Ui(ae)?u:null!=u||tn(ae,or())?yi(ae,u||ai.EMPTY_NODE):null}}}function ys(m,c,u,I){return Jt(m.writeTree,m.treePath,c,u,I)}function Fr(m,c){return function pi(m,c,u){let I=ai.EMPTY_NODE;const O=An(m.visibleWrites,c);if(O)return O.isLeafNode()||O.forEachChild(Bi,(W,ae)=>{I=I.updateImmediateChild(W,ae)}),I;if(u){const W=li(m.visibleWrites,c);return u.forEachChild(Bi,(ae,Ie)=>{const qe=yi(li(W,new lr(ae)),Ie);I=I.updateImmediateChild(ae,qe)}),xi(W).forEach(ae=>{I=I.updateImmediateChild(ae.name,ae.node)}),I}return xi(li(m.visibleWrites,c)).forEach(ae=>{I=I.updateImmediateChild(ae.name,ae.node)}),I}(m.writeTree,m.treePath,c)}function Jo(m,c,u,I){return function ci(m,c,u,I,O){(0,z.hu)(I||O,"Either existingEventSnap or existingServerSnap must exist");const W=vr(c,u);if(tn(m.visibleWrites,W))return null;{const ae=li(m.visibleWrites,W);return Ui(ae)?O.getChild(u):yi(ae,O.getChild(u))}}(m.writeTree,m.treePath,c,u,I)}function Lr(m,c){return function fs(m,c){return An(m.visibleWrites,c)}(m.writeTree,vr(m.treePath,c))}function po(m,c,u){return function pr(m,c,u,I){const O=vr(c,u),W=An(m.visibleWrites,O);return null!=W?W:I.isCompleteForChild(u)?yi(li(m.visibleWrites,O),I.getNode().getImmediateChild(u)):null}(m.writeTree,m.treePath,c,u)}function io(m,c){return ua(vr(m.treePath,c),m.writeTree)}function ua(m,c){return{treePath:m,writeTree:c}}class Fo{constructor(){this.changeMap=new Map}trackChildChange(c){const u=c.type,I=c.childName;(0,z.hu)("child_added"===u||"child_changed"===u||"child_removed"===u,"Only child changes supported for tracking"),(0,z.hu)(".priority"!==I,"Only non-priority child changes can be tracked.");const O=this.changeMap.get(I);if(O){const W=O.type;if("child_added"===u&&"child_removed"===W)this.changeMap.set(I,tr(I,c.snapshotNode,O.snapshotNode));else if("child_removed"===u&&"child_added"===W)this.changeMap.delete(I);else if("child_removed"===u&&"child_changed"===W)this.changeMap.set(I,Br(I,O.oldSnap));else if("child_changed"===u&&"child_added"===W)this.changeMap.set(I,ti(I,c.snapshotNode));else{if("child_changed"!==u||"child_changed"!==W)throw(0,z.g5)("Illegal combination of changes: "+c+" occurred after "+O);this.changeMap.set(I,tr(I,c.snapshotNode,O.oldSnap))}}else this.changeMap.set(I,c)}getChanges(){return Array.from(this.changeMap.values())}}const va=new class nn{getCompleteChild(c){return null}getChildAfterChild(c,u,I){return null}};class Lo{constructor(c,u,I=null){this.writes_=c,this.viewCache_=u,this.optCompleteServerCache_=I}getCompleteChild(c){const u=this.viewCache_.eventCache;if(u.isCompleteForChild(c))return u.getNode().getImmediateChild(c);{const I=null!=this.optCompleteServerCache_?new Do(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return po(this.writes_,c,I)}}getChildAfterChild(c,u,I){const O=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:at(this.viewCache_),W=function mr(m,c,u,I,O,W){return function ks(m,c,u,I,O,W,ae){let Ie;const qe=li(m.visibleWrites,c),ut=An(qe,or());if(null!=ut)Ie=ut;else{if(null==u)return[];Ie=yi(qe,u)}if(Ie=Ie.withIndex(ae),Ie.isEmpty()||Ie.isLeafNode())return[];{const cn=[],fn=ae.getCompare(),En=W?Ie.getReverseIteratorFrom(I,ae):Ie.getIteratorFrom(I,ae);let hi=En.getNext();for(;hi&&cn.length<O;)0!==fn(hi,I)&&cn.push(hi),hi=En.getNext();return cn}}(m.writeTree,m.treePath,c,u,I,O,W)}(this.writes_,O,u,1,I,c);return 0===W.length?null:W[0]}}function ro(m,c,u,I,O,W){const ae=c.eventCache;if(null!=Lr(I,u))return c;{let Ie,qe;if(Ti(u))if((0,z.hu)(c.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),c.serverCache.isFiltered()){const ut=at(c),fn=Fr(I,ut instanceof ai?ut:ai.EMPTY_NODE);Ie=m.filter.updateFullNode(c.eventCache.getNode(),fn,W)}else{const ut=ys(I,at(c));Ie=m.filter.updateFullNode(c.eventCache.getNode(),ut,W)}else{const ut=_i(u);if(".priority"===ut){(0,z.hu)(1===wi(u),"Can't have a priority with additional path components");const cn=ae.getNode();qe=c.serverCache.getNode();const fn=Jo(I,u,cn,qe);Ie=null!=fn?m.filter.updatePriority(cn,fn):ae.getNode()}else{const cn=Xn(u);let fn;if(ae.isCompleteForChild(ut)){qe=c.serverCache.getNode();const En=Jo(I,u,ae.getNode(),qe);fn=null!=En?ae.getNode().getImmediateChild(ut).updateChild(cn,En):ae.getNode().getImmediateChild(ut)}else fn=po(I,ut,c.serverCache);Ie=null!=fn?m.filter.updateChild(ae.getNode(),ut,fn,cn,O,W):ae.getNode()}}return ve(c,Ie,ae.isFullyInitialized()||Ti(u),m.filter.filtersNodes())}}function Ga(m,c,u,I,O,W,ae,Ie){const qe=c.serverCache;let ut;const cn=ae?m.filter:m.filter.getIndexedFilter();if(Ti(u))ut=cn.updateFullNode(qe.getNode(),I,null);else if(cn.filtersNodes()&&!qe.isFiltered()){const hi=qe.getNode().updateChild(u,I);ut=cn.updateFullNode(qe.getNode(),hi,null)}else{const hi=_i(u);if(!qe.isCompleteForPath(u)&&wi(u)>1)return c;const $i=Xn(u),Sa=qe.getNode().getImmediateChild(hi).updateChild($i,I);ut=".priority"===hi?cn.updatePriority(qe.getNode(),Sa):cn.updateChild(qe.getNode(),hi,Sa,$i,va,null)}const fn=$e(c,ut,qe.isFullyInitialized()||Ti(u),cn.filtersNodes());return ro(m,fn,u,O,new Lo(O,fn,W),Ie)}function js(m,c,u,I,O,W,ae){const Ie=c.eventCache;let qe,ut;const cn=new Lo(O,c,W);if(Ti(u))ut=m.filter.updateFullNode(c.eventCache.getNode(),I,ae),qe=ve(c,ut,!0,m.filter.filtersNodes());else{const fn=_i(u);if(".priority"===fn)ut=m.filter.updatePriority(c.eventCache.getNode(),I),qe=ve(c,ut,Ie.isFullyInitialized(),Ie.isFiltered());else{const En=Xn(u),hi=Ie.getNode().getImmediateChild(fn);let $i;if(Ti(En))$i=I;else{const qr=cn.getCompleteChild(fn);$i=null!=qr?".priority"===cr(En)&&qr.getChild(ar(En)).isEmpty()?qr:qr.updateChild(En,I):ai.EMPTY_NODE}qe=hi.equals($i)?c:ve(c,m.filter.updateChild(Ie.getNode(),fn,$i,En,cn,ae),Ie.isFullyInitialized(),m.filter.filtersNodes())}}return qe}function ta(m,c){return m.eventCache.isCompleteForChild(c)}function mo(m,c,u){return u.foreach((I,O)=>{c=c.updateChild(I,O)}),c}function Va(m,c,u,I,O,W,ae,Ie){if(c.serverCache.getNode().isEmpty()&&!c.serverCache.isFullyInitialized())return c;let ut,qe=c;ut=Ti(u)?I:new te(null).setTree(u,I);const cn=c.serverCache.getNode();return ut.children.inorderTraversal((fn,En)=>{if(cn.hasChild(fn)){const $i=mo(0,c.serverCache.getNode().getImmediateChild(fn),En);qe=Ga(m,qe,new lr(fn),$i,O,W,ae,Ie)}}),ut.children.inorderTraversal((fn,En)=>{const hi=!c.serverCache.isCompleteForChild(fn)&&null===En.value;if(!cn.hasChild(fn)&&!hi){const qr=mo(0,c.serverCache.getNode().getImmediateChild(fn),En);qe=Ga(m,qe,new lr(fn),qr,O,W,ae,Ie)}}),qe}class Ba{constructor(c,u){this.query_=c,this.eventRegistrations_=[];const I=this.query_._queryParams,O=new Si(I.getIndex()),W=function ga(m){return m.loadsAllData()?new Si(m.getIndex()):m.hasLimit()?new ma(m):new Zo(m)}(I);this.processor_=function da(m){return{filter:m}}(W);const ae=u.serverCache,Ie=u.eventCache,qe=O.updateFullNode(ai.EMPTY_NODE,ae.getNode(),null),ut=W.updateFullNode(ai.EMPTY_NODE,Ie.getNode(),null),cn=new Do(qe,ae.isFullyInitialized(),O.filtersNodes()),fn=new Do(ut,Ie.isFullyInitialized(),W.filtersNodes());this.viewCache_=_e(fn,cn),this.eventGenerator_=new no(this.query_)}get query(){return this.query_}}function Al(m,c){const u=at(m.viewCache_);return u&&(m.query._queryParams.loadsAllData()||!Ti(c)&&!u.getImmediateChild(_i(c)).isEmpty())?u.getChild(c):null}function Ea(m){return 0===m.eventRegistrations_.length}function jl(m,c,u){const I=[];if(u){(0,z.hu)(null==c,"A cancel should cancel all event registrations.");const O=m.query._path;m.eventRegistrations_.forEach(W=>{const ae=W.createCancelEvent(u,O);ae&&I.push(ae)})}if(c){let O=[];for(let W=0;W<m.eventRegistrations_.length;++W){const ae=m.eventRegistrations_[W];if(ae.matches(c)){if(c.hasAnyCallback()){O=O.concat(m.eventRegistrations_.slice(W+1));break}}else O.push(ae)}m.eventRegistrations_=O}else m.eventRegistrations_=[];return I}function cs(m,c,u,I){c.type===ds.MERGE&&null!==c.source.queryId&&((0,z.hu)(at(m.viewCache_),"We should always have a full cache before handling merges"),(0,z.hu)(gt(m.viewCache_),"Missing event cache, even though we have a server cache"));const O=m.viewCache_,W=function Hr(m,c,u,I,O){const W=new Fo;let ae,Ie;if(u.type===ds.OVERWRITE){const ut=u;ut.source.fromUser?ae=js(m,c,ut.path,ut.snap,I,O,W):((0,z.hu)(ut.source.fromServer,"Unknown source."),Ie=ut.source.tagged||c.serverCache.isFiltered()&&!Ti(ut.path),ae=Ga(m,c,ut.path,ut.snap,I,O,Ie,W))}else if(u.type===ds.MERGE){const ut=u;ut.source.fromUser?ae=function Xa(m,c,u,I,O,W,ae){let Ie=c;return I.foreach((qe,ut)=>{const cn=vr(u,qe);ta(c,_i(cn))&&(Ie=js(m,Ie,cn,ut,O,W,ae))}),I.foreach((qe,ut)=>{const cn=vr(u,qe);ta(c,_i(cn))||(Ie=js(m,Ie,cn,ut,O,W,ae))}),Ie}(m,c,ut.path,ut.children,I,O,W):((0,z.hu)(ut.source.fromServer,"Unknown source."),Ie=ut.source.tagged||c.serverCache.isFiltered(),ae=Va(m,c,ut.path,ut.children,I,O,Ie,W))}else if(u.type===ds.ACK_USER_WRITE){const ut=u;ae=ut.revert?function Fs(m,c,u,I,O,W){let ae;if(null!=Lr(I,u))return c;{const Ie=new Lo(I,c,O),qe=c.eventCache.getNode();let ut;if(Ti(u)||".priority"===_i(u)){let cn;if(c.serverCache.isFullyInitialized())cn=ys(I,at(c));else{const fn=c.serverCache.getNode();(0,z.hu)(fn instanceof ai,"serverChildren would be complete if leaf node"),cn=Fr(I,fn)}ut=m.filter.updateFullNode(qe,cn,W)}else{const cn=_i(u);let fn=po(I,cn,c.serverCache);null==fn&&c.serverCache.isCompleteForChild(cn)&&(fn=qe.getImmediateChild(cn)),ut=null!=fn?m.filter.updateChild(qe,cn,fn,Xn(u),Ie,W):c.eventCache.getNode().hasChild(cn)?m.filter.updateChild(qe,cn,ai.EMPTY_NODE,Xn(u),Ie,W):qe,ut.isEmpty()&&c.serverCache.isFullyInitialized()&&(ae=ys(I,at(c)),ae.isLeafNode()&&(ut=m.filter.updateFullNode(ut,ae,W)))}return ae=c.serverCache.isFullyInitialized()||null!=Lr(I,or()),ve(c,ut,ae,m.filter.filtersNodes())}}(m,c,ut.path,I,O,W):function dl(m,c,u,I,O,W,ae){if(null!=Lr(O,u))return c;const Ie=c.serverCache.isFiltered(),qe=c.serverCache;if(null!=I.value){if(Ti(u)&&qe.isFullyInitialized()||qe.isCompleteForPath(u))return Ga(m,c,u,qe.getNode().getChild(u),O,W,Ie,ae);if(Ti(u)){let ut=new te(null);return qe.getNode().forEachChild(Bs,(cn,fn)=>{ut=ut.set(new lr(cn),fn)}),Va(m,c,u,ut,O,W,Ie,ae)}return c}{let ut=new te(null);return I.foreach((cn,fn)=>{const En=vr(u,cn);qe.isCompleteForPath(En)&&(ut=ut.set(cn,qe.getNode().getChild(En)))}),Va(m,c,u,ut,O,W,Ie,ae)}}(m,c,ut.path,ut.affectedTree,I,O,W)}else{if(u.type!==ds.LISTEN_COMPLETE)throw(0,z.g5)("Unknown operation type: "+u.type);ae=function Ja(m,c,u,I,O){const W=c.serverCache;return ro(m,$e(c,W.getNode(),W.isFullyInitialized()||Ti(u),W.isFiltered()),u,I,va,O)}(m,c,u.path,I,W)}const qe=W.getChanges();return function ba(m,c,u){const I=c.eventCache;if(I.isFullyInitialized()){const O=I.getNode().isLeafNode()||I.getNode().isEmpty(),W=gt(m);(u.length>0||!m.eventCache.isFullyInitialized()||O&&!I.getNode().equals(W)||!I.getNode().getPriority().equals(W.getPriority()))&&u.push(en(gt(c)))}}(c,ae,qe),{viewCache:ae,changes:qe}}(m.processor_,O,c,u,I);return function ea(m,c){(0,z.hu)(c.eventCache.getNode().isIndexed(m.filter.getIndex()),"Event snap not indexed"),(0,z.hu)(c.serverCache.getNode().isIndexed(m.filter.getIndex()),"Server snap not indexed")}(m.processor_,W.viewCache),(0,z.hu)(W.viewCache.serverCache.isFullyInitialized()||!O.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),m.viewCache_=W.viewCache,el(m,W.changes,W.viewCache.eventCache.getNode(),null)}function el(m,c,u,I){return function me(m,c,u,I){const O=[],W=[];return c.forEach(ae=>{"child_changed"===ae.type&&m.index_.indexedValueChanged(ae.oldSnap,ae.snapshotNode)&&W.push(function pn(m,c){return{type:"child_moved",snapshotNode:c,childName:m}}(ae.childName,ae.snapshotNode))}),S(m,O,"child_removed",c,I,u),S(m,O,"child_added",c,I,u),S(m,O,"child_moved",W,I,u),S(m,O,"child_changed",c,I,u),S(m,O,"value",c,I,u),O}(m.eventGenerator_,c,u,I?[I]:m.eventRegistrations_)}let Il,h;class hl{constructor(){this.views=new Map}}function Ia(m,c,u,I){const O=c.source.queryId;if(null!==O){const W=m.views.get(O);return(0,z.hu)(null!=W,"SyncTree gave us an op for an invalid query."),cs(W,c,u,I)}{let W=[];for(const ae of m.views.values())W=W.concat(cs(ae,c,u,I));return W}}function fl(m,c,u,I,O){const ae=m.views.get(c._queryIdentifier);if(!ae){let Ie=ys(u,O?I:null),qe=!1;Ie?qe=!0:I instanceof ai?(Ie=Fr(u,I),qe=!1):(Ie=ai.EMPTY_NODE,qe=!1);const ut=_e(new Do(Ie,qe,!1),new Do(I,O,!1));return new Ba(c,ut)}return ae}function wl(m){const c=[];for(const u of m.views.values())u.query._queryParams.loadsAllData()||c.push(u);return c}function Ds(m,c){let u=null;for(const I of m.views.values())u=u||Al(I,c);return u}function Go(m,c){return c._queryParams.loadsAllData()?a(m):m.views.get(c._queryIdentifier)}function Y(m,c){return null!=Go(m,c)}function p(m){return null!=a(m)}function a(m){for(const c of m.views.values())if(c.query._queryParams.loadsAllData())return c;return null}let X=1;class ce{constructor(c){this.listenProvider_=c,this.syncPointTree_=new te(null),this.pendingWriteTree_=function Ns(){return{visibleWrites:G.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function We(m,c,u,I,O){return function hr(m,c,u,I,O){(0,z.hu)(I>m.lastWriteId,"Stacking an older write on top of newer ones"),void 0===O&&(O=!0),m.allWrites.push({path:c,snap:u,writeId:I,visible:O}),O&&(m.visibleWrites=ge(m.visibleWrites,c,u)),m.lastWriteId=I}(m.pendingWriteTree_,c,u,I,O),O?Ss(m,new ls({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},c,u)):[]}function on(m,c,u=!1){const I=function ni(m,c){for(let u=0;u<m.allWrites.length;u++){const I=m.allWrites[u];if(I.writeId===c)return I}return null}(m.pendingWriteTree_,c);if(function qn(m,c){const u=m.allWrites.findIndex(Ie=>Ie.writeId===c);(0,z.hu)(u>=0,"removeWrite called with nonexistent writeId.");const I=m.allWrites[u];m.allWrites.splice(u,1);let O=I.visible,W=!1,ae=m.allWrites.length-1;for(;O&&ae>=0;){const Ie=m.allWrites[ae];Ie.visible&&(ae>=u&&hs(Ie,I.path)?O=!1:as(I.path,Ie.path)&&(W=!0)),ae--}return!!O&&(W?(function Ki(m){m.visibleWrites=ts(m.allWrites,Po,or()),m.lastWriteId=m.allWrites.length>0?m.allWrites[m.allWrites.length-1].writeId:-1}(m),!0):(I.snap?m.visibleWrites=Dt(m.visibleWrites,I.path):Gn(I.children,qe=>{m.visibleWrites=Dt(m.visibleWrites,vr(I.path,qe))}),!0))}(m.pendingWriteTree_,c)){let W=new te(null);return null!=I.snap?W=W.set(or(),!0):Gn(I.children,ae=>{W=W.set(new lr(ae),!0)}),Ss(m,new Xo(I.path,W,u))}return[]}function ln(m,c,u){return Ss(m,new ls({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},c,u))}function ur(m,c,u,I,O=!1){const W=c._path,ae=m.syncPointTree_.get(W);let Ie=[];if(ae&&("default"===c._queryIdentifier||Y(ae,c))){const qe=function zs(m,c,u,I){const O=c._queryIdentifier,W=[];let ae=[];const Ie=p(m);if("default"===O)for(const[qe,ut]of m.views.entries())ae=ae.concat(jl(ut,u,I)),Ea(ut)&&(m.views.delete(qe),ut.query._queryParams.loadsAllData()||W.push(ut.query));else{const qe=m.views.get(O);qe&&(ae=ae.concat(jl(qe,u,I)),Ea(qe)&&(m.views.delete(O),qe.query._queryParams.loadsAllData()||W.push(qe.query)))}return Ie&&!p(m)&&W.push(new(function sc(){return(0,z.hu)(Il,"Reference.ts has not been loaded"),Il}())(c._repo,c._path)),{removed:W,events:ae}}(ae,c,u,I);(function Gl(m){return 0===m.views.size})(ae)&&(m.syncPointTree_=m.syncPointTree_.remove(W));const ut=qe.removed;if(Ie=qe.events,!O){const cn=-1!==ut.findIndex(En=>En._queryParams.loadsAllData()),fn=m.syncPointTree_.findOnPath(W,(En,hi)=>p(hi));if(cn&&!fn){const En=m.syncPointTree_.subtree(W);if(!En.isEmpty()){const hi=function xt(m){return m.fold((c,u,I)=>{if(u&&p(u))return[a(u)];{let O=[];return u&&(O=wl(u)),Gn(I,(W,ae)=>{O=O.concat(ae)}),O}})}(En);for(let $i=0;$i<hi.length;++$i){const qr=hi[$i],Sa=qr.query,wc=Kl(m,qr);m.listenProvider_.startListening(zt(Sa),Ca(m,Sa),wc.hashFn,wc.onComplete)}}}!fn&&ut.length>0&&!I&&(cn?m.listenProvider_.stopListening(zt(c),null):ut.forEach(En=>{const hi=m.queryToTagMap.get(Z(En));m.listenProvider_.stopListening(zt(En),hi)}))}!function Cn(m,c){for(let u=0;u<c.length;++u){const I=c[u];if(!I._queryParams.loadsAllData()){const O=Z(I),W=m.queryToTagMap.get(O);m.queryToTagMap.delete(O),m.tagToQueryMap.delete(W)}}}(m,ut)}return Ie}function wa(m,c,u,I){const O=se(m,I);if(null!=O){const W=Ee(O),ae=W.path,Ie=W.queryId,qe=nr(ae,c);return Xe(m,ae,new ls($a(Ie),qe,u))}return[]}function Ys(m,c,u,I=!1){const O=c._path;let W=null,ae=!1;m.syncPointTree_.foreachOnPath(O,(En,hi)=>{const $i=nr(En,O);W=W||Ds(hi,$i),ae=ae||p(hi)});let qe,Ie=m.syncPointTree_.get(O);Ie?(ae=ae||p(Ie),W=W||Ds(Ie,or())):(Ie=new hl,m.syncPointTree_=m.syncPointTree_.set(O,Ie)),null!=W?qe=!0:(qe=!1,W=ai.EMPTY_NODE,m.syncPointTree_.subtree(O).foreachChild((hi,$i)=>{const qr=Ds($i,or());qr&&(W=W.updateImmediateChild(hi,qr))}));const ut=Y(Ie,c);if(!ut&&!c._queryParams.loadsAllData()){const En=Z(c);(0,z.hu)(!m.queryToTagMap.has(En),"View does not exist, but we have a tag");const hi=function Jn(){return X++}();m.queryToTagMap.set(En,hi),m.tagToQueryMap.set(hi,En)}let fn=function Wl(m,c,u,I,O,W){const ae=fl(m,c,I,O,W);return m.views.has(c._queryIdentifier)||m.views.set(c._queryIdentifier,ae),function Hl(m,c){m.eventRegistrations_.push(c)}(ae,u),function zl(m,c){const u=m.viewCache_.eventCache,I=[];return u.getNode().isLeafNode()||u.getNode().forEachChild(Bi,(W,ae)=>{I.push(ti(W,ae))}),u.isFullyInitialized()&&I.push(en(u.getNode())),el(m,I,u.getNode(),c)}(ae,u)}(Ie,c,u,Rn(m.pendingWriteTree_,O),W,qe);if(!ut&&!ae&&!I){const En=Go(Ie,c);fn=fn.concat(function bi(m,c,u){const I=c._path,O=Ca(m,c),W=Kl(m,u),ae=m.listenProvider_.startListening(zt(c),O,W.hashFn,W.onComplete),Ie=m.syncPointTree_.subtree(I);if(O)(0,z.hu)(!p(Ie.value),"If we're adding a query, it shouldn't be shadowed");else{const qe=Ie.fold((ut,cn,fn)=>{if(!Ti(ut)&&cn&&p(cn))return[a(cn).query];{let En=[];return cn&&(En=En.concat(wl(cn).map(hi=>hi.query))),Gn(fn,(hi,$i)=>{En=En.concat($i)}),En}});for(let ut=0;ut<qe.length;++ut){const cn=qe[ut];m.listenProvider_.stopListening(zt(cn),Ca(m,cn))}}return ae}(m,c,En))}return fn}function na(m,c,u){const O=m.pendingWriteTree_,W=m.syncPointTree_.findOnPath(c,(ae,Ie)=>{const ut=Ds(Ie,nr(ae,c));if(ut)return ut});return Jt(O,c,W,u,!0)}function Ss(m,c){return ia(c,m.syncPointTree_,null,Rn(m.pendingWriteTree_,or()))}function ia(m,c,u,I){if(Ti(m.path))return pl(m,c,u,I);{const O=c.get(or());null==u&&null!=O&&(u=Ds(O,or()));let W=[];const ae=_i(m.path),Ie=m.operationForChild(ae),qe=c.children.get(ae);if(qe&&Ie){const ut=u?u.getImmediateChild(ae):null,cn=io(I,ae);W=W.concat(ia(Ie,qe,ut,cn))}return O&&(W=W.concat(Ia(O,m,I,u))),W}}function pl(m,c,u,I){const O=c.get(or());null==u&&null!=O&&(u=Ds(O,or()));let W=[];return c.children.inorderTraversal((ae,Ie)=>{const qe=u?u.getImmediateChild(ae):null,ut=io(I,ae),cn=m.operationForChild(ae);cn&&(W=W.concat(pl(cn,Ie,qe,ut)))}),O&&(W=W.concat(Ia(O,m,I,u))),W}function Kl(m,c){const u=c.query,I=Ca(m,u);return{hashFn:()=>(function rl(m){return m.viewCache_.serverCache.getNode()}(c)||ai.EMPTY_NODE).hash(),onComplete:O=>{if("ok"===O)return I?function jr(m,c,u){const I=se(m,u);if(I){const O=Ee(I),W=O.path,ae=O.queryId,Ie=nr(W,c);return Xe(m,W,new il($a(ae),Ie))}return[]}(m,u._path,I):function sr(m,c){return Ss(m,new il({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},c))}(m,u._path);{const W=function Pn(m,c){let u="Unknown Error";"too_big"===m?u="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===m?u="Client doesn't have permission to access the desired data.":"unavailable"===m&&(u="The service is unavailable");const I=new Error(m+" at "+c._path.toString()+": "+u);return I.code=m.toUpperCase(),I}(O,u);return ur(m,u,null,W)}}}}function Ca(m,c){const u=Z(c);return m.queryToTagMap.get(u)}function Z(m){return m._path.toString()+"$"+m._queryIdentifier}function se(m,c){return m.tagToQueryMap.get(c)}function Ee(m){const c=m.indexOf("$");return(0,z.hu)(-1!==c&&c<m.length-1,"Bad queryKey."),{queryId:m.substr(c+1),path:new lr(m.substr(0,c))}}function Xe(m,c,u){const I=m.syncPointTree_.get(c);return(0,z.hu)(I,"Missing sync point for query tag that we're tracking"),Ia(I,u,Rn(m.pendingWriteTree_,c),null)}function zt(m){return m._queryParams.loadsAllData()&&!m._queryParams.isDefault()?new(function P(){return(0,z.hu)(h,"Reference.ts has not been loaded"),h}())(m._repo,m._path):m}class Ei{constructor(c){this.node_=c}getImmediateChild(c){const u=this.node_.getImmediateChild(c);return new Ei(u)}node(){return this.node_}}class br{constructor(c,u){this.syncTree_=c,this.path_=u}getImmediateChild(c){const u=vr(this.path_,c);return new br(this.syncTree_,u)}node(){return na(this.syncTree_,this.path_)}}const Gi=function(m){return(m=m||{}).timestamp=m.timestamp||(new Date).getTime(),m},Wo=function(m,c,u){return m&&"object"==typeof m?((0,z.hu)(".sv"in m,"Unexpected leaf node or priority contents"),"string"==typeof m[".sv"]?so(m[".sv"],c,u):"object"==typeof m[".sv"]?hc(m[".sv"],c):void(0,z.hu)(!1,"Unexpected server value: "+JSON.stringify(m,null,2))):m},so=function(m,c,u){if("timestamp"===m)return u.timestamp;(0,z.hu)(!1,"Unexpected server value: "+m)},hc=function(m,c,u){m.hasOwnProperty("increment")||(0,z.hu)(!1,"Unexpected server value: "+JSON.stringify(m,null,2));const I=m.increment;"number"!=typeof I&&(0,z.hu)(!1,"Unexpected increment value: "+I);const O=c.node();if((0,z.hu)(null!==O&&typeof O<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!O.isLeafNode())return I;const ae=O.getValue();return"number"!=typeof ae?I:ae+I},Ml=function(m,c,u,I){return Oo(c,new br(u,m),I)},Ma=function(m,c,u){return Oo(m,new Ei(c),u)};function Oo(m,c,u){const I=m.getPriority().val(),O=Wo(I,c.getImmediateChild(".priority"),u);let W;if(m.isLeafNode()){const ae=m,Ie=Wo(ae.getValue(),c,u);return Ie!==ae.getValue()||O!==ae.getPriority().val()?new Xi(Ie,ie(O)):m}{const ae=m;return W=ae,O!==ae.getPriority().val()&&(W=W.updatePriority(new Xi(O))),ae.forEachChild(Bi,(Ie,qe)=>{const ut=Oo(qe,c.getImmediateChild(Ie),u);ut!==qe&&(W=W.updateImmediateChild(Ie,ut))}),W}}class Wa{constructor(c="",u=null,I={children:{},childCount:0}){this.name=c,this.parent=u,this.node=I}}function sl(m,c){let u=c instanceof lr?c:new lr(c),I=m,O=_i(u);for(;null!==O;){const W=(0,z.DV)(I.node.children,O)||{children:{},childCount:0};I=new Wa(O,I,W),u=Xn(u),O=_i(u)}return I}function Rl(m){return m.node.value}function Dc(m,c){m.node.value=c,oc(m)}function Sc(m){return m.node.childCount>0}function ql(m,c){Gn(m.node.children,(u,I)=>{c(new Wa(u,m,I))})}function $s(m,c,u,I){u&&!I&&c(m),ql(m,O=>{$s(O,c,!0,I)}),u&&I&&c(m)}function fc(m){return new lr(null===m.parent?m.name:fc(m.parent)+"/"+m.name)}function oc(m){null!==m.parent&&function ol(m,c,u){const I=function Uo(m){return void 0===Rl(m)&&!Sc(m)}(u),O=(0,z.r3)(m.node.children,c);I&&O?(delete m.node.children[c],m.node.childCount--,oc(m)):!I&&!O&&(m.node.children[c]=u.node,m.node.childCount++,oc(m))}(m.parent,m.name,m)}const Xu=/[\[\].#$\/\u0000-\u001F\u007F]/,Mu=/[\[\].#$\u0000-\u001F\u007F]/,Wr=10485760,Is=function(m){return"string"==typeof m&&0!==m.length&&!Xu.test(m)},pc=function(m){return"string"==typeof m&&0!==m.length&&!Mu.test(m)},Cl=function(m){return null===m||"string"==typeof m||"number"==typeof m&&!Pi(m)||m&&"object"==typeof m&&(0,z.r3)(m,".sv")},Ha=function(m,c,u,I){I&&void 0===c||Tl((0,z.gK)(m,"value"),c,u)},Tl=function(m,c,u){const I=u instanceof lr?new zi(u,m):u;if(void 0===c)throw new Error(m+"contains undefined "+bo(I));if("function"==typeof c)throw new Error(m+"contains a function "+bo(I)+" with contents = "+c.toString());if(Pi(c))throw new Error(m+"contains "+c.toString()+" "+bo(I));if("string"==typeof c&&c.length>Wr/3&&(0,z.ug)(c)>Wr)throw new Error(m+"contains a string greater than "+Wr+" utf8 bytes "+bo(I)+" ('"+c.substring(0,50)+"...')");if(c&&"object"==typeof c){let O=!1,W=!1;if(Gn(c,(ae,Ie)=>{if(".value"===ae)O=!0;else if(".priority"!==ae&&".sv"!==ae&&(W=!0,!Is(ae)))throw new Error(m+" contains an invalid key ("+ae+") "+bo(I)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function Ms(m,c){m.parts_.length>0&&(m.byteLength_+=1),m.parts_.push(c),m.byteLength_+=(0,z.ug)(c),Ao(m)})(I,ae),Tl(m,Ie,I),function Ws(m){const c=m.parts_.pop();m.byteLength_-=(0,z.ug)(c),m.parts_.length>0&&(m.byteLength_-=1)}(I)}),O&&W)throw new Error(m+' contains ".value" child '+bo(I)+" in addition to actual children.")}},Hc=function(m,c,u,I){if(I&&void 0===c)return;const O=(0,z.gK)(m,"values");if(!c||"object"!=typeof c||Array.isArray(c))throw new Error(O+" must be an object containing the children to replace.");const W=[];Gn(c,(ae,Ie)=>{const qe=new lr(ae);if(Tl(O,Ie,vr(u,qe)),".priority"===cr(qe)&&!Cl(Ie))throw new Error(O+"contains an invalid value for '"+qe.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");W.push(qe)}),function(m,c){let u,I;for(u=0;u<c.length;u++){I=c[u];const W=Li(I);for(let ae=0;ae<W.length;ae++)if((".priority"!==W[ae]||ae!==W.length-1)&&!Is(W[ae]))throw new Error(m+"contains an invalid key ("+W[ae]+") in path "+I.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}c.sort(Or);let O=null;for(u=0;u<c.length;u++){if(I=c[u],null!==O&&as(O,I))throw new Error(m+"contains a path "+O.toString()+" that is ancestor of another path "+I.toString());O=I}}(O,W)},Ra=function(m,c,u){if(!u||void 0!==c){if(Pi(c))throw new Error((0,z.gK)(m,"priority")+"is "+c.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Cl(c))throw new Error((0,z.gK)(m,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},xc=function(m,c,u,I){if(!(I&&void 0===u||Is(u)))throw new Error((0,z.gK)(m,c)+'was an invalid key = "'+u+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},mc=function(m,c,u,I){if(!(I&&void 0===u||pc(u)))throw new Error((0,z.gK)(m,c)+'was an invalid path = "'+u+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},fu=function(m,c,u,I){u&&(u=u.replace(/^\/*\.info(\/|$)/,"/")),mc(m,c,u,I)},Ka=function(m,c){if(".info"===_i(c))throw new Error(m+" failed = Can't modify data under /.info/")},jc=function(m,c){const u=c.path.toString();if("string"!=typeof c.repoInfo.host||0===c.repoInfo.host.length||!Is(c.repoInfo.namespace)&&"localhost"!==c.repoInfo.host.split(":")[0]||0!==u.length&&!function(m){return m&&(m=m.replace(/^\/*\.info(\/|$)/,"/")),pc(m)}(u))throw new Error((0,z.gK)(m,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class pu{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Ac(m,c){let u=null;for(let I=0;I<c.length;I++){const O=c[I],W=O.getPath();null!==u&&!Us(W,u.path)&&(m.eventLists_.push(u),u=null),null===u&&(u={events:[],path:W}),u.events.push(O)}u&&m.eventLists_.push(u)}function zc(m,c,u){Ac(m,u),Mc(m,I=>Us(I,c))}function ha(m,c,u){Ac(m,u),Mc(m,I=>as(I,c)||as(c,I))}function Mc(m,c){m.recursionDepth_++;let u=!0;for(let I=0;I<m.eventLists_.length;I++){const O=m.eventLists_[I];O&&(c(O.path)?(ac(m.eventLists_[I]),m.eventLists_[I]=null):u=!1)}u&&(m.eventLists_=[]),m.recursionDepth_--}function ac(m){for(let c=0;c<m.events.length;c++){const u=m.events[c];if(null!==u){m.events[c]=null;const I=u.getEventRunner();Zt&&bn("event: "+u.toString()),Vi(I)}}}const ra="repo_interrupt",lc=25;class gc{constructor(c,u,I,O){this.repoInfo_=c,this.forceRestClient_=u,this.authTokenProvider_=I,this.appCheckProvider_=O,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new pu,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=wo(),this.transactionQueueTree_=new Wa,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function sa(m){const u=m.infoData_.getNode(new lr(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+u}function Ko(m){return Gi({timestamp:sa(m)})}function Zl(m,c,u,I,O){m.dataUpdateCount++;const W=new lr(c);u=m.interceptServerDataCallback_?m.interceptServerDataCallback_(c,u):u;let ae=[];if(O)if(I){const qe=(0,z.UI)(u,ut=>ie(ut));ae=function So(m,c,u,I){const O=se(m,I);if(O){const W=Ee(O),ae=W.path,Ie=W.queryId,qe=nr(ae,c),ut=te.fromObject(u);return Xe(m,ae,new $o($a(Ie),qe,ut))}return[]}(m.serverSyncTree_,W,qe,O)}else{const qe=ie(u);ae=wa(m.serverSyncTree_,W,qe,O)}else if(I){const qe=(0,z.UI)(u,ut=>ie(ut));ae=function Un(m,c,u){const I=te.fromObject(u);return Ss(m,new $o({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},c,I))}(m.serverSyncTree_,W,qe)}else{const qe=ie(u);ae=ln(m.serverSyncTree_,W,qe)}let Ie=W;ae.length>0&&(Ie=Gs(m,W)),ha(m.eventQueue_,Ie,ae)}function al(m,c){Yl(m,"connected",c),!1===c&&function Kc(m){$t(m,"onDisconnectEvents");const c=Ko(m),u=wo();ya(m.onDisconnect_,or(),(O,W)=>{const ae=Ml(O,W,m.serverSyncTree_,c);Co(u,O,ae)});let I=[];ya(u,or(),(O,W)=>{I=I.concat(ln(m.serverSyncTree_,O,W));const ae=_c(m,O);Gs(m,ae)}),m.onDisconnect_=wo(),ha(m.eventQueue_,or(),I)}(m)}function Yl(m,c,u){const I=new lr("/.info/"+c),O=ie(u);m.infoData_.updateSnapshot(I,O);const W=ln(m.infoSyncTree_,I,O);ha(m.eventQueue_,I,W)}function Pl(m){return m.nextWriteId_++}function gl(m,c,u,I,O){$t(m,"set",{path:c.toString(),value:u,priority:I});const W=Ko(m),ae=ie(u,I),Ie=na(m.serverSyncTree_,c),qe=Ma(ae,Ie,W),ut=Pl(m),cn=We(m.serverSyncTree_,c,qe,ut,!0);Ac(m.eventQueue_,cn),m.server_.put(c.toString(),ae.val(!0),(En,hi)=>{const $i="ok"===En;$i||Qn("set at "+c+" failed: "+En);const qr=on(m.serverSyncTree_,ut,!$i);ha(m.eventQueue_,c,qr),Sn(0,O,En,hi)});const fn=_c(m,c);Gs(m,fn),ha(m.eventQueue_,fn,[])}function qc(m,c,u){m.server_.onDisconnectCancel(c.toString(),(I,O)=>{"ok"===I&&Zs(m.onDisconnect_,c),Sn(0,u,I,O)})}function Ql(m,c,u,I){const O=ie(u);m.server_.onDisconnectPut(c.toString(),O.val(!0),(W,ae)=>{"ok"===W&&Co(m.onDisconnect_,c,O),Sn(0,I,W,ae)})}function K(m,c,u){let I;I=".info"===_i(c._path)?ur(m.infoSyncTree_,c,u):ur(m.serverSyncTree_,c,u),zc(m.eventQueue_,c._path,I)}function we(m){m.persistentConnection_&&m.persistentConnection_.interrupt(ra)}function $t(m,...c){let u="";m.persistentConnection_&&(u=m.persistentConnection_.id+":"),bn(u,...c)}function Sn(m,c,u,I){c&&Vi(()=>{if("ok"===u)c(null);else{const O=(u||"error").toUpperCase();let W=O;I&&(W+=": "+I);const ae=new Error(W);ae.code=O,c(ae)}})}function Ri(m,c,u){return na(m.serverSyncTree_,c,u)||ai.EMPTY_NODE}function Er(m,c=m.transactionQueueTree_){if(c||Ir(m,c),Rl(c)){const u=Zc(m,c);(0,z.hu)(u.length>0,"Sending zero length transaction queue"),u.every(O=>0===O.status)&&function yo(m,c,u){const I=u.map(ut=>ut.currentWriteId),O=Ri(m,c,I);let W=O;const ae=O.hash();for(let ut=0;ut<u.length;ut++){const cn=u[ut];(0,z.hu)(0===cn.status,"tryToSendTransactionQueue_: items in queue should all be run."),cn.status=1,cn.retryCount++;const fn=nr(c,cn.path);W=W.updateChild(fn,cn.currentOutputSnapshotRaw)}const Ie=W.val(!0),qe=c;m.server_.put(qe.toString(),Ie,ut=>{$t(m,"transaction put response",{path:qe.toString(),status:ut});let cn=[];if("ok"===ut){const fn=[];for(let En=0;En<u.length;En++)u[En].status=2,cn=cn.concat(on(m.serverSyncTree_,u[En].currentWriteId)),u[En].onComplete&&fn.push(()=>u[En].onComplete(null,!0,u[En].currentOutputSnapshotResolved)),u[En].unwatcher();Ir(m,sl(m.transactionQueueTree_,c)),Er(m,m.transactionQueueTree_),ha(m.eventQueue_,c,cn);for(let En=0;En<fn.length;En++)Vi(fn[En])}else{if("datastale"===ut)for(let fn=0;fn<u.length;fn++)u[fn].status=3===u[fn].status?4:0;else{Qn("transaction at "+qe.toString()+" failed: "+ut);for(let fn=0;fn<u.length;fn++)u[fn].status=4,u[fn].abortReason=ut}Gs(m,c)}},ae)}(m,fc(c),u)}else Sc(c)&&ql(c,u=>{Er(m,u)})}function Gs(m,c){const u=kl(m,c),I=fc(u);return function Ol(m,c,u){if(0===c.length)return;const I=[];let O=[];const ae=c.filter(Ie=>0===Ie.status).map(Ie=>Ie.currentWriteId);for(let Ie=0;Ie<c.length;Ie++){const qe=c[Ie],ut=nr(u,qe.path);let fn,cn=!1;if((0,z.hu)(null!==ut,"rerunTransactionsUnderNode_: relativePath should not be null."),4===qe.status)cn=!0,fn=qe.abortReason,O=O.concat(on(m.serverSyncTree_,qe.currentWriteId,!0));else if(0===qe.status)if(qe.retryCount>=lc)cn=!0,fn="maxretry",O=O.concat(on(m.serverSyncTree_,qe.currentWriteId,!0));else{const En=Ri(m,qe.path,ae);qe.currentInputSnapshot=En;const hi=c[Ie].update(En.val());if(void 0!==hi){Tl("transaction failed: Data returned ",hi,qe.path);let $i=ie(hi);"object"==typeof hi&&null!=hi&&(0,z.r3)(hi,".priority")||($i=$i.updatePriority(En.getPriority()));const Sa=qe.currentWriteId,wc=Ko(m),Ll=Ma($i,En,wc);qe.currentOutputSnapshotRaw=$i,qe.currentOutputSnapshotResolved=Ll,qe.currentWriteId=Pl(m),ae.splice(ae.indexOf(Sa),1),O=O.concat(We(m.serverSyncTree_,qe.path,Ll,qe.currentWriteId,qe.applyLocally)),O=O.concat(on(m.serverSyncTree_,Sa,!0))}else cn=!0,fn="nodata",O=O.concat(on(m.serverSyncTree_,qe.currentWriteId,!0))}ha(m.eventQueue_,u,O),O=[],cn&&(c[Ie].status=2,setTimeout(c[Ie].unwatcher,Math.floor(0)),c[Ie].onComplete&&I.push("nodata"===fn?()=>c[Ie].onComplete(null,!1,c[Ie].currentInputSnapshot):()=>c[Ie].onComplete(new Error(fn),!1,null)))}Ir(m,m.transactionQueueTree_);for(let Ie=0;Ie<I.length;Ie++)Vi(I[Ie]);Er(m,m.transactionQueueTree_)}(m,Zc(m,u),I),I}function kl(m,c){let u,I=m.transactionQueueTree_;for(u=_i(c);null!==u&&void 0===Rl(I);)I=sl(I,u),u=_i(c=Xn(c));return I}function Zc(m,c){const u=[];return Yc(m,c,u),u.sort((I,O)=>I.order-O.order),u}function Yc(m,c,u){const I=Rl(c);if(I)for(let O=0;O<I.length;O++)u.push(I[O]);ql(c,O=>{Yc(m,O,u)})}function Ir(m,c){const u=Rl(c);if(u){let I=0;for(let O=0;O<u.length;O++)2!==u[O].status&&(u[I]=u[O],I++);u.length=I,Dc(c,u.length>0?u:void 0)}ql(c,I=>{Ir(m,I)})}function _c(m,c){const u=fc(kl(m,c)),I=sl(m.transactionQueueTree_,c);return function ml(m,c,u){let I=u?m:m.parent;for(;null!==I;){if(c(I))return!0;I=I.parent}}(I,O=>{ll(m,O)}),ll(m,I),$s(I,O=>{ll(m,O)}),u}function ll(m,c){const u=Rl(c);if(u){const I=[];let O=[],W=-1;for(let ae=0;ae<u.length;ae++)3===u[ae].status||(1===u[ae].status?((0,z.hu)(W===ae-1,"All SENT items should be at beginning of queue."),W=ae,u[ae].status=3,u[ae].abortReason="set"):((0,z.hu)(0===u[ae].status,"Unexpected transaction status in abort"),u[ae].unwatcher(),O=O.concat(on(m.serverSyncTree_,u[ae].currentWriteId,!0)),u[ae].onComplete&&I.push(u[ae].onComplete.bind(null,new Error("set"),!1,null))));-1===W?Dc(c,void 0):u.length=W+1,ha(m.eventQueue_,fc(c),O);for(let ae=0;ae<I.length;ae++)Vi(I[ae])}}const _l=function(m,c){const u=Dl(m),I=u.namespace;return"firebase.com"===u.domain&&Bn(u.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!I||"undefined"===I)&&"localhost"!==u.domain&&Bn("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),u.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Qn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new it(u.host,u.secure,I,"ws"===u.scheme||"wss"===u.scheme,c,"",I!==u.subdomain),path:new lr(u.pathString)}},Dl=function(m){let c="",u="",I="",O="",W="",ae=!0,Ie="https",qe=443;if("string"==typeof m){let ut=m.indexOf("//");ut>=0&&(Ie=m.substring(0,ut-1),m=m.substring(ut+2));let cn=m.indexOf("/");-1===cn&&(cn=m.length);let fn=m.indexOf("?");-1===fn&&(fn=m.length),c=m.substring(0,Math.min(cn,fn)),cn<fn&&(O=function yc(m){let c="";const u=m.split("/");for(let I=0;I<u.length;I++)if(u[I].length>0){let O=u[I];try{O=decodeURIComponent(O.replace(/\+/g," "))}catch{}c+="/"+O}return c}(m.substring(cn,fn)));const En=function Rc(m){const c={};"?"===m.charAt(0)&&(m=m.substring(1));for(const u of m.split("&")){if(0===u.length)continue;const I=u.split("=");2===I.length?c[decodeURIComponent(I[0])]=decodeURIComponent(I[1]):Qn(`Invalid query segment '${u}' in query '${m}'`)}return c}(m.substring(Math.min(m.length,fn)));ut=c.indexOf(":"),ut>=0?(ae="https"===Ie||"wss"===Ie,qe=parseInt(c.substring(ut+1),10)):ut=c.length;const hi=c.slice(0,ut);if("localhost"===hi.toLowerCase())u="localhost";else if(hi.split(".").length<=2)u=hi;else{const $i=c.indexOf(".");I=c.substring(0,$i).toLowerCase(),u=c.substring($i+1),W=I}"ns"in En&&(W=En.ns)}return{host:c,port:qe,domain:u,subdomain:I,secure:ae,scheme:Ie,pathString:O,namespace:W}},mu="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Qc=function(){let m=0;const c=[];return function(u){const I=u===m;let O;m=u;const W=new Array(8);for(O=7;O>=0;O--)W[O]=mu.charAt(u%64),u=Math.floor(u/64);(0,z.hu)(0===u,"Cannot push at time == 0");let ae=W.join("");if(I){for(O=11;O>=0&&63===c[O];O--)c[O]=0;c[O]++}else for(O=0;O<12;O++)c[O]=Math.floor(64*Math.random());for(O=0;O<12;O++)ae+=mu.charAt(c[O]);return(0,z.hu)(20===ae.length,"nextPushId: Length should be 20."),ae}}();class cc{constructor(c,u,I,O){this.eventType=c,this.eventRegistration=u,this.snapshot=I,this.prevName=O}getPath(){const c=this.snapshot.ref;return"value"===this.eventType?c._path:c.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,z.Wl)(this.snapshot.exportVal())}}class yl{constructor(c,u,I){this.eventRegistration=c,this.error=u,this.path=I}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class U{constructor(c,u){this.snapshotCallback=c,this.cancelCallback=u}onValue(c,u){this.snapshotCallback.call(null,c,u)}onCancel(c){return(0,z.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,c)}get hasCancelCallback(){return!!this.cancelCallback}matches(c){return this.snapshotCallback===c.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===c.snapshotCallback.userCallback&&this.snapshotCallback.context===c.snapshotCallback.context}}class b{constructor(c,u){this._repo=c,this._path=u}cancel(){const c=new z.BH;return qc(this._repo,this._path,c.wrapCallback(()=>{})),c.promise}remove(){Ka("OnDisconnect.remove",this._path);const c=new z.BH;return Ql(this._repo,this._path,null,c.wrapCallback(()=>{})),c.promise}set(c){Ka("OnDisconnect.set",this._path),Ha("OnDisconnect.set",c,this._path,!1);const u=new z.BH;return Ql(this._repo,this._path,c,u.wrapCallback(()=>{})),u.promise}setWithPriority(c,u){Ka("OnDisconnect.setWithPriority",this._path),Ha("OnDisconnect.setWithPriority",c,this._path,!1),Ra("OnDisconnect.setWithPriority",u,!1);const I=new z.BH;return function B(m,c,u,I,O){const W=ie(u,I);m.server_.onDisconnectPut(c.toString(),W.val(!0),(ae,Ie)=>{"ok"===ae&&Co(m.onDisconnect_,c,W),Sn(0,O,ae,Ie)})}(this._repo,this._path,c,u,I.wrapCallback(()=>{})),I.promise}update(c){Ka("OnDisconnect.update",this._path),Hc("OnDisconnect.update",c,this._path,!1);const u=new z.BH;return function w(m,c,u,I){if((0,z.xb)(u))return bn("onDisconnect().update() called with empty data.  Don't do anything."),void Sn(0,I,"ok",void 0);m.server_.onDisconnectMerge(c.toString(),u,(O,W)=>{"ok"===O&&Gn(u,(ae,Ie)=>{const qe=ie(Ie);Co(m.onDisconnect_,vr(c,ae),qe)}),Sn(0,I,O,W)})}(this._repo,this._path,c,u.wrapCallback(()=>{})),u.promise}}class D{constructor(c,u,I,O){this._repo=c,this._path=u,this._queryParams=I,this._orderByCalled=O}get key(){return Ti(this._path)?null:cr(this._path)}get ref(){return new Ct(this._repo,this._path)}get _queryIdentifier(){const c=Os(this._queryParams),u=Ji(c);return"{}"===u?"default":u}get _queryObject(){return Os(this._queryParams)}isEqual(c){if(!((c=(0,z.m9)(c))instanceof D))return!1;const u=this._repo===c._repo,I=Us(this._path,c._path);return u&&I&&this._queryIdentifier===c._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function xo(m){let c="";for(let u=m.pieceNum_;u<m.pieces_.length;u++)""!==m.pieces_[u]&&(c+="/"+encodeURIComponent(String(m.pieces_[u])));return c||"/"}(this._path)}}function V(m,c){if(!0===m._orderByCalled)throw new Error(c+": You can't combine multiple orderBy calls.")}function he(m){let c=null,u=null;if(m.hasStart()&&(c=m.getIndexStartValue()),m.hasEnd()&&(u=m.getIndexEndValue()),m.getIndex()===Bs){const I="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",O="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(m.hasStart()){if(m.getIndexStartName()!==ii)throw new Error(I);if("string"!=typeof c)throw new Error(O)}if(m.hasEnd()){if(m.getIndexEndName()!==Ai)throw new Error(I);if("string"!=typeof u)throw new Error(O)}}else if(m.getIndex()===Bi){if(null!=c&&!Cl(c)||null!=u&&!Cl(u))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,z.hu)(m.getIndex()instanceof ee||m.getIndex()===De,"unknown index type."),null!=c&&"object"==typeof c||null!=u&&"object"==typeof u)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Re(m){if(m.hasStart()&&m.hasEnd()&&m.hasLimit()&&!m.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Ct extends D{constructor(c,u){super(c,u,new es,!1)}get parent(){const c=ar(this._path);return null===c?null:new Ct(this._repo,c)}get root(){let c=this;for(;null!==c.parent;)c=c.parent;return c}}class Qt{constructor(c,u,I){this._node=c,this.ref=u,this._index=I}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(c){const u=new lr(c),I=jn(this.ref,c);return new Qt(this._node.getChild(u),I,Bi)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(c){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(I,O)=>c(new Qt(O,jn(this.ref,I),Bi)))}hasChild(c){const u=new lr(c);return!this._node.getChild(u).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Ln(m,c){return(m=(0,z.m9)(m))._checkNotDeleted("ref"),void 0!==c?jn(m._root,c):m._root}function ei(m,c){(m=(0,z.m9)(m))._checkNotDeleted("refFromURL");const u=_l(c,m._repo.repoInfo_.nodeAdmin);jc("refFromURL",u);const I=u.repoInfo;return!m._repo.repoInfo_.isCustomHost()&&I.host!==m._repo.repoInfo_.host&&Bn("refFromURL: Host name does not match the current database: (found "+I.host+" but expected "+m._repo.repoInfo_.host+")"),Ln(m,u.path.toString())}function jn(m,c){return null===_i((m=(0,z.m9)(m))._path)?fu("child","path",c,!1):mc("child","path",c,!1),new Ct(m._repo,vr(m._path,c))}function uc(m,c){m=(0,z.m9)(m),Ka("set",m._path),Ha("set",c,m._path,!1);const u=new z.BH;return gl(m._repo,m._path,c,null,u.wrapCallback(()=>{})),u.promise}function vc(m,c){Hc("update",c,m._path,!1);const u=new z.BH;return function Pa(m,c,u,I){$t(m,"update",{path:c.toString(),value:u});let O=!0;const W=Ko(m),ae={};if(Gn(u,(Ie,qe)=>{O=!1,ae[Ie]=Ml(vr(c,Ie),ie(qe),m.serverSyncTree_,W)}),O)bn("update() called with empty data.  Don't do anything."),Sn(0,I,"ok",void 0);else{const Ie=Pl(m),qe=function mt(m,c,u,I){!function fr(m,c,u,I){(0,z.hu)(I>m.lastWriteId,"Stacking an older merge on top of newer ones"),m.allWrites.push({path:c,children:u,writeId:I,visible:!0}),m.visibleWrites=Ve(m.visibleWrites,c,u),m.lastWriteId=I}(m.pendingWriteTree_,c,u,I);const O=te.fromObject(u);return Ss(m,new $o({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},c,O))}(m.serverSyncTree_,c,ae,Ie);Ac(m.eventQueue_,qe),m.server_.merge(c.toString(),u,(ut,cn)=>{const fn="ok"===ut;fn||Qn("update at "+c+" failed: "+ut);const En=on(m.serverSyncTree_,Ie,!fn),hi=En.length>0?Gs(m,c):c;ha(m.eventQueue_,hi,En),Sn(0,I,ut,cn)}),Gn(u,ut=>{const cn=_c(m,vr(c,ut));Gs(m,cn)}),ha(m.eventQueue_,c,[])}}(m._repo,m._path,c,u.wrapCallback(()=>{})),u.promise}function Oc(m){m=(0,z.m9)(m);const c=new U(()=>{}),u=new Oa(c);return function Wc(m,c,u){const I=function Aa(m,c){const u=c._path;let I=null;m.syncPointTree_.foreachOnPath(u,(ut,cn)=>{const fn=nr(ut,u);I=I||Ds(cn,fn)});let O=m.syncPointTree_.get(u);O?I=I||Ds(O,or()):(O=new hl,m.syncPointTree_=m.syncPointTree_.set(u,O));const W=null!=I,ae=W?new Do(I,!0,!1):null;return function xa(m){return gt(m.viewCache_)}(fl(O,c,Rn(m.pendingWriteTree_,c._path),W?ae.getNode():ai.EMPTY_NODE,W))}(m.serverSyncTree_,c);return null!=I?Promise.resolve(I):m.server_.get(c).then(O=>{const W=ie(O).withIndex(c._queryParams.getIndex());let ae;if(Ys(m.serverSyncTree_,c,u,!0),c._queryParams.loadsAllData())ae=ln(m.serverSyncTree_,c._path,W);else{const Ie=Ca(m.serverSyncTree_,c);ae=wa(m.serverSyncTree_,c._path,W,Ie)}return ha(m.eventQueue_,c._path,ae),ur(m.serverSyncTree_,c,u,null,!0),W},O=>($t(m,"get for query "+(0,z.Wl)(c)+" failed: "+O),Promise.reject(new Error(O))))}(m._repo,m,u).then(I=>new Qt(I,new Ct(m._repo,m._path),m._queryParams.getIndex()))}class Oa{constructor(c){this.callbackContext=c}respondsTo(c){return"value"===c}createEvent(c,u){const I=u._queryParams.getIndex();return new cc("value",this,new Qt(c.snapshotNode,new Ct(u._repo,u._path),I))}getEventRunner(c){return"cancel"===c.getEventType()?()=>this.callbackContext.onCancel(c.error):()=>this.callbackContext.onValue(c.snapshot,null)}createCancelEvent(c,u){return this.callbackContext.hasCancelCallback?new yl(this,c,u):null}matches(c){return c instanceof Oa&&(!c.callbackContext||!this.callbackContext||c.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class Xc{constructor(c,u){this.eventType=c,this.callbackContext=u}respondsTo(c){let u="children_added"===c?"child_added":c;return u="children_removed"===u?"child_removed":u,this.eventType===u}createCancelEvent(c,u){return this.callbackContext.hasCancelCallback?new yl(this,c,u):null}createEvent(c,u){(0,z.hu)(null!=c.childName,"Child events should have a childName.");const I=jn(new Ct(u._repo,u._path),c.childName),O=u._queryParams.getIndex();return new cc(c.type,this,new Qt(c.snapshotNode,I,O),c.prevName)}getEventRunner(c){return"cancel"===c.getEventType()?()=>this.callbackContext.onCancel(c.error):()=>this.callbackContext.onValue(c.snapshot,c.prevName)}matches(c){return c instanceof Xc&&this.eventType===c.eventType&&(!this.callbackContext||!c.callbackContext||this.callbackContext.matches(c.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function Ta(m,c,u,I,O){let W;if("object"==typeof I&&(W=void 0,O=I),"function"==typeof I&&(W=I),O&&O.onlyOnce){const qe=u,ut=(cn,fn)=>{K(m._repo,m,Ie),qe(cn,fn)};ut.userCallback=u.userCallback,ut.context=u.context,u=ut}const ae=new U(u,W||void 0),Ie="value"===c?new Oa(ae):new Xc(c,ae);return function M(m,c,u){let I;I=".info"===_i(c._path)?Ys(m.infoSyncTree_,c,u):Ys(m.serverSyncTree_,c,u),zc(m.eventQueue_,c._path,I)}(m._repo,m,Ie),()=>K(m._repo,m,Ie)}function ec(m,c,u,I){return Ta(m,"value",c,u,I)}function tc(m,c,u,I){return Ta(m,"child_added",c,u,I)}function ru(m,c,u,I){return Ta(m,"child_changed",c,u,I)}function Nl(m,c,u,I){return Ta(m,"child_moved",c,u,I)}function bc(m,c,u,I){return Ta(m,"child_removed",c,u,I)}function kc(m,c,u){let I=null;const O=u?new U(u):null;"value"===c?I=new Oa(O):c&&(I=new Xc(c,O)),K(m._repo,m,I)}class nc{}class Ju extends nc{constructor(c,u){super(),this._value=c,this._key=u}_apply(c){Ha("endAt",this._value,c._path,!0);const u=Ro(c._queryParams,this._value,this._key);if(Re(u),he(u),c._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new D(c._repo,c._path,u,c._orderByCalled)}}class Ld extends nc{constructor(c,u){super(),this._value=c,this._key=u}_apply(c){Ha("endBefore",this._value,c._path,!1);const u=function la(m,c,u){let I;return I=Ro(m,c,m.index_===Bs||u?u:ii),I.endBeforeSet_=!0,I}(c._queryParams,this._value,this._key);if(Re(u),he(u),c._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new D(c._repo,c._path,u,c._orderByCalled)}}class ws extends nc{constructor(c,u){super(),this._value=c,this._key=u}_apply(c){Ha("startAt",this._value,c._path,!0);const u=_a(c._queryParams,this._value,this._key);if(Re(u),he(u),c._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new D(c._repo,c._path,u,c._orderByCalled)}}class gu extends nc{constructor(c,u){super(),this._value=c,this._key=u}_apply(c){Ha("startAfter",this._value,c._path,!1);const u=function Yo(m,c,u){let I;return I=_a(m,c,m.index_===Bs||u?u:Ai),I.startAfterSet_=!0,I}(c._queryParams,this._value,this._key);if(Re(u),he(u),c._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new D(c._repo,c._path,u,c._orderByCalled)}}class ou extends nc{constructor(c){super(),this._limit=c}_apply(c){if(c._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new D(c._repo,c._path,function aa(m,c){const u=m.copy();return u.limitSet_=!0,u.limit_=c,u.viewFrom_="l",u}(c._queryParams,this._limit),c._orderByCalled)}}class _u extends nc{constructor(c){super(),this._limit=c}_apply(c){if(c._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new D(c._repo,c._path,function to(m,c){const u=m.copy();return u.limitSet_=!0,u.limit_=c,u.viewFrom_="r",u}(c._queryParams,this._limit),c._orderByCalled)}}class yu extends nc{constructor(c){super(),this._path=c}_apply(c){V(c,"orderByChild");const u=new lr(this._path);if(Ti(u))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const I=new ee(u),O=ca(c._queryParams,I);return he(O),new D(c._repo,c._path,O,!0)}}class bd extends nc{_apply(c){V(c,"orderByKey");const u=ca(c._queryParams,Bs);return he(u),new D(c._repo,c._path,u,!0)}}class ed extends nc{_apply(c){V(c,"orderByPriority");const u=ca(c._queryParams,Bi);return he(u),new D(c._repo,c._path,u,!0)}}class vu extends nc{_apply(c){V(c,"orderByValue");const u=ca(c._queryParams,De);return he(u),new D(c._repo,c._path,u,!0)}}class Sh extends nc{constructor(c,u){super(),this._value=c,this._key=u}_apply(c){if(Ha("equalTo",this._value,c._path,!1),c._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(c._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new Ju(this._value,this._key)._apply(new ws(this._value,this._key)._apply(c))}}function y(m,...c){let u=(0,z.m9)(m);for(const I of c)u=I._apply(u);return u}(function $l(m){(0,z.hu)(!Il,"__referenceConstructor has already been defined"),Il=m})(Ct),function T(m){(0,z.hu)(!h,"__referenceConstructor has already been defined"),h=m}(Ct);const E="FIREBASE_DATABASE_EMULATOR_HOST",F={};let le=!1;function At(m,c,u,I,O){let W=I||m.options.databaseURL;void 0===W&&(m.options.projectId||Bn("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),bn("Using default host for project ",m.options.projectId),W=`${m.options.projectId}-default-rtdb.firebaseio.com`);let qe,ut,ae=_l(W,O),Ie=ae.repoInfo;typeof process<"u"&&process.env&&(ut=process.env[E]),ut?(qe=!0,W=`http://${ut}?ns=${Ie.namespace}`,ae=_l(W,O),Ie=ae.repoInfo):qe=!ae.repoInfo.secure;const cn=O&&qe?new $n($n.OWNER):new $r(m.name,m.options,c);jc("Invalid Firebase Database URL",ae),Ti(ae.path)||Bn("Database URL must point to the root of a Firebase Database (not including a child path).");const fn=function Fn(m,c,u,I){let O=F[c.name];O||(O={},F[c.name]=O);let W=O[m.toURLString()];return W&&Bn("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),W=new gc(m,le,u,I),O[m.toURLString()]=W,W}(Ie,m,cn,new Fi(m.name,u));return new Wi(fn,m)}class Wi{constructor(c,u){this._repoInternal=c,this.app=u,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function $c(m,c,u){if(m.stats_=Fe(m.repoInfo_),m.forceRestClient_||gr())m.server_=new No(m.repoInfo_,(I,O,W,ae)=>{Zl(m,I,O,W,ae)},m.authTokenProvider_,m.appCheckProvider_),setTimeout(()=>al(m,!0),0);else{if(typeof u<"u"&&null!==u){if("object"!=typeof u)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,z.Wl)(u)}catch(I){throw new Error("Invalid authOverride provided: "+I)}}m.persistentConnection_=new kr(m.repoInfo_,c,(I,O,W,ae)=>{Zl(m,I,O,W,ae)},I=>{al(m,I)},I=>{!function Gc(m,c){Gn(c,(u,I)=>{Yl(m,u,I)})}(m,I)},m.authTokenProvider_,m.appCheckProvider_,u),m.server_=m.persistentConnection_}m.authTokenProvider_.addTokenChangeListener(I=>{m.server_.refreshAuthToken(I)}),m.appCheckProvider_.addTokenChangeListener(I=>{m.server_.refreshAppCheckToken(I.token)}),m.statsReporter_=function ht(m,c){const u=m.toString();return ot[u]||(ot[u]=c()),ot[u]}(m.repoInfo_,()=>new El(m.stats_,m.server_)),m.infoData_=new Ho,m.infoSyncTree_=new ce({startListening:(I,O,W,ae)=>{let Ie=[];const qe=m.infoData_.getNode(I._path);return qe.isEmpty()||(Ie=ln(m.infoSyncTree_,I._path,qe),setTimeout(()=>{ae("ok")},0)),Ie},stopListening:()=>{}}),Yl(m,"connected",!1),m.serverSyncTree_=new ce({startListening:(I,O,W,ae)=>(m.server_.listen(I,W,O,(Ie,qe)=>{const ut=ae(Ie,qe);ha(m.eventQueue_,I._path,ut)}),[]),stopListening:(I,O)=>{m.server_.unlisten(I,O)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Ct(this._repo,or())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function hn(m,c){const u=F[c];(!u||u[m.key]!==m)&&Bn(`Database ${c}(${m.repoInfo_}) has already been deleted.`),we(m),delete u[m.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(c){null===this._rootInternal&&Bn("Cannot call "+c+" on a deleted database.")}}function ki(){Kt.IS_TRANSPORT_INITIALIZED&&Qn("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function Da(){ki(),wr.forceDisallow()}function Fl(){ki(),vt.forceDisallow(),wr.forceAllow()}function bu(m,c){sn(m,c)}const Bd={".sv":"timestamp"};class Hd{constructor(c,u){this.committed=c,this.snapshot=u}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}kr.prototype.simpleListen=function(m,c){this.sendRequest("q",{p:m},c)},kr.prototype.echo=function(m,c){this.sendRequest("echo",{d:m},c)},function Ou(m){vn(Ye.SDK_VERSION),(0,Ye._registerComponent)(new lt.wA("database",(c,{instanceIdentifier:u})=>At(c.getProvider("app").getImmediate(),c.getProvider("auth-internal"),c.getProvider("app-check-internal"),u),"PUBLIC").setMultipleInstances(!0)),(0,Ye.registerVersion)(bt,"0.14.4",m),(0,Ye.registerVersion)(bt,"0.14.4","esm2017")}();const Nu=new ct.Yd("@firebase/database-compat"),Id=function(m){Nu.warn("FIREBASE WARNING: "+m)};class Eu{constructor(c){this._delegate=c}cancel(c){(0,z.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,z.Wj)("OnDisconnect.cancel","onComplete",c,!0);const u=this._delegate.cancel();return c&&u.then(()=>c(null),I=>c(I)),u}remove(c){(0,z.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,z.Wj)("OnDisconnect.remove","onComplete",c,!0);const u=this._delegate.remove();return c&&u.then(()=>c(null),I=>c(I)),u}set(c,u){(0,z.Dv)("OnDisconnect.set",1,2,arguments.length),(0,z.Wj)("OnDisconnect.set","onComplete",u,!0);const I=this._delegate.set(c);return u&&I.then(()=>u(null),O=>u(O)),I}setWithPriority(c,u,I){(0,z.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,z.Wj)("OnDisconnect.setWithPriority","onComplete",I,!0);const O=this._delegate.setWithPriority(c,u);return I&&O.then(()=>I(null),W=>I(W)),O}update(c,u){if((0,z.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(c)){const O={};for(let W=0;W<c.length;++W)O[""+W]=c[W];c=O,Id("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,z.Wj)("OnDisconnect.update","onComplete",u,!0);const I=this._delegate.update(c);return u&&I.then(()=>u(null),O=>u(O)),I}}class If{constructor(c,u){this.committed=c,this.snapshot=u}toJSON(){return(0,z.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class eu{constructor(c,u){this._database=c,this._delegate=u}val(){return(0,z.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,z.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,z.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,z.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(c){return(0,z.Dv)("DataSnapshot.child",0,1,arguments.length),c=String(c),mc("DataSnapshot.child","path",c,!1),new eu(this._database,this._delegate.child(c))}hasChild(c){return(0,z.Dv)("DataSnapshot.hasChild",1,1,arguments.length),mc("DataSnapshot.hasChild","path",c,!1),this._delegate.hasChild(c)}getPriority(){return(0,z.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(c){return(0,z.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,z.Wj)("DataSnapshot.forEach","action",c,!1),this._delegate.forEach(u=>c(new eu(this._database,u)))}hasChildren(){return(0,z.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,z.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,z.Dv)("DataSnapshot.ref",0,0,arguments.length),new Sl(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class tl{constructor(c,u){this.database=c,this._delegate=u}on(c,u,I,O){var W;(0,z.Dv)("Query.on",2,4,arguments.length),(0,z.Wj)("Query.on","callback",u,!1);const ae=tl.getCancelAndContextArgs_("Query.on",I,O),Ie=(ut,cn)=>{u.call(ae.context,new eu(this.database,ut),cn)};Ie.userCallback=u,Ie.context=ae.context;const qe=null===(W=ae.cancel)||void 0===W?void 0:W.bind(ae.context);switch(c){case"value":return ec(this._delegate,Ie,qe),u;case"child_added":return tc(this._delegate,Ie,qe),u;case"child_removed":return bc(this._delegate,Ie,qe),u;case"child_changed":return ru(this._delegate,Ie,qe),u;case"child_moved":return Nl(this._delegate,Ie,qe),u;default:throw new Error((0,z.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(c,u,I){if((0,z.Dv)("Query.off",0,3,arguments.length),function(m,c,u){if(void 0!==c)switch(c){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,z.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,c),(0,z.Wj)("Query.off","callback",u,!0),(0,z.lb)("Query.off","context",I,!0),u){const O=()=>{};O.userCallback=u,O.context=I,kc(this._delegate,c,O)}else kc(this._delegate,c)}get(){return Oc(this._delegate).then(c=>new eu(this.database,c))}once(c,u,I,O){(0,z.Dv)("Query.once",1,4,arguments.length),(0,z.Wj)("Query.once","callback",u,!0);const W=tl.getCancelAndContextArgs_("Query.once",I,O),ae=new z.BH,Ie=(ut,cn)=>{const fn=new eu(this.database,ut);u&&u.call(W.context,fn,cn),ae.resolve(fn)};Ie.userCallback=u,Ie.context=W.context;const qe=ut=>{W.cancel&&W.cancel.call(W.context,ut),ae.reject(ut)};switch(c){case"value":ec(this._delegate,Ie,qe,{onlyOnce:!0});break;case"child_added":tc(this._delegate,Ie,qe,{onlyOnce:!0});break;case"child_removed":bc(this._delegate,Ie,qe,{onlyOnce:!0});break;case"child_changed":ru(this._delegate,Ie,qe,{onlyOnce:!0});break;case"child_moved":Nl(this._delegate,Ie,qe,{onlyOnce:!0});break;default:throw new Error((0,z.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return ae.promise}limitToFirst(c){return(0,z.Dv)("Query.limitToFirst",1,1,arguments.length),new tl(this.database,y(this._delegate,function Jc(m){if("number"!=typeof m||Math.floor(m)!==m||m<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new ou(m)}(c)))}limitToLast(c){return(0,z.Dv)("Query.limitToLast",1,1,arguments.length),new tl(this.database,y(this._delegate,function Za(m){if("number"!=typeof m||Math.floor(m)!==m||m<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new _u(m)}(c)))}orderByChild(c){return(0,z.Dv)("Query.orderByChild",1,1,arguments.length),new tl(this.database,y(this._delegate,function vd(m){if("$key"===m)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===m)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===m)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return mc("orderByChild","path",m,!1),new yu(m)}(c)))}orderByKey(){return(0,z.Dv)("Query.orderByKey",0,0,arguments.length),new tl(this.database,y(this._delegate,function Th(){return new bd}()))}orderByPriority(){return(0,z.Dv)("Query.orderByPriority",0,0,arguments.length),new tl(this.database,y(this._delegate,function Ec(){return new ed}()))}orderByValue(){return(0,z.Dv)("Query.orderByValue",0,0,arguments.length),new tl(this.database,y(this._delegate,function Dh(){return new vu}()))}startAt(c=null,u){return(0,z.Dv)("Query.startAt",0,2,arguments.length),new tl(this.database,y(this._delegate,function yd(m=null,c){return xc("startAt","key",c,!0),new ws(m,c)}(c,u)))}startAfter(c=null,u){return(0,z.Dv)("Query.startAfter",0,2,arguments.length),new tl(this.database,y(this._delegate,function qa(m,c){return xc("startAfter","key",c,!0),new gu(m,c)}(c,u)))}endAt(c=null,u){return(0,z.Dv)("Query.endAt",0,2,arguments.length),new tl(this.database,y(this._delegate,function su(m,c){return xc("endAt","key",c,!0),new Ju(m,c)}(c,u)))}endBefore(c=null,u){return(0,z.Dv)("Query.endBefore",0,2,arguments.length),new tl(this.database,y(this._delegate,function pa(m,c){return xc("endBefore","key",c,!0),new Ld(m,c)}(c,u)))}equalTo(c,u){return(0,z.Dv)("Query.equalTo",1,2,arguments.length),new tl(this.database,y(this._delegate,function A(m,c){return xc("equalTo","key",c,!0),new Sh(m,c)}(c,u)))}toString(){return(0,z.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,z.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(c){if((0,z.Dv)("Query.isEqual",1,1,arguments.length),!(c instanceof tl))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(c._delegate)}static getCancelAndContextArgs_(c,u,I){const O={cancel:void 0,context:void 0};if(u&&I)O.cancel=u,(0,z.Wj)(c,"cancel",O.cancel,!0),O.context=I,(0,z.lb)(c,"context",O.context,!0);else if(u)if("object"==typeof u&&null!==u)O.context=u;else{if("function"!=typeof u)throw new Error((0,z.gK)(c,"cancelOrContext")+" must either be a cancel callback or a context object.");O.cancel=u}return O}get ref(){return new Sl(this.database,new Ct(this._delegate._repo,this._delegate._path))}}class Sl extends tl{constructor(c,u){super(c,new D(u._repo,u._path,new es,!1)),this.database=c,this._delegate=u}getKey(){return(0,z.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(c){return(0,z.Dv)("Reference.child",1,1,arguments.length),"number"==typeof c&&(c=String(c)),new Sl(this.database,jn(this._delegate,c))}getParent(){(0,z.Dv)("Reference.parent",0,0,arguments.length);const c=this._delegate.parent;return c?new Sl(this.database,c):null}getRoot(){return(0,z.Dv)("Reference.root",0,0,arguments.length),new Sl(this.database,this._delegate.root)}set(c,u){(0,z.Dv)("Reference.set",1,2,arguments.length),(0,z.Wj)("Reference.set","onComplete",u,!0);const I=uc(this._delegate,c);return u&&I.then(()=>u(null),O=>u(O)),I}update(c,u){if((0,z.Dv)("Reference.update",1,2,arguments.length),Array.isArray(c)){const O={};for(let W=0;W<c.length;++W)O[""+W]=c[W];c=O,Id("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Ka("Reference.update",this._delegate._path),(0,z.Wj)("Reference.update","onComplete",u,!0);const I=vc(this._delegate,c);return u&&I.then(()=>u(null),O=>u(O)),I}setWithPriority(c,u,I){(0,z.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,z.Wj)("Reference.setWithPriority","onComplete",I,!0);const O=function Pc(m,c,u){if(Ka("setWithPriority",m._path),Ha("setWithPriority",c,m._path,!1),Ra("setWithPriority",u,!1),".length"===m.key||".keys"===m.key)throw"setWithPriority failed: "+m.key+" is a read-only object.";const I=new z.BH;return gl(m._repo,m._path,c,u,I.wrapCallback(()=>{})),I.promise}(this._delegate,c,u);return I&&O.then(()=>I(null),W=>I(W)),O}remove(c){(0,z.Dv)("Reference.remove",0,1,arguments.length),(0,z.Wj)("Reference.remove","onComplete",c,!0);const u=function Xl(m){return Ka("remove",m._path),uc(m,null)}(this._delegate);return c&&u.then(()=>c(null),I=>c(I)),u}transaction(c,u,I){(0,z.Dv)("Reference.transaction",1,3,arguments.length),(0,z.Wj)("Reference.transaction","transactionUpdate",c,!1),(0,z.Wj)("Reference.transaction","onComplete",u,!0),function(m,c,u,I){if(void 0!==u&&"boolean"!=typeof u)throw new Error((0,z.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,I);const O=function jd(m,c,u){var I;if(m=(0,z.m9)(m),Ka("Reference.transaction",m._path),".length"===m.key||".keys"===m.key)throw"Reference.transaction failed: "+m.key+" is a read-only object.";const O=null===(I=u?.applyLocally)||void 0===I||I,W=new z.BH,Ie=ec(m,()=>{});return function Zn(m,c,u,I,O,W){$t(m,"transaction on "+c);const ae={path:c,update:u,onComplete:I,status:null,order:Ut(),applyLocally:W,retryCount:0,unwatcher:O,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},Ie=Ri(m,c,void 0);ae.currentInputSnapshot=Ie;const qe=ae.update(Ie.val());if(void 0===qe)ae.unwatcher(),ae.currentOutputSnapshotRaw=null,ae.currentOutputSnapshotResolved=null,ae.onComplete&&ae.onComplete(null,!1,ae.currentInputSnapshot);else{Tl("transaction failed: Data returned ",qe,ae.path),ae.status=0;const ut=sl(m.transactionQueueTree_,c),cn=Rl(ut)||[];let fn;cn.push(ae),Dc(ut,cn),"object"==typeof qe&&null!==qe&&(0,z.r3)(qe,".priority")?(fn=(0,z.DV)(qe,".priority"),(0,z.hu)(Cl(fn),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):fn=(na(m.serverSyncTree_,c)||ai.EMPTY_NODE).getPriority().val();const En=Ko(m),hi=ie(qe,fn),$i=Ma(hi,Ie,En);ae.currentOutputSnapshotRaw=hi,ae.currentOutputSnapshotResolved=$i,ae.currentWriteId=Pl(m);const qr=We(m.serverSyncTree_,c,$i,ae.currentWriteId,ae.applyLocally);ha(m.eventQueue_,c,qr),Er(m,m.transactionQueueTree_)}}(m._repo,m._path,c,(qe,ut,cn)=>{let fn=null;qe?W.reject(qe):(fn=new Qt(cn,new Ct(m._repo,m._path),Bi),W.resolve(new Hd(ut,fn)))},Ie,O),W.promise}(this._delegate,c,{applyLocally:I}).then(W=>new If(W.committed,new eu(this.database,W.snapshot)));return u&&O.then(W=>u(null,W.committed,W.snapshot),W=>u(W,!1,null)),O}setPriority(c,u){(0,z.Dv)("Reference.setPriority",1,2,arguments.length),(0,z.Wj)("Reference.setPriority","onComplete",u,!0);const I=function Jl(m,c){m=(0,z.m9)(m),Ka("setPriority",m._path),Ra("setPriority",c,!1);const u=new z.BH;return gl(m._repo,vr(m._path,".priority"),c,null,u.wrapCallback(()=>{})),u.promise}(this._delegate,c);return u&&I.then(()=>u(null),O=>u(O)),I}push(c,u){(0,z.Dv)("Reference.push",0,2,arguments.length),(0,z.Wj)("Reference.push","onComplete",u,!0);const I=function fa(m,c){m=(0,z.m9)(m),Ka("push",m._path),Ha("push",c,m._path,!0);const u=sa(m._repo),I=Qc(u),O=jn(m,I),W=jn(m,I);let ae;return ae=null!=c?uc(W,c).then(()=>W):Promise.resolve(W),O.then=ae.then.bind(ae),O.catch=ae.then.bind(ae,void 0),O}(this._delegate,c),O=I.then(ae=>new Sl(this.database,ae));u&&O.then(()=>u(null),ae=>u(ae));const W=new Sl(this.database,I);return W.then=O.then.bind(O),W.catch=O.catch.bind(O,void 0),W}onDisconnect(){return Ka("Reference.onDisconnect",this._delegate._path),new Eu(new b(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class Fc{constructor(c,u){this._delegate=c,this.app=u,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:Da,forceLongPolling:Fl}}useEmulator(c,u,I={}){!function Ud(m,c,u,I={}){(m=(0,z.m9)(m))._checkNotDeleted("useEmulator"),m._instanceStarted&&Bn("Cannot call useEmulator() after instance has already been initialized.");const O=m._repoInternal;let W;if(O.repoInfo_.nodeAdmin)I.mockUserToken&&Bn('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),W=new $n($n.OWNER);else if(I.mockUserToken){const ae="string"==typeof I.mockUserToken?I.mockUserToken:(0,z.Sg)(I.mockUserToken,m.app.options.projectId);W=new $n(ae)}!function Se(m,c,u,I){m.repoInfo_=new it(`${c}:${u}`,!1,m.repoInfo_.namespace,m.repoInfo_.webSocketOnly,m.repoInfo_.nodeAdmin,m.repoInfo_.persistenceKey,m.repoInfo_.includeNamespaceInQueryParams,!0),I&&(m.authTokenProvider_=I)}(O,c,u,W)}(this._delegate,c,u,I)}ref(c){if((0,z.Dv)("database.ref",0,1,arguments.length),c instanceof Sl){const u=ei(this._delegate,c.toString());return new Sl(this,u)}{const u=Ln(this._delegate,c);return new Sl(this,u)}}refFromURL(c){(0,z.Dv)("database.refFromURL",1,1,arguments.length);const I=ei(this._delegate,c);return new Sl(this,I)}goOffline(){return(0,z.Dv)("database.goOffline",0,0,arguments.length),function Vd(m){(m=(0,z.m9)(m))._checkNotDeleted("goOffline"),we(m._repo)}(this._delegate)}goOnline(){return(0,z.Dv)("database.goOnline",0,0,arguments.length),function Pu(m){(m=(0,z.m9)(m))._checkNotDeleted("goOnline"),function je(m){m.persistentConnection_&&m.persistentConnection_.resume(ra)}(m._repo)}(this._delegate)}}Fc.ServerValue={TIMESTAMP:function Ed(){return Bd}(),increment:m=>function ku(m){return{".sv":{increment:m}}}(m)};var Lu=Object.freeze({__proto__:null,initStandalone:function Fu({app:m,url:c,version:u,customAuthImpl:I,namespace:O,nodeAdmin:W=!1}){vn(u);const ae=new lt.zt("auth-internal",new lt.H0("database-standalone"));return ae.setComponent(new lt.wA("auth-internal",()=>I,"PRIVATE")),{instance:new Fc(At(m,ae,void 0,c,W),m),namespace:O}}});const td=Fc.ServerValue;!function fp(m){m.INTERNAL.registerComponent(new lt.wA("database-compat",(c,{instanceIdentifier:u})=>{const I=c.getProvider("app-compat").getImmediate(),O=c.getProvider("database").getImmediate({identifier:u});return new Fc(O,I)},"PUBLIC").setServiceProps({Reference:Sl,Query:tl,Database:Fc,DataSnapshot:eu,enableLogging:bu,INTERNAL:Lu,ServerValue:td}).setMultipleInstances(!0)),m.registerVersion("@firebase/database-compat","0.3.4")}(Ue.Z);var au=L(1205),Uu=L(2313),$d=L(9260);function Gd(m){return null==m}function Cf(m){return"function"==typeof m.set}function wd(m,c){return Cf(c)?c:m.ref(c)}function Vu(m,c){if(function xh(m){return"string"==typeof m}(m))return c.stringCase();if(Cf(m))return c.firebaseCase();if(function wf(m){return"function"==typeof m.exportVal}(m))return c.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof m)}function Ic(m,c,u="on",I=_.z){return new re.y(O=>{let W=null;return W=m[u](c,(ae,Ie)=>{I.schedule(()=>{O.next({snapshot:ae,prevKey:Ie})}),"once"===u&&I.schedule(()=>O.complete())},ae=>{I.schedule(()=>O.error(ae))}),"on"===u?{unsubscribe(){null!=W&&m.off(c,W)}}:{unsubscribe(){}}}).pipe((0,He.U)(O=>{const{snapshot:W,prevKey:ae}=O;let Ie=null;return W.exists()&&(Ie=W.key),{type:c,payload:W,prevKey:ae,key:Ie}}),(0,Ze.B)())}function Tf(m,c){const u=m.length;for(let I=0;I<u;I++)if(m[I].payload.key===c)return I;return-1}function pp(m,c){const{payload:u,prevKey:I,key:O}=c,W=Tf(m,O),ae=function Mh(m,c){if(Gd(c))return 0;{const u=Tf(m,c);return-1===u?m.length:u+1}}(m,I);switch(c.type){case"value":if(c.payload&&c.payload.exists()){let Ie=null;c.payload.forEach(qe=>{const ut={payload:qe,type:"value",prevKey:Ie,key:qe.key};return Ie=qe.key,m=[...m,ut],!1})}return m;case"child_added":if(W>-1){const Ie=m[W-1];(Ie&&Ie.key||null)!==I&&(m=m.filter(qe=>qe.payload.key!==u.key)).splice(ae,0,c)}else{if(null==I)return[c,...m];(m=m.slice()).splice(ae,0,c)}return m;case"child_removed":return m.filter(Ie=>Ie.payload.key!==u.key);case"child_changed":return m.map(Ie=>Ie.payload.key===O?c:Ie);case"child_moved":if(W>-1){const Ie=m.splice(W,1)[0];return(m=m.slice()).splice(ae,0,Ie),m}return m;default:return m}}function Wd(m){return(Gd(m)||0===m.length)&&(m=["child_added","child_removed","child_changed","child_moved"]),m}function Bu(m,c,u){return function Ah(m,c,u){return Ic(m,"value","once",u).pipe((0,xe.w)(I=>{const O=[(0,Te.of)(I)];return c.forEach(W=>O.push(Ic(m,W,"on",u))),(0,ke.T)(...O).pipe((0,ze.R)(pp,[]))}),(0,pe.x)())}(m,c=Wd(c),u)}function lu(m,c,u){const I=(c=Wd(c)).map(O=>Ic(m,O,"on",u));return(0,ke.T)(...I)}function nd(m,c){return function(I,O){return Vu(I,{stringCase:()=>m.child(I)[c](O),firebaseCase:()=>I[c](O),snapshotCase:()=>I.ref[c](O)})}}function mp(m){return function(u){return u?Vu(u,{stringCase:()=>m.child(u).remove(),firebaseCase:()=>u.remove(),snapshotCase:()=>u.ref.remove()}):m.remove()}}function Hu(m,c){return function(){return Ic(m,"value","on",c)}}const Kd=new f.OlP("angularfire2.realtimeDatabaseURL"),Td=new f.OlP("angularfire2.database.use-emulator");let Sf=(()=>{class m{constructor(u,I,O,W,ae,Ie,qe,ut,cn,fn,En,hi,$i,qr,Sa){this.schedulers=Ie;const wc=qe,Ll=(0,_t.on)(u,ae,I);ut&&(0,au.nw)(Ll,ae,cn,En,hi,$i,fn,qr),this.database=(0,_t.cc)(`${Ll.name}.database.${O}`,"AngularFireDatabase",Ll.name,()=>{const id=ae.runOutsideAngular(()=>Ll.database(O||void 0));return wc&&id.useEmulator(...wc),id},[wc])}list(u,I){const O=this.schedulers.ngZone.runOutsideAngular(()=>wd(this.database,u));let W=O;return I&&(W=I(O)),function Cd(m,c){const u=c.schedulers.outsideAngular,I=c.schedulers.ngZone.run(()=>m.ref);return{query:m,update:nd(I,"update"),set:nd(I,"set"),push:O=>I.push(O),remove:mp(I),snapshotChanges:O=>Bu(m,O,u).pipe(Ae.iC),stateChanges:O=>lu(m,O,u).pipe(Ae.iC),auditTrail:O=>function ic(m,c,u){return function Rh(m,c,u){return function Df(m,c){return Ic(m,"value","on",c).pipe((0,He.U)(u=>{let I;return u.payload.forEach(O=>(I=O.key,!1)),{data:u,lastKeyToLoad:I}}))}(m,u).pipe(function It(...m){const c=(0,an.jO)(m);return(0,Me.e)((u,I)=>{const O=m.length,W=new Array(O);let ae=m.map(()=>!1),Ie=!1;for(let qe=0;qe<O;qe++)(0,yt.Xf)(m[qe]).subscribe((0,Ne.x)(I,ut=>{W[qe]=ut,!Ie&&!ae[qe]&&(ae[qe]=!0,(Ie=ae.every(pt.y))&&(ae=null))},Lt.Z));u.subscribe((0,Ne.x)(I,qe=>{if(Ie){const ut=[qe,...W];I.next(c?c(...ut):ut)}}))})}(c),(0,He.U)(([O,W])=>{const ae=O.lastKeyToLoad,Ie=W.map(qe=>qe.key);return{actions:W,lastKeyToLoad:ae,loadedKeys:Ie}}),function Mt(m){return(0,Me.e)((c,u)=>{let I=!1,O=0;c.subscribe((0,Ne.x)(u,W=>(I||(I=!m(W,O++)))&&u.next(W)))})}(O=>-1===O.loadedKeys.indexOf(O.lastKeyToLoad)),(0,He.U)(O=>O.actions))}(m,lu(m,c).pipe((0,ze.R)((O,W)=>[...O,W],[])),u)}(m,O,u).pipe(Ae.iC),valueChanges:(O,W)=>Bu(m,O,u).pipe((0,He.U)(Ie=>Ie.map(qe=>W&&W.idField?Object.assign(Object.assign({},qe.payload.val()),{[W.idField]:qe.key}):qe.payload.val())),Ae.iC)}}(W,this)}object(u){return function Iu(m,c){return{query:m,snapshotChanges:()=>Hu(m,c.schedulers.outsideAngular)().pipe(Ae.iC),update:u=>m.ref.update(u),set:u=>m.ref.set(u),remove:()=>m.ref.remove(),valueChanges:()=>Hu(m,c.schedulers.outsideAngular)().pipe(Ae.iC,(0,He.U)(I=>I.payload.exists()?I.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>wd(this.database,u)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return m.\u0275fac=function(u){return new(u||m)(f.LFG(_t.Dh),f.LFG(_t.xv,8),f.LFG(Kd,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(Ae.HU),f.LFG(Td,8),f.LFG(au.zQ,8),f.LFG(au.Qv,8),f.LFG(au.L6,8),f.LFG(au._Q,8),f.LFG(au.rT,8),f.LFG(au.lh,8),f.LFG(au.f7,8),f.LFG(Uu.nm,8))},m.\u0275prov=f.Yz7({token:m,factory:m.\u0275fac,providedIn:"any"}),m})(),qd=(()=>{class m{constructor(){$d.Z.registerVersion("angularfire",Ae.q4.full,"rtdb-compat")}}return m.\u0275fac=function(u){return new(u||m)},m.\u0275mod=f.oAB({type:m}),m.\u0275inj=f.cJS({providers:[Sf]}),m})()},7977:(wn,dt,L)=>{L.d(dt,{ST:()=>Oi});var f=L(4650),_=L(4986),re=L(9751),Te=L(8996),ke=L(9646),He=L(2122),Ze=L(8675),xe=L(4482),ze=L(5403);function pe(){return(0,xe.e)((be,$)=>{let ne,de=!1;be.subscribe((0,ze.x)($,ye=>{const rt=ne;ne=ye,de&&$.next([rt,ye]),de=!0}))})}var Me=L(4004),Ne=L(5026),yt=L(1884),pt=L(9300),Lt=L(2011),an=L(6895),Mt=(L(1848),L(3942)),Ae=L(5525),_t=L(2090),Qe=L(4859);function kt(be,$){if(void 0===$)return{merge:!1};if(void 0!==$.mergeFields&&void 0!==$.merge)throw new Ae.WA("invalid-argument",`Invalid options passed to function ${be}(): You cannot specify both "merge" and "mergeFields".`);return $}function Ye(){if(typeof Uint8Array>"u")throw new Ae.WA("unimplemented","Uint8Arrays are not available in this environment.")}function z(){if(!(0,Ae.Me)())throw new Ae.WA("unimplemented","Blobs are unavailable in Firestore in this environment.")}class ct{constructor($){this._delegate=$}static fromBase64String($){return z(),new ct(Ae.Jj.fromBase64String($))}static fromUint8Array($){return Ye(),new ct(Ae.Jj.fromUint8Array($))}toBase64(){return z(),this._delegate.toBase64()}toUint8Array(){return Ye(),this._delegate.toUint8Array()}isEqual($){return this._delegate.isEqual($._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function bt(be){return function Ft(be,$){if("object"!=typeof be||null===be)return!1;const ne=be;for(const de of $)if(de in ne&&"function"==typeof ne[de])return!0;return!1}(be,["next","error","complete"])}class gn{enableIndexedDbPersistence($,ne){return(0,Ae.ST)($._delegate,{forceOwnership:ne})}enableMultiTabIndexedDbPersistence($){return(0,Ae.fH)($._delegate)}clearIndexedDbPersistence($){return(0,Ae.Fc)($._delegate)}}class vn{constructor($,ne,de){this._delegate=ne,this._persistenceProvider=de,this.INTERNAL={delete:()=>this.terminate()},$ instanceof Ae.l7||(this._appCompat=$)}get _databaseId(){return this._delegate._databaseId}settings($){const ne=this._delegate._getSettings();!$.merge&&ne.host!==$.host&&(0,Ae.yq)("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),$.merge&&delete($=Object.assign(Object.assign({},ne),$)).merge,this._delegate._setSettings($)}useEmulator($,ne,de={}){(0,Ae.at)(this._delegate,$,ne,de)}enableNetwork(){return(0,Ae.Ix)(this._delegate)}disableNetwork(){return(0,Ae.TF)(this._delegate)}enablePersistence($){let ne=!1,de=!1;return $&&(ne=!!$.synchronizeTabs,de=!!$.experimentalForceOwningTab,(0,Ae.Wi)("synchronizeTabs",ne,"experimentalForceOwningTab",de)),ne?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,de)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return(0,Ae.Mx)(this._delegate)}onSnapshotsInSync($){return(0,Ae.sc)(this._delegate,$)}get app(){if(!this._appCompat)throw new Ae.WA("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection($){try{return new ui(this,(0,Ae.hJ)(this._delegate,$))}catch(ne){throw Ut(ne,"collection()","Firestore.collection()")}}doc($){try{return new Tt(this,(0,Ae.JU)(this._delegate,$))}catch(ne){throw Ut(ne,"doc()","Firestore.doc()")}}collectionGroup($){try{return new sn(this,(0,Ae.B$)(this._delegate,$))}catch(ne){throw Ut(ne,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction($){return(0,Ae.i3)(this._delegate,ne=>$(new Ot(this,ne)))}batch(){return(0,Ae.qY)(this._delegate),new jt(new Ae.PU(this._delegate,$=>(0,Ae.GL)(this._delegate,$)))}loadBundle($){return(0,Ae.Pb)(this._delegate,$)}namedQuery($){return(0,Ae.L$)(this._delegate,$).then(ne=>ne?new sn(this,ne):null)}}class Pt extends Ae.u7{constructor($){super(),this.firestore=$}convertBytes($){return new ct(new Ae.Jj($))}convertReference($){const ne=this.convertDocumentKey($,this.firestore._databaseId);return Tt.forKey(ne,this.firestore,null)}}class Ot{constructor($,ne){this._firestore=$,this._delegate=ne,this._userDataWriter=new Pt($)}get($){const ne=Bn($);return this._delegate.get(ne).then(de=>new Zt(this._firestore,new Ae.xU(this._firestore._delegate,this._userDataWriter,de._key,de._document,de.metadata,ne.converter)))}set($,ne,de){const ye=Bn($);return de?(kt("Transaction.set",de),this._delegate.set(ye,ne,de)):this._delegate.set(ye,ne),this}update($,ne,de,...ye){const rt=Bn($);return 2===arguments.length?this._delegate.update(rt,ne):this._delegate.update(rt,ne,de,...ye),this}delete($){const ne=Bn($);return this._delegate.delete(ne),this}}class jt{constructor($){this._delegate=$}set($,ne,de){const ye=Bn($);return de?(kt("WriteBatch.set",de),this._delegate.set(ye,ne,de)):this._delegate.set(ye,ne),this}update($,ne,de,...ye){const rt=Bn($);return 2===arguments.length?this._delegate.update(rt,ne):this._delegate.update(rt,ne,de,...ye),this}delete($){const ne=Bn($);return this._delegate.delete(ne),this}commit(){return this._delegate.commit()}}class Gt{constructor($,ne,de){this._firestore=$,this._userDataWriter=ne,this._delegate=de}fromFirestore($,ne){const de=new Ae.$q(this._firestore._delegate,this._userDataWriter,$._key,$._document,$.metadata,null);return this._delegate.fromFirestore(new _n(this._firestore,de),ne??{})}toFirestore($,ne){return ne?this._delegate.toFirestore($,ne):this._delegate.toFirestore($)}static getInstance($,ne){const de=Gt.INSTANCES;let ye=de.get($);ye||(ye=new WeakMap,de.set($,ye));let rt=ye.get(ne);return rt||(rt=new Gt($,new Pt($),ne),ye.set(ne,rt)),rt}}Gt.INSTANCES=new WeakMap;class Tt{constructor($,ne){this.firestore=$,this._delegate=ne,this._userDataWriter=new Pt($)}static forPath($,ne,de){if($.length%2!=0)throw new Ae.WA("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${$.canonicalString()} has ${$.length}`);return new Tt(ne,new Ae.my(ne._delegate,de,new Ae.Ky($)))}static forKey($,ne,de){return new Tt(ne,new Ae.my(ne._delegate,de,$))}get id(){return this._delegate.id}get parent(){return new ui(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection($){try{return new ui(this.firestore,(0,Ae.hJ)(this._delegate,$))}catch(ne){throw Ut(ne,"collection()","DocumentReference.collection()")}}isEqual($){return($=(0,_t.m9)($))instanceof Ae.my&&(0,Ae.Eo)(this._delegate,$)}set($,ne){ne=kt("DocumentReference.set",ne);try{return ne?(0,Ae.pl)(this._delegate,$,ne):(0,Ae.pl)(this._delegate,$)}catch(de){throw Ut(de,"setDoc()","DocumentReference.set()")}}update($,ne,...de){try{return 1===arguments.length?(0,Ae.r7)(this._delegate,$):(0,Ae.r7)(this._delegate,$,ne,...de)}catch(ye){throw Ut(ye,"updateDoc()","DocumentReference.update()")}}delete(){return(0,Ae.oe)(this._delegate)}onSnapshot(...$){const ne=Et($),de=rn($,ye=>new Zt(this.firestore,new Ae.xU(this.firestore._delegate,this._userDataWriter,ye._key,ye._document,ye.metadata,this._delegate.converter)));return(0,Ae.cf)(this._delegate,ne,de)}get($){let ne;return ne="cache"===$?.source?(0,Ae.kl)(this._delegate):"server"===$?.source?(0,Ae.Xk)(this._delegate):(0,Ae.QT)(this._delegate),ne.then(de=>new Zt(this.firestore,new Ae.xU(this.firestore._delegate,this._userDataWriter,de._key,de._document,de.metadata,this._delegate.converter)))}withConverter($){return new Tt(this.firestore,this._delegate.withConverter($?Gt.getInstance(this.firestore,$):null))}}function Ut(be,$,ne){return be.message=be.message.replace($,ne),be}function Et(be){for(const $ of be)if("object"==typeof $&&!bt($))return $;return{}}function rn(be,$){var ne,de;let ye;return ye=bt(be[0])?be[0]:bt(be[1])?be[1]:"function"==typeof be[0]?{next:be[0],error:be[1],complete:be[2]}:{next:be[1],error:be[2],complete:be[3]},{next:rt=>{ye.next&&ye.next($(rt))},error:null===(ne=ye.error)||void 0===ne?void 0:ne.bind(ye),complete:null===(de=ye.complete)||void 0===de?void 0:de.bind(ye)}}class Zt{constructor($,ne){this._firestore=$,this._delegate=ne}get ref(){return new Tt(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data($){return this._delegate.data($)}get($,ne){return this._delegate.get($,ne)}isEqual($){return(0,Ae.qK)(this._delegate,$._delegate)}}class _n extends Zt{data($){const ne=this._delegate.data($);return(0,Ae.K9)(void 0!==ne,"Document in a QueryDocumentSnapshot should exist"),ne}}class sn{constructor($,ne){this.firestore=$,this._delegate=ne,this._userDataWriter=new Pt($)}where($,ne,de){try{return new sn(this.firestore,(0,Ae.IO)(this._delegate,(0,Ae.ar)($,ne,de)))}catch(ye){throw Ut(ye,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy($,ne){try{return new sn(this.firestore,(0,Ae.IO)(this._delegate,(0,Ae.Xo)($,ne)))}catch(de){throw Ut(de,/(orderBy|where)\(\)/,"Query.$1()")}}limit($){try{return new sn(this.firestore,(0,Ae.IO)(this._delegate,(0,Ae.b9)($)))}catch(ne){throw Ut(ne,"limit()","Query.limit()")}}limitToLast($){try{return new sn(this.firestore,(0,Ae.IO)(this._delegate,(0,Ae.vh)($)))}catch(ne){throw Ut(ne,"limitToLast()","Query.limitToLast()")}}startAt(...$){try{return new sn(this.firestore,(0,Ae.IO)(this._delegate,(0,Ae.e0)(...$)))}catch(ne){throw Ut(ne,"startAt()","Query.startAt()")}}startAfter(...$){try{return new sn(this.firestore,(0,Ae.IO)(this._delegate,(0,Ae.TQ)(...$)))}catch(ne){throw Ut(ne,"startAfter()","Query.startAfter()")}}endBefore(...$){try{return new sn(this.firestore,(0,Ae.IO)(this._delegate,(0,Ae.Lx)(...$)))}catch(ne){throw Ut(ne,"endBefore()","Query.endBefore()")}}endAt(...$){try{return new sn(this.firestore,(0,Ae.IO)(this._delegate,(0,Ae.Wu)(...$)))}catch(ne){throw Ut(ne,"endAt()","Query.endAt()")}}isEqual($){return(0,Ae.iE)(this._delegate,$._delegate)}get($){let ne;return ne="cache"===$?.source?(0,Ae.UQ)(this._delegate):"server"===$?.source?(0,Ae.zN)(this._delegate):(0,Ae.PL)(this._delegate),ne.then(de=>new fi(this.firestore,new Ae.W(this.firestore._delegate,this._userDataWriter,this._delegate,de._snapshot)))}onSnapshot(...$){const ne=Et($),de=rn($,ye=>new fi(this.firestore,new Ae.W(this.firestore._delegate,this._userDataWriter,this._delegate,ye._snapshot)));return(0,Ae.cf)(this._delegate,ne,de)}withConverter($){return new sn(this.firestore,this._delegate.withConverter($?Gt.getInstance(this.firestore,$):null))}}class bn{constructor($,ne){this._firestore=$,this._delegate=ne}get type(){return this._delegate.type}get doc(){return new _n(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class fi{constructor($,ne){this._firestore=$,this._delegate=ne}get query(){return new sn(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map($=>new _n(this._firestore,$))}docChanges($){return this._delegate.docChanges($).map(ne=>new bn(this._firestore,ne))}forEach($,ne){this._delegate.forEach(de=>{$.call(ne,new _n(this._firestore,de))})}isEqual($){return(0,Ae.qK)(this._delegate,$._delegate)}}class ui extends sn{constructor($,ne){super($,ne),this.firestore=$,this._delegate=ne}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const $=this._delegate.parent;return $?new Tt(this.firestore,$):null}doc($){try{return new Tt(this.firestore,void 0===$?(0,Ae.JU)(this._delegate):(0,Ae.JU)(this._delegate,$))}catch(ne){throw Ut(ne,"doc()","CollectionReference.doc()")}}add($){return(0,Ae.ET)(this._delegate,$).then(ne=>new Tt(this.firestore,ne))}isEqual($){return(0,Ae.Eo)(this._delegate,$._delegate)}withConverter($){return new ui(this.firestore,this._delegate.withConverter($?Gt.getInstance(this.firestore,$):null))}}function Bn(be){return(0,Ae.Cf)(be,Ae.my)}class Qn{constructor(...$){this._delegate=new Ae.Lz(...$)}static documentId(){return new Qn(Ae.Xb.keyField().canonicalString())}isEqual($){return($=(0,_t.m9)($))instanceof Ae.Lz&&this._delegate._internalPath.isEqual($._internalPath)}}class oi{constructor($){this._delegate=$}static serverTimestamp(){const $=(0,Ae.Bt)();return $._methodName="FieldValue.serverTimestamp",new oi($)}static delete(){const $=(0,Ae.AK)();return $._methodName="FieldValue.delete",new oi($)}static arrayUnion(...$){const ne=(0,Ae.vr)(...$);return ne._methodName="FieldValue.arrayUnion",new oi(ne)}static arrayRemove(...$){const ne=(0,Ae.Ab)(...$);return ne._methodName="FieldValue.arrayRemove",new oi(ne)}static increment($){const ne=(0,Ae.nP)($);return ne._methodName="FieldValue.increment",new oi(ne)}isEqual($){return this._delegate.isEqual($._delegate)}}const Pi={Firestore:vn,GeoPoint:Ae.F8,Timestamp:Ae.EK,Blob:ct,Transaction:Ot,WriteBatch:jt,DocumentReference:Tt,DocumentSnapshot:Zt,Query:sn,QueryDocumentSnapshot:_n,QuerySnapshot:fi,CollectionReference:ui,FieldPath:Qn,FieldValue:oi,setLogLevel:function Ht(be){(0,Ae.Ub)(be)},CACHE_SIZE_UNLIMITED:Ae.IX};!function ii(be){(function Cr(be,$){be.INTERNAL.registerComponent(new Qe.wA("firestore-compat",ne=>{const de=ne.getProvider("app-compat").getImmediate(),ye=ne.getProvider("firestore").getImmediate();return $(de,ye)},"PUBLIC").setServiceProps(Object.assign({},Pi)))})(be,($,ne)=>new vn($,ne,new gn)),be.registerVersion("@firebase/firestore-compat","0.3.6")}(Mt.Z);var Ai=L(1205),zn=L(2313);function Ji(be,$){return function Tn(be,$=_.z){return new re.y(ne=>{let de;return null!=$?$.schedule(()=>{de=be.onSnapshot({includeMetadataChanges:!0},ne)}):de=be.onSnapshot({includeMetadataChanges:!0},ne),()=>{de?.()}})}(be,$)}function Gn(be,$){return Ji(be,$).pipe((0,Me.U)(ne=>({payload:ne,type:"query"})))}function Yi(be,$){return Gn(be,$).pipe((0,Ze.O)(void 0),pe(),(0,Me.U)(([ne,de])=>{const ye=de.payload.docChanges(),rt=ye.map(Nt=>({type:Nt.type,payload:Nt}));return ne&&JSON.stringify(ne.payload.metadata)!==JSON.stringify(de.payload.metadata)&&de.payload.docs.forEach((Nt,Le)=>{const Be=ye.find(qt=>qt.doc.ref.isEqual(Nt.ref)),it=ne?.payload.docs.find(qt=>qt.ref.isEqual(Nt.ref));Be&&JSON.stringify(Be.doc.metadata)===JSON.stringify(Nt.metadata)||!Be&&it&&JSON.stringify(it.metadata)===JSON.stringify(Nt.metadata)||rt.push({type:"modified",payload:{oldIndex:Le,newIndex:Le,type:"modified",doc:Nt}})}),rt}))}function Pr(be,$,ne){return Yi(be,ne).pipe((0,Ne.R)((de,ye)=>function Hn(be,$,ne){return $.forEach(de=>{ne.indexOf(de.type)>-1&&(be=function On(be,$){switch($.type){case"added":if(!be[$.newIndex]||!be[$.newIndex].doc.ref.isEqual($.doc.ref))return Pn(be,$.newIndex,0,$);break;case"modified":if(null==be[$.oldIndex]||be[$.oldIndex].doc.ref.isEqual($.doc.ref)){if($.oldIndex!==$.newIndex){const ne=be.slice();return ne.splice($.oldIndex,1),ne.splice($.newIndex,0,$),ne}return Pn(be,$.newIndex,1,$)}break;case"removed":if(be[$.oldIndex]&&be[$.oldIndex].doc.ref.isEqual($.doc.ref))return Pn(be,$.oldIndex,1)}return be}(be,de))}),be}(de,ye.map(rt=>rt.payload),$),[]),(0,yt.x)(),(0,Me.U)(de=>de.map(ye=>({type:ye.type,payload:ye}))))}function Pn(be,$,ne,...de){const ye=be.slice();return ye.splice($,ne,...de),ye}function Nn(be){return(!be||0===be.length)&&(be=["added","removed","modified"]),be}L(9260);class Ni{constructor($,ne,de){this.ref=$,this.query=ne,this.afs=de}stateChanges($){let ne=Yi(this.query,this.afs.schedulers.outsideAngular);return $&&$.length>0&&(ne=ne.pipe((0,Me.U)(de=>de.filter(ye=>$.indexOf(ye.type)>-1)))),ne.pipe((0,Ze.O)(void 0),pe(),(0,pt.h)(([de,ye])=>ye.length>0||!de),(0,Me.U)(([de,ye])=>ye),He.iC)}auditTrail($){return this.stateChanges($).pipe((0,Ne.R)((ne,de)=>[...ne,...de],[]))}snapshotChanges($){const ne=Nn($);return Pr(this.query,ne,this.afs.schedulers.outsideAngular).pipe(He.iC)}valueChanges($={}){return Gn(this.query,this.afs.schedulers.outsideAngular).pipe((0,Me.U)(ne=>ne.payload.docs.map(de=>$.idField?Object.assign(Object.assign({},de.data()),{[$.idField]:de.id}):de.data())),He.iC)}get($){return(0,Te.D)(this.query.get($)).pipe(He.iC)}add($){return this.ref.add($)}doc($){return new Hi(this.ref.doc($),this.afs)}}class Hi{constructor($,ne){this.ref=$,this.afs=ne}set($,ne){return this.ref.set($,ne)}update($){return this.ref.update($)}delete(){return this.ref.delete()}collection($,ne){const de=this.ref.collection($),{ref:ye,query:rt}=$n(de,ne);return new Ni(ye,rt,this.afs)}snapshotChanges(){return function ri(be,$){return Ji(be,$).pipe((0,Ze.O)(void 0),pe(),(0,Me.U)(([ne,de])=>de.exists?ne?.exists?{payload:de,type:"modified"}:{payload:de,type:"added"}:{payload:de,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(He.iC)}valueChanges($={}){return this.snapshotChanges().pipe((0,Me.U)(({payload:ne})=>$.idField?Object.assign(Object.assign({},ne.data()),{[$.idField]:ne.id}):ne.data()))}get($){return(0,Te.D)(this.ref.get($)).pipe(He.iC)}}class Vi{constructor($,ne){this.query=$,this.afs=ne}stateChanges($){return $&&0!==$.length?Yi(this.query,this.afs.schedulers.outsideAngular).pipe((0,Me.U)(ne=>ne.filter(de=>$.indexOf(de.type)>-1)),(0,pt.h)(ne=>ne.length>0),He.iC):Yi(this.query,this.afs.schedulers.outsideAngular).pipe(He.iC)}auditTrail($){return this.stateChanges($).pipe((0,Ne.R)((ne,de)=>[...ne,...de],[]))}snapshotChanges($){const ne=Nn($);return Pr(this.query,ne,this.afs.schedulers.outsideAngular).pipe(He.iC)}valueChanges($={}){return Gn(this.query,this.afs.schedulers.outsideAngular).pipe((0,Me.U)(de=>de.payload.docs.map(ye=>$.idField?Object.assign({[$.idField]:ye.id},ye.data()):ye.data())),He.iC)}get($){return(0,Te.D)(this.query.get($)).pipe(He.iC)}}const gr=new f.OlP("angularfire2.enableFirestorePersistence"),er=new f.OlP("angularfire2.firestore.persistenceSettings"),Fi=new f.OlP("angularfire2.firestore.settings"),$r=new f.OlP("angularfire2.firestore.use-emulator");function $n(be,$=(ne=>ne)){return{query:$(be),ref:be}}let Oi=(()=>{class be{constructor(ne,de,ye,rt,Nt,Le,Be,it,qt,St,Mn,Je,ot,Fe,ht,Yt,un){this.schedulers=Be;const Kn=(0,Lt.on)(ne,Le,de),vi=qt;St&&(0,Ai.nw)(Kn,Le,Mn,ot,Fe,ht,Je,Yt),[this.firestore,this.persistenceEnabled$]=(0,Lt.cc)(`${Kn.name}.firestore`,"AngularFirestore",Kn.name,()=>{const yr=Le.runOutsideAngular(()=>Kn.firestore());if(rt&&yr.settings(rt),vi&&yr.useEmulator(...vi),ye&&!(0,an.PM)(Nt)){const vs=()=>{try{return(0,Te.D)(yr.enablePersistence(it||void 0).then(()=>!0,()=>!1))}catch(is){return typeof console<"u"&&console.warn(is),(0,ke.of)(!1)}};return[yr,Le.runOutsideAngular(vs)]}return[yr,(0,ke.of)(!1)]},[rt,vi,ye])}collection(ne,de){let ye;ye="string"==typeof ne?this.firestore.collection(ne):ne;const{ref:rt,query:Nt}=$n(ye,de),Le=this.schedulers.ngZone.run(()=>rt);return new Ni(Le,Nt,this)}collectionGroup(ne,de){const ye=de||(Nt=>Nt),rt=this.firestore.collectionGroup(ne);return new Vi(ye(rt),this)}doc(ne){let de;de="string"==typeof ne?this.firestore.doc(ne):ne;const ye=this.schedulers.ngZone.run(()=>de);return new Hi(ye,this)}createId(){return this.firestore.collection("_").doc().id}}return be.\u0275fac=function(ne){return new(ne||be)(f.LFG(Lt.Dh),f.LFG(Lt.xv,8),f.LFG(gr,8),f.LFG(Fi,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(He.HU),f.LFG(er,8),f.LFG($r,8),f.LFG(Ai.zQ,8),f.LFG(Ai.Qv,8),f.LFG(Ai.L6,8),f.LFG(Ai._Q,8),f.LFG(Ai.rT,8),f.LFG(Ai.lh,8),f.LFG(Ai.f7,8),f.LFG(zn.nm,8))},be.\u0275prov=f.Yz7({token:be,factory:be.\u0275fac,providedIn:"any"}),be})()},2011:(wn,dt,L)=>{L.d(dt,{Dh:()=>xe,GT:()=>He,cc:()=>pt,hO:()=>yt,on:()=>pe,pX:()=>ke,xv:()=>ze});var f=L(4650),_=L(9260),re=L(2122);wn=L.hmd(wn);const Te=["ngOnDestroy"],ke=(Mt,Ae,_t,Qe={})=>new Proxy(Mt,{get:(Ue,lt)=>_t.runOutsideAngular(()=>{var kt;if(Mt[lt])return!(null===(kt=Qe?.spy)||void 0===kt)&&kt.get&&Qe.spy.get(lt,Mt[lt]),Mt[lt];if(Te.indexOf(lt)>-1)return()=>{};const Ye=Ae.toPromise().then(z=>{const ct=z&&z[lt];return"function"==typeof ct?ct.bind(z):ct&&ct.then?ct.then(bt=>_t.run(()=>bt)):_t.run(()=>ct)});return new Proxy(()=>{},{get:(z,ct)=>Ye[ct],apply:(z,ct,bt)=>Ye.then(Ft=>{var gn;const vn=Ft&&Ft(...bt);return!(null===(gn=Qe?.spy)||void 0===gn)&&gn.apply&&Qe.spy.apply(lt,bt,vn),vn})})})}),He=(Mt,Ae)=>{Ae.forEach(_t=>{Object.getOwnPropertyNames(_t.prototype||_t).forEach(Qe=>{Object.defineProperty(Mt.prototype,Qe,Object.getOwnPropertyDescriptor(_t.prototype||_t,Qe))})})};class Ze{constructor(Ae){return Ae}}const xe=new f.OlP("angularfire2.app.options"),ze=new f.OlP("angularfire2.app.name");function pe(Mt,Ae,_t){const Ue="object"==typeof _t&&_t||{};Ue.name=Ue.name||"string"==typeof _t&&_t||"[DEFAULT]";const kt=_.Z.apps.filter(Ye=>Ye&&Ye.name===Ue.name)[0]||Ae.runOutsideAngular(()=>_.Z.initializeApp(Mt,Ue));try{JSON.stringify(Mt)!==JSON.stringify(kt.options)&&Me("error",`${kt.name} Firebase App already initialized with different options${wn.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new Ze(kt)}const Me=(Mt,...Ae)=>{(0,f.X6Q)()&&typeof console<"u"&&console[Mt](...Ae)},Ne={provide:Ze,useFactory:pe,deps:[xe,f.R0b,[new f.FiY,ze]]};let yt=(()=>{class Mt{constructor(_t){_.Z.registerVersion("angularfire",re.q4.full,"core"),_.Z.registerVersion("angularfire",re.q4.full,"app-compat"),_.Z.registerVersion("angular",f.q4F.full,_t.toString())}static initializeApp(_t,Qe){return{ngModule:Mt,providers:[{provide:xe,useValue:_t},{provide:ze,useValue:Qe}]}}}return Mt.\u0275fac=function(_t){return new(_t||Mt)(f.LFG(f.Lbi))},Mt.\u0275mod=f.oAB({type:Mt}),Mt.\u0275inj=f.cJS({providers:[Ne]}),Mt})();function pt(Mt,Ae,_t,Qe,Ue){const[,lt,kt]=globalThis.\u0275AngularfireInstanceCache.find(Ye=>Ye[0]===Mt)||[];if(lt)return function Lt(Mt,Ae){try{return Mt.toString()===Ae.toString()}catch{return Mt===Ae}}(Ue,kt)||(It("error",`${Ae} was already initialized on the ${_t} Firebase App with different settings.${an?" You may need to reload as Firebase is not HMR aware.":""}`),It("warn",{is:Ue,was:kt})),lt;{const Ye=Qe();return globalThis.\u0275AngularfireInstanceCache.push([Mt,Ye,Ue]),Ye}}const an=!!wn.hot,It=(Mt,...Ae)=>{(0,f.X6Q)()&&typeof console<"u"&&console[Mt](...Ae)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},3357:(wn,dt,L)=>{L.d(dt,{Ab:()=>un,vr:()=>Kn,ad:()=>vt,Cm:()=>Le,r7:()=>Ls});var f=L(2122),_=L(4650),re=L(3692),Te=L(259);L(8784);class xe{constructor(){return(0,f.vb)("auth")}}var Fi=L(2313),$r=L(5525);class $n{constructor(Xn){return Xn}}const Oi="firestore",$=new _.OlP("angularfire2.firestore-instances");function de(wi){return(Xn,cr)=>{const xo=Xn.runOutsideAngular(()=>wi(cr));return new $n(xo)}}const ye={provide:class dn{constructor(){return(0,f.vb)(Oi)}},deps:[[new _.FiY,$]]},rt={provide:$n,useFactory:function ne(wi,Xn){const cr=(0,f.JM)(Oi,wi,Xn);return cr&&new $n(cr)},deps:[[new _.FiY,$],re.Ot]};let Nt=(()=>{class wi{constructor(){(0,Te.KN)("angularfire",f.q4.full,"fst")}}return wi.\u0275fac=function(cr){return new(cr||wi)},wi.\u0275mod=_.oAB({type:wi}),wi.\u0275inj=_.cJS({providers:[rt,ye]}),wi})();function Le(wi,...Xn){return{ngModule:Nt,providers:[{provide:$,useFactory:de(wi),multi:!0,deps:[_.R0b,_.zs3,f.HU,re.z6,[new _.FiY,xe],[new _.FiY,Fi.nm],...Xn]}]}}const un=(0,f.u3)($r.Ab,!0),Kn=(0,f.u3)($r.vr,!0),vt=(0,f.u3)($r.ad,!0),Ls=(0,f.u3)($r.r7,!0)},2122:(wn,dt,L)=>{L.d(dt,{q4:()=>Y,iC:()=>ia,HU:()=>wa,vb:()=>Un,JM:()=>ln,u3:()=>Ca});var f=L(4650),_=L(259),re=L(5861),Te=L(9681),ke=L(2090),He=L(4859),Ze=L(1877),xe=L(8766);const ze="@firebase/installations",pe="0.6.4",Me=1e4,Ne=`w:${pe}`,yt="FIS_v2",pt="https://firebaseinstallations.googleapis.com/v1",Lt=36e5,Ae=new ke.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function _t(Z){return Z instanceof ke.ZR&&Z.code.includes("request-failed")}function Qe({projectId:Z}){return`${pt}/projects/${Z}/installations`}function Ue(Z){return{token:Z.token,requestStatus:2,expiresIn:Ft(Z.expiresIn),creationTime:Date.now()}}function lt(Z,se){return kt.apply(this,arguments)}function kt(){return(kt=(0,re.Z)(function*(Z,se){const Xe=(yield se.json()).error;return Ae.create("request-failed",{requestName:Z,serverCode:Xe.code,serverMessage:Xe.message,serverStatus:Xe.status})})).apply(this,arguments)}function Ye({apiKey:Z}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":Z})}function ct(Z){return bt.apply(this,arguments)}function bt(){return(bt=(0,re.Z)(function*(Z){const se=yield Z();return se.status>=500&&se.status<600?Z():se})).apply(this,arguments)}function Ft(Z){return Number(Z.replace("s","000"))}function Pt(){return(Pt=(0,re.Z)(function*({appConfig:Z,heartbeatServiceProvider:se},{fid:Ee}){const Xe=Qe(Z),xt=Ye(Z),zt=se.getImmediate({optional:!0});if(zt){const Ei=yield zt.getHeartbeatsHeader();Ei&&xt.append("x-firebase-client",Ei)}const Jn={method:"POST",headers:xt,body:JSON.stringify({fid:Ee,authVersion:yt,appId:Z.appId,sdkVersion:Ne})},bi=yield ct(()=>fetch(Xe,Jn));if(bi.ok){const Ei=yield bi.json();return{fid:Ei.fid||Ee,registrationStatus:2,refreshToken:Ei.refreshToken,authToken:Ue(Ei.authToken)}}throw yield lt("Create Installation",bi)})).apply(this,arguments)}function Ht(Z){return new Promise(se=>{setTimeout(se,Z)})}const jt=/^[cdef][\w-]{21}$/,Gt="";function Tt(){try{const Z=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(Z),Z[0]=112+Z[0]%16;const Ee=function Ut(Z){return function Ot(Z){return btoa(String.fromCharCode(...Z)).replace(/\+/g,"-").replace(/\//g,"_")}(Z).substr(0,22)}(Z);return jt.test(Ee)?Ee:Gt}catch{return Gt}}function Et(Z){return`${Z.appName}!${Z.appId}`}const rn=new Map;function Zt(Z,se){const Ee=Et(Z);bn(Ee,se),function fi(Z,se){const Ee=function Bn(){return!ui&&"BroadcastChannel"in self&&(ui=new BroadcastChannel("[Firebase] FID Change"),ui.onmessage=Z=>{bn(Z.data.key,Z.data.fid)}),ui}();Ee&&Ee.postMessage({key:Z,fid:se}),function Qn(){0===rn.size&&ui&&(ui.close(),ui=null)}()}(Ee,se)}function bn(Z,se){const Ee=rn.get(Z);if(Ee)for(const Xe of Ee)Xe(se)}let ui=null;const oi="firebase-installations-database",Pi=1,Cr="firebase-installations-store";let ii=null;function Ai(){return ii||(ii=(0,xe.X3)(oi,Pi,{upgrade:(Z,se)=>{0===se&&Z.createObjectStore(Cr)}})),ii}function zn(Z,se){return Mi.apply(this,arguments)}function Mi(){return(Mi=(0,re.Z)(function*(Z,se){const Ee=Et(Z),xt=(yield Ai()).transaction(Cr,"readwrite"),zt=xt.objectStore(Cr),Cn=yield zt.get(Ee);return yield zt.put(se,Ee),yield xt.done,(!Cn||Cn.fid!==se.fid)&&Zt(Z,se.fid),se})).apply(this,arguments)}function Tn(Z){return Ji.apply(this,arguments)}function Ji(){return(Ji=(0,re.Z)(function*(Z){const se=Et(Z),Xe=(yield Ai()).transaction(Cr,"readwrite");yield Xe.objectStore(Cr).delete(se),yield Xe.done})).apply(this,arguments)}function ri(Z,se){return Gn.apply(this,arguments)}function Gn(){return(Gn=(0,re.Z)(function*(Z,se){const Ee=Et(Z),xt=(yield Ai()).transaction(Cr,"readwrite"),zt=xt.objectStore(Cr),Cn=yield zt.get(Ee),Jn=se(Cn);return void 0===Jn?yield zt.delete(Ee):yield zt.put(Jn,Ee),yield xt.done,Jn&&(!Cn||Cn.fid!==Jn.fid)&&Zt(Z,Jn.fid),Jn})).apply(this,arguments)}function Yi(Z){return Pr.apply(this,arguments)}function Pr(){return Pr=(0,re.Z)(function*(Z){let se;const Ee=yield ri(Z.appConfig,Xe=>{const xt=function Hn(Z){return gr(Z||{fid:Tt(),registrationStatus:0})}(Xe),zt=function Pn(Z,se){if(0===se.registrationStatus){if(!navigator.onLine)return{installationEntry:se,registrationPromise:Promise.reject(Ae.create("app-offline"))};const Ee={fid:se.fid,registrationStatus:1,registrationTime:Date.now()},Xe=function On(Z,se){return Nn.apply(this,arguments)}(Z,Ee);return{installationEntry:Ee,registrationPromise:Xe}}return 1===se.registrationStatus?{installationEntry:se,registrationPromise:Ni(Z)}:{installationEntry:se}}(Z,xt);return se=zt.registrationPromise,zt.installationEntry});return Ee.fid===Gt?{installationEntry:yield se}:{installationEntry:Ee,registrationPromise:se}}),Pr.apply(this,arguments)}function Nn(){return Nn=(0,re.Z)(function*(Z,se){try{const Ee=yield function vn(Z,se){return Pt.apply(this,arguments)}(Z,se);return zn(Z.appConfig,Ee)}catch(Ee){throw _t(Ee)&&409===Ee.customData.serverCode?yield Tn(Z.appConfig):yield zn(Z.appConfig,{fid:se.fid,registrationStatus:0}),Ee}}),Nn.apply(this,arguments)}function Ni(Z){return Hi.apply(this,arguments)}function Hi(){return(Hi=(0,re.Z)(function*(Z){let se=yield Vi(Z.appConfig);for(;1===se.registrationStatus;)yield Ht(100),se=yield Vi(Z.appConfig);if(0===se.registrationStatus){const{installationEntry:Ee,registrationPromise:Xe}=yield Yi(Z);return Xe||Ee}return se})).apply(this,arguments)}function Vi(Z){return ri(Z,se=>{if(!se)throw Ae.create("installation-not-found");return gr(se)})}function gr(Z){return function er(Z){return 1===Z.registrationStatus&&Z.registrationTime+Me<Date.now()}(Z)?{fid:Z.fid,registrationStatus:0}:Z}function $r(){return($r=(0,re.Z)(function*({appConfig:Z,heartbeatServiceProvider:se},Ee){const Xe=function $n(Z,{fid:se}){return`${Qe(Z)}/${se}/authTokens:generate`}(Z,Ee),xt=function z(Z,{refreshToken:se}){const Ee=Ye(Z);return Ee.append("Authorization",function gn(Z){return`${yt} ${Z}`}(se)),Ee}(Z,Ee),zt=se.getImmediate({optional:!0});if(zt){const Ei=yield zt.getHeartbeatsHeader();Ei&&xt.append("x-firebase-client",Ei)}const Jn={method:"POST",headers:xt,body:JSON.stringify({installation:{sdkVersion:Ne,appId:Z.appId}})},bi=yield ct(()=>fetch(Xe,Jn));if(bi.ok)return Ue(yield bi.json());throw yield lt("Generate Auth Token",bi)})).apply(this,arguments)}function Oi(Z){return dn.apply(this,arguments)}function dn(){return dn=(0,re.Z)(function*(Z,se=!1){let Ee;const Xe=yield ri(Z.appConfig,zt=>{if(!rt(zt))throw Ae.create("not-registered");const Cn=zt.authToken;if(!se&&function Nt(Z){return 2===Z.requestStatus&&!function Le(Z){const se=Date.now();return se<Z.creationTime||Z.creationTime+Z.expiresIn<se+Lt}(Z)}(Cn))return zt;if(1===Cn.requestStatus)return Ee=function be(Z,se){return $.apply(this,arguments)}(Z,se),zt;{if(!navigator.onLine)throw Ae.create("app-offline");const Jn=function Be(Z){const se={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},Z),{authToken:se})}(zt);return Ee=function de(Z,se){return ye.apply(this,arguments)}(Z,Jn),Jn}});return Ee?yield Ee:Xe.authToken}),dn.apply(this,arguments)}function $(){return($=(0,re.Z)(function*(Z,se){let Ee=yield ne(Z.appConfig);for(;1===Ee.authToken.requestStatus;)yield Ht(100),Ee=yield ne(Z.appConfig);const Xe=Ee.authToken;return 0===Xe.requestStatus?Oi(Z,se):Xe})).apply(this,arguments)}function ne(Z){return ri(Z,se=>{if(!rt(se))throw Ae.create("not-registered");return function it(Z){return 1===Z.requestStatus&&Z.requestTime+Me<Date.now()}(se.authToken)?Object.assign(Object.assign({},se),{authToken:{requestStatus:0}}):se})}function ye(){return ye=(0,re.Z)(function*(Z,se){try{const Ee=yield function Fi(Z,se){return $r.apply(this,arguments)}(Z,se),Xe=Object.assign(Object.assign({},se),{authToken:Ee});return yield zn(Z.appConfig,Xe),Ee}catch(Ee){if(!_t(Ee)||401!==Ee.customData.serverCode&&404!==Ee.customData.serverCode){const Xe=Object.assign(Object.assign({},se),{authToken:{requestStatus:0}});yield zn(Z.appConfig,Xe)}else yield Tn(Z.appConfig);throw Ee}}),ye.apply(this,arguments)}function rt(Z){return void 0!==Z&&2===Z.registrationStatus}function St(){return(St=(0,re.Z)(function*(Z){const se=Z,{installationEntry:Ee,registrationPromise:Xe}=yield Yi(se);return Xe?Xe.catch(console.error):Oi(se).catch(console.error),Ee.fid})).apply(this,arguments)}function Je(){return Je=(0,re.Z)(function*(Z,se=!1){const Ee=Z;return yield function ot(Z){return Fe.apply(this,arguments)}(Ee),(yield Oi(Ee,se)).token}),Je.apply(this,arguments)}function Fe(){return(Fe=(0,re.Z)(function*(Z){const{registrationPromise:se}=yield Yi(Z);se&&(yield se)})).apply(this,arguments)}function Gr(Z){return Ae.create("missing-app-config-values",{valueName:Z})}const os="installations",ji=Z=>{const se=Z.getProvider("app").getImmediate(),Ee=function is(Z){if(!Z||!Z.options)throw Gr("App Configuration");if(!Z.name)throw Gr("App Name");const se=["projectId","apiKey","appId"];for(const Ee of se)if(!Z.options[Ee])throw Gr(Ee);return{appName:Z.name,projectId:Z.options.projectId,apiKey:Z.options.apiKey,appId:Z.options.appId}}(se);return{app:se,appConfig:Ee,heartbeatServiceProvider:(0,Te._getProvider)(se,"heartbeat"),_delete:()=>Promise.resolve()}},Cs=Z=>{const se=Z.getProvider("app").getImmediate(),Ee=(0,Te._getProvider)(se,os).getImmediate();return{getId:()=>function qt(Z){return St.apply(this,arguments)}(Ee),getToken:xt=>function Mn(Z){return Je.apply(this,arguments)}(Ee,xt)}};(function rs(){(0,Te._registerComponent)(new He.wA(os,ji,"PUBLIC")),(0,Te._registerComponent)(new He.wA("installations-internal",Cs,"PRIVATE"))})(),(0,Te.registerVersion)(ze,pe),(0,Te.registerVersion)(ze,pe,"esm2017");const Qi="@firebase/remote-config",wr=new ke.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Qs{constructor(se,Ee,Xe,xt){this.client=se,this.storage=Ee,this.storageCache=Xe,this.logger=xt}isCachedDataFresh(se,Ee){if(!Ee)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const Xe=Date.now()-Ee,xt=Xe<=se;return this.logger.debug(`Config fetch cache check. Cache age millis: ${Xe}. Cache max age millis (minimumFetchIntervalMillis setting): ${se}. Is cache hit: ${xt}.`),xt}fetch(se){var Ee=this;return(0,re.Z)(function*(){const[Xe,xt]=yield Promise.all([Ee.storage.getLastSuccessfulFetchTimestampMillis(),Ee.storage.getLastSuccessfulFetchResponse()]);if(xt&&Ee.isCachedDataFresh(se.cacheMaxAgeMillis,Xe))return xt;se.eTag=xt&&xt.eTag;const zt=yield Ee.client.fetch(se),Cn=[Ee.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===zt.status&&Cn.push(Ee.storage.setLastSuccessfulFetchResponse(zt)),yield Promise.all(Cn),zt})()}}function bs(Z=navigator){return Z.languages&&Z.languages[0]||Z.language}class Vr{constructor(se,Ee,Xe,xt,zt,Cn){this.firebaseInstallations=se,this.sdkVersion=Ee,this.namespace=Xe,this.projectId=xt,this.apiKey=zt,this.appId=Cn}fetch(se){var Ee=this;return(0,re.Z)(function*(){const[Xe,xt]=yield Promise.all([Ee.firebaseInstallations.getId(),Ee.firebaseInstallations.getToken()]),Cn=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${Ee.projectId}/namespaces/${Ee.namespace}:fetch?key=${Ee.apiKey}`,Jn={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":se.eTag||"*"},bi={sdk_version:Ee.sdkVersion,app_instance_id:Xe,app_instance_id_token:xt,app_id:Ee.appId,language_code:bs()},Ei={method:"POST",headers:Jn,body:JSON.stringify(bi)},br=fetch(Cn,Ei),Gi=new Promise((Oo,Wa)=>{se.signal.addEventListener(()=>{const sl=new Error("The operation was aborted.");sl.name="AbortError",Wa(sl)})});let Wo;try{yield Promise.race([br,Gi]),Wo=yield br}catch(Oo){let Wa="fetch-client-network";throw"AbortError"===Oo?.name&&(Wa="fetch-timeout"),wr.create(Wa,{originalErrorMessage:Oo?.message})}let so=Wo.status;const hc=Wo.headers.get("ETag")||void 0;let Ml,Ma;if(200===Wo.status){let Oo;try{Oo=yield Wo.json()}catch(Wa){throw wr.create("fetch-client-parse",{originalErrorMessage:Wa?.message})}Ml=Oo.entries,Ma=Oo.state}if("INSTANCE_STATE_UNSPECIFIED"===Ma?so=500:"NO_CHANGE"===Ma?so=304:("NO_TEMPLATE"===Ma||"EMPTY_CONFIG"===Ma)&&(Ml={}),304!==so&&200!==so)throw wr.create("fetch-status",{httpStatus:so});return{status:so,eTag:hc,config:Ml}})()}}class Ci{constructor(se,Ee){this.client=se,this.storage=Ee}fetch(se){var Ee=this;return(0,re.Z)(function*(){const Xe=(yield Ee.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return Ee.attemptFetch(se,Xe)})()}attemptFetch(se,{throttleEndTimeMillis:Ee,backoffCount:Xe}){var xt=this;return(0,re.Z)(function*(){yield function Qr(Z,se){return new Promise((Ee,Xe)=>{const xt=Math.max(se-Date.now(),0),zt=setTimeout(Ee,xt);Z.addEventListener(()=>{clearTimeout(zt),Xe(wr.create("fetch-throttle",{throttleEndTimeMillis:se}))})})}(se.signal,Ee);try{const zt=yield xt.client.fetch(se);return yield xt.storage.deleteThrottleMetadata(),zt}catch(zt){if(!function ao(Z){if(!(Z instanceof ke.ZR&&Z.customData))return!1;const se=Number(Z.customData.httpStatus);return 429===se||500===se||503===se||504===se}(zt))throw zt;const Cn={throttleEndTimeMillis:Date.now()+(0,ke.$s)(Xe),backoffCount:Xe+1};return yield xt.storage.setThrottleMetadata(Cn),xt.attemptFetch(se,Cn)}})()}}class or{constructor(se,Ee,Xe,xt,zt){this.app=se,this._client=Ee,this._storageCache=Xe,this._storage=xt,this._logger=zt,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function _i(Z,se){const Ee=Z.target.error||void 0;return wr.create(se,{originalErrorMessage:Ee&&Ee?.message})}const wi="app_namespace_store";class Li{constructor(se,Ee,Xe,xt=function xo(){return new Promise((Z,se)=>{try{const Ee=indexedDB.open("firebase_remote_config",1);Ee.onerror=Xe=>{se(_i(Xe,"storage-open"))},Ee.onsuccess=Xe=>{Z(Xe.target.result)},Ee.onupgradeneeded=Xe=>{0===Xe.oldVersion&&Xe.target.result.createObjectStore(wi,{keyPath:"compositeKey"})}}catch(Ee){se(wr.create("storage-open",{originalErrorMessage:Ee?.message}))}})}()){this.appId=se,this.appName=Ee,this.namespace=Xe,this.openDbPromise=xt}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(se){return this.set("last_fetch_status",se)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(se){return this.set("last_successful_fetch_timestamp_millis",se)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(se){return this.set("last_successful_fetch_response",se)}getActiveConfig(){return this.get("active_config")}setActiveConfig(se){return this.set("active_config",se)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(se){return this.set("active_config_etag",se)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(se){return this.set("throttle_metadata",se)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(se){var Ee=this;return(0,re.Z)(function*(){const Xe=yield Ee.openDbPromise;return new Promise((xt,zt)=>{const Jn=Xe.transaction([wi],"readonly").objectStore(wi),bi=Ee.createCompositeKey(se);try{const Ei=Jn.get(bi);Ei.onerror=br=>{zt(_i(br,"storage-get"))},Ei.onsuccess=br=>{const Gi=br.target.result;xt(Gi?Gi.value:void 0)}}catch(Ei){zt(wr.create("storage-get",{originalErrorMessage:Ei?.message}))}})})()}set(se,Ee){var Xe=this;return(0,re.Z)(function*(){const xt=yield Xe.openDbPromise;return new Promise((zt,Cn)=>{const bi=xt.transaction([wi],"readwrite").objectStore(wi),Ei=Xe.createCompositeKey(se);try{const br=bi.put({compositeKey:Ei,value:Ee});br.onerror=Gi=>{Cn(_i(Gi,"storage-set"))},br.onsuccess=()=>{zt()}}catch(br){Cn(wr.create("storage-set",{originalErrorMessage:br?.message}))}})})()}delete(se){var Ee=this;return(0,re.Z)(function*(){const Xe=yield Ee.openDbPromise;return new Promise((xt,zt)=>{const Jn=Xe.transaction([wi],"readwrite").objectStore(wi),bi=Ee.createCompositeKey(se);try{const Ei=Jn.delete(bi);Ei.onerror=br=>{zt(_i(br,"storage-delete"))},Ei.onsuccess=()=>{xt()}}catch(Ei){zt(wr.create("storage-delete",{originalErrorMessage:Ei?.message}))}})})()}createCompositeKey(se){return[this.appId,this.appName,this.namespace,se].join()}}class ar{constructor(se){this.storage=se}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var se=this;return(0,re.Z)(function*(){const Ee=se.storage.getLastFetchStatus(),Xe=se.storage.getLastSuccessfulFetchTimestampMillis(),xt=se.storage.getActiveConfig(),zt=yield Ee;zt&&(se.lastFetchStatus=zt);const Cn=yield Xe;Cn&&(se.lastSuccessfulFetchTimestampMillis=Cn);const Jn=yield xt;Jn&&(se.activeConfig=Jn)})()}setLastFetchStatus(se){return this.lastFetchStatus=se,this.storage.setLastFetchStatus(se)}setLastSuccessfulFetchTimestampMillis(se){return this.lastSuccessfulFetchTimestampMillis=se,this.storage.setLastSuccessfulFetchTimestampMillis(se)}setActiveConfig(se){return this.activeConfig=se,this.storage.setActiveConfig(se)}}function Or(){return Us.apply(this,arguments)}function Us(){return(Us=(0,re.Z)(function*(){if(!(0,ke.hl)())return!1;try{return yield(0,ke.eu)()}catch{return!1}})).apply(this,arguments)}!function vr(){(0,Te._registerComponent)(new He.wA("remote-config",function Z(se,{instanceIdentifier:Ee}){const Xe=se.getProvider("app").getImmediate(),xt=se.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw wr.create("registration-window");if(!(0,ke.hl)())throw wr.create("indexed-db-unavailable");const{projectId:zt,apiKey:Cn,appId:Jn}=Xe.options;if(!zt)throw wr.create("registration-project-id");if(!Cn)throw wr.create("registration-api-key");if(!Jn)throw wr.create("registration-app-id");const bi=new Li(Jn,Xe.name,Ee=Ee||"firebase"),Ei=new ar(bi),br=new Ze.Yd(Qi);br.logLevel=Ze.in.ERROR;const Gi=new Vr(xt,Te.SDK_VERSION,Ee,zt,Cn,Jn),Wo=new Ci(Gi,bi),so=new Qs(Wo,bi,Ei,br),hc=new or(Xe,so,Ei,bi,br);return function wt(Z){const se=(0,ke.m9)(Z);se._initializePromise||(se._initializePromise=se._storageCache.loadFromStorage().then(()=>{se._isInitializationComplete=!0}))}(hc),hc},"PUBLIC").setMultipleInstances(!0)),(0,Te.registerVersion)(Qi,"0.4.4"),(0,Te.registerVersion)(Qi,"0.4.4","esm2017")}();const as="/firebase-messaging-sw.js",zi="/firebase-cloud-messaging-push-scope",Ms="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Ws="https://fcmregistrations.googleapis.com/v1",Ao="google.c.a.c_id",bo="google.c.a.c_l",qo="google.c.a.ts",Mo="google.c.a.e";var ko=(()=>{return(Z=ko||(ko={})).PUSH_RECEIVED="push-received",Z.NOTIFICATION_CLICKED="notification-clicked",ko;var Z})();function Xr(Z){const se=new Uint8Array(Z);return btoa(String.fromCharCode(...se)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Di(Z){const Ee=(Z+"=".repeat((4-Z.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),Xe=atob(Ee),xt=new Uint8Array(Xe.length);for(let zt=0;zt<Xe.length;++zt)xt[zt]=Xe.charCodeAt(zt);return xt}const Xs="fcm_token_details_db",us=5,kr="fcm_token_object_Store";function Rs(){return Rs=(0,re.Z)(function*(Z){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(zt=>zt.name).includes(Xs))return null;let se=null;return(yield(0,xe.X3)(Xs,us,{upgrade:(Xe=(0,re.Z)(function*(xt,zt,Cn,Jn){var bi;if(zt<2||!xt.objectStoreNames.contains(kr))return;const Ei=Jn.objectStore(kr),br=yield Ei.index("fcmSenderId").get(Z);if(yield Ei.clear(),br)if(2===zt){const Gi=br;if(!Gi.auth||!Gi.p256dh||!Gi.endpoint)return;se={token:Gi.fcmToken,createTime:null!==(bi=Gi.createTime)&&void 0!==bi?bi:Date.now(),subscriptionOptions:{auth:Gi.auth,p256dh:Gi.p256dh,endpoint:Gi.endpoint,swScope:Gi.swScope,vapidKey:"string"==typeof Gi.vapidKey?Gi.vapidKey:Xr(Gi.vapidKey)}}}else if(3===zt){const Gi=br;se={token:Gi.fcmToken,createTime:Gi.createTime,subscriptionOptions:{auth:Xr(Gi.auth),p256dh:Xr(Gi.p256dh),endpoint:Gi.endpoint,swScope:Gi.swScope,vapidKey:Xr(Gi.vapidKey)}}}else if(4===zt){const Gi=br;se={token:Gi.fcmToken,createTime:Gi.createTime,subscriptionOptions:{auth:Xr(Gi.auth),p256dh:Xr(Gi.p256dh),endpoint:Gi.endpoint,swScope:Gi.swScope,vapidKey:Xr(Gi.vapidKey)}}}}),function(zt,Cn,Jn,bi){return Xe.apply(this,arguments)})})).close(),yield(0,xe.Lj)(Xs),yield(0,xe.Lj)("fcm_vapid_details_db"),yield(0,xe.Lj)("undefined"),function gs(Z){if(!Z||!Z.subscriptionOptions)return!1;const{subscriptionOptions:se}=Z;return"number"==typeof Z.createTime&&Z.createTime>0&&"string"==typeof Z.token&&Z.token.length>0&&"string"==typeof se.auth&&se.auth.length>0&&"string"==typeof se.p256dh&&se.p256dh.length>0&&"string"==typeof se.endpoint&&se.endpoint.length>0&&"string"==typeof se.swScope&&se.swScope.length>0&&"string"==typeof se.vapidKey&&se.vapidKey.length>0}(se)?se:null;var Xe}),Rs.apply(this,arguments)}const Js="firebase-messaging-database",Bs=1,Hs="firebase-messaging-store";let Ks=null;function lo(){return Ks||(Ks=(0,xe.X3)(Js,Bs,{upgrade:(Z,se)=>{0===se&&Z.createObjectStore(Hs)}})),Ks}function Zr(Z){return eo.apply(this,arguments)}function eo(){return eo=(0,re.Z)(function*(Z){const se=uo(Z),Xe=yield(yield lo()).transaction(Hs).objectStore(Hs).get(se);if(Xe)return Xe;{const xt=yield function ir(Z){return Rs.apply(this,arguments)}(Z.appConfig.senderId);if(xt)return yield co(Z,xt),xt}}),eo.apply(this,arguments)}function co(Z,se){return Eo.apply(this,arguments)}function Eo(){return(Eo=(0,re.Z)(function*(Z,se){const Ee=uo(Z),xt=(yield lo()).transaction(Hs,"readwrite");return yield xt.objectStore(Hs).put(se,Ee),yield xt.done,se})).apply(this,arguments)}function go(){return(go=(0,re.Z)(function*(Z){const se=uo(Z),Xe=(yield lo()).transaction(Hs,"readwrite");yield Xe.objectStore(Hs).delete(se),yield Xe.done})).apply(this,arguments)}function uo({appConfig:Z}){return Z.appId}const Xi=new ke.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function ho(Z,se){return Kr.apply(this,arguments)}function Kr(){return(Kr=(0,re.Z)(function*(Z,se){const Ee=yield Mr(Z),Xe=Yr(se),xt={method:"POST",headers:Ee,body:JSON.stringify(Xe)};let zt;try{zt=yield(yield fetch(Bo(Z.appConfig),xt)).json()}catch(Cn){throw Xi.create("token-subscribe-failed",{errorInfo:Cn?.toString()})}if(zt.error)throw Xi.create("token-subscribe-failed",{errorInfo:zt.error.message});if(!zt.token)throw Xi.create("token-subscribe-no-token");return zt.token})).apply(this,arguments)}function _o(){return(_o=(0,re.Z)(function*(Z,se){const Ee=yield Mr(Z),Xe=Yr(se.subscriptionOptions),xt={method:"PATCH",headers:Ee,body:JSON.stringify(Xe)};let zt;try{zt=yield(yield fetch(`${Bo(Z.appConfig)}/${se.token}`,xt)).json()}catch(Cn){throw Xi.create("token-update-failed",{errorInfo:Cn?.toString()})}if(zt.error)throw Xi.create("token-update-failed",{errorInfo:zt.error.message});if(!zt.token)throw Xi.create("token-update-no-token");return zt.token})).apply(this,arguments)}function Ts(Z,se){return Bi.apply(this,arguments)}function Bi(){return(Bi=(0,re.Z)(function*(Z,se){const Xe={method:"DELETE",headers:yield Mr(Z)};try{const zt=yield(yield fetch(`${Bo(Z.appConfig)}/${se}`,Xe)).json();if(zt.error)throw Xi.create("token-unsubscribe-failed",{errorInfo:zt.error.message})}catch(xt){throw Xi.create("token-unsubscribe-failed",{errorInfo:xt?.toString()})}})).apply(this,arguments)}function Bo({projectId:Z}){return`${Ws}/projects/${Z}/registrations`}function Mr(Z){return Es.apply(this,arguments)}function Es(){return(Es=(0,re.Z)(function*({appConfig:Z,installations:se}){const Ee=yield se.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":Z.apiKey,"x-goog-firebase-installations-auth":`FIS ${Ee}`})})).apply(this,arguments)}function Yr({p256dh:Z,auth:se,endpoint:Ee,vapidKey:Xe}){const xt={web:{endpoint:Ee,auth:se,p256dh:Z}};return Xe!==Ms&&(xt.web.applicationPubKey=Xe),xt}const qs=6048e5;function Io(){return Io=(0,re.Z)(function*(Z){const se=yield function Q(Z,se){return De.apply(this,arguments)}(Z.swRegistration,Z.vapidKey),Ee={vapidKey:Z.vapidKey,swScope:Z.swRegistration.scope,endpoint:se.endpoint,auth:Xr(se.getKey("auth")),p256dh:Xr(se.getKey("p256dh"))},Xe=yield Zr(Z.firebaseDependencies);if(Xe){if(function en(Z,se){return se.vapidKey===Z.vapidKey&&se.endpoint===Z.endpoint&&se.auth===Z.auth&&se.p256dh===Z.p256dh}(Xe.subscriptionOptions,Ee))return Date.now()>=Xe.createTime+qs?function _s(Z,se){return si.apply(this,arguments)}(Z,{token:Xe.token,createTime:Date.now(),subscriptionOptions:Ee}):Xe.token;try{yield Ts(Z.firebaseDependencies,Xe.token)}catch(xt){console.warn(xt)}return ie(Z.firebaseDependencies,Ee)}return ie(Z.firebaseDependencies,Ee)}),Io.apply(this,arguments)}function fo(){return fo=(0,re.Z)(function*(Z){const se=yield Zr(Z.firebaseDependencies);se&&(yield Ts(Z.firebaseDependencies,se.token),yield function Vo(Z){return go.apply(this,arguments)}(Z.firebaseDependencies));const Ee=yield Z.swRegistration.pushManager.getSubscription();return!Ee||Ee.unsubscribe()}),fo.apply(this,arguments)}function si(){return si=(0,re.Z)(function*(Z,se){try{const Ee=yield function rr(Z,se){return _o.apply(this,arguments)}(Z.firebaseDependencies,se),Xe=Object.assign(Object.assign({},se),{token:Ee,createTime:Date.now()});return yield co(Z.firebaseDependencies,Xe),Ee}catch(Ee){throw yield function ai(Z){return fo.apply(this,arguments)}(Z),Ee}}),si.apply(this,arguments)}function ie(Z,se){return ee.apply(this,arguments)}function ee(){return(ee=(0,re.Z)(function*(Z,se){const Xe={token:yield ho(Z,se),createTime:Date.now(),subscriptionOptions:se};return yield co(Z,Xe),Xe.token})).apply(this,arguments)}function De(){return(De=(0,re.Z)(function*(Z,se){return(yield Z.pushManager.getSubscription())||Z.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Di(se)})})).apply(this,arguments)}function ti(Z){const se={from:Z.from,collapseKey:Z.collapse_key,messageId:Z.fcmMessageId};return function Br(Z,se){if(!se.notification)return;Z.notification={};const Ee=se.notification.title;Ee&&(Z.notification.title=Ee);const Xe=se.notification.body;Xe&&(Z.notification.body=Xe);const xt=se.notification.image;xt&&(Z.notification.image=xt);const zt=se.notification.icon;zt&&(Z.notification.icon=zt)}(se,Z),function tr(Z,se){se.data&&(Z.data=se.data)}(se,Z),function pn(Z,se){var Ee,Xe,xt,zt,Cn;if(!(se.fcmOptions||null!==(Ee=se.notification)&&void 0!==Ee&&Ee.click_action))return;Z.fcmOptions={};const Jn=null!==(xt=null===(Xe=se.fcmOptions)||void 0===Xe?void 0:Xe.link)&&void 0!==xt?xt:null===(zt=se.notification)||void 0===zt?void 0:zt.click_action;Jn&&(Z.fcmOptions.link=Jn);const bi=null===(Cn=se.fcmOptions)||void 0===Cn?void 0:Cn.analytics_label;bi&&(Z.fcmOptions.analyticsLabel=bi)}(se,Z),se}function Zo(Z,se){const Ee=[];for(let Xe=0;Xe<Z.length;Xe++)Ee.push(Z.charAt(Xe)),Xe<se.length&&Ee.push(se.charAt(Xe));return Ee.join("")}function es(Z){return Xi.create("missing-app-config-values",{valueName:Z})}Zo("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Zo("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class ga{constructor(se,Ee,Xe){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const xt=function ma(Z){if(!Z||!Z.options)throw es("App Configuration Object");if(!Z.name)throw es("App Name");const se=["projectId","apiKey","appId","messagingSenderId"],{options:Ee}=Z;for(const Xe of se)if(!Ee[Xe])throw es(Xe);return{appName:Z.name,projectId:Ee.projectId,apiKey:Ee.apiKey,appId:Ee.appId,senderId:Ee.messagingSenderId}}(se);this.firebaseDependencies={app:se,appConfig:xt,installations:Ee,analyticsProvider:Xe}}_delete(){return Promise.resolve()}}function aa(Z){return to.apply(this,arguments)}function to(){return(to=(0,re.Z)(function*(Z){try{Z.swRegistration=yield navigator.serviceWorker.register(as,{scope:zi}),Z.swRegistration.update().catch(()=>{})}catch(se){throw Xi.create("failed-service-worker-registration",{browserErrorMessage:se?.message})}})).apply(this,arguments)}function Yo(){return(Yo=(0,re.Z)(function*(Z,se){if(!se&&!Z.swRegistration&&(yield aa(Z)),se||!Z.swRegistration){if(!(se instanceof ServiceWorkerRegistration))throw Xi.create("invalid-sw-registration");Z.swRegistration=se}})).apply(this,arguments)}function la(){return(la=(0,re.Z)(function*(Z,se){se?Z.vapidKey=se:Z.vapidKey||(Z.vapidKey=Ms)})).apply(this,arguments)}function Rr(){return Rr=(0,re.Z)(function*(Z,se){if(!navigator)throw Xi.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Xi.create("permission-blocked");return yield function Ro(Z,se){return la.apply(this,arguments)}(Z,se?.vapidKey),yield function _a(Z,se){return Yo.apply(this,arguments)}(Z,se?.serviceWorkerRegistration),function Jr(Z){return Io.apply(this,arguments)}(Z)}),Rr.apply(this,arguments)}function No(){return(No=(0,re.Z)(function*(Z,se,Ee){const Xe=function Ho(Z){switch(Z){case ko.NOTIFICATION_CLICKED:return"notification_open";case ko.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(se);(yield Z.firebaseDependencies.analyticsProvider.get()).logEvent(Xe,{message_id:Ee[Ao],message_name:Ee[bo],message_time:Ee[qo],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Co(){return Co=(0,re.Z)(function*(Z,se){const Ee=se.data;if(!Ee.isFirebaseMessaging)return;Z.onMessageHandler&&Ee.messageType===ko.PUSH_RECEIVED&&("function"==typeof Z.onMessageHandler?Z.onMessageHandler(ti(Ee)):Z.onMessageHandler.next(ti(Ee)));const Xe=Ee.data;(function Si(Z){return"object"==typeof Z&&!!Z&&Ao in Z})(Xe)&&"1"===Xe[Mo]&&(yield function Os(Z,se,Ee){return No.apply(this,arguments)}(Z,Ee.messageType,Xe))}),Co.apply(this,arguments)}const Zs="@firebase/messaging",jo=Z=>{const se=new ga(Z.getProvider("app").getImmediate(),Z.getProvider("installations-internal").getImmediate(),Z.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",Ee=>function wo(Z,se){return Co.apply(this,arguments)}(se,Ee)),se},To=Z=>{const se=Z.getProvider("messaging").getImmediate();return{getToken:Xe=>function ca(Z,se){return Rr.apply(this,arguments)}(se,Xe)}};function La(){return zo.apply(this,arguments)}function zo(){return(zo=(0,re.Z)(function*(){try{yield(0,ke.eu)()}catch{return!1}return typeof window<"u"&&(0,ke.hl)()&&(0,ke.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Qo(){(0,Te._registerComponent)(new He.wA("messaging",jo,"PUBLIC")),(0,Te._registerComponent)(new He.wA("messaging-internal",To,"PRIVATE")),(0,Te.registerVersion)(Zs,"0.12.4"),(0,Te.registerVersion)(Zs,"0.12.4","esm2017")}();const $o="analytics",Do="firebase_id",no="origin",me=6e4,S="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",N="https://www.googletagmanager.com/gtag/js",J=new Ze.Yd("@firebase/analytics"),ve=new ke.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function $e(Z){if(!Z.startsWith(N)){const se=ve.create("invalid-gtag-resource",{gtagURL:Z});return J.warn(se.message),""}return Z}function gt(Z){return Promise.all(Z.map(se=>se.catch(Ee=>Ee)))}function G(){return(G=(0,re.Z)(function*(Z,se,Ee,Xe,xt,zt){const Cn=Xe[xt];try{if(Cn)yield se[Cn];else{const bi=(yield gt(Ee)).find(Ei=>Ei.measurementId===xt);bi&&(yield se[bi.appId])}}catch(Jn){J.error(Jn)}Z("config",xt,zt)})).apply(this,arguments)}function Ve(){return(Ve=(0,re.Z)(function*(Z,se,Ee,Xe,xt){try{let zt=[];if(xt&&xt.send_to){let Cn=xt.send_to;Array.isArray(Cn)||(Cn=[Cn]);const Jn=yield gt(Ee);for(const bi of Cn){const Ei=Jn.find(Gi=>Gi.measurementId===bi),br=Ei&&se[Ei.appId];if(!br){zt=[];break}zt.push(br)}}0===zt.length&&(zt=Object.values(se)),yield Promise.all(zt),Z("event",Xe,xt||{})}catch(zt){J.error(zt)}})).apply(this,arguments)}const xi=30,yi=new class Ui{constructor(se={},Ee=1e3){this.throttleMetadata=se,this.intervalMillis=Ee}getThrottleMetadata(se){return this.throttleMetadata[se]}setThrottleMetadata(se,Ee){this.throttleMetadata[se]=Ee}deleteThrottleMetadata(se){delete this.throttleMetadata[se]}};function Nr(Z){return new Headers({Accept:"application/json","x-goog-api-key":Z})}function hr(){return(hr=(0,re.Z)(function*(Z){var se;const{appId:Ee,apiKey:Xe}=Z,xt={method:"GET",headers:Nr(Xe)},zt=S.replace("{app-id}",Ee),Cn=yield fetch(zt,xt);if(200!==Cn.status&&304!==Cn.status){let Jn="";try{const bi=yield Cn.json();null!==(se=bi.error)&&void 0!==se&&se.message&&(Jn=bi.error.message)}catch{}throw ve.create("config-fetch-failed",{httpStatus:Cn.status,responseMessage:Jn})}return Cn.json()})).apply(this,arguments)}function ni(){return(ni=(0,re.Z)(function*(Z,se=yi,Ee){const{appId:Xe,apiKey:xt,measurementId:zt}=Z.options;if(!Xe)throw ve.create("no-app-id");if(!xt){if(zt)return{measurementId:zt,appId:Xe};throw ve.create("no-api-key")}const Cn=se.getThrottleMetadata(Xe)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Jn=new ts;return setTimeout((0,re.Z)(function*(){Jn.abort()}),void 0!==Ee?Ee:me),qn({appId:Xe,apiKey:xt,measurementId:zt},Cn,Jn,se)})).apply(this,arguments)}function qn(Z,se,Ee){return hs.apply(this,arguments)}function hs(){return hs=(0,re.Z)(function*(Z,{throttleEndTimeMillis:se,backoffCount:Ee},Xe,xt=yi){var zt;const{appId:Cn,measurementId:Jn}=Z;try{yield function Ki(Z,se){return new Promise((Ee,Xe)=>{const xt=Math.max(se-Date.now(),0),zt=setTimeout(Ee,xt);Z.addEventListener(()=>{clearTimeout(zt),Xe(ve.create("fetch-throttle",{throttleEndTimeMillis:se}))})})}(Xe,se)}catch(bi){if(Jn)return J.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Jn} provided in the "measurementId" field in the local Firebase config. [${bi?.message}]`),{appId:Cn,measurementId:Jn};throw bi}try{const bi=yield function Rn(Z){return hr.apply(this,arguments)}(Z);return xt.deleteThrottleMetadata(Cn),bi}catch(bi){const Ei=bi;if(!function Po(Z){if(!(Z instanceof ke.ZR&&Z.customData))return!1;const se=Number(Z.customData.httpStatus);return 429===se||500===se||503===se||504===se}(Ei)){if(xt.deleteThrottleMetadata(Cn),Jn)return J.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Jn} provided in the "measurementId" field in the local Firebase config. [${Ei?.message}]`),{appId:Cn,measurementId:Jn};throw bi}const br=503===Number(null===(zt=Ei?.customData)||void 0===zt?void 0:zt.httpStatus)?(0,ke.$s)(Ee,xt.intervalMillis,xi):(0,ke.$s)(Ee,xt.intervalMillis),Gi={throttleEndTimeMillis:Date.now()+br,backoffCount:Ee+1};return xt.setThrottleMetadata(Cn,Gi),J.debug(`Calling attemptFetch again in ${br} millis`),qn(Z,Gi,Xe,xt)}}),hs.apply(this,arguments)}class ts{constructor(){this.listeners=[]}addEventListener(se){this.listeners.push(se)}abort(){this.listeners.forEach(se=>se())}}let Jt,mr;function ci(){return(ci=(0,re.Z)(function*(Z,se,Ee,Xe,xt){if(xt&&xt.global)Z("event",Ee,Xe);else{const zt=yield se;Z("event",Ee,Object.assign(Object.assign({},Xe),{send_to:zt}))}})).apply(this,arguments)}function Fo(){return(Fo=(0,re.Z)(function*(){if(!(0,ke.hl)())return J.warn(ve.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ke.eu)()}catch(Z){return J.warn(ve.create("indexeddb-unavailable",{errorInfo:Z?.toString()}).message),!1}return!0})).apply(this,arguments)}function va(){return va=(0,re.Z)(function*(Z,se,Ee,Xe,xt,zt,Cn){var Jn;const bi=function fr(Z){return ni.apply(this,arguments)}(Z);bi.then(so=>{Ee[so.measurementId]=so.appId,Z.options.measurementId&&so.measurementId!==Z.options.measurementId&&J.warn(`The measurement ID in the local Firebase config (${Z.options.measurementId}) does not match the measurement ID fetched from the server (${so.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(so=>J.error(so)),se.push(bi);const Ei=function ua(){return Fo.apply(this,arguments)}().then(so=>{if(so)return Xe.getId()}),[br,Gi]=yield Promise.all([bi,Ei]);(function An(Z){const se=window.document.getElementsByTagName("script");for(const Ee of Object.values(se))if(Ee.src&&Ee.src.includes(N)&&Ee.src.includes(Z))return Ee;return null})(zt)||function Ke(Z,se){const Ee=function at(Z,se){let Ee;return window.trustedTypes&&(Ee=window.trustedTypes.createPolicy(Z,se)),Ee}("firebase-js-sdk-policy",{createScriptURL:$e}),Xe=document.createElement("script"),xt=`${N}?l=${Z}&id=${se}`;Xe.src=Ee?Ee?.createScriptURL(xt):xt,Xe.async=!0,document.head.appendChild(Xe)}(zt,br.measurementId),mr&&(xt("consent","default",mr),function po(Z){mr=Z}(void 0)),xt("js",new Date);const Wo=null!==(Jn=Cn?.config)&&void 0!==Jn?Jn:{};return Wo[no]="firebase",Wo.update=!0,null!=Gi&&(Wo[Do]=Gi),xt("config",br.measurementId,Wo),Jt&&(xt("set",Jt),function io(Z){Jt=Z}(void 0)),br.measurementId}),va.apply(this,arguments)}class Lo{constructor(se){this.app=se}_delete(){return delete da[this.app.options.appId],Promise.resolve()}}let da={},ea=[];const Hr={};let Ga,js,ba="dataLayer",ro="gtag",ta=!1;function Va(Z,se,Ee){!function mo(){const Z=[];if((0,ke.ru)()&&Z.push("This is a browser extension environment."),(0,ke.zI)()||Z.push("Cookies are not available."),Z.length>0){const se=Z.map((Xe,xt)=>`(${xt+1}) ${Xe}`).join(" "),Ee=ve.create("invalid-analytics-context",{errorInfo:se});J.warn(Ee.message)}}();const Xe=Z.options.appId;if(!Xe)throw ve.create("no-app-id");if(!Z.options.apiKey){if(!Z.options.measurementId)throw ve.create("no-api-key");J.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${Z.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=da[Xe])throw ve.create("already-exists",{id:Xe});if(!ta){!function k(Z){let se=[];Array.isArray(window[Z])?se=window[Z]:window[Z]=se}(ba);const{wrappedGtag:zt,gtagCore:Cn}=function tn(Z,se,Ee,Xe,xt){let zt=function(...Cn){window[Xe].push(arguments)};return window[xt]&&"function"==typeof window[xt]&&(zt=window[xt]),window[xt]=function Dt(Z,se,Ee,Xe){function zt(){return zt=(0,re.Z)(function*(Cn,Jn,bi){try{"event"===Cn?yield function ge(Z,se,Ee,Xe,xt){return Ve.apply(this,arguments)}(Z,se,Ee,Jn,bi):"config"===Cn?yield function te(Z,se,Ee,Xe,xt,zt){return G.apply(this,arguments)}(Z,se,Ee,Xe,Jn,bi):"consent"===Cn?Z("consent","update",bi):Z("set",Jn)}catch(Ei){J.error(Ei)}}),zt.apply(this,arguments)}return function xt(Cn,Jn,bi){return zt.apply(this,arguments)}}(zt,Z,se,Ee),{gtagCore:zt,wrappedGtag:window[xt]}}(da,ea,Hr,ba,ro);js=zt,Ga=Cn,ta=!0}return da[Xe]=function nn(Z,se,Ee,Xe,xt,zt,Cn){return va.apply(this,arguments)}(Z,ea,Hr,se,Ga,ba,Ee),new Lo(Z)}function Fs(){return Ba.apply(this,arguments)}function Ba(){return(Ba=(0,re.Z)(function*(){if((0,ke.ru)()||!(0,ke.zI)()||!(0,ke.hl)())return!1;try{return yield(0,ke.eu)()}catch{return!1}})).apply(this,arguments)}const zl="@firebase/analytics";!function Il(){(0,Te._registerComponent)(new He.wA($o,(se,{options:Ee})=>Va(se.getProvider("app").getImmediate(),se.getProvider("installations-internal").getImmediate(),Ee),"PUBLIC")),(0,Te._registerComponent)(new He.wA("analytics-internal",function Z(se){try{const Ee=se.getProvider($o).getImmediate();return{logEvent:(Xe,xt,zt)=>function jl(Z,se,Ee,Xe){Z=(0,ke.m9)(Z),function pi(Z,se,Ee,Xe,xt){return ci.apply(this,arguments)}(js,da[Z.app.options.appId],se,Ee,Xe).catch(xt=>J.error(xt))}(Ee,Xe,xt,zt)}}catch(Ee){throw ve.create("interop-component-reg-failed",{reason:Ee})}},"PRIVATE")),(0,Te.registerVersion)(zl,"0.9.5"),(0,Te.registerVersion)(zl,"0.9.5","esm2017")}();var hl=L(4408),sc=L(7565);const Ia=new class Gl extends sc.v{}(class $l extends hl.o{constructor(se,Ee){super(se,Ee),this.scheduler=se,this.work=Ee}schedule(se,Ee=0){return Ee>0?super.schedule(se,Ee):(this.delay=Ee,this.state=se,this.scheduler.flush(this),this)}execute(se,Ee){return Ee>0||this.closed?super.execute(se,Ee):this._execute(se,Ee)}requestAsyncId(se,Ee,Xe=0){return null!=Xe&&Xe>0||null==Xe&&this.delay>0?super.requestAsyncId(se,Ee,Xe):(se.flush(this),0)}});var Wl=L(4986),zs=L(9751),wl=L(8505),Ds=L(9468),Go=L(5363);const Y=new f.GfV("7.5.0"),p="__angularfire_symbol__analyticsIsSupportedValue",a="__angularfire_symbol__analyticsIsSupported",h="__angularfire_symbol__remoteConfigIsSupportedValue",T="__angularfire_symbol__remoteConfigIsSupported",P="__angularfire_symbol__messagingIsSupportedValue",X="__angularfire_symbol__messagingIsSupported";function ln(Z,se,Ee){if(se){if(1===se.length)return se[0];const zt=se.filter(Cn=>Cn.app===Ee);if(1===zt.length)return zt[0]}return Ee.container.getProvider(Z).getImmediate({optional:!0})}globalThis[a]||(globalThis[a]=Fs().then(Z=>globalThis[p]=Z).catch(()=>globalThis[p]=!1)),globalThis[X]||(globalThis[X]=La().then(Z=>globalThis[P]=Z).catch(()=>globalThis[P]=!1)),globalThis[T]||(globalThis[T]=Or().then(Z=>globalThis[h]=Z).catch(()=>globalThis[h]=!1));const Un=(Z,se)=>{const Ee=se?[se]:(0,_.C6)(),Xe=[];return Ee.forEach(xt=>{xt.container.getProvider(Z).instances.forEach(Cn=>{Xe.includes(Cn)||Xe.push(Cn)})}),Xe};function sr(){}class jr{constructor(se,Ee=Ia){this.zone=se,this.delegate=Ee}now(){return this.delegate.now()}schedule(se,Ee,Xe){const xt=this.zone;return this.delegate.schedule(function(Cn){xt.runGuarded(()=>{se.apply(this,[Cn])})},Ee,Xe)}}class ur{constructor(se){this.zone=se,this.task=null}call(se,Ee){const Xe=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",sr,{},sr,sr)),Ee.pipe((0,wl.b)({next:Xe,complete:Xe,error:Xe})).subscribe(se).add(Xe)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let wa=(()=>{class Z{constructor(Ee){this.ngZone=Ee,this.outsideAngular=Ee.runOutsideAngular(()=>new jr(Zone.current)),this.insideAngular=Ee.run(()=>new jr(Zone.current,Wl.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return Z.\u0275fac=function(Ee){return new(Ee||Z)(f.LFG(f.R0b))},Z.\u0275prov=f.Yz7({token:Z,factory:Z.\u0275fac,providedIn:"root"}),Z})();function So(){const Z=globalThis.\u0275AngularFireScheduler;if(!Z)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return Z}function na(Z){return So().ngZone.run(()=>Z())}function ia(Z){return So(),function pl(Z){return function(Ee){return(Ee=Ee.lift(new ur(Z.ngZone))).pipe((0,Ds.R)(Z.outsideAngular),(0,Go.Q)(Z.insideAngular))}}(So())(Z)}const Kl=(Z,se)=>function(){const Xe=arguments;return se&&setTimeout(()=>{"scheduled"===se.state&&se.invoke()},10),na(()=>Z.apply(void 0,Xe))},Ca=(Z,se)=>function(){let Ee;const Xe=arguments;for(let zt=0;zt<arguments.length;zt++)"function"==typeof Xe[zt]&&(se&&(Ee||(Ee=na(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",sr,{},sr,sr)))),Xe[zt]=Kl(Xe[zt],Ee));const xt=function Ys(Z){return So().ngZone.runOutsideAngular(()=>Z())}(()=>Z.apply(this,Xe));if(!se){if(xt instanceof zs.y){const zt=So();return xt.pipe((0,Ds.R)(zt.outsideAngular),(0,Go.Q)(zt.insideAngular))}return na(()=>xt)}return xt instanceof zs.y?xt.pipe(ia):xt instanceof Promise?na(()=>new Promise((zt,Cn)=>xt.then(Jn=>na(()=>zt(Jn)),Jn=>na(()=>Cn(Jn))))):"function"==typeof xt&&Ee?function(){return setTimeout(()=>{Ee&&"scheduled"===Ee.state&&Ee.invoke()},10),xt.apply(this,arguments)}:na(()=>xt)}},5525:(wn,dt,L)=>{L.d(dt,{u7:()=>ip,Jj:()=>Zu,IX:()=>ny,my:()=>ja,xU:()=>Nd,Lz:()=>pd,WA:()=>k,F8:()=>mh,$q:()=>mf,W:()=>nu,EK:()=>ni,PU:()=>s_,l7:()=>se,Ky:()=>Jt,Xb:()=>ts,Cf:()=>xs,K9:()=>gt,Me:()=>So,yq:()=>J,Wi:()=>Fg,ET:()=>rp,Ab:()=>_f,vr:()=>Oy,Fc:()=>Bg,hJ:()=>Lg,B$:()=>Xf,at:()=>vm,oe:()=>Cy,AK:()=>a_,TF:()=>Hg,JU:()=>Ku,ST:()=>Vg,fH:()=>iy,Ix:()=>sy,Wu:()=>_y,Lx:()=>gy,qY:()=>nl,GL:()=>gf,QT:()=>wv,kl:()=>n_,Xk:()=>Cv,PL:()=>xr,UQ:()=>Ey,zN:()=>Iy,ad:()=>yv,nP:()=>yf,b9:()=>hy,vh:()=>fy,Pb:()=>jg,L$:()=>zg,cf:()=>sp,sc:()=>Ya,Xo:()=>dy,IO:()=>Zg,iE:()=>bm,Eo:()=>ty,i3:()=>o_,Bt:()=>l_,pl:()=>wy,Ub:()=>me,qK:()=>Nm,TQ:()=>my,e0:()=>py,r7:()=>wh,Mx:()=>ry,ar:()=>uy});var xe,f=L(5861),_=L(9681),re=L(4859),Te=L(1877),ke=L(2090),He=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ze={},ze=ze||{},pe=He||self;function Me(){}function Ne(r){var e=typeof r;return"array"==(e="object"!=e?e:r?Array.isArray(r)?"array":e:"null")||"object"==e&&"number"==typeof r.length}function yt(r){var e=typeof r;return"object"==e&&null!=r||"function"==e}var Lt="closure_uid_"+(1e9*Math.random()>>>0),an=0;function It(r,e,t){return r.call.apply(r.bind,arguments)}function Mt(r,e,t){if(!r)throw Error();if(2<arguments.length){var o=Array.prototype.slice.call(arguments,2);return function(){var d=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(d,o),r.apply(e,d)}}return function(){return r.apply(e,arguments)}}function Ae(r,e,t){return(Ae=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?It:Mt).apply(null,arguments)}function _t(r,e){var t=Array.prototype.slice.call(arguments,1);return function(){var o=t.slice();return o.push.apply(o,arguments),r.apply(this,o)}}function Qe(r,e){function t(){}t.prototype=e.prototype,r.X=e.prototype,r.prototype=new t,r.prototype.constructor=r,r.Wb=function(o,d,v){for(var x=Array(arguments.length-2),H=2;H<arguments.length;H++)x[H-2]=arguments[H];return e.prototype[d].apply(o,x)}}function Ue(){this.s=this.s,this.o=this.o}Ue.prototype.s=!1,Ue.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function pt(r){Object.prototype.hasOwnProperty.call(r,Lt)&&r[Lt]||(r[Lt]=++an)}(this)},Ue.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const kt=Array.prototype.indexOf?function(r,e){return Array.prototype.indexOf.call(r,e,void 0)}:function(r,e){if("string"==typeof r)return"string"!=typeof e||1!=e.length?-1:r.indexOf(e,0);for(let t=0;t<r.length;t++)if(t in r&&r[t]===e)return t;return-1};function Ye(r){const e=r.length;if(0<e){const t=Array(e);for(let o=0;o<e;o++)t[o]=r[o];return t}return[]}function z(r,e){for(let t=1;t<arguments.length;t++){const o=arguments[t];if(Ne(o)){const d=r.length||0,v=o.length||0;r.length=d+v;for(let x=0;x<v;x++)r[d+x]=o[x]}else r.push(o)}}function ct(r,e){this.type=r,this.g=this.target=e,this.defaultPrevented=!1}ct.prototype.h=function(){this.defaultPrevented=!0};var bt=function(){if(!pe.addEventListener||!Object.defineProperty)return!1;var r=!1,e=Object.defineProperty({},"passive",{get:function(){r=!0}});try{pe.addEventListener("test",Me,e),pe.removeEventListener("test",Me,e)}catch{}return r}();function Ft(r){return/^[\s\xa0]*$/.test(r)}var gn=String.prototype.trim?function(r){return r.trim()}:function(r){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(r)[1]};function vn(r,e){return r<e?-1:r>e?1:0}function Pt(){var r=pe.navigator;return r&&(r=r.userAgent)?r:""}function Ht(r){return-1!=Pt().indexOf(r)}function Ot(r){return Ot[" "](r),r}Ot[" "]=Me;var sn,r,Gt=Ht("Opera"),Tt=Ht("Trident")||Ht("MSIE"),Ut=Ht("Edge"),Et=Ut||Tt,rn=Ht("Gecko")&&!(-1!=Pt().toLowerCase().indexOf("webkit")&&!Ht("Edge"))&&!(Ht("Trident")||Ht("MSIE"))&&!Ht("Edge"),Zt=-1!=Pt().toLowerCase().indexOf("webkit")&&!Ht("Edge");function _n(){var r=pe.document;return r?r.documentMode:void 0}e:{var bn="",fi=(r=Pt(),rn?/rv:([^\);]+)(\)|;)/.exec(r):Ut?/Edge\/([\d\.]+)/.exec(r):Tt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(r):Zt?/WebKit\/(\S+)/.exec(r):Gt?/(?:Version)[ \/]?(\S+)/.exec(r):void 0);if(fi&&(bn=fi?fi[1]:""),Tt){var ui=_n();if(null!=ui&&ui>parseFloat(bn)){sn=String(ui);break e}}sn=bn}var Bn={};var Cr=pe.document&&Tt&&(_n()||parseInt(sn,10))||void 0;function ii(r,e){if(ct.call(this,r?r.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,r){var t=this.type=r.type,o=r.changedTouches&&r.changedTouches.length?r.changedTouches[0]:null;if(this.target=r.target||r.srcElement,this.g=e,e=r.relatedTarget){if(rn){e:{try{Ot(e.nodeName);var d=!0;break e}catch{}d=!1}d||(e=null)}}else"mouseover"==t?e=r.fromElement:"mouseout"==t&&(e=r.toElement);this.relatedTarget=e,o?(this.clientX=void 0!==o.clientX?o.clientX:o.pageX,this.clientY=void 0!==o.clientY?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0):(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0),this.button=r.button,this.key=r.key||"",this.ctrlKey=r.ctrlKey,this.altKey=r.altKey,this.shiftKey=r.shiftKey,this.metaKey=r.metaKey,this.pointerId=r.pointerId||0,this.pointerType="string"==typeof r.pointerType?r.pointerType:Ai[r.pointerType]||"",this.state=r.state,this.i=r,r.defaultPrevented&&ii.X.h.call(this)}}Qe(ii,ct);var Ai={2:"touch",3:"pen",4:"mouse"};ii.prototype.h=function(){ii.X.h.call(this);var r=this.i;r.preventDefault?r.preventDefault():r.returnValue=!1};var zn="closure_listenable_"+(1e6*Math.random()|0),Mi=0;function Tn(r,e,t,o,d){this.listener=r,this.proxy=null,this.src=e,this.type=t,this.capture=!!o,this.ha=d,this.key=++Mi,this.ba=this.ea=!1}function Ji(r){r.ba=!0,r.listener=null,r.proxy=null,r.src=null,r.ha=null}function ri(r,e,t){for(const o in r)e.call(t,r[o],o,r)}function Gn(r){const e={};for(const t in r)e[t]=r[t];return e}const Yi="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Pr(r,e){let t,o;for(let d=1;d<arguments.length;d++){for(t in o=arguments[d],o)r[t]=o[t];for(let v=0;v<Yi.length;v++)t=Yi[v],Object.prototype.hasOwnProperty.call(o,t)&&(r[t]=o[t])}}function Hn(r){this.src=r,this.g={},this.h=0}function Pn(r,e){var t=e.type;if(t in r.g){var v,o=r.g[t],d=kt(o,e);(v=0<=d)&&Array.prototype.splice.call(o,d,1),v&&(Ji(e),0==r.g[t].length&&(delete r.g[t],r.h--))}}function On(r,e,t,o){for(var d=0;d<r.length;++d){var v=r[d];if(!v.ba&&v.listener==e&&v.capture==!!t&&v.ha==o)return d}return-1}Hn.prototype.add=function(r,e,t,o,d){var v=r.toString();(r=this.g[v])||(r=this.g[v]=[],this.h++);var x=On(r,e,o,d);return-1<x?(e=r[x],t||(e.ea=!1)):((e=new Tn(e,this.src,v,!!o,d)).ea=t,r.push(e)),e};var Nn="closure_lm_"+(1e6*Math.random()|0),Ni={};function Hi(r,e,t,o,d){if(o&&o.once)return er(r,e,t,o,d);if(Array.isArray(e)){for(var v=0;v<e.length;v++)Hi(r,e[v],t,o,d);return null}return t=$(t),r&&r[zn]?r.N(e,t,yt(o)?!!o.capture:!!o,d):Vi(r,e,t,!1,o,d)}function Vi(r,e,t,o,d,v){if(!e)throw Error("Invalid event type");var x=yt(d)?!!d.capture:!!d,H=dn(r);if(H||(r[Nn]=H=new Hn(r)),(t=H.add(e,t,o,x,v)).proxy)return t;if(o=function gr(){const e=Oi;return function r(t){return e.call(r.src,r.listener,t)}}(),t.proxy=o,o.src=r,o.listener=t,r.addEventListener)bt||(d=x),void 0===d&&(d=!1),r.addEventListener(e.toString(),o,d);else if(r.attachEvent)r.attachEvent($n(e.toString()),o);else{if(!r.addListener||!r.removeListener)throw Error("addEventListener and attachEvent are unavailable.");r.addListener(o)}return t}function er(r,e,t,o,d){if(Array.isArray(e)){for(var v=0;v<e.length;v++)er(r,e[v],t,o,d);return null}return t=$(t),r&&r[zn]?r.O(e,t,yt(o)?!!o.capture:!!o,d):Vi(r,e,t,!0,o,d)}function Fi(r,e,t,o,d){if(Array.isArray(e))for(var v=0;v<e.length;v++)Fi(r,e[v],t,o,d);else o=yt(o)?!!o.capture:!!o,t=$(t),r&&r[zn]?(r=r.i,(e=String(e).toString())in r.g&&-1<(t=On(v=r.g[e],t,o,d))&&(Ji(v[t]),Array.prototype.splice.call(v,t,1),0==v.length&&(delete r.g[e],r.h--))):r&&(r=dn(r))&&(e=r.g[e.toString()],r=-1,e&&(r=On(e,t,o,d)),(t=-1<r?e[r]:null)&&$r(t))}function $r(r){if("number"!=typeof r&&r&&!r.ba){var e=r.src;if(e&&e[zn])Pn(e.i,r);else{var t=r.type,o=r.proxy;e.removeEventListener?e.removeEventListener(t,o,r.capture):e.detachEvent?e.detachEvent($n(t),o):e.addListener&&e.removeListener&&e.removeListener(o),(t=dn(e))?(Pn(t,r),0==t.h&&(t.src=null,e[Nn]=null)):Ji(r)}}}function $n(r){return r in Ni?Ni[r]:Ni[r]="on"+r}function Oi(r,e){if(r.ba)r=!0;else{e=new ii(e,this);var t=r.listener,o=r.ha||r.src;r.ea&&$r(r),r=t.call(o,e)}return r}function dn(r){return(r=r[Nn])instanceof Hn?r:null}var be="__closure_events_fn_"+(1e9*Math.random()>>>0);function $(r){return"function"==typeof r?r:(r[be]||(r[be]=function(e){return r.handleEvent(e)}),r[be])}function ne(){Ue.call(this),this.i=new Hn(this),this.P=this,this.I=null}function de(r,e){var t,o=r.I;if(o)for(t=[];o;o=o.I)t.push(o);if(r=r.P,o=e.type||e,"string"==typeof e)e=new ct(e,r);else if(e instanceof ct)e.target=e.target||r;else{var d=e;Pr(e=new ct(o,r),d)}if(d=!0,t)for(var v=t.length-1;0<=v;v--){var x=e.g=t[v];d=ye(x,o,!0,e)&&d}if(d=ye(x=e.g=r,o,!0,e)&&d,d=ye(x,o,!1,e)&&d,t)for(v=0;v<t.length;v++)d=ye(x=e.g=t[v],o,!1,e)&&d}function ye(r,e,t,o){if(!(e=r.i.g[String(e)]))return!0;e=e.concat();for(var d=!0,v=0;v<e.length;++v){var x=e[v];if(x&&!x.ba&&x.capture==t){var H=x.listener,oe=x.ha||x.src;x.ea&&Pn(r.i,x),d=!1!==H.call(oe,o)&&d}}return d&&!o.defaultPrevented}Qe(ne,Ue),ne.prototype[zn]=!0,ne.prototype.removeEventListener=function(r,e,t,o){Fi(this,r,e,t,o)},ne.prototype.M=function(){if(ne.X.M.call(this),this.i){var e,r=this.i;for(e in r.g){for(var t=r.g[e],o=0;o<t.length;o++)Ji(t[o]);delete r.g[e],r.h--}}this.I=null},ne.prototype.N=function(r,e,t,o){return this.i.add(String(r),e,!1,t,o)},ne.prototype.O=function(r,e,t,o){return this.i.add(String(r),e,!0,t,o)};var rt=pe.JSON.stringify;function Nt(){var r=Fe;let e=null;return r.g&&(e=r.g,r.g=r.g.next,r.g||(r.h=null),e.next=null),e}var Mn,Be=new class{constructor(r,e){this.i=r,this.j=e,this.h=0,this.g=null}get(){let r;return 0<this.h?(this.h--,r=this.g,this.g=r.next,r.next=null):r=this.i(),r}}(()=>new it,r=>r.reset());class it{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function qt(r){pe.setTimeout(()=>{throw r},0)}function St(r,e){Mn||function Je(){var r=pe.Promise.resolve(void 0);Mn=function(){r.then(ht)}}(),ot||(Mn(),ot=!0),Fe.add(r,e)}var ot=!1,Fe=new class Le{constructor(){this.h=this.g=null}add(e,t){const o=Be.get();o.set(e,t),this.h?this.h.next=o:this.g=o,this.h=o}};function ht(){for(var r;r=Nt();){try{r.h.call(r.g)}catch(t){qt(t)}var e=Be;e.j(r),100>e.h&&(e.h++,r.next=e.g,e.g=r)}ot=!1}function Yt(r,e){ne.call(this),this.h=r||1,this.g=e||pe,this.j=Ae(this.lb,this),this.l=Date.now()}function un(r){r.ca=!1,r.R&&(r.g.clearTimeout(r.R),r.R=null)}function Kn(r,e,t){if("function"==typeof r)t&&(r=Ae(r,t));else{if(!r||"function"!=typeof r.handleEvent)throw Error("Invalid listener argument");r=Ae(r.handleEvent,r)}return 2147483647<Number(e)?-1:pe.setTimeout(r,e||0)}function vi(r){r.g=Kn(()=>{r.g=null,r.i&&(r.i=!1,vi(r))},r.j);const e=r.h;r.h=null,r.m.apply(null,e)}Qe(Yt,ne),(xe=Yt.prototype).ca=!1,xe.R=null,xe.lb=function(){if(this.ca){var r=Date.now()-this.l;0<r&&r<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-r):(this.R&&(this.g.clearTimeout(this.R),this.R=null),de(this,"tick"),this.ca&&(un(this),this.start()))}},xe.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},xe.M=function(){Yt.X.M.call(this),un(this),delete this.g};class yr extends Ue{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:vi(this)}M(){super.M(),this.g&&(pe.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function vs(r){Ue.call(this),this.h=r,this.g={}}Qe(vs,Ue);var is=[];function Gr(r,e,t,o){Array.isArray(t)||(t&&(is[0]=t.toString()),t=is);for(var d=0;d<t.length;d++){var v=Hi(e,t[d],o||r.handleEvent,!1,r.h||r);if(!v)break;r.g[v.key]=v}}function os(r){ri(r.g,function(e,t){this.g.hasOwnProperty(t)&&$r(e)},r),r.g={}}function Tr(){this.g=!0}function rs(r,e,t,o){r.info(function(){return"XMLHTTP TEXT ("+e+"): "+function Sr(r,e){if(!r.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(r=0;r<t.length;r++)if(Array.isArray(t[r])){var o=t[r];if(!(2>o.length)){var d=o[1];if(Array.isArray(d)&&!(1>d.length)){var v=d[0];if("noop"!=v&&"stop"!=v&&"close"!=v)for(var x=1;x<d.length;x++)d[x]=""}}}return rt(t)}catch{return e}}(r,t)+(o?" "+o:"")})}vs.prototype.M=function(){vs.X.M.call(this),os(this)},vs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Tr.prototype.Aa=function(){this.g=!1},Tr.prototype.info=function(){};var Dr={},ps=null;function Ar(){return ps=ps||new ne}function wr(r){ct.call(this,Dr.Pa,r)}function Vt(r){const e=Ar();de(e,new wr(e))}function et(r,e){ct.call(this,Dr.STAT_EVENT,r),this.stat=e}function Pe(r){const e=Ar();de(e,new et(e,r))}function Ge(r,e){ct.call(this,Dr.Qa,r),this.size=e}function vt(r,e){if("function"!=typeof r)throw Error("Fn must not be null and must be a function");return pe.setTimeout(function(){r()},e)}Dr.Pa="serverreachability",Qe(wr,ct),Dr.STAT_EVENT="statevent",Qe(et,ct),Dr.Qa="timingevent",Qe(Ge,ct);var Kt={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},Dn={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function st(){}function wt(){}st.prototype.h=null;var xn,Bt={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function mn(){ct.call(this,"d")}function Wn(){ct.call(this,"c")}function _r(){}function Ii(r,e,t,o){this.l=r,this.j=e,this.m=t,this.U=o||1,this.S=new vs(this),this.O=As,this.T=new Yt(r=Et?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new ms}function ms(){this.i=null,this.g="",this.h=!1}Qe(mn,ct),Qe(Wn,ct),Qe(_r,st),_r.prototype.g=function(){return new XMLHttpRequest},_r.prototype.i=function(){return{}},xn=new _r;var As=45e3,dr={},Qs={};function bs(r,e,t){r.K=1,r.v=Ms(nr(e)),r.s=t,r.P=!0,Vr(r,null)}function Vr(r,e){r.F=Date.now(),Ls(r),r.A=nr(r.v);var t=r.A,o=r.U;Array.isArray(o)||(o=[String(o)]),ir(t.i,"t",o),r.C=0,t=r.l.H,r.h=new ms,r.g=Ho(r.l,t?e:null,!r.s),0<r.N&&(r.L=new yr(Ae(r.La,r,r.g),r.N)),Gr(r.S,r.g,"readystatechange",r.ib),e=r.H?Gn(r.H):{},r.s?(r.u||(r.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",r.g.da(r.A,r.u,r.s,e)):(r.u="GET",r.g.da(r.A,r.u,null,e)),Vt(),function ji(r,e,t,o,d,v){r.info(function(){if(r.g)if(v)for(var x="",H=v.split("&"),oe=0;oe<H.length;oe++){var fe=H[oe].split("=");if(1<fe.length){var Oe=fe[0];fe=fe[1];var ft=Oe.split("_");x=2<=ft.length&&"type"==ft[1]?x+(Oe+"=")+fe+"&":x+(Oe+"=redacted&")}}else x=null;else x=v;return"XMLHTTP REQ ("+o+") [attempt "+d+"]: "+e+"\n"+t+"\n"+x})}(r.j,r.u,r.A,r.m,r.U,r.s)}function Qr(r){return!!r.g&&"GET"==r.u&&2!=r.K&&r.l.Da}function ao(r,e,t){let d,o=!0;for(;!r.I&&r.C<t.length;){if(d=Ci(r,t),d==Qs){4==e&&(r.o=4,Pe(14),o=!1),rs(r.j,r.m,null,"[Incomplete Response]");break}if(d==dr){r.o=4,Pe(15),rs(r.j,r.m,t,"[Invalid Chunk]"),o=!1;break}rs(r.j,r.m,d,null),Xn(r,d)}Qr(r)&&d!=Qs&&d!=dr&&(r.h.g="",r.C=0),4!=e||0!=t.length||r.h.h||(r.o=1,Pe(16),o=!1),r.i=r.i&&o,o?0<t.length&&!r.$&&(r.$=!0,(e=r.l).g==r&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),_a(e),e.K=!0,Pe(11))):(rs(r.j,r.m,t,"[Invalid Chunked Response]"),wi(r),_i(r))}function Ci(r,e){var t=r.C,o=e.indexOf("\n",t);return-1==o?Qs:(t=Number(e.substring(t,o)),isNaN(t)?dr:(o+=1)+t>e.length?Qs:(e=e.substr(o,t),r.C=o+t,e))}function Ls(r){r.V=Date.now()+r.O,lr(r,r.O)}function lr(r,e){if(null!=r.B)throw Error("WatchDog timer not null");r.B=vt(Ae(r.gb,r),e)}function or(r){r.B&&(pe.clearTimeout(r.B),r.B=null)}function _i(r){0==r.l.G||r.I||la(r.l,r)}function wi(r){or(r);var e=r.L;e&&"function"==typeof e.na&&e.na(),r.L=null,un(r.T),os(r.S),r.g&&(e=r.g,r.g=null,e.abort(),e.na())}function Xn(r,e){try{var t=r.l;if(0!=t.G&&(t.g==r||Zr(t.h,r)))if(!r.J&&Zr(t.h,r)&&3==t.G){try{var o=t.Fa.g.parse(e)}catch{o=null}if(Array.isArray(o)&&3==o.length){var d=o;if(0==d[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<r.F))break e;Ro(t),tr(t)}to(t),Pe(18)}}else t.Ba=d[1],0<t.Ba-t.T&&37500>d[2]&&t.L&&0==t.A&&!t.v&&(t.v=vt(Ae(t.cb,t),6e3));if(1>=lo(t.h)&&t.ja){try{t.ja()}catch{}t.ja=void 0}}else Rr(t,11)}else if((r.J||t.g==r)&&Ro(t),!Ft(e))for(d=t.Fa.g.parse(e),e=0;e<d.length;e++){let fe=d[e];if(t.T=fe[0],fe=fe[1],2==t.G)if("c"==fe[0]){t.I=fe[1],t.ka=fe[2];const Oe=fe[3];null!=Oe&&(t.ma=Oe,t.j.info("VER="+t.ma));const ft=fe[4];null!=ft&&(t.Ca=ft,t.j.info("SVER="+t.Ca));const Wt=fe[5];null!=Wt&&"number"==typeof Wt&&0<Wt&&(t.J=o=1.5*Wt,t.j.info("backChannelRequestTimeoutMs_="+o)),o=t;const yn=r.g;if(yn){const Vn=yn.g?yn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Vn){var v=o.h;v.g||-1==Vn.indexOf("spdy")&&-1==Vn.indexOf("quic")&&-1==Vn.indexOf("h2")||(v.j=v.l,v.g=new Set,v.h&&(eo(v,v.h),v.h=null))}if(o.D){const mi=yn.g?yn.g.getResponseHeader("X-HTTP-Session-Id"):null;mi&&(o.za=mi,zi(o.F,o.D,mi))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-r.F,t.j.info("Handshake RTT: "+t.P+"ms"));var x=r;if((o=t).sa=No(o,o.H?o.ka:null,o.V),x.J){co(o.h,x);var H=x,oe=o.J;oe&&H.setTimeout(oe),H.B&&(or(H),Ls(H)),o.g=x}else aa(o);0<t.i.length&&Si(t)}else"stop"!=fe[0]&&"close"!=fe[0]||Rr(t,7);else 3==t.G&&("stop"==fe[0]||"close"==fe[0]?"stop"==fe[0]?Rr(t,7):Br(t):"noop"!=fe[0]&&t.l&&t.l.wa(fe),t.A=0)}Vt()}catch{}}function Li(r,e){if(r.forEach&&"function"==typeof r.forEach)r.forEach(e,void 0);else if(Ne(r)||"string"==typeof r)Array.prototype.forEach.call(r,e,void 0);else for(var t=function xo(r){if(r.oa&&"function"==typeof r.oa)return r.oa();if(!r.W||"function"!=typeof r.W){if(typeof Map<"u"&&r instanceof Map)return Array.from(r.keys());if(!(typeof Set<"u"&&r instanceof Set)){if(Ne(r)||"string"==typeof r){var e=[];r=r.length;for(var t=0;t<r;t++)e.push(t);return e}e=[],t=0;for(const o in r)e[t++]=o;return e}}}(r),o=function cr(r){if(r.W&&"function"==typeof r.W)return r.W();if(typeof Map<"u"&&r instanceof Map||typeof Set<"u"&&r instanceof Set)return Array.from(r.values());if("string"==typeof r)return r.split("");if(Ne(r)){for(var e=[],t=r.length,o=0;o<t;o++)e.push(r[o]);return e}for(o in e=[],t=0,r)e[t++]=r[o];return e}(r),d=o.length,v=0;v<d;v++)e.call(void 0,o[v],t&&t[v],r)}(xe=Ii.prototype).setTimeout=function(r){this.O=r},xe.ib=function(r){r=r.target;const e=this.L;e&&3==ie(r)?e.l():this.La(r)},xe.La=function(r){try{if(r==this.g)e:{const Oe=ie(this.g);var e=this.g.Ea();if(this.g.aa(),!(3>Oe)&&(3!=Oe||Et||this.g&&(this.h.h||this.g.fa()||ee(this.g)))){this.I||4!=Oe||7==e||Vt(),or(this);var t=this.g.aa();this.Y=t;t:if(Qr(this)){var o=ee(this.g);r="";var d=o.length,v=4==ie(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){wi(this),_i(this);var x="";break t}this.h.i=new pe.TextDecoder}for(e=0;e<d;e++)this.h.h=!0,r+=this.h.i.decode(o[e],{stream:v&&e==d-1});o.splice(0,d),this.h.g+=r,this.C=0,x=this.h.g}else x=this.g.fa();if(this.i=200==t,function Cs(r,e,t,o,d,v,x){r.info(function(){return"XMLHTTP RESP ("+o+") [ attempt "+d+"]: "+e+"\n"+t+"\n"+v+" "+x})}(this.j,this.u,this.A,this.m,this.U,Oe,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var H,oe=this.g;if((H=oe.g?oe.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Ft(H)){var fe=H;break t}}fe=null}if(!(t=fe)){this.i=!1,this.o=3,Pe(12),wi(this),_i(this);break e}rs(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Xn(this,t)}this.P?(ao(this,Oe,x),Et&&this.i&&3==Oe&&(Gr(this.S,this.T,"tick",this.hb),this.T.start())):(rs(this.j,this.m,x,null),Xn(this,x)),4==Oe&&wi(this),this.i&&!this.I&&(4==Oe?la(this.l,this):(this.i=!1,Ls(this)))}else 400==t&&0<x.indexOf("Unknown SID")?(this.o=3,Pe(12)):(this.o=0,Pe(13)),wi(this),_i(this)}}}catch{}},xe.hb=function(){if(this.g){var r=ie(this.g),e=this.g.fa();this.C<e.length&&(or(this),ao(this,r,e),this.i&&4!=r&&Ls(this))}},xe.cancel=function(){this.I=!0,wi(this)},xe.gb=function(){this.B=null;const r=Date.now();0<=r-this.V?(function Qi(r,e){r.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Vt(),Pe(17)),wi(this),this.o=2,_i(this)):lr(this,this.V-r)};var ar=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ti(r,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,r instanceof Ti){this.h=void 0!==e?e:r.h,Or(this,r.j),this.s=r.s,this.g=r.g,Us(this,r.m),this.l=r.l,e=r.i;var t=new Di;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),as(this,t),this.o=r.o}else r&&(t=String(r).match(ar))?(this.h=!!e,Or(this,t[1]||"",!0),this.s=Ws(t[2]||""),this.g=Ws(t[3]||"",!0),Us(this,t[4]),this.l=Ws(t[5]||"",!0),as(this,t[6]||"",!0),this.o=Ws(t[7]||"")):(this.h=!!e,this.i=new Di(null,this.h))}function nr(r){return new Ti(r)}function Or(r,e,t){r.j=t?Ws(e,!0):e,r.j&&(r.j=r.j.replace(/:$/,""))}function Us(r,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);r.m=e}else r.m=null}function as(r,e,t){e instanceof Di?(r.i=e,function gs(r,e){e&&!r.j&&(Xs(r),r.i=null,r.g.forEach(function(t,o){var d=o.toLowerCase();o!=d&&(us(this,o),ir(this,d,t))},r)),r.j=e}(r.i,r.h)):(t||(e=Ao(e,ko)),r.i=new Di(e,r.h))}function zi(r,e,t){r.i.set(e,t)}function Ms(r){return zi(r,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),r}function Ws(r,e){return r?e?decodeURI(r.replace(/%25/g,"%2525")):decodeURIComponent(r):""}function Ao(r,e,t){return"string"==typeof r?(r=encodeURI(r).replace(e,bo),t&&(r=r.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),r):null}function bo(r){return"%"+((r=r.charCodeAt(0))>>4&15).toString(16)+(15&r).toString(16)}Ti.prototype.toString=function(){var r=[],e=this.j;e&&r.push(Ao(e,qo,!0),":");var t=this.g;return(t||"file"==e)&&(r.push("//"),(e=this.s)&&r.push(Ao(e,qo,!0),"@"),r.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&r.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&r.push("/"),r.push(Ao(t,"/"==t.charAt(0)?Vs:Mo,!0))),(t=this.i.toString())&&r.push("?",t),(t=this.o)&&r.push("#",Ao(t,Xr)),r.join("")};var qo=/[#\/\?@]/g,Mo=/[#\?:]/g,Vs=/[#\?]/g,ko=/[#\?@]/g,Xr=/#/g;function Di(r,e){this.h=this.g=null,this.i=r||null,this.j=!!e}function Xs(r){r.g||(r.g=new Map,r.h=0,r.i&&function vr(r,e){if(r){r=r.split("&");for(var t=0;t<r.length;t++){var o=r[t].indexOf("="),d=null;if(0<=o){var v=r[t].substring(0,o);d=r[t].substring(o+1)}else v=r[t];e(v,d?decodeURIComponent(d.replace(/\+/g," ")):"")}}}(r.i,function(e,t){r.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function us(r,e){Xs(r),e=Rs(r,e),r.g.has(e)&&(r.i=null,r.h-=r.g.get(e).length,r.g.delete(e))}function kr(r,e){return Xs(r),e=Rs(r,e),r.g.has(e)}function ir(r,e,t){us(r,e),0<t.length&&(r.i=null,r.g.set(Rs(r,e),Ye(t)),r.h+=t.length)}function Rs(r,e){return e=String(e),r.j&&(e=e.toLowerCase()),e}function Bs(r){this.l=r||Hs,r=pe.PerformanceNavigationTiming?0<(r=pe.performance.getEntriesByType("navigation")).length&&("hq"==r[0].nextHopProtocol||"h2"==r[0].nextHopProtocol):!!(pe.g&&pe.g.Ga&&pe.g.Ga()&&pe.g.Ga().$b),this.j=r?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(xe=Di.prototype).add=function(r,e){Xs(this),this.i=null,r=Rs(this,r);var t=this.g.get(r);return t||this.g.set(r,t=[]),t.push(e),this.h+=1,this},xe.forEach=function(r,e){Xs(this),this.g.forEach(function(t,o){t.forEach(function(d){r.call(e,d,o,this)},this)},this)},xe.oa=function(){Xs(this);const r=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let o=0;o<e.length;o++){const d=r[o];for(let v=0;v<d.length;v++)t.push(e[o])}return t},xe.W=function(r){Xs(this);let e=[];if("string"==typeof r)kr(this,r)&&(e=e.concat(this.g.get(Rs(this,r))));else{r=Array.from(this.g.values());for(let t=0;t<r.length;t++)e=e.concat(r[t])}return e},xe.set=function(r,e){return Xs(this),this.i=null,kr(this,r=Rs(this,r))&&(this.h-=this.g.get(r).length),this.g.set(r,[e]),this.h+=1,this},xe.get=function(r,e){return r&&0<(r=this.W(r)).length?String(r[0]):e},xe.toString=function(){if(this.i)return this.i;if(!this.g)return"";const r=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var o=e[t];const v=encodeURIComponent(String(o)),x=this.W(o);for(o=0;o<x.length;o++){var d=v;""!==x[o]&&(d+="="+encodeURIComponent(String(x[o]))),r.push(d)}}return this.i=r.join("&")};var Hs=10;function Ks(r){return!!r.h||!!r.g&&r.g.size>=r.j}function lo(r){return r.h?1:r.g?r.g.size:0}function Zr(r,e){return r.h?r.h==e:!!r.g&&r.g.has(e)}function eo(r,e){r.g?r.g.add(e):r.h=e}function co(r,e){r.h&&r.h==e?r.h=null:r.g&&r.g.has(e)&&r.g.delete(e)}function Eo(r){if(null!=r.h)return r.i.concat(r.h.D);if(null!=r.g&&0!==r.g.size){let e=r.i;for(const t of r.g.values())e=e.concat(t.D);return e}return Ye(r.i)}function Vo(){}function go(){this.g=new Vo}function uo(r,e,t){const o=t||"";try{Li(r,function(d,v){let x=d;yt(d)&&(x=rt(d)),e.push(o+v+"="+encodeURIComponent(x))})}catch(d){throw e.push(o+"type="+encodeURIComponent("_badmap")),d}}function Xi(r,e,t,o,d){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,d(o)}catch{}}function ho(r){this.l=r.ac||null,this.j=r.jb||!1}function Kr(r,e){ne.call(this),this.D=r,this.u=e,this.m=void 0,this.readyState=rr,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Bs.prototype.cancel=function(){if(this.i=Eo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const r of this.g.values())r.cancel();this.g.clear()}},Vo.prototype.stringify=function(r){return pe.JSON.stringify(r,void 0)},Vo.prototype.parse=function(r){return pe.JSON.parse(r,void 0)},Qe(ho,st),ho.prototype.g=function(){return new Kr(this.l,this.j)},ho.prototype.i=function(r){return function(){return r}}({}),Qe(Kr,ne);var rr=0;function _o(r){r.j.read().then(r.Ta.bind(r)).catch(r.ga.bind(r))}function Ts(r){r.readyState=4,r.l=null,r.j=null,r.A=null,Bi(r)}function Bi(r){r.onreadystatechange&&r.onreadystatechange.call(r)}(xe=Kr.prototype).open=function(r,e){if(this.readyState!=rr)throw this.abort(),Error("Error reopening a connection");this.C=r,this.B=e,this.readyState=1,Bi(this)},xe.send=function(r){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};r&&(e.body=r),(this.D||pe).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},xe.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Ts(this)),this.readyState=rr},xe.Wa=function(r){if(this.g&&(this.l=r,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=r.headers,this.readyState=2,Bi(this)),this.g&&(this.readyState=3,Bi(this),this.g)))if("arraybuffer"===this.responseType)r.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof pe.ReadableStream<"u"&&"body"in r){if(this.j=r.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;_o(this)}else r.text().then(this.Va.bind(this),this.ga.bind(this))},xe.Ta=function(r){if(this.g){if(this.u&&r.value)this.response.push(r.value);else if(!this.u){var e=r.value?r.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!r.done}))&&(this.response=this.responseText+=e)}r.done?Ts(this):Bi(this),3==this.readyState&&_o(this)}},xe.Va=function(r){this.g&&(this.response=this.responseText=r,Ts(this))},xe.Ua=function(r){this.g&&(this.response=r,Ts(this))},xe.ga=function(){this.g&&Ts(this)},xe.setRequestHeader=function(r,e){this.v.append(r,e)},xe.getResponseHeader=function(r){return this.h&&this.h.get(r.toLowerCase())||""},xe.getAllResponseHeaders=function(){if(!this.h)return"";const r=[],e=this.h.entries();for(var t=e.next();!t.done;)r.push((t=t.value)[0]+": "+t[1]),t=e.next();return r.join("\r\n")},Object.defineProperty(Kr.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(r){this.m=r?"include":"same-origin"}});var Bo=pe.JSON.parse;function Mr(r){ne.call(this),this.headers=new Map,this.u=r||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Es,this.K=this.L=!1}Qe(Mr,ne);var Es="",Yr=/^https?$/i,qs=["POST","PUT"];function Io(r,e){r.h=!1,r.g&&(r.l=!0,r.g.abort(),r.l=!1),r.j=e,r.m=5,ai(r),_s(r)}function ai(r){r.D||(r.D=!0,de(r,"complete"),de(r,"error"))}function fo(r){if(r.h&&typeof ze<"u"&&(!r.C[1]||4!=ie(r)||2!=r.aa()))if(r.v&&4==ie(r))Kn(r.Ha,0,r);else if(de(r,"readystatechange"),4==ie(r)){r.h=!1;try{const H=r.aa();e:switch(H){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var o;if(o=0===H){var d=String(r.H).match(ar)[1]||null;if(!d&&pe.self&&pe.self.location){var v=pe.self.location.protocol;d=v.substr(0,v.length-1)}o=!Yr.test(d?d.toLowerCase():"")}t=o}if(t)de(r,"complete"),de(r,"success");else{r.m=6;try{var x=2<ie(r)?r.g.statusText:""}catch{x=""}r.j=x+" ["+r.aa()+"]",ai(r)}}finally{_s(r)}}}function _s(r,e){if(r.g){si(r);const t=r.g,o=r.C[0]?Me:null;r.g=null,r.C=null,e||de(r,"ready");try{t.onreadystatechange=o}catch{}}}function si(r){r.g&&r.K&&(r.g.ontimeout=null),r.A&&(pe.clearTimeout(r.A),r.A=null)}function ie(r){return r.g?r.g.readyState:0}function ee(r){try{if(!r.g)return null;if("response"in r.g)return r.g.response;switch(r.J){case Es:case"text":return r.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in r.g)return r.g.mozResponseArrayBuffer}return null}catch{return null}}function Q(r){let e="";return ri(r,function(t,o){e+=o,e+=":",e+=t,e+="\r\n"}),e}function De(r,e,t){e:{for(o in t){var o=!1;break e}o=!0}o||(t=Q(t),"string"==typeof r?null!=t&&encodeURIComponent(String(t)):zi(r,e,t))}function en(r,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[r]||e}function ti(r){this.Ca=0,this.i=[],this.j=new Tr,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=en("failFast",!1,r),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=en("baseRetryDelayMs",5e3,r),this.bb=en("retryDelaySeedMs",1e4,r),this.$a=en("forwardChannelMaxRetries",2,r),this.ta=en("forwardChannelRequestTimeoutMs",2e4,r),this.ra=r&&r.xmlHttpFactory||void 0,this.Da=r&&r.Zb||!1,this.J=void 0,this.H=r&&r.supportsCrossDomainXhr||!1,this.I="",this.h=new Bs(r&&r.concurrentRequestLimit),this.Fa=new go,this.O=r&&r.fastHandshake||!1,this.N=r&&r.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=r&&r.Xb||!1,r&&r.Aa&&this.j.Aa(),r&&r.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&r&&r.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function Br(r){if(pn(r),3==r.G){var e=r.U++,t=nr(r.F);zi(t,"SID",r.I),zi(t,"RID",e),zi(t,"TYPE","terminate"),es(r,t),(e=new Ii(r,r.j,e,void 0)).K=2,e.v=Ms(nr(t)),t=!1,pe.navigator&&pe.navigator.sendBeacon&&(t=pe.navigator.sendBeacon(e.v.toString(),"")),!t&&pe.Image&&((new Image).src=e.v,t=!0),t||(e.g=Ho(e.l,null),e.g.da(e.v)),e.F=Date.now(),Ls(e)}Os(r)}function tr(r){r.g&&(_a(r),r.g.cancel(),r.g=null)}function pn(r){tr(r),r.u&&(pe.clearTimeout(r.u),r.u=null),Ro(r),r.h.cancel(),r.m&&("number"==typeof r.m&&pe.clearTimeout(r.m),r.m=null)}function Si(r){Ks(r.h)||r.m||(r.m=!0,St(r.Ja,r),r.C=0)}function ma(r,e){var t;t=e?e.m:r.U++;const o=nr(r.F);zi(o,"SID",r.I),zi(o,"RID",t),zi(o,"AID",r.T),es(r,o),r.o&&r.s&&De(o,r.o,r.s),t=new Ii(r,r.j,t,r.C+1),null===r.o&&(t.H=r.s),e&&(r.i=e.D.concat(r.i)),e=ga(r,t,1e3),t.setTimeout(Math.round(.5*r.ta)+Math.round(.5*r.ta*Math.random())),eo(r.h,t),bs(t,o,e)}function es(r,e){r.ia&&ri(r.ia,function(t,o){zi(e,o,t)}),r.l&&Li({},function(t,o){zi(e,o,t)})}function ga(r,e,t){t=Math.min(r.i.length,t);var o=r.l?Ae(r.l.Ra,r.l,r):null;e:{var d=r.i;let v=-1;for(;;){const x=["count="+t];-1==v?0<t?(v=d[0].h,x.push("ofs="+v)):v=0:x.push("ofs="+v);let H=!0;for(let oe=0;oe<t;oe++){let fe=d[oe].h;const Oe=d[oe].g;if(fe-=v,0>fe)v=Math.max(0,d[oe].h-100),H=!1;else try{uo(Oe,x,"req"+fe+"_")}catch{o&&o(Oe)}}if(H){o=x.join("&");break e}}}return r=r.i.splice(0,t),e.D=r,o}function aa(r){r.g||r.u||(r.Z=1,St(r.Ia,r),r.A=0)}function to(r){return!(r.g||r.u||3<=r.A||(r.Z++,r.u=vt(Ae(r.Ia,r),ca(r,r.A)),r.A++,0))}function _a(r){null!=r.B&&(pe.clearTimeout(r.B),r.B=null)}function Yo(r){r.g=new Ii(r,r.j,"rpc",r.Z),null===r.o&&(r.g.H=r.s),r.g.N=0;var e=nr(r.sa);zi(e,"RID","rpc"),zi(e,"SID",r.I),zi(e,"CI",r.L?"0":"1"),zi(e,"AID",r.T),zi(e,"TYPE","xmlhttp"),es(r,e),r.o&&r.s&&De(e,r.o,r.s),r.J&&r.g.setTimeout(r.J);var t=r.g;r=r.ka,t.K=1,t.v=Ms(nr(e)),t.s=null,t.P=!0,Vr(t,r)}function Ro(r){null!=r.v&&(pe.clearTimeout(r.v),r.v=null)}function la(r,e){var t=null;if(r.g==e){Ro(r),_a(r),r.g=null;var o=2}else{if(!Zr(r.h,e))return;t=e.D,co(r.h,e),o=1}if(0!=r.G)if(r.pa=e.Y,e.i)if(1==o){t=e.s?e.s.length:0,e=Date.now()-e.F;var d=r.C;de(o=Ar(),new Ge(o,t)),Si(r)}else aa(r);else if(3==(d=e.o)||0==d&&0<r.pa||!(1==o&&function Zo(r,e){return!(lo(r.h)>=r.h.j-(r.m?1:0)||(r.m?(r.i=e.D.concat(r.i),0):1==r.G||2==r.G||r.C>=(r.Za?0:r.$a)||(r.m=vt(Ae(r.Ja,r,e),ca(r,r.C)),r.C++,0)))}(r,e)||2==o&&to(r)))switch(t&&0<t.length&&(e=r.h,e.i=e.i.concat(t)),d){case 1:Rr(r,5);break;case 4:Rr(r,10);break;case 3:Rr(r,6);break;default:Rr(r,2)}}function ca(r,e){let t=r.Xa+Math.floor(Math.random()*r.bb);return r.l||(t*=2),t*e}function Rr(r,e){if(r.j.info("Error code "+e),2==e){var t=null;r.l&&(t=null);var o=Ae(r.kb,r);t||(t=new Ti("//www.google.com/images/cleardot.gif"),pe.location&&"http"==pe.location.protocol||Or(t,"https"),Ms(t)),function Ps(r,e){const t=new Tr;if(pe.Image){const o=new Image;o.onload=_t(Xi,t,o,"TestLoadImage: loaded",!0,e),o.onerror=_t(Xi,t,o,"TestLoadImage: error",!1,e),o.onabort=_t(Xi,t,o,"TestLoadImage: abort",!1,e),o.ontimeout=_t(Xi,t,o,"TestLoadImage: timeout",!1,e),pe.setTimeout(function(){o.ontimeout&&o.ontimeout()},1e4),o.src=r}else e(!1)}(t.toString(),o)}else Pe(2);r.G=0,r.l&&r.l.va(e),Os(r),pn(r)}function Os(r){if(r.G=0,r.la=[],r.l){const e=Eo(r.h);(0!=e.length||0!=r.i.length)&&(z(r.la,e),z(r.la,r.i),r.h.i.length=0,Ye(r.i),r.i.length=0),r.l.ua()}}function No(r,e,t){var o=t instanceof Ti?nr(t):new Ti(t,void 0);if(""!=o.g)e&&(o.g=e+"."+o.g),Us(o,o.m);else{var d=pe.location;o=d.protocol,e=e?e+"."+d.hostname:d.hostname,d=+d.port;var v=new Ti(null,void 0);o&&Or(v,o),e&&(v.g=e),d&&Us(v,d),t&&(v.l=t),o=v}return e=r.za,(t=r.D)&&e&&zi(o,t,e),zi(o,"VER",r.ma),es(r,o),o}function Ho(r,e,t){if(e&&!r.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Mr(t&&r.Da&&!r.ra?new ho({jb:!0}):r.ra)).Ka(r.H),e}function wo(){}function Co(){if(Tt&&!(10<=Number(Cr)))throw Error("Environmental error: no available transport.")}function Zs(r,e){ne.call(this),this.g=new ti(e),this.l=r,this.h=e&&e.messageUrlParams||null,r=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(r?r["X-Client-Protocol"]="webchannel":r={"X-Client-Protocol":"webchannel"}),this.g.s=r,r=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(r?r["X-WebChannel-Content-Type"]=e.messageContentType:r={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(r?r["X-WebChannel-Client-Profile"]=e.ya:r={"X-WebChannel-Client-Profile":e.ya}),this.g.S=r,(r=e&&e.Yb)&&!Ft(r)&&(this.g.o=r),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Ft(e)&&(this.g.D=e,null!==(r=this.h)&&e in r&&e in(r=this.h)&&delete r[e]),this.j=new To(this)}function ya(r){mn.call(this);var e=r.__sm__;if(e){e:{for(const t in e){r=t;break e}r=void 0}(this.i=r)&&(r=this.i,e=null!==e&&r in e?e[r]:void 0),this.data=e}else this.data=r}function jo(){Wn.call(this),this.status=1}function To(r){this.g=r}(xe=Mr.prototype).Ka=function(r){this.L=r},xe.da=function(r,e,t,o){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+r);e=e?e.toUpperCase():"GET",this.H=r,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():xn.g(),this.C=function nt(r){return r.h||(r.h=r.i())}(this.u?this.u:xn),this.g.onreadystatechange=Ae(this.Ha,this);try{this.F=!0,this.g.open(e,String(r),!0),this.F=!1}catch(v){return void Io(this,v)}if(r=t||"",t=new Map(this.headers),o)if(Object.getPrototypeOf(o)===Object.prototype)for(var d in o)t.set(d,o[d]);else{if("function"!=typeof o.keys||"function"!=typeof o.get)throw Error("Unknown input type for opt_headers: "+String(o));for(const v of o.keys())t.set(v,o.get(v))}o=Array.from(t.keys()).find(v=>"content-type"==v.toLowerCase()),d=pe.FormData&&r instanceof pe.FormData,!(0<=kt(qs,e))||o||d||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[v,x]of t)this.g.setRequestHeader(v,x);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{si(this),0<this.B&&((this.K=function Jr(r){return Tt&&function Qn(){return function jt(r){var e=Bn;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=r(9)}(function(){let r=0;const e=gn(String(sn)).split("."),t=gn("9").split("."),o=Math.max(e.length,t.length);for(let x=0;0==r&&x<o;x++){var d=e[x]||"",v=t[x]||"";do{if(d=/(\d*)(\D*)(.*)/.exec(d)||["","","",""],v=/(\d*)(\D*)(.*)/.exec(v)||["","","",""],0==d[0].length&&0==v[0].length)break;r=vn(0==d[1].length?0:parseInt(d[1],10),0==v[1].length?0:parseInt(v[1],10))||vn(0==d[2].length,0==v[2].length)||vn(d[2],v[2]),d=d[3],v=v[3]}while(0==r)}return 0<=r})}()&&"number"==typeof r.timeout&&void 0!==r.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Ae(this.qa,this)):this.A=Kn(this.qa,this.B,this)),this.v=!0,this.g.send(r),this.v=!1}catch(v){Io(this,v)}},xe.qa=function(){typeof ze<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,de(this,"timeout"),this.abort(8))},xe.abort=function(r){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=r||7,de(this,"complete"),de(this,"abort"),_s(this))},xe.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),_s(this,!0)),Mr.X.M.call(this)},xe.Ha=function(){this.s||(this.F||this.v||this.l?fo(this):this.fb())},xe.fb=function(){fo(this)},xe.aa=function(){try{return 2<ie(this)?this.g.status:-1}catch{return-1}},xe.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},xe.Sa=function(r){if(this.g){var e=this.g.responseText;return r&&0==e.indexOf(r)&&(e=e.substring(r.length)),Bo(e)}},xe.Ea=function(){return this.m},xe.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(xe=ti.prototype).ma=8,xe.G=1,xe.Ja=function(r){if(this.m)if(this.m=null,1==this.G){if(!r){this.U=Math.floor(1e5*Math.random()),r=this.U++;const d=new Ii(this,this.j,r,void 0);let v=this.s;if(this.S&&(v?(v=Gn(v),Pr(v,this.S)):v=this.S),null!==this.o||this.N||(d.H=v,v=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var o=this.i[t];if(void 0===(o="__data__"in o.g&&"string"==typeof(o=o.g.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=ga(this,d,e),zi(t=nr(this.F),"RID",r),zi(t,"CVER",22),this.D&&zi(t,"X-HTTP-Session-Id",this.D),es(this,t),v&&(this.N?e="headers="+encodeURIComponent(String(Q(v)))+"&"+e:this.o&&De(t,this.o,v)),eo(this.h,d),this.Ya&&zi(t,"TYPE","init"),this.O?(zi(t,"$req",e),zi(t,"SID","null"),d.Z=!0,bs(d,t,null)):bs(d,t,e),this.G=2}}else 3==this.G&&(r?ma(this,r):0==this.i.length||Ks(this.h)||ma(this))},xe.Ia=function(){if(this.u=null,Yo(this),this.$&&!(this.K||null==this.g||0>=this.P)){var r=2*this.P;this.j.info("BP detection timer enabled: "+r),this.B=vt(Ae(this.eb,this),r)}},xe.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Pe(10),tr(this),Yo(this))},xe.cb=function(){null!=this.v&&(this.v=null,tr(this),to(this),Pe(19))},xe.kb=function(r){r?(this.j.info("Successfully pinged google.com"),Pe(2)):(this.j.info("Failed to ping google.com"),Pe(1))},(xe=wo.prototype).xa=function(){},xe.wa=function(){},xe.va=function(){},xe.ua=function(){},xe.Ra=function(){},Co.prototype.g=function(r,e){return new Zs(r,e)},Qe(Zs,ne),Zs.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var r=this.g,e=this.l,t=this.h||void 0;Pe(0),r.V=e,r.ia=t||{},r.L=r.Y,r.F=No(r,null,r.V),Si(r)},Zs.prototype.close=function(){Br(this.g)},Zs.prototype.u=function(r){var e=this.g;if("string"==typeof r){var t={};t.__data__=r,r=t}else this.v&&((t={}).__data__=rt(r),r=t);e.i.push(new class{constructor(r,e){this.h=r,this.g=e}}(e.ab++,r)),3==e.G&&Si(e)},Zs.prototype.M=function(){this.g.l=null,delete this.j,Br(this.g),delete this.g,Zs.X.M.call(this)},Qe(ya,mn),Qe(jo,Wn),Qe(To,wo),To.prototype.xa=function(){de(this.g,"a")},To.prototype.wa=function(r){de(this.g,new ya(r))},To.prototype.va=function(r){de(this.g,new jo)},To.prototype.ua=function(){de(this.g,"b")},Co.prototype.createWebChannel=Co.prototype.g,Zs.prototype.send=Zs.prototype.u,Zs.prototype.open=Zs.prototype.m,Zs.prototype.close=Zs.prototype.close,Kt.NO_ERROR=0,Kt.TIMEOUT=8,Kt.HTTP_ERROR=6,Dn.COMPLETE="complete",wt.EventType=Bt,Bt.OPEN="a",Bt.CLOSE="b",Bt.ERROR="c",Bt.MESSAGE="d",ne.prototype.listen=ne.prototype.N,Mr.prototype.listenOnce=Mr.prototype.O,Mr.prototype.getLastError=Mr.prototype.Oa,Mr.prototype.getLastErrorCode=Mr.prototype.Ea,Mr.prototype.getStatus=Mr.prototype.aa,Mr.prototype.getResponseJson=Mr.prototype.Sa,Mr.prototype.getResponseText=Mr.prototype.fa,Mr.prototype.send=Mr.prototype.da,Mr.prototype.setWithCredentials=Mr.prototype.Ka;var Qo=Ze.createWebChannelTransport=function(){return new Co},La=Ze.getStatEventTarget=function(){return Ar()},zo=Ze.ErrorCode=Kt,El=Ze.EventType=Dn,ds=Ze.Event=Dr,Ua=Ze.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},za=Ze.FetchXmlHttpFactory=ho,$a=Ze.WebChannel=wt,Xo=Ze.XhrIo=Mr;const il="@firebase/firestore";class ls{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ls.UNAUTHENTICATED=new ls(null),ls.GOOGLE_CREDENTIALS=new ls("google-credentials-uid"),ls.FIRST_PARTY=new ls("first-party-uid"),ls.MOCK_USER=new ls("mock-user");let $o="9.19.0";const Do=new Te.Yd("@firebase/firestore");function no(){return Do.logLevel}function me(r){Do.setLogLevel(r)}function S(r,...e){if(Do.logLevel<=Te.in.DEBUG){const t=e.map(_e);Do.debug(`Firestore (${$o}): ${r}`,...t)}}function N(r,...e){if(Do.logLevel<=Te.in.ERROR){const t=e.map(_e);Do.error(`Firestore (${$o}): ${r}`,...t)}}function J(r,...e){if(Do.logLevel<=Te.in.WARN){const t=e.map(_e);Do.warn(`Firestore (${$o}): ${r}`,...t)}}function _e(r){if("string"==typeof r)return r;try{return JSON.stringify(r)}catch{return r}}function ve(r="Unexpected state"){const e=`FIRESTORE (${$o}) INTERNAL ASSERTION FAILED: `+r;throw N(e),new Error(e)}function $e(r,e){r||ve()}function gt(r,e){r||ve()}function at(r,e){return r}const Ke={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class k extends ke.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class te{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class G{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class ge{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ls.UNAUTHENTICATED))}shutdown(){}}class Ve{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Dt{constructor(e){this.t=e,this.currentUser=ls.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var o=this;let d=this.i;const v=fe=>this.i!==d?(d=this.i,t(fe)):Promise.resolve();let x=new te;this.o=()=>{this.i++,this.currentUser=this.u(),x.resolve(),x=new te,e.enqueueRetryable(()=>v(this.currentUser))};const H=()=>{const fe=x;e.enqueueRetryable((0,f.Z)(function*(){yield fe.promise,yield v(o.currentUser)}))},oe=fe=>{S("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=fe,this.auth.addAuthTokenListener(this.o),H()};this.t.onInit(fe=>oe(fe)),setTimeout(()=>{if(!this.auth){const fe=this.t.getImmediate({optional:!0});fe?oe(fe):(S("FirebaseAuthCredentialsProvider","Auth not yet detected"),x.resolve(),x=new te)}},0),H()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(o=>this.i!==e?(S("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):o?($e("string"==typeof o.accessToken),new G(o.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return $e(null===e||"string"==typeof e),new ls(e)}}class tn{constructor(e,t,o){this.h=e,this.l=t,this.m=o,this.type="FirstParty",this.user=ls.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class An{constructor(e,t,o){this.h=e,this.l=t,this.m=o}getToken(){return Promise.resolve(new tn(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(ls.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class xi{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class li{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const o=v=>{null!=v.error&&S("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${v.error.message}`);const x=v.token!==this.T;return this.T=v.token,S("FirebaseAppCheckTokenProvider",`Received ${x?"new":"existing"} token.`),x?t(v.token):Promise.resolve()};this.o=v=>{e.enqueueRetryable(()=>o(v))};const d=v=>{S("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=v,this.appCheck.addTokenListener(this.o)};this.I.onInit(v=>d(v)),setTimeout(()=>{if(!this.appCheck){const v=this.I.getImmediate({optional:!0});v?d(v):S("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?($e("string"==typeof t.token),this.T=t.token,new xi(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function yi(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let o=0;o<r;o++)t[o]=Math.floor(256*Math.random());return t}class Nr{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let o="";for(;o.length<20;){const d=yi(40);for(let v=0;v<d.length;++v)o.length<20&&d[v]<t&&(o+=e.charAt(d[v]%e.length))}return o}}function Rn(r,e){return r<e?-1:r>e?1:0}function hr(r,e,t){return r.length===e.length&&r.every((o,d)=>t(o,e[d]))}function fr(r){return r+"\0"}class ni{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new k(Ke.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new k(Ke.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new k(Ke.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new k(Ke.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ni.fromMillis(Date.now())}static fromDate(e){return ni.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),o=Math.floor(1e6*(e-1e3*t));return new ni(t,o)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Rn(this.nanoseconds,e.nanoseconds):Rn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class qn{constructor(e){this.timestamp=e}static fromTimestamp(e){return new qn(e)}static min(){return new qn(new ni(0,0))}static max(){return new qn(new ni(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class hs{constructor(e,t,o){void 0===t?t=0:t>e.length&&ve(),void 0===o?o=e.length-t:o>e.length-t&&ve(),this.segments=e,this.offset=t,this.len=o}get length(){return this.len}isEqual(e){return 0===hs.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof hs?e.forEach(o=>{t.push(o)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,o=this.limit();t<o;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const o=Math.min(e.length,t.length);for(let d=0;d<o;d++){const v=e.get(d),x=t.get(d);if(v<x)return-1;if(v>x)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Ki extends hs{construct(e,t,o){return new Ki(e,t,o)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const o of e){if(o.indexOf("//")>=0)throw new k(Ke.INVALID_ARGUMENT,`Invalid segment (${o}). Paths must not contain // in them.`);t.push(...o.split("/").filter(d=>d.length>0))}return new Ki(t)}static emptyPath(){return new Ki([])}}const Po=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ts extends hs{construct(e,t,o){return new ts(e,t,o)}static isValidIdentifier(e){return Po.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ts.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new ts(["__name__"])}static fromServerFormat(e){const t=[];let o="",d=0;const v=()=>{if(0===o.length)throw new k(Ke.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(o),o=""};let x=!1;for(;d<e.length;){const H=e[d];if("\\"===H){if(d+1===e.length)throw new k(Ke.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const oe=e[d+1];if("\\"!==oe&&"."!==oe&&"`"!==oe)throw new k(Ke.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);o+=oe,d+=2}else"`"===H?(x=!x,d++):"."!==H||x?(o+=H,d++):(v(),d++)}if(v(),x)throw new k(Ke.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ts(t)}static emptyPath(){return new ts([])}}class Jt{constructor(e){this.path=e}static fromPath(e){return new Jt(Ki.fromString(e))}static fromName(e){return new Jt(Ki.fromString(e).popFirst(5))}static empty(){return new Jt(Ki.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Ki.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Ki.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Jt(new Ki(e.slice()))}}class pi{constructor(e,t,o,d){this.indexId=e,this.collectionGroup=t,this.fields=o,this.indexState=d}}function ci(r){return r.fields.find(e=>2===e.kind)}function pr(r){return r.fields.filter(e=>2!==e.kind)}pi.UNKNOWN_ID=-1;class ks{constructor(e,t){this.fieldPath=e,this.kind=t}}class ys{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new ys(0,Lr.min())}}function Fr(r,e){const t=r.toTimestamp().seconds,o=r.toTimestamp().nanoseconds+1,d=qn.fromTimestamp(1e9===o?new ni(t+1,0):new ni(t,o));return new Lr(d,Jt.empty(),e)}function Jo(r){return new Lr(r.readTime,r.key,-1)}class Lr{constructor(e,t,o){this.readTime=e,this.documentKey=t,this.largestBatchId=o}static min(){return new Lr(qn.min(),Jt.empty(),-1)}static max(){return new Lr(qn.max(),Jt.empty(),-1)}}function mr(r,e){let t=r.readTime.compareTo(e.readTime);return 0!==t?t:(t=Jt.comparator(r.documentKey,e.documentKey),0!==t?t:Rn(r.largestBatchId,e.largestBatchId))}const po="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class io{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function ua(r){return Fo.apply(this,arguments)}function Fo(){return Fo=(0,f.Z)(function*(r){if(r.code!==Ke.FAILED_PRECONDITION||r.message!==po)throw r;S("LocalStore","Unexpectedly lost primary lease")}),Fo.apply(this,arguments)}class nn{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ve(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new nn((o,d)=>{this.nextCallback=v=>{this.wrapSuccess(e,v).next(o,d)},this.catchCallback=v=>{this.wrapFailure(t,v).next(o,d)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof nn?t:nn.resolve(t)}catch(t){return nn.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):nn.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):nn.reject(t)}static resolve(e){return new nn((t,o)=>{t(e)})}static reject(e){return new nn((t,o)=>{o(e)})}static waitFor(e){return new nn((t,o)=>{let d=0,v=0,x=!1;e.forEach(H=>{++d,H.next(()=>{++v,x&&v===d&&t()},oe=>o(oe))}),x=!0,v===d&&t()})}static or(e){let t=nn.resolve(!1);for(const o of e)t=t.next(d=>d?nn.resolve(d):o());return t}static forEach(e,t){const o=[];return e.forEach((d,v)=>{o.push(t.call(this,d,v))}),this.waitFor(o)}static mapArray(e,t){return new nn((o,d)=>{const v=e.length,x=new Array(v);let H=0;for(let oe=0;oe<v;oe++){const fe=oe;t(e[fe]).next(Oe=>{x[fe]=Oe,++H,H===v&&o(x)},Oe=>d(Oe))}})}static doWhile(e,t){return new nn((o,d)=>{const v=()=>{!0===e()?t().next(()=>{v()},d):o()};v()})}}class va{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.R=new te,this.transaction.oncomplete=()=>{this.R.resolve()},this.transaction.onabort=()=>{t.error?this.R.reject(new ea(e,t.error)):this.R.resolve()},this.transaction.onerror=o=>{const d=js(o.target.error);this.R.reject(new ea(e,d))}}static open(e,t,o,d){try{return new va(t,e.transaction(d,o))}catch(v){throw new ea(t,v)}}get v(){return this.R.promise}abort(e){e&&this.R.reject(e),this.aborted||(S("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new ba(t)}}class Lo{constructor(e,t,o){this.name=e,this.version=t,this.V=o,12.2===Lo.S((0,ke.z$)())&&N("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return S("SimpleDb","Removing database:",e),ro(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,ke.hl)())return!1;if(Lo.C())return!0;const e=(0,ke.z$)(),t=Lo.S(e),o=0<t&&t<10,d=Lo.N(e),v=0<d&&d<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||o||v)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.k)}static O(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),o=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(o)}static N(e){const t=e.match(/Android ([\d.]+)/i),o=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(o)}$(e){var t=this;return(0,f.Z)(function*(){return t.db||(S("SimpleDb","Opening database:",t.name),t.db=yield new Promise((o,d)=>{const v=indexedDB.open(t.name,t.version);v.onsuccess=x=>{o(x.target.result)},v.onblocked=()=>{d(new ea(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},v.onerror=x=>{const H=x.target.error;d("VersionError"===H.name?new k(Ke.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===H.name?new k(Ke.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+H):new ea(e,H))},v.onupgradeneeded=x=>{S("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',x.oldVersion),t.V.M(x.target.result,v.transaction,x.oldVersion,t.version).next(()=>{S("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.F&&(t.db.onversionchange=o=>t.F(o)),t.db})()}B(e){this.F=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,o,d){var v=this;return(0,f.Z)(function*(){const x="readonly"===t;let H=0;for(;;){++H;try{v.db=yield v.$(e);const oe=va.open(v.db,e,x?"readonly":"readwrite",o),fe=d(oe).next(Oe=>(oe.P(),Oe)).catch(Oe=>(oe.abort(Oe),nn.reject(Oe))).toPromise();return fe.catch(()=>{}),yield oe.v,fe}catch(oe){const fe=oe,Oe="FirebaseError"!==fe.name&&H<3;if(S("SimpleDb","Transaction failed with error:",fe.message,"Retrying:",Oe),v.close(),!Oe)return Promise.reject(fe)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class da{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return ro(this.L.delete())}}class ea extends k{constructor(e,t){super(Ke.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Hr(r){return"IndexedDbTransactionError"===r.name}class ba{constructor(e){this.store=e}put(e,t){let o;return void 0!==t?(S("SimpleDb","PUT",this.store.name,e,t),o=this.store.put(t,e)):(S("SimpleDb","PUT",this.store.name,"<auto-key>",e),o=this.store.put(e)),ro(o)}add(e){return S("SimpleDb","ADD",this.store.name,e,e),ro(this.store.add(e))}get(e){return ro(this.store.get(e)).next(t=>(void 0===t&&(t=null),S("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return S("SimpleDb","DELETE",this.store.name,e),ro(this.store.delete(e))}count(){return S("SimpleDb","COUNT",this.store.name),ro(this.store.count())}j(e,t){const o=this.options(e,t);if(o.index||"function"!=typeof this.store.getAll){const d=this.cursor(o),v=[];return this.W(d,(x,H)=>{v.push(H)}).next(()=>v)}{const d=this.store.getAll(o.range);return new nn((v,x)=>{d.onerror=H=>{x(H.target.error)},d.onsuccess=H=>{v(H.target.result)}})}}H(e,t){const o=this.store.getAll(e,null===t?void 0:t);return new nn((d,v)=>{o.onerror=x=>{v(x.target.error)},o.onsuccess=x=>{d(x.target.result)}})}J(e,t){S("SimpleDb","DELETE ALL",this.store.name);const o=this.options(e,t);o.Y=!1;const d=this.cursor(o);return this.W(d,(v,x,H)=>H.delete())}Z(e,t){let o;t?o=e:(o={},t=e);const d=this.cursor(o);return this.W(d,t)}X(e){const t=this.cursor({});return new nn((o,d)=>{t.onerror=v=>{const x=js(v.target.error);d(x)},t.onsuccess=v=>{const x=v.target.result;x?e(x.primaryKey,x.value).next(H=>{H?x.continue():o()}):o()}})}W(e,t){const o=[];return new nn((d,v)=>{e.onerror=x=>{v(x.target.error)},e.onsuccess=x=>{const H=x.target.result;if(!H)return void d();const oe=new da(H),fe=t(H.primaryKey,H.value,oe);if(fe instanceof nn){const Oe=fe.catch(ft=>(oe.done(),nn.reject(ft)));o.push(Oe)}oe.isDone?d():null===oe.K?H.continue():H.continue(oe.K)}}).next(()=>nn.waitFor(o))}options(e,t){let o;return void 0!==e&&("string"==typeof e?o=e:t=e),{index:o,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const o=this.store.index(e.index);return e.Y?o.openKeyCursor(e.range,t):o.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function ro(r){return new nn((e,t)=>{r.onsuccess=o=>{e(o.target.result)},r.onerror=o=>{const d=js(o.target.error);t(d)}})}let Ga=!1;function js(r){const e=Lo.S((0,ke.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(r.message.indexOf(t)>=0){const o=new k("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Ga||(Ga=!0,setTimeout(()=>{throw o},0)),o}}return r}class ta{constructor(e,t){this.asyncQueue=e,this.tt=t,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){var t=this;S("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,f.Z)(function*(){t.task=null;try{S("IndexBackiller",`Documents written: ${yield t.tt.nt()}`)}catch(o){Hr(o)?S("IndexBackiller","Ignoring IndexedDB error during index backfill: ",o):yield ua(o)}yield t.et(6e4)}))}}class Xa{constructor(e,t){this.localStore=e,this.persistence=t}nt(e=50){var t=this;return(0,f.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",o=>t.st(o,e))})()}st(e,t){const o=new Set;let d=t,v=!0;return nn.doWhile(()=>!0===v&&d>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(x=>{if(null!==x&&!o.has(x))return S("IndexBackiller",`Processing collection: ${x}`),this.it(e,x,d).next(H=>{d-=H,o.add(x)});v=!1})).next(()=>t-d)}it(e,t,o){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(d=>this.localStore.localDocuments.getNextDocuments(e,t,d,o).next(v=>{const x=v.changes;return this.localStore.indexManager.updateIndexEntries(e,x).next(()=>this.rt(d,v)).next(H=>(S("IndexBackiller",`Updating offset: ${H}`),this.localStore.indexManager.updateCollectionGroup(e,t,H))).next(()=>x.size)}))}rt(e,t){let o=e;return t.changes.forEach((d,v)=>{const x=Jo(v);mr(x,o)>0&&(o=x)}),new Lr(o.readTime,o.documentKey,Math.max(t.batchId,e.largestBatchId))}}let mo=(()=>{class r{constructor(t,o){this.previousValue=t,o&&(o.sequenceNumberHandler=d=>this.ot(d),this.ut=d=>o.writeSequenceNumber(d))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}return r.ct=-1,r})();function Va(r){return null==r}function dl(r){return 0===r&&1/r==-1/0}function Ja(r){return"number"==typeof r&&Number.isInteger(r)&&!dl(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}function Fs(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=rl(e)),e=Ba(r.get(t),e);return rl(e)}function Ba(r,e){let t=e;const o=r.length;for(let d=0;d<o;d++){const v=r.charAt(d);switch(v){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=v}}return t}function rl(r){return r+"\x01\x01"}function xa(r){const e=r.length;if($e(e>=2),2===e)return $e("\x01"===r.charAt(0)&&"\x01"===r.charAt(1)),Ki.emptyPath();const t=e-2,o=[];let d="";for(let v=0;v<e;){const x=r.indexOf("\x01",v);switch((x<0||x>t)&&ve(),r.charAt(x+1)){case"\x01":const H=r.substring(v,x);let oe;0===d.length?oe=H:(d+=H,oe=d,d=""),o.push(oe);break;case"\x10":d+=r.substring(v,x),d+="\0";break;case"\x11":d+=r.substring(v,x+1);break;default:ve()}v=x+2}return new Ki(o)}const Al=["userId","batchId"];function Ea(r,e){return[r,Fs(e)]}function Hl(r,e,t){return[r,Fs(e),t]}const jl={},cs=["prefixPath","collectionGroup","readTime","documentId"],zl=["prefixPath","collectionGroup","documentId"],el=["collectionGroup","readTime","prefixPath","documentId"],Il=["canonicalId","targetId"],hl=["targetId","path"],$l=["path","targetId"],sc=["collectionId","parent"],Gl=["indexId","uid"],Ia=["uid","sequenceNumber"],fl=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Wl=["indexId","uid","orderedDocumentKey"],zs=["userId","collectionPath","documentId"],wl=["userId","collectionPath","largestBatchId"],Ds=["userId","collectionGroup","largestBatchId"],Go=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Y=[...Go,"documentOverlays"],p=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],a=p,h=[...a,"indexConfiguration","indexState","indexEntries"];class T extends io{constructor(e,t){super(),this.at=e,this.currentSequenceNumber=t}}function P(r,e){const t=at(r);return Lo.O(t.at,e)}function X(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function ce(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function We(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}class mt{constructor(e,t){this.comparator=e,this.root=t||ln.EMPTY}insert(e,t){return new mt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ln.BLACK,null,null))}remove(e){return new mt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ln.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const o=this.comparator(e,t.key);if(0===o)return t.value;o<0?t=t.left:o>0&&(t=t.right)}return null}indexOf(e){let t=0,o=this.root;for(;!o.isEmpty();){const d=this.comparator(e,o.key);if(0===d)return t+o.left.size;d<0?o=o.left:(t+=o.left.size+1,o=o.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,o)=>(e(t,o),!1))}toString(){const e=[];return this.inorderTraversal((t,o)=>(e.push(`${t}:${o}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new on(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new on(this.root,e,this.comparator,!1)}getReverseIterator(){return new on(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new on(this.root,e,this.comparator,!0)}}class on{constructor(e,t,o,d){this.isReverse=d,this.nodeStack=[];let v=1;for(;!e.isEmpty();)if(v=t?o(e.key,t):1,t&&d&&(v*=-1),v<0)e=this.isReverse?e.left:e.right;else{if(0===v){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ln{constructor(e,t,o,d,v){this.key=e,this.value=t,this.color=o??ln.RED,this.left=d??ln.EMPTY,this.right=v??ln.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,o,d,v){return new ln(e??this.key,t??this.value,o??this.color,d??this.left,v??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,o){let d=this;const v=o(e,d.key);return d=v<0?d.copy(null,null,null,d.left.insert(e,t,o),null):0===v?d.copy(null,t,null,null,null):d.copy(null,null,null,null,d.right.insert(e,t,o)),d.fixUp()}removeMin(){if(this.left.isEmpty())return ln.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let o,d=this;if(t(e,d.key)<0)d.left.isEmpty()||d.left.isRed()||d.left.left.isRed()||(d=d.moveRedLeft()),d=d.copy(null,null,null,d.left.remove(e,t),null);else{if(d.left.isRed()&&(d=d.rotateRight()),d.right.isEmpty()||d.right.isRed()||d.right.left.isRed()||(d=d.moveRedRight()),0===t(e,d.key)){if(d.right.isEmpty())return ln.EMPTY;o=d.right.min(),d=d.copy(o.key,o.value,null,null,d.right.removeMin())}d=d.copy(null,null,null,null,d.right.remove(e,t))}return d.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ln.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ln.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ve();const e=this.left.check();if(e!==this.right.check())throw ve();return e+(this.isRed()?0:1)}}ln.EMPTY=null,ln.RED=!0,ln.BLACK=!1,ln.EMPTY=new class{constructor(){this.size=0}get key(){throw ve()}get value(){throw ve()}get color(){throw ve()}get left(){throw ve()}get right(){throw ve()}copy(r,e,t,o,d){return this}insert(r,e,t){return new ln(r,e)}remove(r,e){return this}isEmpty(){return!0}inorderTraversal(r){return!1}reverseTraversal(r){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Un{constructor(e){this.comparator=e,this.data=new mt(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,o)=>(e(t),!1))}forEachInRange(e,t){const o=this.data.getIteratorFrom(e[0]);for(;o.hasNext();){const d=o.getNext();if(this.comparator(d.key,e[1])>=0)return;t(d.key)}}forEachWhile(e,t){let o;for(o=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();o.hasNext();)if(!e(o.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new sr(this.data.getIterator())}getIteratorFrom(e){return new sr(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(o=>{t=t.add(o)}),t}isEqual(e){if(!(e instanceof Un)||this.size!==e.size)return!1;const t=this.data.getIterator(),o=e.data.getIterator();for(;t.hasNext();){const d=t.getNext().key,v=o.getNext().key;if(0!==this.comparator(d,v))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Un(this.comparator);return t.data=e,t}}class sr{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function jr(r){return r.hasNext()?r.getNext():void 0}class ur{constructor(e){this.fields=e,e.sort(ts.comparator)}static empty(){return new ur([])}unionWith(e){let t=new Un(ts.comparator);for(const o of this.fields)t=t.add(o);for(const o of e)t=t.add(o);return new ur(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return hr(this.fields,e.fields,(t,o)=>t.isEqual(o))}}class wa extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}function So(){return typeof atob<"u"}class Ys{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(o){try{return atob(o)}catch(d){throw typeof DOMException<"u"&&d instanceof DOMException?new wa("Invalid base64 string: "+d):d}}(e);return new Ys(t)}static fromUint8Array(e){const t=function(o){let d="";for(let v=0;v<o.length;++v)d+=String.fromCharCode(o[v]);return d}(e);return new Ys(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let o=0;o<e.length;o++)t[o]=e.charCodeAt(o);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Rn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ys.EMPTY_BYTE_STRING=new Ys("");const na=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Aa(r){if($e(!!r),"string"==typeof r){let e=0;const t=na.exec(r);if($e(!!t),t[1]){let d=t[1];d=(d+"000000000").substr(0,9),e=Number(d)}const o=new Date(r);return{seconds:Math.floor(o.getTime()/1e3),nanos:e}}return{seconds:Ss(r.seconds),nanos:Ss(r.nanos)}}function Ss(r){return"number"==typeof r?r:"string"==typeof r?Number(r):0}function ia(r){return"string"==typeof r?Ys.fromBase64String(r):Ys.fromUint8Array(r)}function pl(r){var e,t;return"server_timestamp"===(null===(t=((null===(e=r?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Kl(r){const e=r.mapValue.fields.__previous_value__;return pl(e)?Kl(e):e}function Ca(r){const e=Aa(r.mapValue.fields.__local_write_time__.timestampValue);return new ni(e.seconds,e.nanos)}class Z{constructor(e,t,o,d,v,x,H,oe){this.databaseId=e,this.appId=t,this.persistenceKey=o,this.host=d,this.ssl=v,this.forceLongPolling=x,this.autoDetectLongPolling=H,this.useFetchStreams=oe}}class se{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new se("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof se&&e.projectId===this.projectId&&e.database===this.database}}const Ee={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Xe={nullValue:"NULL_VALUE"};function xt(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?pl(r)?4:Wa(r)?9007199254740991:10:ve()}function zt(r,e){if(r===e)return!0;const t=xt(r);if(t!==xt(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return Ca(r).isEqual(Ca(e));case 3:return function(o,d){if("string"==typeof o.timestampValue&&"string"==typeof d.timestampValue&&o.timestampValue.length===d.timestampValue.length)return o.timestampValue===d.timestampValue;const v=Aa(o.timestampValue),x=Aa(d.timestampValue);return v.seconds===x.seconds&&v.nanos===x.nanos}(r,e);case 5:return r.stringValue===e.stringValue;case 6:return d=e,ia(r.bytesValue).isEqual(ia(d.bytesValue));case 7:return r.referenceValue===e.referenceValue;case 8:return function(o,d){return Ss(o.geoPointValue.latitude)===Ss(d.geoPointValue.latitude)&&Ss(o.geoPointValue.longitude)===Ss(d.geoPointValue.longitude)}(r,e);case 2:return function(o,d){if("integerValue"in o&&"integerValue"in d)return Ss(o.integerValue)===Ss(d.integerValue);if("doubleValue"in o&&"doubleValue"in d){const v=Ss(o.doubleValue),x=Ss(d.doubleValue);return v===x?dl(v)===dl(x):isNaN(v)&&isNaN(x)}return!1}(r,e);case 9:return hr(r.arrayValue.values||[],e.arrayValue.values||[],zt);case 10:return function(o,d){const v=o.mapValue.fields||{},x=d.mapValue.fields||{};if(X(v)!==X(x))return!1;for(const H in v)if(v.hasOwnProperty(H)&&(void 0===x[H]||!zt(v[H],x[H])))return!1;return!0}(r,e);default:return ve()}var d}function Cn(r,e){return void 0!==(r.values||[]).find(t=>zt(t,e))}function Jn(r,e){if(r===e)return 0;const t=xt(r),o=xt(e);if(t!==o)return Rn(t,o);switch(t){case 0:case 9007199254740991:return 0;case 1:return Rn(r.booleanValue,e.booleanValue);case 2:return function(d,v){const x=Ss(d.integerValue||d.doubleValue),H=Ss(v.integerValue||v.doubleValue);return x<H?-1:x>H?1:x===H?0:isNaN(x)?isNaN(H)?0:-1:1}(r,e);case 3:return bi(r.timestampValue,e.timestampValue);case 4:return bi(Ca(r),Ca(e));case 5:return Rn(r.stringValue,e.stringValue);case 6:return function(d,v){const x=ia(d),H=ia(v);return x.compareTo(H)}(r.bytesValue,e.bytesValue);case 7:return function(d,v){const x=d.split("/"),H=v.split("/");for(let oe=0;oe<x.length&&oe<H.length;oe++){const fe=Rn(x[oe],H[oe]);if(0!==fe)return fe}return Rn(x.length,H.length)}(r.referenceValue,e.referenceValue);case 8:return function(d,v){const x=Rn(Ss(d.latitude),Ss(v.latitude));return 0!==x?x:Rn(Ss(d.longitude),Ss(v.longitude))}(r.geoPointValue,e.geoPointValue);case 9:return function(d,v){const x=d.values||[],H=v.values||[];for(let oe=0;oe<x.length&&oe<H.length;++oe){const fe=Jn(x[oe],H[oe]);if(fe)return fe}return Rn(x.length,H.length)}(r.arrayValue,e.arrayValue);case 10:return function(d,v){if(d===Ee.mapValue&&v===Ee.mapValue)return 0;if(d===Ee.mapValue)return 1;if(v===Ee.mapValue)return-1;const x=d.fields||{},H=Object.keys(x),oe=v.fields||{},fe=Object.keys(oe);H.sort(),fe.sort();for(let Oe=0;Oe<H.length&&Oe<fe.length;++Oe){const ft=Rn(H[Oe],fe[Oe]);if(0!==ft)return ft;const Wt=Jn(x[H[Oe]],oe[fe[Oe]]);if(0!==Wt)return Wt}return Rn(H.length,fe.length)}(r.mapValue,e.mapValue);default:throw ve()}}function bi(r,e){if("string"==typeof r&&"string"==typeof e&&r.length===e.length)return Rn(r,e);const t=Aa(r),o=Aa(e),d=Rn(t.seconds,o.seconds);return 0!==d?d:Rn(t.nanos,o.nanos)}function Ei(r){return br(r)}function br(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?function(o){const d=Aa(o);return`time(${d.seconds},${d.nanos})`}(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?ia(r.bytesValue).toBase64():"referenceValue"in r?Jt.fromName(r.referenceValue).toString():"geoPointValue"in r?`geo(${(e=r.geoPointValue).latitude},${e.longitude})`:"arrayValue"in r?function(o){let d="[",v=!0;for(const x of o.values||[])v?v=!1:d+=",",d+=br(x);return d+"]"}(r.arrayValue):"mapValue"in r?function(o){const d=Object.keys(o.fields||{}).sort();let v="{",x=!0;for(const H of d)x?x=!1:v+=",",v+=`${H}:${br(o.fields[H])}`;return v+"}"}(r.mapValue):ve();var e}function Gi(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function Wo(r){return!!r&&"integerValue"in r}function so(r){return!!r&&"arrayValue"in r}function hc(r){return!!r&&"nullValue"in r}function Ml(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function Ma(r){return!!r&&"mapValue"in r}function Oo(r){if(r.geoPointValue)return{geoPointValue:Object.assign({},r.geoPointValue)};if(r.timestampValue&&"object"==typeof r.timestampValue)return{timestampValue:Object.assign({},r.timestampValue)};if(r.mapValue){const e={mapValue:{fields:{}}};return ce(r.mapValue.fields,(t,o)=>e.mapValue.fields[t]=Oo(o)),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Oo(r.arrayValue.values[t]);return e}return Object.assign({},r)}function Wa(r){return"__max__"===(((r.mapValue||{}).fields||{}).__type__||{}).stringValue}function sl(r){return"nullValue"in r?Xe:"booleanValue"in r?{booleanValue:!1}:"integerValue"in r||"doubleValue"in r?{doubleValue:NaN}:"timestampValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in r?{stringValue:""}:"bytesValue"in r?{bytesValue:""}:"referenceValue"in r?Gi(se.empty(),Jt.empty()):"geoPointValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in r?{arrayValue:{}}:"mapValue"in r?{mapValue:{}}:ve()}function Rl(r){return"nullValue"in r?{booleanValue:!1}:"booleanValue"in r?{doubleValue:NaN}:"integerValue"in r||"doubleValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in r?{stringValue:""}:"stringValue"in r?{bytesValue:""}:"bytesValue"in r?Gi(se.empty(),Jt.empty()):"referenceValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in r?{arrayValue:{}}:"arrayValue"in r?{mapValue:{}}:"mapValue"in r?Ee:ve()}function Dc(r,e){const t=Jn(r.value,e.value);return 0!==t?t:r.inclusive&&!e.inclusive?-1:!r.inclusive&&e.inclusive?1:0}function Sc(r,e){const t=Jn(r.value,e.value);return 0!==t?t:r.inclusive&&!e.inclusive?1:!r.inclusive&&e.inclusive?-1:0}class Uo{constructor(e){this.value=e}static empty(){return new Uo({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let o=0;o<e.length-1;++o)if(t=(t.mapValue.fields||{})[e.get(o)],!Ma(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Oo(t)}setAll(e){let t=ts.emptyPath(),o={},d=[];e.forEach((x,H)=>{if(!t.isImmediateParentOf(H)){const oe=this.getFieldsMap(t);this.applyChanges(oe,o,d),o={},d=[],t=H.popLast()}x?o[H.lastSegment()]=Oo(x):d.push(H.lastSegment())});const v=this.getFieldsMap(t);this.applyChanges(v,o,d)}delete(e){const t=this.field(e.popLast());Ma(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return zt(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let o=0;o<e.length;++o){let d=t.mapValue.fields[e.get(o)];Ma(d)&&d.mapValue.fields||(d={mapValue:{fields:{}}},t.mapValue.fields[e.get(o)]=d),t=d}return t.mapValue.fields}applyChanges(e,t,o){ce(t,(d,v)=>e[d]=v);for(const d of o)delete e[d]}clone(){return new Uo(Oo(this.value))}}function ql(r){const e=[];return ce(r.fields,(t,o)=>{const d=new ts([t]);if(Ma(o)){const v=ql(o.mapValue).fields;if(0===v.length)e.push(d);else for(const x of v)e.push(d.child(x))}else e.push(d)}),new ur(e)}class $s{constructor(e,t,o,d,v,x,H){this.key=e,this.documentType=t,this.version=o,this.readTime=d,this.createTime=v,this.data=x,this.documentState=H}static newInvalidDocument(e){return new $s(e,0,qn.min(),qn.min(),qn.min(),Uo.empty(),0)}static newFoundDocument(e,t,o,d){return new $s(e,1,t,qn.min(),o,d,0)}static newNoDocument(e,t){return new $s(e,2,t,qn.min(),qn.min(),Uo.empty(),0)}static newUnknownDocument(e,t){return new $s(e,3,t,qn.min(),qn.min(),Uo.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(qn.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Uo.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Uo.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=qn.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof $s&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new $s(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class ml{constructor(e,t){this.position=e,this.inclusive=t}}function fc(r,e,t){let o=0;for(let d=0;d<r.position.length;d++){const v=e[d],x=r.position[d];if(o=v.field.isKeyField()?Jt.comparator(Jt.fromName(x.referenceValue),t.key):Jn(x,t.data.field(v.field)),"desc"===v.dir&&(o*=-1),0!==o)break}return o}function oc(r,e){if(null===r)return null===e;if(null===e||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!zt(r.position[t],e.position[t]))return!1;return!0}class ol{constructor(e,t="asc"){this.field=e,this.dir=t}}function Xu(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}class Mu{}class Wr extends Mu{constructor(e,t,o){super(),this.field=e,this.op=t,this.value=o}static create(e,t,o){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,o):new xc(e,t,o):"array-contains"===t?new jc(e,o):"in"===t?new pu(e,o):"not-in"===t?new Ac(e,o):"array-contains-any"===t?new zc(e,o):new Wr(e,t,o)}static createKeyFieldInFilter(e,t,o){return"in"===t?new mc(e,o):new fu(e,o)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Jn(t,this.value)):null!==t&&xt(this.value)===xt(t)&&this.matchesComparison(Jn(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return ve()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Is extends Mu{constructor(e,t){super(),this.filters=e,this.op=t,this.ht=null}static create(e,t){return new Is(e,t)}matches(e){return pc(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ht||(this.ht=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ht}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.lt(t=>t.isInequality());return null!==e?e.field:null}lt(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function pc(r){return"and"===r.op}function iu(r){return"or"===r.op}function Cl(r){return Ha(r)&&pc(r)}function Ha(r){for(const e of r.filters)if(e instanceof Is)return!1;return!0}function Tl(r){if(r instanceof Wr)return r.field.canonicalString()+r.op.toString()+Ei(r.value);if(Cl(r))return r.filters.map(e=>Tl(e)).join(",");{const e=r.filters.map(t=>Tl(t)).join(",");return`${r.op}(${e})`}}function Bc(r,e){return r instanceof Wr?(t=r,(o=e)instanceof Wr&&t.op===o.op&&t.field.isEqual(o.field)&&zt(t.value,o.value)):r instanceof Is?function(t,o){return o instanceof Is&&t.op===o.op&&t.filters.length===o.filters.length&&t.filters.reduce((d,v,x)=>d&&Bc(v,o.filters[x]),!0)}(r,e):void ve();var t,o}function Hc(r,e){const t=r.filters.concat(e);return Is.create(t,r.op)}function Ra(r){return r instanceof Wr?`${(e=r).field.canonicalString()} ${e.op} ${Ei(e.value)}`:r instanceof Is?function(e){return e.op.toString()+" {"+e.getFilters().map(Ra).join(" ,")+"}"}(r):"Filter";var e}class xc extends Wr{constructor(e,t,o){super(e,t,o),this.key=Jt.fromName(o.referenceValue)}matches(e){const t=Jt.comparator(e.key,this.key);return this.matchesComparison(t)}}class mc extends Wr{constructor(e,t){super(e,"in",t),this.keys=Ka(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class fu extends Wr{constructor(e,t){super(e,"not-in",t),this.keys=Ka(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Ka(r,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(o=>Jt.fromName(o.referenceValue))}class jc extends Wr{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return so(t)&&Cn(t.arrayValue,this.value)}}class pu extends Wr{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Cn(this.value.arrayValue,t)}}class Ac extends Wr{constructor(e,t){super(e,"not-in",t)}matches(e){if(Cn(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Cn(this.value.arrayValue,t)}}class zc extends Wr{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!so(t)||!t.arrayValue.values)&&t.arrayValue.values.some(o=>Cn(this.value.arrayValue,o))}}class ha{constructor(e,t=null,o=[],d=[],v=null,x=null,H=null){this.path=e,this.collectionGroup=t,this.orderBy=o,this.filters=d,this.limit=v,this.startAt=x,this.endAt=H,this.ft=null}}function Mc(r,e=null,t=[],o=[],d=null,v=null,x=null){return new ha(r,e,t,o,d,v,x)}function ac(r){const e=at(r);if(null===e.ft){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(o=>Tl(o)).join(","),t+="|ob:",t+=e.orderBy.map(o=>{return(d=o).field.canonicalString()+d.dir;var d}).join(","),Va(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(o=>Ei(o)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(o=>Ei(o)).join(",")),e.ft=t}return e.ft}function ra(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!Xu(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!Bc(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!oc(r.startAt,e.startAt)&&oc(r.endAt,e.endAt)}function lc(r){return Jt.isDocumentKey(r.path)&&null===r.collectionGroup&&0===r.filters.length}function gc(r,e){return r.filters.filter(t=>t instanceof Wr&&t.field.isEqual(e))}function $c(r,e,t){let o=Xe,d=!0;for(const v of gc(r,e)){let x=Xe,H=!0;switch(v.op){case"<":case"<=":x=sl(v.value);break;case"==":case"in":case">=":x=v.value;break;case">":x=v.value,H=!1;break;case"!=":case"not-in":x=Xe}Dc({value:o,inclusive:d},{value:x,inclusive:H})<0&&(o=x,d=H)}if(null!==t)for(let v=0;v<r.orderBy.length;++v)if(r.orderBy[v].field.isEqual(e)){const x=t.position[v];Dc({value:o,inclusive:d},{value:x,inclusive:t.inclusive})<0&&(o=x,d=t.inclusive);break}return{value:o,inclusive:d}}function sa(r,e,t){let o=Ee,d=!0;for(const v of gc(r,e)){let x=Ee,H=!0;switch(v.op){case">=":case">":x=Rl(v.value),H=!1;break;case"==":case"in":case"<=":x=v.value;break;case"<":x=v.value,H=!1;break;case"!=":case"not-in":x=Ee}Sc({value:o,inclusive:d},{value:x,inclusive:H})>0&&(o=x,d=H)}if(null!==t)for(let v=0;v<r.orderBy.length;++v)if(r.orderBy[v].field.isEqual(e)){const x=t.position[v];Sc({value:o,inclusive:d},{value:x,inclusive:t.inclusive})>0&&(o=x,d=t.inclusive);break}return{value:o,inclusive:d}}class Ko{constructor(e,t=null,o=[],d=[],v=null,x="F",H=null,oe=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=o,this.filters=d,this.limit=v,this.limitType=x,this.startAt=H,this.endAt=oe,this.dt=null,this.wt=null}}function Zl(r,e,t,o,d,v,x,H){return new Ko(r,e,t,o,d,v,x,H)}function al(r){return new Ko(r)}function Gc(r){return 0===r.filters.length&&null===r.limit&&null==r.startAt&&null==r.endAt&&(0===r.explicitOrderBy.length||1===r.explicitOrderBy.length&&r.explicitOrderBy[0].field.isKeyField())}function Yl(r){return r.explicitOrderBy.length>0?r.explicitOrderBy[0].field:null}function Pl(r){for(const e of r.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function Wc(r){return null!==r.collectionGroup}function gl(r){const e=at(r);if(null===e.dt){e.dt=[];const t=Pl(e),o=Yl(e);if(null!==t&&null===o)t.isKeyField()||e.dt.push(new ol(t)),e.dt.push(new ol(ts.keyField(),"asc"));else{let d=!1;for(const v of e.explicitOrderBy)e.dt.push(v),v.field.isKeyField()&&(d=!0);if(!d){const v=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.dt.push(new ol(ts.keyField(),v))}}}return e.dt}function Pa(r){const e=at(r);if(!e.wt)if("F"===e.limitType)e.wt=Mc(e.path,e.collectionGroup,gl(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const v of gl(e))t.push(new ol(v.field,"desc"===v.dir?"asc":"desc"));const o=e.endAt?new ml(e.endAt.position,e.endAt.inclusive):null,d=e.startAt?new ml(e.startAt.position,e.startAt.inclusive):null;e.wt=Mc(e.path,e.collectionGroup,t,e.filters,e.limit,o,d)}return e.wt}function Kc(r,e){e.getFirstInequalityField(),Pl(r);const t=r.filters.concat([e]);return new Ko(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function qc(r,e,t){return new Ko(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function Ql(r,e){return ra(Pa(r),Pa(e))&&r.limitType===e.limitType}function B(r){return`${ac(Pa(r))}|lt:${r.limitType}`}function w(r){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(o=>Ra(o)).join(", ")}]`),Va(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(o=>{return`${(d=o).field.canonicalString()} (${d.dir})`;var d}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(o=>Ei(o)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(o=>Ei(o)).join(",")),`Target(${t})`}(Pa(r))}; limitType=${r.limitType})`}function M(r,e){return e.isFoundDocument()&&function(t,o){const d=o.key.path;return null!==t.collectionGroup?o.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(d):Jt.isDocumentKey(t.path)?t.path.isEqual(d):t.path.isImmediateParentOf(d)}(r,e)&&function(t,o){for(const d of gl(t))if(!d.field.isKeyField()&&null===o.data.field(d.field))return!1;return!0}(r,e)&&function(t,o){for(const d of t.filters)if(!d.matches(o))return!1;return!0}(r,e)&&(o=e,!((t=r).startAt&&!function(d,v,x){const H=fc(d,v,x);return d.inclusive?H<=0:H<0}(t.startAt,gl(t),o)||t.endAt&&!function(d,v,x){const H=fc(d,v,x);return d.inclusive?H>=0:H>0}(t.endAt,gl(t),o)));var t,o}function K(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function we(r){return(e,t)=>{let o=!1;for(const d of gl(r)){const v=je(d,e,t);if(0!==v)return v;o=o||d.field.isKeyField()}return 0}}function je(r,e,t){const o=r.field.isKeyField()?Jt.comparator(e.key,t.key):function(d,v,x){const H=v.data.field(d),oe=x.data.field(d);return null!==H&&null!==oe?Jn(H,oe):ve()}(r.field,e,t);switch(r.dir){case"asc":return o;case"desc":return-1*o;default:return ve()}}class $t{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),o=this.inner[t];if(void 0!==o)for(const[d,v]of o)if(this.equalsFn(d,e))return v}has(e){return void 0!==this.get(e)}set(e,t){const o=this.mapKeyFn(e),d=this.inner[o];if(void 0===d)return this.inner[o]=[[e,t]],void this.innerSize++;for(let v=0;v<d.length;v++)if(this.equalsFn(d[v][0],e))return void(d[v]=[e,t]);d.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),o=this.inner[t];if(void 0===o)return!1;for(let d=0;d<o.length;d++)if(this.equalsFn(o[d][0],e))return 1===o.length?delete this.inner[t]:o.splice(d,1),this.innerSize--,!0;return!1}forEach(e){ce(this.inner,(t,o)=>{for(const[d,v]of o)e(d,v)})}isEmpty(){return We(this.inner)}size(){return this.innerSize}}const Sn=new mt(Jt.comparator);function Zn(){return Sn}const Ri=new mt(Jt.comparator);function Er(...r){let e=Ri;for(const t of r)e=e.insert(t.key,t);return e}function yo(r){let e=Ri;return r.forEach((t,o)=>e=e.insert(t,o.overlayedDocument)),e}function Gs(){return kl()}function Ol(){return kl()}function kl(){return new $t(r=>r.toString(),(r,e)=>r.isEqual(e))}const Zc=new mt(Jt.comparator),Yc=new Un(Jt.comparator);function Ir(...r){let e=Yc;for(const t of r)e=e.add(t);return e}const _c=new Un(Rn);function ll(){return _c}function yc(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:dl(e)?"-0":e}}function Rc(r){return{integerValue:""+r}}function _l(r,e){return Ja(e)?Rc(e):yc(r,e)}class Dl{constructor(){this._=void 0}}function mu(r,e,t){return r instanceof yl?function(o,d){const v={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return d&&(v.fields.__previous_value__=d),{mapValue:v}}(t,e):r instanceof U?b(r,e):r instanceof D?V(r,e):function(o,d){const v=cc(o,d),x=Re(v)+Re(o._t);return Wo(v)&&Wo(o._t)?Rc(x):yc(o.serializer,x)}(r,e)}function Qc(r,e,t){return r instanceof U?b(r,e):r instanceof D?V(r,e):t}function cc(r,e){return r instanceof he?Wo(t=e)||(o=t)&&"doubleValue"in o?e:{integerValue:0}:null;var o,t}class yl extends Dl{}class U extends Dl{constructor(e){super(),this.elements=e}}function b(r,e){const t=Ct(e);for(const o of r.elements)t.some(d=>zt(d,o))||t.push(o);return{arrayValue:{values:t}}}class D extends Dl{constructor(e){super(),this.elements=e}}function V(r,e){let t=Ct(e);for(const o of r.elements)t=t.filter(d=>!zt(d,o));return{arrayValue:{values:t}}}class he extends Dl{constructor(e,t){super(),this.serializer=e,this._t=t}}function Re(r){return Ss(r.integerValue||r.doubleValue)}function Ct(r){return so(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}class Qt{constructor(e,t){this.field=e,this.transform=t}}class ei{constructor(e,t){this.version=e,this.transformResults=t}}class jn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new jn}static exists(e){return new jn(void 0,e)}static updateTime(e){return new jn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function zr(r,e){return void 0!==r.updateTime?e.isFoundDocument()&&e.version.isEqual(r.updateTime):void 0===r.exists||r.exists===e.isFoundDocument()}class fa{}function Xl(r,e){if(!r.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return r.isNoDocument()?new tc(r.key,jn.none()):new Oc(r.key,r.data,jn.none());{const t=r.data,o=Uo.empty();let d=new Un(ts.comparator);for(let v of e.fields)if(!d.has(v)){let x=t.field(v);null===x&&v.length>1&&(v=v.popLast(),x=t.field(v)),null===x?o.delete(v):o.set(v,x),d=d.add(v)}return new Oa(r.key,o,new ur(d.toArray()),jn.none())}}function uc(r,e,t){r instanceof Oc?function(o,d,v){const x=o.value.clone(),H=Ta(o.fieldTransforms,d,v.transformResults);x.setAll(H),d.convertToFoundDocument(v.version,x).setHasCommittedMutations()}(r,e,t):r instanceof Oa?function(o,d,v){if(!zr(o.precondition,d))return void d.convertToUnknownDocument(v.version);const x=Ta(o.fieldTransforms,d,v.transformResults),H=d.data;H.setAll(Xc(o)),H.setAll(x),d.convertToFoundDocument(v.version,H).setHasCommittedMutations()}(r,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Jl(r,e,t,o){return r instanceof Oc?function(d,v,x,H){if(!zr(d.precondition,v))return x;const oe=d.value.clone(),fe=ec(d.fieldTransforms,H,v);return oe.setAll(fe),v.convertToFoundDocument(v.version,oe).setHasLocalMutations(),null}(r,e,t,o):r instanceof Oa?function(d,v,x,H){if(!zr(d.precondition,v))return x;const oe=ec(d.fieldTransforms,H,v),fe=v.data;return fe.setAll(Xc(d)),fe.setAll(oe),v.convertToFoundDocument(v.version,fe).setHasLocalMutations(),null===x?null:x.unionWith(d.fieldMask.fields).unionWith(d.fieldTransforms.map(Oe=>Oe.field))}(r,e,t,o):(x=t,zr(r.precondition,v=e)?(v.convertToNoDocument(v.version).setHasLocalMutations(),null):x);var v,x}function Pc(r,e){let t=null;for(const o of r.fieldTransforms){const d=e.data.field(o.field),v=cc(o.transform,d||null);null!=v&&(null===t&&(t=Uo.empty()),t.set(o.field,v))}return t||null}function vc(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&(o=e.fieldTransforms,!!(void 0===(t=r.fieldTransforms)&&void 0===o||t&&o&&hr(t,o,(d,v)=>function Ln(r,e){return r.field.isEqual(e.field)&&(o=e.transform,(t=r.transform)instanceof U&&o instanceof U||t instanceof D&&o instanceof D?hr(t.elements,o.elements,zt):t instanceof he&&o instanceof he?zt(t._t,o._t):t instanceof yl&&o instanceof yl);var t,o}(d,v))))&&(0===r.type?r.value.isEqual(e.value):1!==r.type||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask));var t,o}class Oc extends fa{constructor(e,t,o,d=[]){super(),this.key=e,this.value=t,this.precondition=o,this.fieldTransforms=d,this.type=0}getFieldMask(){return null}}class Oa extends fa{constructor(e,t,o,d,v=[]){super(),this.key=e,this.data=t,this.fieldMask=o,this.precondition=d,this.fieldTransforms=v,this.type=1}getFieldMask(){return this.fieldMask}}function Xc(r){const e=new Map;return r.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const o=r.data.field(t);e.set(t,o)}}),e}function Ta(r,e,t){const o=new Map;$e(r.length===t.length);for(let d=0;d<t.length;d++){const v=r[d],x=v.transform,H=e.data.field(v.field);o.set(v.field,Qc(x,H,t[d]))}return o}function ec(r,e,t){const o=new Map;for(const d of r){const v=d.transform,x=t.data.field(d.field);o.set(d.field,mu(v,x,e))}return o}class tc extends fa{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class ru extends fa{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Nl{constructor(e,t,o,d){this.batchId=e,this.localWriteTime=t,this.baseMutations=o,this.mutations=d}applyToRemoteDocument(e,t){const o=t.mutationResults;for(let d=0;d<this.mutations.length;d++){const v=this.mutations[d];v.key.isEqual(e.key)&&uc(v,e,o[d])}}applyToLocalView(e,t){for(const o of this.baseMutations)o.key.isEqual(e.key)&&(t=Jl(o,e,t,this.localWriteTime));for(const o of this.mutations)o.key.isEqual(e.key)&&(t=Jl(o,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const o=Ol();return this.mutations.forEach(d=>{const v=e.get(d.key),x=v.overlayedDocument;let H=this.applyToLocalView(x,v.mutatedFields);H=t.has(d.key)?null:H;const oe=Xl(x,H);null!==oe&&o.set(d.key,oe),x.isValidDocument()||x.convertToNoDocument(qn.min())}),o}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ir())}isEqual(e){return this.batchId===e.batchId&&hr(this.mutations,e.mutations,(t,o)=>vc(t,o))&&hr(this.baseMutations,e.baseMutations,(t,o)=>vc(t,o))}}class bc{constructor(e,t,o,d){this.batch=e,this.commitVersion=t,this.mutationResults=o,this.docVersions=d}static from(e,t,o){$e(e.mutations.length===o.length);let d=Zc;const v=e.mutations;for(let x=0;x<v.length;x++)d=d.insert(v[x].key,o[x].version);return new bc(e,t,o,d)}}class kc{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Ld{constructor(e){this.count=e}}var pa,ws;function yd(r){switch(r){default:return ve();case Ke.CANCELLED:case Ke.UNKNOWN:case Ke.DEADLINE_EXCEEDED:case Ke.RESOURCE_EXHAUSTED:case Ke.INTERNAL:case Ke.UNAVAILABLE:case Ke.UNAUTHENTICATED:return!1;case Ke.INVALID_ARGUMENT:case Ke.NOT_FOUND:case Ke.ALREADY_EXISTS:case Ke.PERMISSION_DENIED:case Ke.FAILED_PRECONDITION:case Ke.ABORTED:case Ke.OUT_OF_RANGE:case Ke.UNIMPLEMENTED:case Ke.DATA_LOSS:return!0}}function gu(r){if(void 0===r)return N("GRPC error has no .code"),Ke.UNKNOWN;switch(r){case pa.OK:return Ke.OK;case pa.CANCELLED:return Ke.CANCELLED;case pa.UNKNOWN:return Ke.UNKNOWN;case pa.DEADLINE_EXCEEDED:return Ke.DEADLINE_EXCEEDED;case pa.RESOURCE_EXHAUSTED:return Ke.RESOURCE_EXHAUSTED;case pa.INTERNAL:return Ke.INTERNAL;case pa.UNAVAILABLE:return Ke.UNAVAILABLE;case pa.UNAUTHENTICATED:return Ke.UNAUTHENTICATED;case pa.INVALID_ARGUMENT:return Ke.INVALID_ARGUMENT;case pa.NOT_FOUND:return Ke.NOT_FOUND;case pa.ALREADY_EXISTS:return Ke.ALREADY_EXISTS;case pa.PERMISSION_DENIED:return Ke.PERMISSION_DENIED;case pa.FAILED_PRECONDITION:return Ke.FAILED_PRECONDITION;case pa.ABORTED:return Ke.ABORTED;case pa.OUT_OF_RANGE:return Ke.OUT_OF_RANGE;case pa.UNIMPLEMENTED:return Ke.UNIMPLEMENTED;case pa.DATA_LOSS:return Ke.DATA_LOSS;default:return ve()}}(ws=pa||(pa={}))[ws.OK=0]="OK",ws[ws.CANCELLED=1]="CANCELLED",ws[ws.UNKNOWN=2]="UNKNOWN",ws[ws.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ws[ws.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ws[ws.NOT_FOUND=5]="NOT_FOUND",ws[ws.ALREADY_EXISTS=6]="ALREADY_EXISTS",ws[ws.PERMISSION_DENIED=7]="PERMISSION_DENIED",ws[ws.UNAUTHENTICATED=16]="UNAUTHENTICATED",ws[ws.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ws[ws.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ws[ws.ABORTED=10]="ABORTED",ws[ws.OUT_OF_RANGE=11]="OUT_OF_RANGE",ws[ws.UNIMPLEMENTED=12]="UNIMPLEMENTED",ws[ws.INTERNAL=13]="INTERNAL",ws[ws.UNAVAILABLE=14]="UNAVAILABLE",ws[ws.DATA_LOSS=15]="DATA_LOSS";class qa{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return ou}static getOrCreateInstance(){return null===ou&&(ou=new qa),ou}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let ou=null;class Jc{constructor(e,t,o,d,v){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=o,this.documentUpdates=d,this.resolvedLimboDocuments=v}static createSynthesizedRemoteEventForCurrentChange(e,t,o){const d=new Map;return d.set(e,_u.createSynthesizedTargetChangeForCurrentChange(e,t,o)),new Jc(qn.min(),d,ll(),Zn(),Ir())}}class _u{constructor(e,t,o,d,v){this.resumeToken=e,this.current=t,this.addedDocuments=o,this.modifiedDocuments=d,this.removedDocuments=v}static createSynthesizedTargetChangeForCurrentChange(e,t,o){return new _u(o,t,Ir(),Ir(),Ir())}}class Za{constructor(e,t,o,d){this.It=e,this.removedTargetIds=t,this.key=o,this.Tt=d}}class yu{constructor(e,t){this.targetId=e,this.Et=t}}class vd{constructor(e,t,o=Ys.EMPTY_BYTE_STRING,d=null){this.state=e,this.targetIds=t,this.resumeToken=o,this.cause=d}}class bd{constructor(){this.At=0,this.Rt=Ec(),this.vt=Ys.EMPTY_BYTE_STRING,this.bt=!1,this.Pt=!0}get current(){return this.bt}get resumeToken(){return this.vt}get Vt(){return 0!==this.At}get St(){return this.Pt}Dt(e){e.approximateByteSize()>0&&(this.Pt=!0,this.vt=e)}Ct(){let e=Ir(),t=Ir(),o=Ir();return this.Rt.forEach((d,v)=>{switch(v){case 0:e=e.add(d);break;case 2:t=t.add(d);break;case 1:o=o.add(d);break;default:ve()}}),new _u(this.vt,this.bt,e,t,o)}xt(){this.Pt=!1,this.Rt=Ec()}Nt(e,t){this.Pt=!0,this.Rt=this.Rt.insert(e,t)}kt(e){this.Pt=!0,this.Rt=this.Rt.remove(e)}Ot(){this.At+=1}$t(){this.At-=1}Mt(){this.Pt=!0,this.bt=!0}}class Th{constructor(e){this.Ft=e,this.Bt=new Map,this.Lt=Zn(),this.qt=ed(),this.Ut=new Un(Rn)}Kt(e){for(const t of e.It)e.Tt&&e.Tt.isFoundDocument()?this.Gt(t,e.Tt):this.Qt(t,e.key,e.Tt);for(const t of e.removedTargetIds)this.Qt(t,e.key,e.Tt)}zt(e){this.forEachTarget(e,t=>{const o=this.jt(t);switch(e.state){case 0:this.Wt(t)&&o.Dt(e.resumeToken);break;case 1:o.$t(),o.Vt||o.xt(),o.Dt(e.resumeToken);break;case 2:o.$t(),o.Vt||this.removeTarget(t);break;case 3:this.Wt(t)&&(o.Mt(),o.Dt(e.resumeToken));break;case 4:this.Wt(t)&&(this.Ht(t),o.Dt(e.resumeToken));break;default:ve()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Bt.forEach((o,d)=>{this.Wt(d)&&t(d)})}Jt(e){var t;const o=e.targetId,d=e.Et.count,v=this.Yt(o);if(v){const x=v.target;if(lc(x))if(0===d){const H=new Jt(x.path);this.Qt(o,H,$s.newNoDocument(H,qn.min()))}else $e(1===d);else{const H=this.Zt(o);H!==d&&(this.Ht(o),this.Ut=this.Ut.add(o),null===(t=qa.instance)||void 0===t||t.notifyOnExistenceFilterMismatch({localCacheCount:H,existenceFilterCount:e.Et.count}))}}}Xt(e){const t=new Map;this.Bt.forEach((v,x)=>{const H=this.Yt(x);if(H){if(v.current&&lc(H.target)){const oe=new Jt(H.target.path);null!==this.Lt.get(oe)||this.te(x,oe)||this.Qt(x,oe,$s.newNoDocument(oe,e))}v.St&&(t.set(x,v.Ct()),v.xt())}});let o=Ir();this.qt.forEach((v,x)=>{let H=!0;x.forEachWhile(oe=>{const fe=this.Yt(oe);return!fe||2===fe.purpose||(H=!1,!1)}),H&&(o=o.add(v))}),this.Lt.forEach((v,x)=>x.setReadTime(e));const d=new Jc(e,t,this.Ut,this.Lt,o);return this.Lt=Zn(),this.qt=ed(),this.Ut=new Un(Rn),d}Gt(e,t){if(!this.Wt(e))return;const o=this.te(e,t.key)?2:0;this.jt(e).Nt(t.key,o),this.Lt=this.Lt.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ee(t.key).add(e))}Qt(e,t,o){if(!this.Wt(e))return;const d=this.jt(e);this.te(e,t)?d.Nt(t,1):d.kt(t),this.qt=this.qt.insert(t,this.ee(t).delete(e)),o&&(this.Lt=this.Lt.insert(t,o))}removeTarget(e){this.Bt.delete(e)}Zt(e){const t=this.jt(e).Ct();return this.Ft.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ot(e){this.jt(e).Ot()}jt(e){let t=this.Bt.get(e);return t||(t=new bd,this.Bt.set(e,t)),t}ee(e){let t=this.qt.get(e);return t||(t=new Un(Rn),this.qt=this.qt.insert(e,t)),t}Wt(e){const t=null!==this.Yt(e);return t||S("WatchChangeAggregator","Detected inactive target",e),t}Yt(e){const t=this.Bt.get(e);return t&&t.Vt?null:this.Ft.ne(e)}Ht(e){this.Bt.set(e,new bd),this.Ft.getRemoteKeysForTarget(e).forEach(t=>{this.Qt(e,t,null)})}te(e,t){return this.Ft.getRemoteKeysForTarget(e).has(t)}}function ed(){return new mt(Jt.comparator)}function Ec(){return new mt(Jt.comparator)}const vu={asc:"ASCENDING",desc:"DESCENDING"},Dh={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Sh={and:"AND",or:"OR"};class A{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function y(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function E(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function F(r,e){return y(r,e.toTimestamp())}function le(r){return $e(!!r),qn.fromTimestamp(function(e){const t=Aa(e);return new ni(t.seconds,t.nanos)}(r))}function Se(r,e){return(t=r,new Ki(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function At(r){const e=Ki.fromString(r);return $e(ka(e)),e}function hn(r,e){return Se(r.databaseId,e.path)}function Fn(r,e){const t=At(e);if(t.get(1)!==r.databaseId.projectId)throw new k(Ke.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new k(Ke.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new Jt(Da(t))}function di(r,e){return Se(r.databaseId,e)}function Wi(r){const e=At(r);return 4===e.length?Ki.emptyPath():Da(e)}function ki(r){return new Ki(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function Da(r){return $e(r.length>4&&"documents"===r.get(4)),r.popFirst(5)}function Fl(r,e,t){return{name:hn(r,e),fields:t.value.mapValue.fields}}function Ru(r,e,t){const o=Fn(r,e.name),d=le(e.updateTime),v=e.createTime?le(e.createTime):qn.min(),x=new Uo({mapValue:{fields:e.fields}}),H=$s.newFoundDocument(o,d,v,x);return t&&H.setHasCommittedMutations(),t?H.setHasCommittedMutations():H}function Pu(r,e){let t;if(e instanceof Oc)t={update:Fl(r,e.key,e.value)};else if(e instanceof tc)t={delete:hn(r,e.key)};else if(e instanceof Oa)t={update:Fl(r,e.key,e.data),updateMask:hp(e.fieldMask)};else{if(!(e instanceof ru))return ve();t={verify:hn(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(o=>function(d,v){const x=v.transform;if(x instanceof yl)return{fieldPath:v.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(x instanceof U)return{fieldPath:v.field.canonicalString(),appendMissingElements:{values:x.elements}};if(x instanceof D)return{fieldPath:v.field.canonicalString(),removeAllFromArray:{values:x.elements}};if(x instanceof he)return{fieldPath:v.field.canonicalString(),increment:x._t};throw ve()}(0,o))),e.precondition.isNone||(t.currentDocument=void 0!==(d=e.precondition).updateTime?{updateTime:F(r,d.updateTime)}:void 0!==d.exists?{exists:d.exists}:ve()),t;var d}function bu(r,e){const t=e.currentDocument?void 0!==(d=e.currentDocument).updateTime?jn.updateTime(le(d.updateTime)):void 0!==d.exists?jn.exists(d.exists):jn.none():jn.none(),o=e.updateTransforms?e.updateTransforms.map(d=>function(v,x){let H=null;"setToServerValue"in x?($e("REQUEST_TIME"===x.setToServerValue),H=new yl):"appendMissingElements"in x?H=new U(x.appendMissingElements.values||[]):"removeAllFromArray"in x?H=new D(x.removeAllFromArray.values||[]):"increment"in x?H=new he(v,x.increment):ve();const oe=ts.fromServerFormat(x.fieldPath);return new Qt(oe,H)}(r,d)):[];var d;if(e.update){const d=Fn(r,e.update.name),v=new Uo({mapValue:{fields:e.update.fields}});if(e.updateMask){const x=new ur((e.updateMask.fieldPaths||[]).map(fe=>ts.fromServerFormat(fe)));return new Oa(d,v,x,t,o)}return new Oc(d,v,t,o)}if(e.delete){const d=Fn(r,e.delete);return new tc(d,t)}if(e.verify){const d=Fn(r,e.verify);return new ru(d,t)}return ve()}function Bd(r,e){return{documents:[di(r,e.path)]}}function Ed(r,e){const t={structuredQuery:{}},o=e.path;null!==e.collectionGroup?(t.parent=di(r,o),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=di(r,o.popLast()),t.structuredQuery.from=[{collectionId:o.lastSegment()}]);const d=function(oe){if(0!==oe.length)return Id(Is.create(oe,"and"))}(e.filters);d&&(t.structuredQuery.where=d);const v=function(oe){if(0!==oe.length)return oe.map(fe=>{return{field:Nc((Oe=fe).field),direction:zd(Oe.dir)};var Oe})}(e.orderBy);v&&(t.structuredQuery.orderBy=v);const x=(fe=e.limit,r.useProto3Json||Va(fe)?fe:{value:fe});var fe,H,oe;return null!==x&&(t.structuredQuery.limit=x),e.startAt&&(t.structuredQuery.startAt={before:(H=e.startAt).inclusive,values:H.position}),e.endAt&&(t.structuredQuery.endAt={before:!(oe=e.endAt).inclusive,values:oe.position}),t}function ku(r){let e=Wi(r.parent);const t=r.structuredQuery,o=t.from?t.from.length:0;let d=null;if(o>0){$e(1===o);const Oe=t.from[0];Oe.allDescendants?d=Oe.collectionId:e=e.child(Oe.collectionId)}let v=[];t.where&&(v=function(Oe){const ft=jd(Oe);return ft instanceof Is&&Cl(ft)?ft.getFilters():[ft]}(t.where));let x=[];t.orderBy&&(x=t.orderBy.map(Oe=>{return new ol(Nu((ft=Oe).field),function(Wt){switch(Wt){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(ft.direction));var ft}));let H=null;t.limit&&(H=function(Oe){let ft;return ft="object"==typeof Oe?Oe.value:Oe,Va(ft)?null:ft}(t.limit));let oe=null;var Oe;t.startAt&&(oe=new ml((Oe=t.startAt).values||[],!!Oe.before));let fe=null;return t.endAt&&(fe=function(Oe){return new ml(Oe.values||[],!Oe.before)}(t.endAt)),Zl(e,d,x,v,H,"F",oe,fe)}function jd(r){return void 0!==r.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Nu(e.unaryFilter.field);return Wr.create(t,"==",{doubleValue:NaN});case"IS_NULL":const o=Nu(e.unaryFilter.field);return Wr.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const d=Nu(e.unaryFilter.field);return Wr.create(d,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const v=Nu(e.unaryFilter.field);return Wr.create(v,"!=",{nullValue:"NULL_VALUE"});default:return ve()}}(r):void 0!==r.fieldFilter?Wr.create(Nu((e=r).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ve()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==r.compositeFilter?function(e){return Is.create(e.compositeFilter.filters.map(t=>jd(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return ve()}}(e.compositeFilter.op))}(r):ve();var e}function zd(r){return vu[r]}function bf(r){return Dh[r]}function Ef(r){return Sh[r]}function Nc(r){return{fieldPath:r.canonicalString()}}function Nu(r){return ts.fromServerFormat(r.fieldPath)}function Id(r){return r instanceof Wr?function(e){if("=="===e.op){if(Ml(e.value))return{unaryFilter:{field:Nc(e.field),op:"IS_NAN"}};if(hc(e.value))return{unaryFilter:{field:Nc(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Ml(e.value))return{unaryFilter:{field:Nc(e.field),op:"IS_NOT_NAN"}};if(hc(e.value))return{unaryFilter:{field:Nc(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Nc(e.field),op:bf(e.op),value:e.value}}}(r):r instanceof Is?function(e){const t=e.getFilters().map(o=>Id(o));return 1===t.length?t[0]:{compositeFilter:{op:Ef(e.op),filters:t}}}(r):ve()}function hp(r){const e=[];return r.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function ka(r){return r.length>=4&&"projects"===r.get(0)&&"databases"===r.get(2)}class Eu{constructor(e,t,o,d,v=qn.min(),x=qn.min(),H=Ys.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=o,this.sequenceNumber=d,this.snapshotVersion=v,this.lastLimboFreeSnapshotVersion=x,this.resumeToken=H}withSequenceNumber(e){return new Eu(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Eu(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Eu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class If{constructor(e){this.se=e}}function tl(r,e){const t=e.key,o={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Sl(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())o.document={name:hn(d=r.se,(v=e).key),fields:v.data.value.mapValue.fields,updateTime:y(d,v.version.toTimestamp()),createTime:y(d,v.createTime.toTimestamp())};else if(e.isNoDocument())o.noDocument={path:t.path.toArray(),readTime:Fc(e.version)};else{if(!e.isUnknownDocument())return ve();o.unknownDocument={path:t.path.toArray(),version:Fc(e.version)}}var d,v;return o}function Sl(r){const e=r.toTimestamp();return[e.seconds,e.nanoseconds]}function Fc(r){const e=r.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Fu(r){const e=new ni(r.seconds,r.nanoseconds);return qn.fromTimestamp(e)}function Lu(r,e){const t=(e.baseMutations||[]).map(v=>bu(r.se,v));for(let v=0;v<e.mutations.length-1;++v)v+1<e.mutations.length&&void 0!==e.mutations[v+1].transform&&(e.mutations[v].updateTransforms=e.mutations[v+1].transform.fieldTransforms,e.mutations.splice(v+1,1),++v);const o=e.mutations.map(v=>bu(r.se,v)),d=ni.fromMillis(e.localWriteTimeMs);return new Nl(e.batchId,d,t,o)}function td(r){const e=Fu(r.readTime),t=void 0!==r.lastLimboFreeSnapshotVersion?Fu(r.lastLimboFreeSnapshotVersion):qn.min();let o;var d;return void 0!==r.query.documents?($e(1===(d=r.query).documents.length),o=Pa(al(Wi(d.documents[0])))):o=Pa(ku(r.query)),new Eu(o,r.targetId,0,r.lastListenSequenceNumber,e,t,Ys.fromBase64String(r.resumeToken))}function fp(r,e){const t=Fc(e.snapshotVersion),o=Fc(e.lastLimboFreeSnapshotVersion);let d;d=lc(e.target)?Bd(r.se,e.target):Ed(r.se,e.target);const v=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:ac(e.target),readTime:t,resumeToken:v,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:o,query:d}}function au(r){const e=ku({parent:r.parent,structuredQuery:r.structuredQuery});return"LAST"===r.limitType?qc(e,e.limit,"L"):e}function Uu(r,e){return new kc(e.largestBatchId,bu(r.se,e.overlayMutation))}function $d(r,e){const t=e.path.lastSegment();return[r,Fs(e.path.popLast()),t]}function xh(r,e,t,o){return{indexId:r,uid:e.uid||"",sequenceNumber:t,readTime:Fc(o.readTime),documentKey:Fs(o.documentKey.path),largestBatchId:o.largestBatchId}}class wf{getBundleMetadata(e,t){return Gd(e).get(t).next(o=>{if(o)return{id:(d=o).bundleId,createTime:Fu(d.createTime),version:d.version};var d})}saveBundleMetadata(e,t){return Gd(e).put({bundleId:(o=t).id,createTime:Fc(le(o.createTime)),version:o.version});var o}getNamedQuery(e,t){return Cf(e).get(t).next(o=>{if(o)return{name:(d=o).name,query:au(d.bundledQuery),readTime:Fu(d.readTime)};var d})}saveNamedQuery(e,t){return Cf(e).put({name:(o=t).name,readTime:Fc(le(o.readTime)),bundledQuery:o.bundledQuery});var o}}function Gd(r){return P(r,"bundles")}function Cf(r){return P(r,"namedQueries")}class wd{constructor(e,t){this.serializer=e,this.userId=t}static ie(e,t){return new wd(e,t.uid||"")}getOverlay(e,t){return Vu(e).get($d(this.userId,t)).next(o=>o?Uu(this.serializer,o):null)}getOverlays(e,t){const o=Gs();return nn.forEach(t,d=>this.getOverlay(e,d).next(v=>{null!==v&&o.set(d,v)})).next(()=>o)}saveOverlays(e,t,o){const d=[];return o.forEach((v,x)=>{const H=new kc(t,x);d.push(this.re(e,H))}),nn.waitFor(d)}removeOverlaysForBatchId(e,t,o){const d=new Set;t.forEach(x=>d.add(Fs(x.getCollectionPath())));const v=[];return d.forEach(x=>{const H=IDBKeyRange.bound([this.userId,x,o],[this.userId,x,o+1],!1,!0);v.push(Vu(e).J("collectionPathOverlayIndex",H))}),nn.waitFor(v)}getOverlaysForCollection(e,t,o){const d=Gs(),v=Fs(t),x=IDBKeyRange.bound([this.userId,v,o],[this.userId,v,Number.POSITIVE_INFINITY],!0);return Vu(e).j("collectionPathOverlayIndex",x).next(H=>{for(const oe of H){const fe=Uu(this.serializer,oe);d.set(fe.getKey(),fe)}return d})}getOverlaysForCollectionGroup(e,t,o,d){const v=Gs();let x;const H=IDBKeyRange.bound([this.userId,t,o],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Vu(e).Z({index:"collectionGroupOverlayIndex",range:H},(oe,fe,Oe)=>{const ft=Uu(this.serializer,fe);v.size()<d||ft.largestBatchId===x?(v.set(ft.getKey(),ft),x=ft.largestBatchId):Oe.done()}).next(()=>v)}re(e,t){return Vu(e).put(function(o,d,v){const[x,H,oe]=$d(d,v.mutation.key);return{userId:d,collectionPath:H,documentId:oe,collectionGroup:v.mutation.key.getCollectionGroup(),largestBatchId:v.largestBatchId,overlayMutation:Pu(o.se,v.mutation)}}(this.serializer,this.userId,t))}}function Vu(r){return P(r,"documentOverlays")}class Ic{constructor(){}oe(e,t){this.ue(e,t),t.ce()}ue(e,t){if("nullValue"in e)this.ae(t,5);else if("booleanValue"in e)this.ae(t,10),t.he(e.booleanValue?1:0);else if("integerValue"in e)this.ae(t,15),t.he(Ss(e.integerValue));else if("doubleValue"in e){const o=Ss(e.doubleValue);isNaN(o)?this.ae(t,13):(this.ae(t,15),dl(o)?t.he(0):t.he(o))}else if("timestampValue"in e){const o=e.timestampValue;this.ae(t,20),"string"==typeof o?t.le(o):(t.le(`${o.seconds||""}`),t.he(o.nanos||0))}else if("stringValue"in e)this.fe(e.stringValue,t),this.de(t);else if("bytesValue"in e)this.ae(t,30),t.we(ia(e.bytesValue)),this.de(t);else if("referenceValue"in e)this._e(e.referenceValue,t);else if("geoPointValue"in e){const o=e.geoPointValue;this.ae(t,45),t.he(o.latitude||0),t.he(o.longitude||0)}else"mapValue"in e?Wa(e)?this.ae(t,Number.MAX_SAFE_INTEGER):(this.me(e.mapValue,t),this.de(t)):"arrayValue"in e?(this.ge(e.arrayValue,t),this.de(t)):ve()}fe(e,t){this.ae(t,25),this.ye(e,t)}ye(e,t){t.le(e)}me(e,t){const o=e.fields||{};this.ae(t,55);for(const d of Object.keys(o))this.fe(d,t),this.ue(o[d],t)}ge(e,t){const o=e.values||[];this.ae(t,50);for(const d of o)this.ue(d,t)}_e(e,t){this.ae(t,37),Jt.fromName(e).path.forEach(o=>{this.ae(t,60),this.ye(o,t)})}ae(e,t){e.he(t)}de(e){e.he(2)}}function Ah(r){if(0===r)return 8;let e=0;return!(r>>4)&&(e+=4,r<<=4),!(r>>6)&&(e+=2,r<<=2),!(r>>7)&&(e+=1),e}function Tf(r){const e=64-function(t){let o=0;for(let d=0;d<8;++d){const v=Ah(255&t[d]);if(o+=v,8!==v)break}return o}(r);return Math.ceil(e/8)}Ic.pe=new Ic;class Mh{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ie(e){const t=e[Symbol.iterator]();let o=t.next();for(;!o.done;)this.Te(o.value),o=t.next();this.Ee()}Ae(e){const t=e[Symbol.iterator]();let o=t.next();for(;!o.done;)this.Re(o.value),o=t.next();this.ve()}be(e){for(const t of e){const o=t.charCodeAt(0);if(o<128)this.Te(o);else if(o<2048)this.Te(960|o>>>6),this.Te(128|63&o);else if(t<"\ud800"||"\udbff"<t)this.Te(480|o>>>12),this.Te(128|63&o>>>6),this.Te(128|63&o);else{const d=t.codePointAt(0);this.Te(240|d>>>18),this.Te(128|63&d>>>12),this.Te(128|63&d>>>6),this.Te(128|63&d)}}this.Ee()}Pe(e){for(const t of e){const o=t.charCodeAt(0);if(o<128)this.Re(o);else if(o<2048)this.Re(960|o>>>6),this.Re(128|63&o);else if(t<"\ud800"||"\udbff"<t)this.Re(480|o>>>12),this.Re(128|63&o>>>6),this.Re(128|63&o);else{const d=t.codePointAt(0);this.Re(240|d>>>18),this.Re(128|63&d>>>12),this.Re(128|63&d>>>6),this.Re(128|63&d)}}this.ve()}Ve(e){const t=this.Se(e),o=Tf(t);this.De(1+o),this.buffer[this.position++]=255&o;for(let d=t.length-o;d<t.length;++d)this.buffer[this.position++]=255&t[d]}Ce(e){const t=this.Se(e),o=Tf(t);this.De(1+o),this.buffer[this.position++]=~(255&o);for(let d=t.length-o;d<t.length;++d)this.buffer[this.position++]=~(255&t[d])}xe(){this.Ne(255),this.Ne(255)}ke(){this.Oe(255),this.Oe(255)}reset(){this.position=0}seed(e){this.De(e.length),this.buffer.set(e,this.position),this.position+=e.length}$e(){return this.buffer.slice(0,this.position)}Se(e){const t=function(d){const v=new DataView(new ArrayBuffer(8));return v.setFloat64(0,d,!1),new Uint8Array(v.buffer)}(e),o=0!=(128&t[0]);t[0]^=o?255:128;for(let d=1;d<t.length;++d)t[d]^=o?255:0;return t}Te(e){const t=255&e;0===t?(this.Ne(0),this.Ne(255)):255===t?(this.Ne(255),this.Ne(0)):this.Ne(t)}Re(e){const t=255&e;0===t?(this.Oe(0),this.Oe(255)):255===t?(this.Oe(255),this.Oe(0)):this.Oe(e)}Ee(){this.Ne(0),this.Ne(1)}ve(){this.Oe(0),this.Oe(1)}Ne(e){this.De(1),this.buffer[this.position++]=e}Oe(e){this.De(1),this.buffer[this.position++]=~e}De(e){const t=e+this.position;if(t<=this.buffer.length)return;let o=2*this.buffer.length;o<t&&(o=t);const d=new Uint8Array(o);d.set(this.buffer),this.buffer=d}}class pp{constructor(e){this.Me=e}we(e){this.Me.Ie(e)}le(e){this.Me.be(e)}he(e){this.Me.Ve(e)}ce(){this.Me.xe()}}class Wd{constructor(e){this.Me=e}we(e){this.Me.Ae(e)}le(e){this.Me.Pe(e)}he(e){this.Me.Ce(e)}ce(){this.Me.ke()}}class Bu{constructor(){this.Me=new Mh,this.Fe=new pp(this.Me),this.Be=new Wd(this.Me)}seed(e){this.Me.seed(e)}Le(e){return 0===e?this.Fe:this.Be}$e(){return this.Me.$e()}reset(){this.Me.reset()}}class lu{constructor(e,t,o,d){this.indexId=e,this.documentKey=t,this.arrayValue=o,this.directionalValue=d}qe(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,o=new Uint8Array(t);return o.set(this.directionalValue,0),t!==e?o.set([0],this.directionalValue.length):++o[o.length-1],new lu(this.indexId,this.documentKey,this.arrayValue,o)}}function ic(r,e){let t=r.indexId-e.indexId;return 0!==t?t:(t=Df(r.arrayValue,e.arrayValue),0!==t?t:(t=Df(r.directionalValue,e.directionalValue),0!==t?t:Jt.comparator(r.documentKey,e.documentKey)))}function Df(r,e){for(let t=0;t<r.length&&t<e.length;++t){const o=r[t]-e[t];if(0!==o)return o}return r.length-e.length}class Rh{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ue=e.orderBy,this.Ke=[];for(const t of e.filters){const o=t;o.isInequality()?this.Ge=o:this.Ke.push(o)}}Qe(e){$e(e.collectionGroup===this.collectionId);const t=ci(e);if(void 0!==t&&!this.ze(t))return!1;const o=pr(e);let d=0,v=0;for(;d<o.length&&this.ze(o[d]);++d);if(d===o.length)return!0;if(void 0!==this.Ge){const x=o[d];if(!this.je(this.Ge,x)||!this.We(this.Ue[v++],x))return!1;++d}for(;d<o.length;++d)if(v>=this.Ue.length||!this.We(this.Ue[v++],o[d]))return!1;return!0}ze(e){for(const t of this.Ke)if(this.je(t,e))return!0;return!1}je(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}We(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function nd(r){var e,t;if($e(r instanceof Wr||r instanceof Is),r instanceof Wr){if(r instanceof pu){const d=(null===(t=null===(e=r.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(v=>Wr.create(r.field,"==",v)))||[];return Is.create(d,"or")}return r}const o=r.filters.map(d=>nd(d));return Is.create(o,r.op)}function mp(r){if(0===r.getFilters().length)return[];const e=Kd(nd(r));return $e(Iu(e)),Cd(e)||Hu(e)?[e]:e.getFilters()}function Cd(r){return r instanceof Wr}function Hu(r){return r instanceof Is&&Cl(r)}function Iu(r){return Cd(r)||Hu(r)||function(e){if(e instanceof Is&&iu(e)){for(const t of e.getFilters())if(!Cd(t)&&!Hu(t))return!1;return!0}return!1}(r)}function Kd(r){if($e(r instanceof Wr||r instanceof Is),r instanceof Wr)return r;if(1===r.filters.length)return Kd(r.filters[0]);const e=r.filters.map(o=>Kd(o));let t=Is.create(e,r.op);return t=qd(t),Iu(t)?t:($e(t instanceof Is),$e(pc(t)),$e(t.filters.length>1),t.filters.reduce((o,d)=>Td(o,d)))}function Td(r,e){let t;return $e(r instanceof Wr||r instanceof Is),$e(e instanceof Wr||e instanceof Is),t=r instanceof Wr?e instanceof Wr?Is.create([r,e],"and"):Sf(r,e):e instanceof Wr?Sf(e,r):function(o,d){if($e(o.filters.length>0&&d.filters.length>0),pc(o)&&pc(d))return Hc(o,d.getFilters());const v=iu(o)?o:d,x=iu(o)?d:o,H=v.filters.map(oe=>Td(oe,x));return Is.create(H,"or")}(r,e),qd(t)}function Sf(r,e){if(pc(e))return Hc(e,r.getFilters());{const t=e.filters.map(o=>Td(r,o));return Is.create(t,"or")}}function qd(r){if($e(r instanceof Wr||r instanceof Is),r instanceof Wr)return r;const e=r.getFilters();if(1===e.length)return qd(e[0]);if(Ha(r))return r;const t=e.map(d=>qd(d)),o=[];return t.forEach(d=>{d instanceof Wr?o.push(d):d instanceof Is&&(d.op===r.op?o.push(...d.filters):o.push(d))}),1===o.length?o[0]:Is.create(o,r.op)}class m{constructor(){this.He=new c}addToCollectionParentIndex(e,t){return this.He.add(t),nn.resolve()}getCollectionParents(e,t){return nn.resolve(this.He.getEntries(t))}addFieldIndex(e,t){return nn.resolve()}deleteFieldIndex(e,t){return nn.resolve()}getDocumentsMatchingTarget(e,t){return nn.resolve(null)}getIndexType(e,t){return nn.resolve(0)}getFieldIndexes(e,t){return nn.resolve([])}getNextCollectionGroupToUpdate(e){return nn.resolve(null)}getMinOffset(e,t){return nn.resolve(Lr.min())}getMinOffsetFromCollectionGroup(e,t){return nn.resolve(Lr.min())}updateCollectionGroup(e,t,o){return nn.resolve()}updateIndexEntries(e,t){return nn.resolve()}}class c{constructor(){this.index={}}add(e){const t=e.lastSegment(),o=e.popLast(),d=this.index[t]||new Un(Ki.comparator),v=!d.has(o);return this.index[t]=d.add(o),v}has(e){const t=e.lastSegment(),o=e.popLast(),d=this.index[t];return d&&d.has(o)}getEntries(e){return(this.index[e]||new Un(Ki.comparator)).toArray()}}const u=new Uint8Array(0);class I{constructor(e,t){this.user=e,this.databaseId=t,this.Je=new c,this.Ye=new $t(o=>ac(o),(o,d)=>ra(o,d)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Je.has(t)){const o=t.lastSegment(),d=t.popLast();e.addOnCommittedListener(()=>{this.Je.add(t)});const v={collectionId:o,parent:Fs(d)};return O(e).put(v)}return nn.resolve()}getCollectionParents(e,t){const o=[],d=IDBKeyRange.bound([t,""],[fr(t),""],!1,!0);return O(e).j(d).next(v=>{for(const x of v){if(x.collectionId!==t)break;o.push(xa(x.parent))}return o})}addFieldIndex(e,t){const o=ae(e),d={indexId:(x=t).indexId,collectionGroup:x.collectionGroup,fields:x.fields.map(H=>[H.fieldPath.canonicalString(),H.kind])};var x;delete d.indexId;const v=o.add(d);if(t.indexState){const x=Ie(e);return v.next(H=>{x.put(xh(H,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return v.next()}deleteFieldIndex(e,t){const o=ae(e),d=Ie(e),v=W(e);return o.delete(t.indexId).next(()=>d.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>v.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const o=W(e);let d=!0;const v=new Map;return nn.forEach(this.Ze(t),x=>this.Xe(e,x).next(H=>{d&&(d=!!H),v.set(x,H)})).next(()=>{if(d){let x=Ir();const H=[];return nn.forEach(v,(oe,fe)=>{var Oe;S("IndexedDbIndexManager",`Using index ${Oe=oe,`id=${Oe.indexId}|cg=${Oe.collectionGroup}|f=${Oe.fields.map(oo=>`${oo.fieldPath}:${oo.kind}`).join(",")}`} to execute ${ac(t)}`);const ft=function(oo,Cc){const ul=ci(Cc);if(void 0===ul)return null;for(const Fa of gc(oo,ul.fieldPath))switch(Fa.op){case"array-contains-any":return Fa.value.arrayValue.values||[];case"array-contains":return[Fa.value]}return null}(fe,oe),Wt=function(oo,Cc){const ul=new Map;for(const Fa of pr(Cc))for(const Tc of gc(oo,Fa.fieldPath))switch(Tc.op){case"==":case"in":ul.set(Fa.fieldPath.canonicalString(),Tc.value);break;case"not-in":case"!=":return ul.set(Fa.fieldPath.canonicalString(),Tc.value),Array.from(ul.values())}return null}(fe,oe),yn=function(oo,Cc){const ul=[];let Fa=!0;for(const Tc of pr(Cc)){const gd=0===Tc.kind?$c(oo,Tc.fieldPath,oo.startAt):sa(oo,Tc.fieldPath,oo.startAt);ul.push(gd.value),Fa&&(Fa=gd.inclusive)}return new ml(ul,Fa)}(fe,oe),Vn=function(oo,Cc){const ul=[];let Fa=!0;for(const Tc of pr(Cc)){const gd=0===Tc.kind?sa(oo,Tc.fieldPath,oo.endAt):$c(oo,Tc.fieldPath,oo.endAt);ul.push(gd.value),Fa&&(Fa=gd.inclusive)}return new ml(ul,Fa)}(fe,oe),mi=this.tn(oe,fe,yn),qi=this.tn(oe,fe,Vn),vo=this.en(oe,fe,Wt),Na=this.nn(oe.indexId,ft,mi,yn.inclusive,qi,Vn.inclusive,vo);return nn.forEach(Na,oo=>o.H(oo,t.limit).next(Cc=>{Cc.forEach(ul=>{const Fa=Jt.fromSegments(ul.documentKey);x.has(Fa)||(x=x.add(Fa),H.push(Fa))})}))}).next(()=>H)}return nn.resolve(null)})}Ze(e){let t=this.Ye.get(e);return t||(t=0===e.filters.length?[e]:mp(Is.create(e.filters,"and")).map(o=>Mc(e.path,e.collectionGroup,e.orderBy,o.getFilters(),e.limit,e.startAt,e.endAt)),this.Ye.set(e,t),t)}nn(e,t,o,d,v,x,H){const oe=(null!=t?t.length:1)*Math.max(o.length,v.length),fe=oe/(null!=t?t.length:1),Oe=[];for(let ft=0;ft<oe;++ft){const Wt=t?this.sn(t[ft/fe]):u,yn=this.rn(e,Wt,o[ft%fe],d),Vn=this.on(e,Wt,v[ft%fe],x),mi=H.map(qi=>this.rn(e,Wt,qi,!0));Oe.push(...this.createRange(yn,Vn,mi))}return Oe}rn(e,t,o,d){const v=new lu(e,Jt.empty(),t,o);return d?v:v.qe()}on(e,t,o,d){const v=new lu(e,Jt.empty(),t,o);return d?v.qe():v}Xe(e,t){const o=new Rh(t),d=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,d).next(v=>{let x=null;for(const H of v)o.Qe(H)&&(!x||H.fields.length>x.fields.length)&&(x=H);return x})}getIndexType(e,t){let o=2;const d=this.Ze(t);return nn.forEach(d,v=>this.Xe(e,v).next(x=>{x?0!==o&&x.fields.length<function(H){let oe=new Un(ts.comparator),fe=!1;for(const Oe of H.filters)for(const ft of Oe.getFlattenedFilters())ft.field.isKeyField()||("array-contains"===ft.op||"array-contains-any"===ft.op?fe=!0:oe=oe.add(ft.field));for(const Oe of H.orderBy)Oe.field.isKeyField()||(oe=oe.add(Oe.field));return oe.size+(fe?1:0)}(v)&&(o=1):o=0})).next(()=>null!==t.limit&&d.length>1&&2===o?1:o)}un(e,t){const o=new Bu;for(const d of pr(e)){const v=t.data.field(d.fieldPath);if(null==v)return null;const x=o.Le(d.kind);Ic.pe.oe(v,x)}return o.$e()}sn(e){const t=new Bu;return Ic.pe.oe(e,t.Le(0)),t.$e()}cn(e,t){const o=new Bu;return Ic.pe.oe(Gi(this.databaseId,t),o.Le(function(d){const v=pr(d);return 0===v.length?0:v[v.length-1].kind}(e))),o.$e()}en(e,t,o){if(null===o)return[];let d=[];d.push(new Bu);let v=0;for(const x of pr(e)){const H=o[v++];for(const oe of d)if(this.an(t,x.fieldPath)&&so(H))d=this.hn(d,x,H);else{const fe=oe.Le(x.kind);Ic.pe.oe(H,fe)}}return this.ln(d)}tn(e,t,o){return this.en(e,t,o.position)}ln(e){const t=[];for(let o=0;o<e.length;++o)t[o]=e[o].$e();return t}hn(e,t,o){const d=[...e],v=[];for(const x of o.arrayValue.values||[])for(const H of d){const oe=new Bu;oe.seed(H.$e()),Ic.pe.oe(x,oe.Le(t.kind)),v.push(oe)}return v}an(e,t){return!!e.filters.find(o=>o instanceof Wr&&o.field.isEqual(t)&&("in"===o.op||"not-in"===o.op))}getFieldIndexes(e,t){const o=ae(e),d=Ie(e);return(t?o.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):o.j()).next(v=>{const x=[];return nn.forEach(v,H=>d.get([H.indexId,this.uid]).next(oe=>{x.push(function(fe,Oe){const ft=Oe?new ys(Oe.sequenceNumber,new Lr(Fu(Oe.readTime),new Jt(xa(Oe.documentKey)),Oe.largestBatchId)):ys.empty(),Wt=fe.fields.map(([yn,Vn])=>new ks(ts.fromServerFormat(yn),Vn));return new pi(fe.indexId,fe.collectionGroup,Wt,ft)}(H,oe))})).next(()=>x)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((o,d)=>{const v=o.indexState.sequenceNumber-d.indexState.sequenceNumber;return 0!==v?v:Rn(o.collectionGroup,d.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,o){const d=ae(e),v=Ie(e);return this.fn(e).next(x=>d.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(H=>nn.forEach(H,oe=>v.put(xh(oe.indexId,this.user,x,o)))))}updateIndexEntries(e,t){const o=new Map;return nn.forEach(t,(d,v)=>{const x=o.get(d.collectionGroup);return(x?nn.resolve(x):this.getFieldIndexes(e,d.collectionGroup)).next(H=>(o.set(d.collectionGroup,H),nn.forEach(H,oe=>this.dn(e,d,oe).next(fe=>{const Oe=this.wn(v,oe);return fe.isEqual(Oe)?nn.resolve():this._n(e,v,oe,fe,Oe)}))))})}mn(e,t,o,d){return W(e).put({indexId:d.indexId,uid:this.uid,arrayValue:d.arrayValue,directionalValue:d.directionalValue,orderedDocumentKey:this.cn(o,t.key),documentKey:t.key.path.toArray()})}gn(e,t,o,d){return W(e).delete([d.indexId,this.uid,d.arrayValue,d.directionalValue,this.cn(o,t.key),t.key.path.toArray()])}dn(e,t,o){const d=W(e);let v=new Un(ic);return d.Z({index:"documentKeyIndex",range:IDBKeyRange.only([o.indexId,this.uid,this.cn(o,t)])},(x,H)=>{v=v.add(new lu(o.indexId,t,H.arrayValue,H.directionalValue))}).next(()=>v)}wn(e,t){let o=new Un(ic);const d=this.un(t,e);if(null==d)return o;const v=ci(t);if(null!=v){const x=e.data.field(v.fieldPath);if(so(x))for(const H of x.arrayValue.values||[])o=o.add(new lu(t.indexId,e.key,this.sn(H),d))}else o=o.add(new lu(t.indexId,e.key,u,d));return o}_n(e,t,o,d,v){S("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const x=[];return function(H,oe,fe,Oe,ft){const Wt=H.getIterator(),yn=oe.getIterator();let Vn=jr(Wt),mi=jr(yn);for(;Vn||mi;){let qi=!1,vo=!1;if(Vn&&mi){const Na=fe(Vn,mi);Na<0?vo=!0:Na>0&&(qi=!0)}else null!=Vn?vo=!0:qi=!0;qi?(Oe(mi),mi=jr(yn)):vo?(ft(Vn),Vn=jr(Wt)):(Vn=jr(Wt),mi=jr(yn))}}(d,v,ic,H=>{x.push(this.mn(e,t,o,H))},H=>{x.push(this.gn(e,t,o,H))}),nn.waitFor(x)}fn(e){let t=1;return Ie(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(o,d,v)=>{v.done(),t=d.sequenceNumber+1}).next(()=>t)}createRange(e,t,o){o=o.sort((x,H)=>ic(x,H)).filter((x,H,oe)=>!H||0!==ic(x,oe[H-1]));const d=[];d.push(e);for(const x of o){const H=ic(x,e),oe=ic(x,t);if(0===H)d[0]=e.qe();else if(H>0&&oe<0)d.push(x),d.push(x.qe());else if(oe>0)break}d.push(t);const v=[];for(let x=0;x<d.length;x+=2){if(this.yn(d[x],d[x+1]))return[];v.push(IDBKeyRange.bound([d[x].indexId,this.uid,d[x].arrayValue,d[x].directionalValue,u,[]],[d[x+1].indexId,this.uid,d[x+1].arrayValue,d[x+1].directionalValue,u,[]]))}return v}yn(e,t){return ic(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(qe)}getMinOffset(e,t){return nn.mapArray(this.Ze(t),o=>this.Xe(e,o).next(d=>d||ve())).next(qe)}}function O(r){return P(r,"collectionParents")}function W(r){return P(r,"indexEntries")}function ae(r){return P(r,"indexConfiguration")}function Ie(r){return P(r,"indexState")}function qe(r){$e(0!==r.length);let e=r[0].indexState.offset,t=e.largestBatchId;for(let o=1;o<r.length;o++){const d=r[o].indexState.offset;mr(d,e)<0&&(e=d),t<d.largestBatchId&&(t=d.largestBatchId)}return new Lr(e.readTime,e.documentKey,t)}const ut={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class cn{constructor(e,t,o){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=o}static withCacheSize(e){return new cn(e,cn.DEFAULT_COLLECTION_PERCENTILE,cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function fn(r,e,t){const o=r.store("mutations"),d=r.store("documentMutations"),v=[],x=IDBKeyRange.only(t.batchId);let H=0;const oe=o.Z({range:x},(Oe,ft,Wt)=>(H++,Wt.delete()));v.push(oe.next(()=>{$e(1===H)}));const fe=[];for(const Oe of t.mutations){const ft=Hl(e,Oe.key.path,t.batchId);v.push(d.delete(ft)),fe.push(Oe.key)}return nn.waitFor(v).next(()=>fe)}function En(r){if(!r)return 0;let e;if(r.document)e=r.document;else if(r.unknownDocument)e=r.unknownDocument;else{if(!r.noDocument)throw ve();e=r.noDocument}return JSON.stringify(e).length}cn.DEFAULT_COLLECTION_PERCENTILE=10,cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,cn.DEFAULT=new cn(41943040,cn.DEFAULT_COLLECTION_PERCENTILE,cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),cn.DISABLED=new cn(-1,0,0);class hi{constructor(e,t,o,d){this.userId=e,this.serializer=t,this.indexManager=o,this.referenceDelegate=d,this.pn={}}static ie(e,t,o,d){$e(""!==e.uid);const v=e.isAuthenticated()?e.uid:"";return new hi(v,t,o,d)}checkEmpty(e){let t=!0;const o=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return qr(e).Z({index:"userMutationsIndex",range:o},(d,v,x)=>{t=!1,x.done()}).next(()=>t)}addMutationBatch(e,t,o,d){const v=Sa(e),x=qr(e);return x.add({}).next(H=>{$e("number"==typeof H);const oe=new Nl(H,t,o,d),fe=function(Wt,yn,Vn){const mi=Vn.baseMutations.map(vo=>Pu(Wt.se,vo)),qi=Vn.mutations.map(vo=>Pu(Wt.se,vo));return{userId:yn,batchId:Vn.batchId,localWriteTimeMs:Vn.localWriteTime.toMillis(),baseMutations:mi,mutations:qi}}(this.serializer,this.userId,oe),Oe=[];let ft=new Un((Wt,yn)=>Rn(Wt.canonicalString(),yn.canonicalString()));for(const Wt of d){const yn=Hl(this.userId,Wt.key.path,H);ft=ft.add(Wt.key.path.popLast()),Oe.push(x.put(fe)),Oe.push(v.put(yn,jl))}return ft.forEach(Wt=>{Oe.push(this.indexManager.addToCollectionParentIndex(e,Wt))}),e.addOnCommittedListener(()=>{this.pn[H]=oe.keys()}),nn.waitFor(Oe).next(()=>oe)})}lookupMutationBatch(e,t){return qr(e).get(t).next(o=>o?($e(o.userId===this.userId),Lu(this.serializer,o)):null)}In(e,t){return this.pn[t]?nn.resolve(this.pn[t]):this.lookupMutationBatch(e,t).next(o=>{if(o){const d=o.keys();return this.pn[t]=d,d}return null})}getNextMutationBatchAfterBatchId(e,t){const o=t+1,d=IDBKeyRange.lowerBound([this.userId,o]);let v=null;return qr(e).Z({index:"userMutationsIndex",range:d},(x,H,oe)=>{H.userId===this.userId&&($e(H.batchId>=o),v=Lu(this.serializer,H)),oe.done()}).next(()=>v)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let o=-1;return qr(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(d,v,x)=>{o=v.batchId,x.done()}).next(()=>o)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return qr(e).j("userMutationsIndex",t).next(o=>o.map(d=>Lu(this.serializer,d)))}getAllMutationBatchesAffectingDocumentKey(e,t){const o=Ea(this.userId,t.path),d=IDBKeyRange.lowerBound(o),v=[];return Sa(e).Z({range:d},(x,H,oe)=>{const[fe,Oe,ft]=x,Wt=xa(Oe);if(fe===this.userId&&t.path.isEqual(Wt))return qr(e).get(ft).next(yn=>{if(!yn)throw ve();$e(yn.userId===this.userId),v.push(Lu(this.serializer,yn))});oe.done()}).next(()=>v)}getAllMutationBatchesAffectingDocumentKeys(e,t){let o=new Un(Rn);const d=[];return t.forEach(v=>{const x=Ea(this.userId,v.path),H=IDBKeyRange.lowerBound(x),oe=Sa(e).Z({range:H},(fe,Oe,ft)=>{const[Wt,yn,Vn]=fe,mi=xa(yn);Wt===this.userId&&v.path.isEqual(mi)?o=o.add(Vn):ft.done()});d.push(oe)}),nn.waitFor(d).next(()=>this.Tn(e,o))}getAllMutationBatchesAffectingQuery(e,t){const o=t.path,d=o.length+1,v=Ea(this.userId,o),x=IDBKeyRange.lowerBound(v);let H=new Un(Rn);return Sa(e).Z({range:x},(oe,fe,Oe)=>{const[ft,Wt,yn]=oe,Vn=xa(Wt);ft===this.userId&&o.isPrefixOf(Vn)?Vn.length===d&&(H=H.add(yn)):Oe.done()}).next(()=>this.Tn(e,H))}Tn(e,t){const o=[],d=[];return t.forEach(v=>{d.push(qr(e).get(v).next(x=>{if(null===x)throw ve();$e(x.userId===this.userId),o.push(Lu(this.serializer,x))}))}),nn.waitFor(d).next(()=>o)}removeMutationBatch(e,t){return fn(e.at,this.userId,t).next(o=>(e.addOnCommittedListener(()=>{this.En(t.batchId)}),nn.forEach(o,d=>this.referenceDelegate.markPotentiallyOrphaned(e,d))))}En(e){delete this.pn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return nn.resolve();const o=IDBKeyRange.lowerBound([this.userId]),d=[];return Sa(e).Z({range:o},(v,x,H)=>{if(v[0]===this.userId){const oe=xa(v[1]);d.push(oe)}else H.done()}).next(()=>{$e(0===d.length)})})}containsKey(e,t){return $i(e,this.userId,t)}An(e){return wc(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function $i(r,e,t){const o=Ea(e,t.path),d=o[1],v=IDBKeyRange.lowerBound(o);let x=!1;return Sa(r).Z({range:v,Y:!0},(H,oe,fe)=>{const[Oe,ft,Wt]=H;Oe===e&&ft===d&&(x=!0),fe.done()}).next(()=>x)}function qr(r){return P(r,"mutations")}function Sa(r){return P(r,"documentMutations")}function wc(r){return P(r,"mutationQueues")}class Ll{constructor(e){this.Rn=e}next(){return this.Rn+=2,this.Rn}static vn(){return new Ll(0)}static bn(){return new Ll(-1)}}class id{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Pn(e).next(t=>{const o=new Ll(t.highestTargetId);return t.highestTargetId=o.next(),this.Vn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Pn(e).next(t=>qn.fromTimestamp(new ni(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Pn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,o){return this.Pn(e).next(d=>(d.highestListenSequenceNumber=t,o&&(d.lastRemoteSnapshotVersion=o.toTimestamp()),t>d.highestListenSequenceNumber&&(d.highestListenSequenceNumber=t),this.Vn(e,d)))}addTargetData(e,t){return this.Sn(e,t).next(()=>this.Pn(e).next(o=>(o.targetCount+=1,this.Dn(t,o),this.Vn(e,o))))}updateTargetData(e,t){return this.Sn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>rd(e).delete(t.targetId)).next(()=>this.Pn(e)).next(o=>($e(o.targetCount>0),o.targetCount-=1,this.Vn(e,o)))}removeTargets(e,t,o){let d=0;const v=[];return rd(e).Z((x,H)=>{const oe=td(H);oe.sequenceNumber<=t&&null===o.get(oe.targetId)&&(d++,v.push(this.removeTargetData(e,oe)))}).next(()=>nn.waitFor(v)).next(()=>d)}forEachTarget(e,t){return rd(e).Z((o,d)=>{const v=td(d);t(v)})}Pn(e){return gp(e).get("targetGlobalKey").next(t=>($e(null!==t),t))}Vn(e,t){return gp(e).put("targetGlobalKey",t)}Sn(e,t){return rd(e).put(fp(this.serializer,t))}Dn(e,t){let o=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,o=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,o=!0),o}getTargetCount(e){return this.Pn(e).next(t=>t.targetCount)}getTargetData(e,t){const o=ac(t),d=IDBKeyRange.bound([o,Number.NEGATIVE_INFINITY],[o,Number.POSITIVE_INFINITY]);let v=null;return rd(e).Z({range:d,index:"queryTargetsIndex"},(x,H,oe)=>{const fe=td(H);ra(t,fe.target)&&(v=fe,oe.done())}).next(()=>v)}addMatchingKeys(e,t,o){const d=[],v=ju(e);return t.forEach(x=>{const H=Fs(x.path);d.push(v.put({targetId:o,path:H})),d.push(this.referenceDelegate.addReference(e,o,x))}),nn.waitFor(d)}removeMatchingKeys(e,t,o){const d=ju(e);return nn.forEach(t,v=>{const x=Fs(v.path);return nn.waitFor([d.delete([o,x]),this.referenceDelegate.removeReference(e,o,v)])})}removeMatchingKeysForTargetId(e,t){const o=ju(e),d=IDBKeyRange.bound([t],[t+1],!1,!0);return o.delete(d)}getMatchingKeysForTargetId(e,t){const o=IDBKeyRange.bound([t],[t+1],!1,!0),d=ju(e);let v=Ir();return d.Z({range:o,Y:!0},(x,H,oe)=>{const fe=xa(x[1]),Oe=new Jt(fe);v=v.add(Oe)}).next(()=>v)}containsKey(e,t){const o=Fs(t.path),d=IDBKeyRange.bound([o],[fr(o)],!1,!0);let v=0;return ju(e).Z({index:"documentTargetsIndex",Y:!0,range:d},([x,H],oe,fe)=>{0!==x&&(v++,fe.done())}).next(()=>v>0)}ne(e,t){return rd(e).get(t).next(o=>o?td(o):null)}}function rd(r){return P(r,"targets")}function gp(r){return P(r,"targetGlobal")}function ju(r){return P(r,"targetDocuments")}function xf([r,e],[t,o]){const d=Rn(r,t);return 0===d?Rn(e,o):d}class _p{constructor(e){this.Cn=e,this.buffer=new Un(xf),this.xn=0}Nn(){return++this.xn}kn(e){const t=[e,this.Nn()];if(this.buffer.size<this.Cn)this.buffer=this.buffer.add(t);else{const o=this.buffer.last();xf(t,o)<0&&(this.buffer=this.buffer.delete(o).add(t))}}get maxValue(){return this.buffer.last()[0]}}class E_{constructor(e,t,o){this.garbageCollector=e,this.asyncQueue=t,this.localStore=o,this.On=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.$n(6e4)}stop(){this.On&&(this.On.cancel(),this.On=null)}get started(){return null!==this.On}$n(e){var t=this;S("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.On=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,f.Z)(function*(){t.On=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(o){Hr(o)?S("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",o):yield ua(o)}yield t.$n(3e5)}))}}class yp{constructor(e,t){this.Mn=e,this.params=t}calculateTargetCount(e,t){return this.Mn.Fn(e).next(o=>Math.floor(t/100*o))}nthSequenceNumber(e,t){if(0===t)return nn.resolve(mo.ct);const o=new _p(t);return this.Mn.forEachTarget(e,d=>o.kn(d.sequenceNumber)).next(()=>this.Mn.Bn(e,d=>o.kn(d))).next(()=>o.maxValue)}removeTargets(e,t,o){return this.Mn.removeTargets(e,t,o)}removeOrphanedDocuments(e,t){return this.Mn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(S("LruGarbageCollector","Garbage collection skipped; disabled"),nn.resolve(ut)):this.getCacheSize(e).next(o=>o<this.params.cacheSizeCollectionThreshold?(S("LruGarbageCollector",`Garbage collection skipped; Cache size ${o} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),ut):this.Ln(e,t))}getCacheSize(e){return this.Mn.getCacheSize(e)}Ln(e,t){let o,d,v,x,H,oe,fe;const Oe=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(ft=>(ft>this.params.maximumSequenceNumbersToCollect?(S("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${ft}`),d=this.params.maximumSequenceNumbersToCollect):d=ft,x=Date.now(),this.nthSequenceNumber(e,d))).next(ft=>(o=ft,H=Date.now(),this.removeTargets(e,o,t))).next(ft=>(v=ft,oe=Date.now(),this.removeOrphanedDocuments(e,o))).next(ft=>(fe=Date.now(),no()<=Te.in.DEBUG&&S("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${x-Oe}ms\n\tDetermined least recently used ${d} in `+(H-x)+`ms\n\tRemoved ${v} targets in `+(oe-H)+`ms\n\tRemoved ${ft} documents in `+(fe-oe)+`ms\nTotal Duration: ${fe-Oe}ms`),nn.resolve({didRun:!0,sequenceNumbersCollected:d,targetsRemoved:v,documentsRemoved:ft})))}}class Ph{constructor(e,t){this.db=e,this.garbageCollector=new yp(this,t)}Fn(e){const t=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next(o=>t.next(d=>o+d))}qn(e){let t=0;return this.Bn(e,o=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Bn(e,t){return this.Un(e,(o,d)=>t(d))}addReference(e,t,o){return Af(e,o)}removeReference(e,t,o){return Af(e,o)}removeTargets(e,t,o){return this.db.getTargetCache().removeTargets(e,t,o)}markPotentiallyOrphaned(e,t){return Af(e,t)}Kn(e,t){return function(o,d){let v=!1;return wc(o).X(x=>$i(o,x,d).next(H=>(H&&(v=!0),nn.resolve(!H)))).next(()=>v)}(e,t)}removeOrphanedDocuments(e,t){const o=this.db.getRemoteDocumentCache().newChangeBuffer(),d=[];let v=0;return this.Un(e,(x,H)=>{if(H<=t){const oe=this.Kn(e,x).next(fe=>{if(!fe)return v++,o.getEntry(e,x).next(()=>(o.removeEntry(x,qn.min()),ju(e).delete([0,Fs(x.path)])))});d.push(oe)}}).next(()=>nn.waitFor(d)).next(()=>o.apply(e)).next(()=>v)}removeTarget(e,t){const o=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,o)}updateLimboDocument(e,t){return Af(e,t)}Un(e,t){const o=ju(e);let d,v=mo.ct;return o.Z({index:"documentTargetsIndex"},([x,H],{path:oe,sequenceNumber:fe})=>{0===x?(v!==mo.ct&&t(new Jt(xa(d)),v),v=fe,d=oe):v=mo.ct}).next(()=>{v!==mo.ct&&t(new Jt(xa(d)),v)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Af(r,e){return ju(r).put((o=r.currentSequenceNumber,{targetId:0,path:Fs(e.path),sequenceNumber:o}));var o}class Hm{constructor(){this.changes=new $t(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,$s.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const o=this.changes.get(t);return void 0!==o?nn.resolve(o):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class I_{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,o){return Dd(e).put(o)}removeEntry(e,t,o){return Dd(e).delete(function(d,v){const x=d.path.toArray();return[x.slice(0,x.length-2),x[x.length-2],Sl(v),x[x.length-1]]}(t,o))}updateMetadata(e,t){return this.getMetadata(e).next(o=>(o.byteSize+=t,this.Gn(e,o)))}getEntry(e,t){let o=$s.newInvalidDocument(t);return Dd(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(wu(t))},(d,v)=>{o=this.Qn(t,v)}).next(()=>o)}zn(e,t){let o={size:0,document:$s.newInvalidDocument(t)};return Dd(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(wu(t))},(d,v)=>{o={document:this.Qn(t,v),size:En(v)}}).next(()=>o)}getEntries(e,t){let o=Zn();return this.jn(e,t,(d,v)=>{const x=this.Qn(d,v);o=o.insert(d,x)}).next(()=>o)}Wn(e,t){let o=Zn(),d=new mt(Jt.comparator);return this.jn(e,t,(v,x)=>{const H=this.Qn(v,x);o=o.insert(v,H),d=d.insert(v,En(x))}).next(()=>({documents:o,Hn:d}))}jn(e,t,o){if(t.isEmpty())return nn.resolve();let d=new Un(zm);t.forEach(oe=>d=d.add(oe));const v=IDBKeyRange.bound(wu(d.first()),wu(d.last())),x=d.getIterator();let H=x.getNext();return Dd(e).Z({index:"documentKeyIndex",range:v},(oe,fe,Oe)=>{const ft=Jt.fromSegments([...fe.prefixPath,fe.collectionGroup,fe.documentId]);for(;H&&zm(H,ft)<0;)o(H,null),H=x.getNext();H&&H.isEqual(ft)&&(o(H,fe),H=x.hasNext()?x.getNext():null),H?Oe.G(wu(H)):Oe.done()}).next(()=>{for(;H;)o(H,null),H=x.hasNext()?x.getNext():null})}getDocumentsMatchingQuery(e,t,o,d){const v=t.path,x=[v.popLast().toArray(),v.lastSegment(),Sl(o.readTime),o.documentKey.path.isEmpty()?"":o.documentKey.path.lastSegment()],H=[v.popLast().toArray(),v.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Dd(e).j(IDBKeyRange.bound(x,H,!0)).next(oe=>{let fe=Zn();for(const Oe of oe){const ft=this.Qn(Jt.fromSegments(Oe.prefixPath.concat(Oe.collectionGroup,Oe.documentId)),Oe);ft.isFoundDocument()&&(M(t,ft)||d.has(ft.key))&&(fe=fe.insert(ft.key,ft))}return fe})}getAllFromCollectionGroup(e,t,o,d){let v=Zn();const x=Cu(t,o),H=Cu(t,Lr.max());return Dd(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(x,H,!0)},(oe,fe,Oe)=>{const ft=this.Qn(Jt.fromSegments(fe.prefixPath.concat(fe.collectionGroup,fe.documentId)),fe);v=v.insert(ft.key,ft),v.size===d&&Oe.done()}).next(()=>v)}newChangeBuffer(e){return new w_(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return vp(e).get("remoteDocumentGlobalKey").next(t=>($e(!!t),t))}Gn(e,t){return vp(e).put("remoteDocumentGlobalKey",t)}Qn(e,t){if(t){const o=function eu(r,e){let t;if(e.document)t=Ru(r.se,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const o=Jt.fromSegments(e.noDocument.path),d=Fu(e.noDocument.readTime);t=$s.newNoDocument(o,d),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return ve();{const o=Jt.fromSegments(e.unknownDocument.path),d=Fu(e.unknownDocument.version);t=$s.newUnknownDocument(o,d)}}return e.readTime&&t.setReadTime(function(o){const d=new ni(o[0],o[1]);return qn.fromTimestamp(d)}(e.readTime)),t}(this.serializer,t);if(!o.isNoDocument()||!o.version.isEqual(qn.min()))return o}return $s.newInvalidDocument(e)}}function jm(r){return new I_(r)}class w_ extends Hm{constructor(e,t){super(),this.Jn=e,this.trackRemovals=t,this.Yn=new $t(o=>o.toString(),(o,d)=>o.isEqual(d))}applyChanges(e){const t=[];let o=0,d=new Un((v,x)=>Rn(v.canonicalString(),x.canonicalString()));return this.changes.forEach((v,x)=>{const H=this.Yn.get(v);if(t.push(this.Jn.removeEntry(e,v,H.readTime)),x.isValidDocument()){const oe=tl(this.Jn.serializer,x);d=d.add(v.path.popLast());const fe=En(oe);o+=fe-H.size,t.push(this.Jn.addEntry(e,v,oe))}else if(o-=H.size,this.trackRemovals){const oe=tl(this.Jn.serializer,x.convertToNoDocument(qn.min()));t.push(this.Jn.addEntry(e,v,oe))}}),d.forEach(v=>{t.push(this.Jn.indexManager.addToCollectionParentIndex(e,v))}),t.push(this.Jn.updateMetadata(e,o)),nn.waitFor(t)}getFromCache(e,t){return this.Jn.zn(e,t).next(o=>(this.Yn.set(t,{size:o.size,readTime:o.document.readTime}),o.document))}getAllFromCache(e,t){return this.Jn.Wn(e,t).next(({documents:o,Hn:d})=>(d.forEach((v,x)=>{this.Yn.set(v,{size:x,readTime:o.get(v).readTime})}),o))}}function vp(r){return P(r,"remoteDocumentGlobal")}function Dd(r){return P(r,"remoteDocumentsV14")}function wu(r){const e=r.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Cu(r,e){const t=e.documentKey.path.toArray();return[r,Sl(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function zm(r,e){const t=r.path.toArray(),o=e.path.toArray();let d=0;for(let v=0;v<t.length-2&&v<o.length-2;++v)if(d=Rn(t[v],o[v]),d)return d;return d=Rn(t.length,o.length),d||(d=Rn(t[t.length-2],o[o.length-2]),d||Rn(t[t.length-1],o[o.length-1]))}class C_{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class T_{constructor(e,t,o,d){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=o,this.indexManager=d}getDocument(e,t){let o=null;return this.documentOverlayCache.getOverlay(e,t).next(d=>(o=d,this.remoteDocumentCache.getEntry(e,t))).next(d=>(null!==o&&Jl(o.mutation,d,ur.empty(),ni.now()),d))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(o=>this.getLocalViewOfDocuments(e,o,Ir()).next(()=>o))}getLocalViewOfDocuments(e,t,o=Ir()){const d=Gs();return this.populateOverlays(e,d,t).next(()=>this.computeViews(e,t,d,o).next(v=>{let x=Er();return v.forEach((H,oe)=>{x=x.insert(H,oe.overlayedDocument)}),x}))}getOverlayedDocuments(e,t){const o=Gs();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,Ir()))}populateOverlays(e,t,o){const d=[];return o.forEach(v=>{t.has(v)||d.push(v)}),this.documentOverlayCache.getOverlays(e,d).next(v=>{v.forEach((x,H)=>{t.set(x,H)})})}computeViews(e,t,o,d){let v=Zn();const x=kl(),H=kl();return t.forEach((oe,fe)=>{const Oe=o.get(fe.key);d.has(fe.key)&&(void 0===Oe||Oe.mutation instanceof Oa)?v=v.insert(fe.key,fe):void 0!==Oe?(x.set(fe.key,Oe.mutation.getFieldMask()),Jl(Oe.mutation,fe,Oe.mutation.getFieldMask(),ni.now())):x.set(fe.key,ur.empty())}),this.recalculateAndSaveOverlays(e,v).next(oe=>(oe.forEach((fe,Oe)=>x.set(fe,Oe)),t.forEach((fe,Oe)=>{var ft;return H.set(fe,new C_(Oe,null!==(ft=x.get(fe))&&void 0!==ft?ft:null))}),H))}recalculateAndSaveOverlays(e,t){const o=kl();let d=new mt((x,H)=>x-H),v=Ir();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(x=>{for(const H of x)H.keys().forEach(oe=>{const fe=t.get(oe);if(null===fe)return;let Oe=o.get(oe)||ur.empty();Oe=H.applyToLocalView(fe,Oe),o.set(oe,Oe);const ft=(d.get(H.batchId)||Ir()).add(oe);d=d.insert(H.batchId,ft)})}).next(()=>{const x=[],H=d.getReverseIterator();for(;H.hasNext();){const oe=H.getNext(),fe=oe.key,Oe=oe.value,ft=Ol();Oe.forEach(Wt=>{if(!v.has(Wt)){const yn=Xl(t.get(Wt),o.get(Wt));null!==yn&&ft.set(Wt,yn),v=v.add(Wt)}}),x.push(this.documentOverlayCache.saveOverlays(e,fe,ft))}return nn.waitFor(x)}).next(()=>o)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(o=>this.recalculateAndSaveOverlays(e,o))}getDocumentsMatchingQuery(e,t,o){return Jt.isDocumentKey((d=t).path)&&null===d.collectionGroup&&0===d.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):Wc(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,o):this.getDocumentsMatchingCollectionQuery(e,t,o);var d}getNextDocuments(e,t,o,d){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,o,d).next(v=>{const x=d-v.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,o.largestBatchId,d-v.size):nn.resolve(Gs());let H=-1,oe=v;return x.next(fe=>nn.forEach(fe,(Oe,ft)=>(H<ft.largestBatchId&&(H=ft.largestBatchId),v.get(Oe)?nn.resolve():this.remoteDocumentCache.getEntry(e,Oe).next(Wt=>{oe=oe.insert(Oe,Wt)}))).next(()=>this.populateOverlays(e,fe,v)).next(()=>this.computeViews(e,oe,fe,Ir())).next(Oe=>({batchId:H,changes:yo(Oe)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Jt(t)).next(o=>{let d=Er();return o.isFoundDocument()&&(d=d.insert(o.key,o)),d})}getDocumentsMatchingCollectionGroupQuery(e,t,o){const d=t.collectionGroup;let v=Er();return this.indexManager.getCollectionParents(e,d).next(x=>nn.forEach(x,H=>{const oe=(fe=t,Oe=H.child(d),new Ko(Oe,null,fe.explicitOrderBy.slice(),fe.filters.slice(),fe.limit,fe.limitType,fe.startAt,fe.endAt));var fe,Oe;return this.getDocumentsMatchingCollectionQuery(e,oe,o).next(fe=>{fe.forEach((Oe,ft)=>{v=v.insert(Oe,ft)})})}).next(()=>v))}getDocumentsMatchingCollectionQuery(e,t,o){let d;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,o.largestBatchId).next(v=>(d=v,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,o,d))).next(v=>{d.forEach((H,oe)=>{const fe=oe.getKey();null===v.get(fe)&&(v=v.insert(fe,$s.newInvalidDocument(fe)))});let x=Er();return v.forEach((H,oe)=>{const fe=d.get(H);void 0!==fe&&Jl(fe.mutation,oe,ur.empty(),ni.now()),M(t,oe)&&(x=x.insert(H,oe))}),x})}}class pv{constructor(e){this.serializer=e,this.Zn=new Map,this.Xn=new Map}getBundleMetadata(e,t){return nn.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var o;return this.Zn.set(t.id,{id:(o=t).id,version:o.version,createTime:le(o.createTime)}),nn.resolve()}getNamedQuery(e,t){return nn.resolve(this.Xn.get(t))}saveNamedQuery(e,t){return this.Xn.set(t.name,{name:(o=t).name,query:au(o.bundledQuery),readTime:le(o.readTime)}),nn.resolve();var o}}class $m{constructor(){this.overlays=new mt(Jt.comparator),this.ts=new Map}getOverlay(e,t){return nn.resolve(this.overlays.get(t))}getOverlays(e,t){const o=Gs();return nn.forEach(t,d=>this.getOverlay(e,d).next(v=>{null!==v&&o.set(d,v)})).next(()=>o)}saveOverlays(e,t,o){return o.forEach((d,v)=>{this.re(e,t,v)}),nn.resolve()}removeOverlaysForBatchId(e,t,o){const d=this.ts.get(o);return void 0!==d&&(d.forEach(v=>this.overlays=this.overlays.remove(v)),this.ts.delete(o)),nn.resolve()}getOverlaysForCollection(e,t,o){const d=Gs(),v=t.length+1,x=new Jt(t.child("")),H=this.overlays.getIteratorFrom(x);for(;H.hasNext();){const oe=H.getNext().value,fe=oe.getKey();if(!t.isPrefixOf(fe.path))break;fe.path.length===v&&oe.largestBatchId>o&&d.set(oe.getKey(),oe)}return nn.resolve(d)}getOverlaysForCollectionGroup(e,t,o,d){let v=new mt((fe,Oe)=>fe-Oe);const x=this.overlays.getIterator();for(;x.hasNext();){const fe=x.getNext().value;if(fe.getKey().getCollectionGroup()===t&&fe.largestBatchId>o){let Oe=v.get(fe.largestBatchId);null===Oe&&(Oe=Gs(),v=v.insert(fe.largestBatchId,Oe)),Oe.set(fe.getKey(),fe)}}const H=Gs(),oe=v.getIterator();for(;oe.hasNext()&&(oe.getNext().value.forEach((fe,Oe)=>H.set(fe,Oe)),!(H.size()>=d)););return nn.resolve(H)}re(e,t,o){const d=this.overlays.get(o.key);if(null!==d){const x=this.ts.get(d.largestBatchId).delete(o.key);this.ts.set(d.largestBatchId,x)}this.overlays=this.overlays.insert(o.key,new kc(t,o));let v=this.ts.get(t);void 0===v&&(v=Ir(),this.ts.set(t,v)),this.ts.set(t,v.add(o.key))}}class Gm{constructor(){this.es=new Un(vl.ns),this.ss=new Un(vl.rs)}isEmpty(){return this.es.isEmpty()}addReference(e,t){const o=new vl(e,t);this.es=this.es.add(o),this.ss=this.ss.add(o)}os(e,t){e.forEach(o=>this.addReference(o,t))}removeReference(e,t){this.us(new vl(e,t))}cs(e,t){e.forEach(o=>this.removeReference(o,t))}hs(e){const t=new Jt(new Ki([])),o=new vl(t,e),d=new vl(t,e+1),v=[];return this.ss.forEachInRange([o,d],x=>{this.us(x),v.push(x.key)}),v}ls(){this.es.forEach(e=>this.us(e))}us(e){this.es=this.es.delete(e),this.ss=this.ss.delete(e)}fs(e){const t=new Jt(new Ki([])),o=new vl(t,e),d=new vl(t,e+1);let v=Ir();return this.ss.forEachInRange([o,d],x=>{v=v.add(x.key)}),v}containsKey(e){const t=new vl(e,0),o=this.es.firstAfterOrEqual(t);return null!==o&&e.isEqual(o.key)}}class vl{constructor(e,t){this.key=e,this.ds=t}static ns(e,t){return Jt.comparator(e.key,t.key)||Rn(e.ds,t.ds)}static rs(e,t){return Rn(e.ds,t.ds)||Jt.comparator(e.key,t.key)}}class Wm{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this._s=new Un(vl.ns)}checkEmpty(e){return nn.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,o,d){const v=this.ws;this.ws++;const x=new Nl(v,t,o,d);this.mutationQueue.push(x);for(const H of d)this._s=this._s.add(new vl(H.key,v)),this.indexManager.addToCollectionParentIndex(e,H.key.path.popLast());return nn.resolve(x)}lookupMutationBatch(e,t){return nn.resolve(this.gs(t))}getNextMutationBatchAfterBatchId(e,t){const d=this.ys(t+1),v=d<0?0:d;return nn.resolve(this.mutationQueue.length>v?this.mutationQueue[v]:null)}getHighestUnacknowledgedBatchId(){return nn.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return nn.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const o=new vl(t,0),d=new vl(t,Number.POSITIVE_INFINITY),v=[];return this._s.forEachInRange([o,d],x=>{const H=this.gs(x.ds);v.push(H)}),nn.resolve(v)}getAllMutationBatchesAffectingDocumentKeys(e,t){let o=new Un(Rn);return t.forEach(d=>{const v=new vl(d,0),x=new vl(d,Number.POSITIVE_INFINITY);this._s.forEachInRange([v,x],H=>{o=o.add(H.ds)})}),nn.resolve(this.ps(o))}getAllMutationBatchesAffectingQuery(e,t){const o=t.path,d=o.length+1;let v=o;Jt.isDocumentKey(v)||(v=v.child(""));const x=new vl(new Jt(v),0);let H=new Un(Rn);return this._s.forEachWhile(oe=>{const fe=oe.key.path;return!!o.isPrefixOf(fe)&&(fe.length===d&&(H=H.add(oe.ds)),!0)},x),nn.resolve(this.ps(H))}ps(e){const t=[];return e.forEach(o=>{const d=this.gs(o);null!==d&&t.push(d)}),t}removeMutationBatch(e,t){$e(0===this.Is(t.batchId,"removed")),this.mutationQueue.shift();let o=this._s;return nn.forEach(t.mutations,d=>{const v=new vl(d.key,t.batchId);return o=o.delete(v),this.referenceDelegate.markPotentiallyOrphaned(e,d.key)}).next(()=>{this._s=o})}En(e){}containsKey(e,t){const o=new vl(t,0),d=this._s.firstAfterOrEqual(o);return nn.resolve(t.isEqual(d&&d.key))}performConsistencyCheck(e){return nn.resolve()}Is(e,t){return this.ys(e)}ys(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}gs(e){const t=this.ys(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class D_{constructor(e){this.Ts=e,this.docs=new mt(Jt.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const o=t.key,d=this.docs.get(o),v=d?d.size:0,x=this.Ts(t);return this.docs=this.docs.insert(o,{document:t.mutableCopy(),size:x}),this.size+=x-v,this.indexManager.addToCollectionParentIndex(e,o.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const o=this.docs.get(t);return nn.resolve(o?o.document.mutableCopy():$s.newInvalidDocument(t))}getEntries(e,t){let o=Zn();return t.forEach(d=>{const v=this.docs.get(d);o=o.insert(d,v?v.document.mutableCopy():$s.newInvalidDocument(d))}),nn.resolve(o)}getDocumentsMatchingQuery(e,t,o,d){let v=Zn();const x=t.path,H=new Jt(x.child("")),oe=this.docs.getIteratorFrom(H);for(;oe.hasNext();){const{key:fe,value:{document:Oe}}=oe.getNext();if(!x.isPrefixOf(fe.path))break;fe.path.length>x.length+1||mr(Jo(Oe),o)<=0||(d.has(Oe.key)||M(t,Oe))&&(v=v.insert(Oe.key,Oe.mutableCopy()))}return nn.resolve(v)}getAllFromCollectionGroup(e,t,o,d){ve()}Es(e,t){return nn.forEach(this.docs,o=>t(o))}newChangeBuffer(e){return new Km(this)}getSize(e){return nn.resolve(this.size)}}class Km extends Hm{constructor(e){super(),this.Jn=e}applyChanges(e){const t=[];return this.changes.forEach((o,d)=>{d.isValidDocument()?t.push(this.Jn.addEntry(e,d)):this.Jn.removeEntry(o)}),nn.waitFor(t)}getFromCache(e,t){return this.Jn.getEntry(e,t)}getAllFromCache(e,t){return this.Jn.getEntries(e,t)}}class S_{constructor(e){this.persistence=e,this.As=new $t(t=>ac(t),ra),this.lastRemoteSnapshotVersion=qn.min(),this.highestTargetId=0,this.Rs=0,this.vs=new Gm,this.targetCount=0,this.bs=Ll.vn()}forEachTarget(e,t){return this.As.forEach((o,d)=>t(d)),nn.resolve()}getLastRemoteSnapshotVersion(e){return nn.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return nn.resolve(this.Rs)}allocateTargetId(e){return this.highestTargetId=this.bs.next(),nn.resolve(this.highestTargetId)}setTargetsMetadata(e,t,o){return o&&(this.lastRemoteSnapshotVersion=o),t>this.Rs&&(this.Rs=t),nn.resolve()}Sn(e){this.As.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.bs=new Ll(t),this.highestTargetId=t),e.sequenceNumber>this.Rs&&(this.Rs=e.sequenceNumber)}addTargetData(e,t){return this.Sn(t),this.targetCount+=1,nn.resolve()}updateTargetData(e,t){return this.Sn(t),nn.resolve()}removeTargetData(e,t){return this.As.delete(t.target),this.vs.hs(t.targetId),this.targetCount-=1,nn.resolve()}removeTargets(e,t,o){let d=0;const v=[];return this.As.forEach((x,H)=>{H.sequenceNumber<=t&&null===o.get(H.targetId)&&(this.As.delete(x),v.push(this.removeMatchingKeysForTargetId(e,H.targetId)),d++)}),nn.waitFor(v).next(()=>d)}getTargetCount(e){return nn.resolve(this.targetCount)}getTargetData(e,t){const o=this.As.get(t)||null;return nn.resolve(o)}addMatchingKeys(e,t,o){return this.vs.os(t,o),nn.resolve()}removeMatchingKeys(e,t,o){this.vs.cs(t,o);const d=this.persistence.referenceDelegate,v=[];return d&&t.forEach(x=>{v.push(d.markPotentiallyOrphaned(e,x))}),nn.waitFor(v)}removeMatchingKeysForTargetId(e,t){return this.vs.hs(t),nn.resolve()}getMatchingKeysForTargetId(e,t){const o=this.vs.fs(t);return nn.resolve(o)}containsKey(e,t){return nn.resolve(this.vs.containsKey(t))}}class qm{constructor(e,t){this.Ps={},this.overlays={},this.Vs=new mo(0),this.Ss=!1,this.Ss=!0,this.referenceDelegate=e(this),this.Ds=new S_(this),this.indexManager=new m,this.remoteDocumentCache=new D_(o=>this.referenceDelegate.Cs(o)),this.serializer=new If(t),this.xs=new pv(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Ss=!1,Promise.resolve()}get started(){return this.Ss}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new $m,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let o=this.Ps[e.toKey()];return o||(o=new Wm(t,this.referenceDelegate),this.Ps[e.toKey()]=o),o}getTargetCache(){return this.Ds}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.xs}runTransaction(e,t,o){S("MemoryPersistence","Starting transaction:",e);const d=new cu(this.Vs.next());return this.referenceDelegate.Ns(),o(d).next(v=>this.referenceDelegate.ks(d).next(()=>v)).toPromise().then(v=>(d.raiseOnCommittedEvent(),v))}Os(e,t){return nn.or(Object.values(this.Ps).map(o=>()=>o.containsKey(e,t)))}}class cu extends io{constructor(e){super(),this.currentSequenceNumber=e}}class Mf{constructor(e){this.persistence=e,this.$s=new Gm,this.Ms=null}static Fs(e){return new Mf(e)}get Bs(){if(this.Ms)return this.Ms;throw ve()}addReference(e,t,o){return this.$s.addReference(o,t),this.Bs.delete(o.toString()),nn.resolve()}removeReference(e,t,o){return this.$s.removeReference(o,t),this.Bs.add(o.toString()),nn.resolve()}markPotentiallyOrphaned(e,t){return this.Bs.add(t.toString()),nn.resolve()}removeTarget(e,t){this.$s.hs(t.targetId).forEach(d=>this.Bs.add(d.toString()));const o=this.persistence.getTargetCache();return o.getMatchingKeysForTargetId(e,t.targetId).next(d=>{d.forEach(v=>this.Bs.add(v.toString()))}).next(()=>o.removeTargetData(e,t))}Ns(){this.Ms=new Set}ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return nn.forEach(this.Bs,o=>{const d=Jt.fromPath(o);return this.Ls(e,d).next(v=>{v||t.removeEntry(d,qn.min())})}).next(()=>(this.Ms=null,t.apply(e)))}updateLimboDocument(e,t){return this.Ls(e,t).next(o=>{o?this.Bs.delete(t.toString()):this.Bs.add(t.toString())})}Cs(e){return 0}Ls(e,t){return nn.or([()=>nn.resolve(this.$s.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Os(e,t)])}}class Zm{constructor(e){this.serializer=e}M(e,t,o,d){const v=new va("createOrUpgrade",t);var H;o<1&&d>=1&&(e.createObjectStore("owner"),(H=e).createObjectStore("mutationQueues",{keyPath:"userId"}),H.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Al,{unique:!0}),H.createObjectStore("documentMutations"),Ym(e),function(H){H.createObjectStore("remoteDocuments")}(e));let x=nn.resolve();return o<3&&d>=3&&(0!==o&&(function(H){H.deleteObjectStore("targetDocuments"),H.deleteObjectStore("targets"),H.deleteObjectStore("targetGlobal")}(e),Ym(e)),x=x.next(()=>function(H){const oe=H.store("targetGlobal"),fe={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:qn.min().toTimestamp(),targetCount:0};return oe.put("targetGlobalKey",fe)}(v))),o<4&&d>=4&&(0!==o&&(x=x.next(()=>function(H,oe){return oe.store("mutations").j().next(fe=>{H.deleteObjectStore("mutations"),H.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Al,{unique:!0});const Oe=oe.store("mutations"),ft=fe.map(Wt=>Oe.put(Wt));return nn.waitFor(ft)})}(e,v))),x=x.next(()=>{!function(H){H.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),o<5&&d>=5&&(x=x.next(()=>this.qs(v))),o<6&&d>=6&&(x=x.next(()=>(function(H){H.createObjectStore("remoteDocumentGlobal")}(e),this.Us(v)))),o<7&&d>=7&&(x=x.next(()=>this.Ks(v))),o<8&&d>=8&&(x=x.next(()=>this.Gs(e,v))),o<9&&d>=9&&(x=x.next(()=>{!function(H){H.objectStoreNames.contains("remoteDocumentChanges")&&H.deleteObjectStore("remoteDocumentChanges")}(e)})),o<10&&d>=10&&(x=x.next(()=>this.Qs(v))),o<11&&d>=11&&(x=x.next(()=>{(function(H){H.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(H){H.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),o<12&&d>=12&&(x=x.next(()=>{!function(H){const oe=H.createObjectStore("documentOverlays",{keyPath:zs});oe.createIndex("collectionPathOverlayIndex",wl,{unique:!1}),oe.createIndex("collectionGroupOverlayIndex",Ds,{unique:!1})}(e)})),o<13&&d>=13&&(x=x.next(()=>function(H){const oe=H.createObjectStore("remoteDocumentsV14",{keyPath:cs});oe.createIndex("documentKeyIndex",zl),oe.createIndex("collectionGroupIndex",el)}(e)).next(()=>this.zs(e,v)).next(()=>e.deleteObjectStore("remoteDocuments"))),o<14&&d>=14&&(x=x.next(()=>this.js(e,v))),o<15&&d>=15&&(x=x.next(()=>function(H){H.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),H.createObjectStore("indexState",{keyPath:Gl}).createIndex("sequenceNumberIndex",Ia,{unique:!1}),H.createObjectStore("indexEntries",{keyPath:fl}).createIndex("documentKeyIndex",Wl,{unique:!1})}(e))),x}Us(e){let t=0;return e.store("remoteDocuments").Z((o,d)=>{t+=En(d)}).next(()=>{const o={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",o)})}qs(e){const t=e.store("mutationQueues"),o=e.store("mutations");return t.j().next(d=>nn.forEach(d,v=>{const x=IDBKeyRange.bound([v.userId,-1],[v.userId,v.lastAcknowledgedBatchId]);return o.j("userMutationsIndex",x).next(H=>nn.forEach(H,oe=>{$e(oe.userId===v.userId);const fe=Lu(this.serializer,oe);return fn(e,v.userId,fe).next(()=>{})}))}))}Ks(e){const t=e.store("targetDocuments"),o=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(d=>{const v=[];return o.Z((x,H)=>{const oe=new Ki(x),fe=[0,Fs(oe)];v.push(t.get(fe).next(Oe=>Oe?nn.resolve():t.put({targetId:0,path:Fs(oe),sequenceNumber:d.highestListenSequenceNumber})))}).next(()=>nn.waitFor(v))})}Gs(e,t){e.createObjectStore("collectionParents",{keyPath:sc});const o=t.store("collectionParents"),d=new c,v=x=>{if(d.add(x)){const H=x.lastSegment(),oe=x.popLast();return o.put({collectionId:H,parent:Fs(oe)})}};return t.store("remoteDocuments").Z({Y:!0},(x,H)=>{const oe=new Ki(x);return v(oe.popLast())}).next(()=>t.store("documentMutations").Z({Y:!0},([x,H,oe],fe)=>{const Oe=xa(H);return v(Oe.popLast())}))}Qs(e){const t=e.store("targets");return t.Z((o,d)=>{const v=td(d),x=fp(this.serializer,v);return t.put(x)})}zs(e,t){const o=t.store("remoteDocuments"),d=[];return o.Z((v,x)=>{const H=t.store("remoteDocumentsV14"),oe=(fe=x,fe.document?new Jt(Ki.fromString(fe.document.name).popFirst(5)):fe.noDocument?Jt.fromSegments(fe.noDocument.path):fe.unknownDocument?Jt.fromSegments(fe.unknownDocument.path):ve()).path.toArray();var fe;const Oe={prefixPath:oe.slice(0,oe.length-2),collectionGroup:oe[oe.length-2],documentId:oe[oe.length-1],readTime:x.readTime||[0,0],unknownDocument:x.unknownDocument,noDocument:x.noDocument,document:x.document,hasCommittedMutations:!!x.hasCommittedMutations};d.push(H.put(Oe))}).next(()=>nn.waitFor(d))}js(e,t){const o=t.store("mutations"),d=jm(this.serializer),v=new qm(Mf.Fs,this.serializer.se);return o.j().next(x=>{const H=new Map;return x.forEach(oe=>{var fe;let Oe=null!==(fe=H.get(oe.userId))&&void 0!==fe?fe:Ir();Lu(this.serializer,oe).keys().forEach(ft=>Oe=Oe.add(ft)),H.set(oe.userId,Oe)}),nn.forEach(H,(oe,fe)=>{const Oe=new ls(fe),ft=wd.ie(this.serializer,Oe),Wt=v.getIndexManager(Oe),yn=hi.ie(Oe,this.serializer,Wt,v.referenceDelegate);return new T_(d,yn,ft,Wt).recalculateAndSaveOverlaysForDocumentKeys(new T(t,mo.ct),oe).next()})})}}function Ym(r){r.createObjectStore("targetDocuments",{keyPath:hl}).createIndex("documentTargetsIndex",$l,{unique:!0}),r.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Il,{unique:!0}),r.createObjectStore("targetGlobal")}const bp="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Ep{constructor(e,t,o,d,v,x,H,oe,fe,Oe,ft=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=o,this.Ws=v,this.window=x,this.document=H,this.Hs=fe,this.Js=Oe,this.Ys=ft,this.Vs=null,this.Ss=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.Xs=null,this.ti=null,this.ei=Number.NEGATIVE_INFINITY,this.ni=Wt=>Promise.resolve(),!Ep.D())throw new k(Ke.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Ph(this,d),this.si=t+"main",this.serializer=new If(oe),this.ii=new Lo(this.si,this.Ys,new Zm(this.serializer)),this.Ds=new id(this.referenceDelegate,this.serializer),this.remoteDocumentCache=jm(this.serializer),this.xs=new wf,this.window&&this.window.localStorage?this.ri=this.window.localStorage:(this.ri=null,!1===Oe&&N("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.oi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new k(Ke.FAILED_PRECONDITION,bp);return this.ui(),this.ci(),this.ai(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ds.getHighestSequenceNumber(e))}).then(e=>{this.Vs=new mo(e,this.Hs)}).then(()=>{this.Ss=!0}).catch(e=>(this.ii&&this.ii.close(),Promise.reject(e)))}hi(e){var t=this;return this.ni=function(){var o=(0,f.Z)(function*(d){if(t.started)return e(d)});return function(d){return o.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ii.B(function(){var t=(0,f.Z)(function*(o){null===o.newVersion&&(yield e())});return function(o){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Ws.enqueueAndForget((0,f.Z)(function*(){t.started&&(yield t.oi())})))}oi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>kh(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.li(e).next(t=>{t||(this.isPrimary=!1,this.Ws.enqueueRetryable(()=>this.ni(!1)))})}).next(()=>this.fi(e)).next(t=>this.isPrimary&&!t?this.di(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(Hr(e))return S("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return S("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Ws.enqueueRetryable(()=>this.ni(e)),this.isPrimary=e})}li(e){return Oh(e).get("owner").next(t=>nn.resolve(this._i(t)))}mi(e){return kh(e).delete(this.clientId)}gi(){var e=this;return(0,f.Z)(function*(){if(e.isPrimary&&!e.yi(e.ei,18e5)){e.ei=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",o=>{const d=P(o,"clientMetadata");return d.j().next(v=>{const x=e.pi(v,18e5),H=v.filter(oe=>-1===x.indexOf(oe));return nn.forEach(H,oe=>d.delete(oe.clientId)).next(()=>H)})}).catch(()=>[]);if(e.ri)for(const o of t)e.ri.removeItem(e.Ii(o.clientId))}})()}ai(){this.ti=this.Ws.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.oi().then(()=>this.gi()).then(()=>this.ai()))}_i(e){return!!e&&e.ownerId===this.clientId}fi(e){return this.Js?nn.resolve(!0):Oh(e).get("owner").next(t=>{if(null!==t&&this.yi(t.leaseTimestampMs,5e3)&&!this.Ti(t.ownerId)){if(this._i(t)&&this.networkEnabled)return!0;if(!this._i(t)){if(!t.allowTabSynchronization)throw new k(Ke.FAILED_PRECONDITION,bp);return!1}}return!(!this.networkEnabled||!this.inForeground)||kh(e).j().next(o=>void 0===this.pi(o,5e3).find(d=>!(this.clientId===d.clientId||!(!this.networkEnabled&&d.networkEnabled||!this.inForeground&&d.inForeground&&this.networkEnabled===d.networkEnabled))))}).next(t=>(this.isPrimary!==t&&S("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,f.Z)(function*(){e.Ss=!1,e.Ei(),e.ti&&(e.ti.cancel(),e.ti=null),e.Ai(),e.Ri(),yield e.ii.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const o=new T(t,mo.ct);return e.di(o).next(()=>e.mi(o))}),e.ii.close(),e.vi()})()}pi(e,t){return e.filter(o=>this.yi(o.updateTimeMs,t)&&!this.Ti(o.clientId))}bi(){return this.runTransaction("getActiveClients","readonly",e=>kh(e).j().next(t=>this.pi(t,18e5).map(o=>o.clientId)))}get started(){return this.Ss}getMutationQueue(e,t){return hi.ie(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Ds}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new I(e,this.serializer.se.databaseId)}getDocumentOverlayCache(e){return wd.ie(this.serializer,e)}getBundleCache(){return this.xs}runTransaction(e,t,o){S("IndexedDbPersistence","Starting transaction:",e);const d="readonly"===t?"readonly":"readwrite",v=15===(x=this.Ys)?h:14===x?a:13===x?p:12===x?Y:11===x?Go:void ve();var x;let H;return this.ii.runTransaction(e,d,v,oe=>(H=new T(oe,this.Vs?this.Vs.next():mo.ct),"readwrite-primary"===t?this.li(H).next(fe=>!!fe||this.fi(H)).next(fe=>{if(!fe)throw N(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Ws.enqueueRetryable(()=>this.ni(!1)),new k(Ke.FAILED_PRECONDITION,po);return o(H)}).next(fe=>this.wi(H).next(()=>fe)):this.Pi(H).next(()=>o(H)))).then(oe=>(H.raiseOnCommittedEvent(),oe))}Pi(e){return Oh(e).get("owner").next(t=>{if(null!==t&&this.yi(t.leaseTimestampMs,5e3)&&!this.Ti(t.ownerId)&&!this._i(t)&&!(this.Js||this.allowTabSynchronization&&t.allowTabSynchronization))throw new k(Ke.FAILED_PRECONDITION,bp)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Oh(e).put("owner",t)}static D(){return Lo.D()}di(e){const t=Oh(e);return t.get("owner").next(o=>this._i(o)?(S("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):nn.resolve())}yi(e,t){const o=Date.now();return!(e<o-t||e>o&&(N(`Detected an update time that is in the future: ${e} > ${o}`),1))}ui(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Xs=()=>{this.Ws.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.oi()))},this.document.addEventListener("visibilitychange",this.Xs),this.inForeground="visible"===this.document.visibilityState)}Ai(){this.Xs&&(this.document.removeEventListener("visibilitychange",this.Xs),this.Xs=null)}ci(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ei();const t=/(?:Version|Mobile)\/1[456]/;(0,ke.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.Ws.enterRestrictedMode(!0),this.Ws.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}Ri(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ti(e){var t;try{const o=null!==(null===(t=this.ri)||void 0===t?void 0:t.getItem(this.Ii(e)));return S("IndexedDbPersistence",`Client '${e}' ${o?"is":"is not"} zombied in LocalStorage`),o}catch(o){return N("IndexedDbPersistence","Failed to get zombied client id.",o),!1}}Ei(){if(this.ri)try{this.ri.setItem(this.Ii(this.clientId),String(Date.now()))}catch(e){N("Failed to set zombie client id.",e)}}vi(){if(this.ri)try{this.ri.removeItem(this.Ii(this.clientId))}catch{}}Ii(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Oh(r){return P(r,"owner")}function kh(r){return P(r,"clientMetadata")}function Ip(r,e){let t=r.projectId;return r.isDefaultDatabase||(t+="."+r.database),"firestore/"+e+"/"+t+"/"}class wp{constructor(e,t,o,d){this.targetId=e,this.fromCache=t,this.Vi=o,this.Si=d}static Di(e,t){let o=Ir(),d=Ir();for(const v of t.docChanges)switch(v.type){case 0:o=o.add(v.doc.key);break;case 1:d=d.add(v.doc.key)}return new wp(e,t.fromCache,o,d)}}class Qm{constructor(){this.Ci=!1}initialize(e,t){this.xi=e,this.indexManager=t,this.Ci=!0}getDocumentsMatchingQuery(e,t,o,d){return this.Ni(e,t).next(v=>v||this.ki(e,t,d,o)).next(v=>v||this.Oi(e,t))}Ni(e,t){if(Gc(t))return nn.resolve(null);let o=Pa(t);return this.indexManager.getIndexType(e,o).next(d=>0===d?null:(null!==t.limit&&1===d&&(t=qc(t,null,"F"),o=Pa(t)),this.indexManager.getDocumentsMatchingTarget(e,o).next(v=>{const x=Ir(...v);return this.xi.getDocuments(e,x).next(H=>this.indexManager.getMinOffset(e,o).next(oe=>{const fe=this.$i(t,H);return this.Mi(t,fe,x,oe.readTime)?this.Ni(e,qc(t,null,"F")):this.Fi(e,fe,t,oe)}))})))}ki(e,t,o,d){return Gc(t)||d.isEqual(qn.min())?this.Oi(e,t):this.xi.getDocuments(e,o).next(v=>{const x=this.$i(t,v);return this.Mi(t,x,o,d)?this.Oi(e,t):(no()<=Te.in.DEBUG&&S("QueryEngine","Re-using previous result from %s to execute query: %s",d.toString(),w(t)),this.Fi(e,x,t,Fr(d,-1)))})}$i(e,t){let o=new Un(we(e));return t.forEach((d,v)=>{M(e,v)&&(o=o.add(v))}),o}Mi(e,t,o,d){if(null===e.limit)return!1;if(o.size!==t.size)return!0;const v="F"===e.limitType?t.last():t.first();return!!v&&(v.hasPendingWrites||v.version.compareTo(d)>0)}Oi(e,t){return no()<=Te.in.DEBUG&&S("QueryEngine","Using full collection scan to execute query:",w(t)),this.xi.getDocumentsMatchingQuery(e,t,Lr.min())}Fi(e,t,o,d){return this.xi.getDocumentsMatchingQuery(e,o,d).next(v=>(t.forEach(x=>{v=v.insert(x.key,x)}),v))}}class ns{constructor(e,t,o,d){this.persistence=e,this.Bi=t,this.serializer=d,this.Li=new mt(Rn),this.qi=new $t(v=>ac(v),ra),this.Ui=new Map,this.Ki=e.getRemoteDocumentCache(),this.Ds=e.getTargetCache(),this.xs=e.getBundleCache(),this.Gi(o)}Gi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new T_(this.Ki,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ki.setIndexManager(this.indexManager),this.Bi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Li))}}function Cp(r,e,t,o){return new ns(r,e,t,o)}function Tp(r,e){return Rf.apply(this,arguments)}function Rf(){return Rf=(0,f.Z)(function*(r,e){const t=at(r);return yield t.persistence.runTransaction("Handle user change","readonly",o=>{let d;return t.mutationQueue.getAllMutationBatches(o).next(v=>(d=v,t.Gi(e),t.mutationQueue.getAllMutationBatches(o))).next(v=>{const x=[],H=[];let oe=Ir();for(const fe of d){x.push(fe.batchId);for(const Oe of fe.mutations)oe=oe.add(Oe.key)}for(const fe of v){H.push(fe.batchId);for(const Oe of fe.mutations)oe=oe.add(Oe.key)}return t.localDocuments.getDocuments(o,oe).next(fe=>({Qi:fe,removedBatchIds:x,addedBatchIds:H}))})})}),Rf.apply(this,arguments)}function Xm(r){const e=at(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ds.getLastRemoteSnapshotVersion(t))}function eg(r,e,t){let o=Ir(),d=Ir();return t.forEach(v=>o=o.add(v)),e.getEntries(r,o).next(v=>{let x=Zn();return t.forEach((H,oe)=>{const fe=v.get(H);oe.isFoundDocument()!==fe.isFoundDocument()&&(d=d.add(H)),oe.isNoDocument()&&oe.version.isEqual(qn.min())?(e.removeEntry(H,oe.readTime),x=x.insert(H,oe)):!fe.isValidDocument()||oe.version.compareTo(fe.version)>0||0===oe.version.compareTo(fe.version)&&fe.hasPendingWrites?(e.addEntry(oe),x=x.insert(H,oe)):S("LocalStore","Ignoring outdated watch update for ",H,". Current version:",fe.version," Watch version:",oe.version)}),{zi:x,ji:d}})}function tg(r,e){const t=at(r);return t.persistence.runTransaction("Get next mutation batch","readonly",o=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(o,e)))}function Zd(r,e){const t=at(r);return t.persistence.runTransaction("Allocate target","readwrite",o=>{let d;return t.Ds.getTargetData(o,e).next(v=>v?(d=v,nn.resolve(d)):t.Ds.allocateTargetId(o).next(x=>(d=new Eu(e,x,0,o.currentSequenceNumber),t.Ds.addTargetData(o,d).next(()=>d))))}).then(o=>{const d=t.Li.get(o.targetId);return(null===d||o.snapshotVersion.compareTo(d.snapshotVersion)>0)&&(t.Li=t.Li.insert(o.targetId,o),t.qi.set(e,o.targetId)),o})}function Yd(r,e,t){return ng.apply(this,arguments)}function ng(){return ng=(0,f.Z)(function*(r,e,t){const o=at(r),d=o.Li.get(e),v=t?"readwrite":"readwrite-primary";try{t||(yield o.persistence.runTransaction("Release target",v,x=>o.persistence.referenceDelegate.removeTarget(x,d)))}catch(x){if(!Hr(x))throw x;S("LocalStore",`Failed to update sequence numbers for target ${e}: ${x}`)}o.Li=o.Li.remove(e),o.qi.delete(d.target)}),ng.apply(this,arguments)}function Nh(r,e,t){const o=at(r);let d=qn.min(),v=Ir();return o.persistence.runTransaction("Execute query","readonly",x=>function(H,oe,fe){const Oe=at(H),ft=Oe.qi.get(fe);return void 0!==ft?nn.resolve(Oe.Li.get(ft)):Oe.Ds.getTargetData(oe,fe)}(o,x,Pa(e)).next(H=>{if(H)return d=H.lastLimboFreeSnapshotVersion,o.Ds.getMatchingKeysForTargetId(x,H.targetId).next(oe=>{v=oe})}).next(()=>o.Bi.getDocumentsMatchingQuery(x,e,t?d:qn.min(),t?v:Ir())).next(H=>(ig(o,K(e),H),{documents:H,Wi:v})))}function Dp(r,e){const t=at(r),o=at(t.Ds),d=t.Li.get(e);return d?Promise.resolve(d.target):t.persistence.runTransaction("Get target data","readonly",v=>o.ne(v,e).next(x=>x?x.target:null))}function sd(r,e){const t=at(r),o=t.Ui.get(e)||qn.min();return t.persistence.runTransaction("Get new document changes","readonly",d=>t.Ki.getAllFromCollectionGroup(d,e,Fr(o,-1),Number.MAX_SAFE_INTEGER)).then(d=>(ig(t,e,d),d))}function ig(r,e,t){let o=r.Ui.get(e)||qn.min();t.forEach((d,v)=>{v.readTime.compareTo(o)>0&&(o=v.readTime)}),r.Ui.set(e,o)}function Fh(){return Fh=(0,f.Z)(function*(r,e,t,o){const d=at(r);let v=Ir(),x=Zn();for(const fe of t){const Oe=e.Hi(fe.metadata.name);fe.document&&(v=v.add(Oe));const ft=e.Ji(fe);ft.setReadTime(e.Yi(fe.metadata.readTime)),x=x.insert(Oe,ft)}const H=d.Ki.newChangeBuffer({trackRemovals:!0}),oe=yield Zd(d,(fe=o,Pa(al(Ki.fromString(`__bundle__/docs/${fe}`)))));var fe;return d.persistence.runTransaction("Apply bundle documents","readwrite",fe=>eg(fe,H,x).next(Oe=>(H.apply(fe),Oe)).next(Oe=>d.Ds.removeMatchingKeysForTargetId(fe,oe.targetId).next(()=>d.Ds.addMatchingKeys(fe,v,oe.targetId)).next(()=>d.localDocuments.getLocalViewOfDocuments(fe,Oe.zi,Oe.ji)).next(()=>Oe.zi)))}),Fh.apply(this,arguments)}function A_(r,e){return rg.apply(this,arguments)}function rg(){return rg=(0,f.Z)(function*(r,e,t=Ir()){const o=yield Zd(r,Pa(au(e.bundledQuery))),d=at(r);return d.persistence.runTransaction("Save named query","readwrite",v=>{const x=le(e.readTime);if(o.snapshotVersion.compareTo(x)>=0)return d.xs.saveNamedQuery(v,e);const H=o.withResumeToken(Ys.EMPTY_BYTE_STRING,x);return d.Li=d.Li.insert(H.targetId,H),d.Ds.updateTargetData(v,H).next(()=>d.Ds.removeMatchingKeysForTargetId(v,o.targetId)).next(()=>d.Ds.addMatchingKeys(v,t,o.targetId)).next(()=>d.xs.saveNamedQuery(v,e))})}),rg.apply(this,arguments)}function M_(r,e){return`firestore_clients_${r}_${e}`}function R_(r,e,t){let o=`firestore_mutations_${r}_${t}`;return e.isAuthenticated()&&(o+=`_${e.uid}`),o}function xp(r,e){return`firestore_targets_${r}_${e}`}class Lh{constructor(e,t,o,d){this.user=e,this.batchId=t,this.state=o,this.error=d}static Zi(e,t,o){const d=JSON.parse(o);let v,x="object"==typeof d&&-1!==["pending","acknowledged","rejected"].indexOf(d.state)&&(void 0===d.error||"object"==typeof d.error);return x&&d.error&&(x="string"==typeof d.error.message&&"string"==typeof d.error.code,x&&(v=new k(d.error.code,d.error.message))),x?new Lh(e,t,d.state,v):(N("SharedClientState",`Failed to parse mutation state for ID '${t}': ${o}`),null)}Xi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Pf{constructor(e,t,o){this.targetId=e,this.state=t,this.error=o}static Zi(e,t){const o=JSON.parse(t);let d,v="object"==typeof o&&-1!==["not-current","current","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return v&&o.error&&(v="string"==typeof o.error.message&&"string"==typeof o.error.code,v&&(d=new k(o.error.code,o.error.message))),v?new Pf(e,o.state,d):(N("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Xi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Of{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const o=JSON.parse(t);let d="object"==typeof o&&o.activeTargetIds instanceof Array,v=ll();for(let x=0;d&&x<o.activeTargetIds.length;++x)d=Ja(o.activeTargetIds[x]),v=v.add(o.activeTargetIds[x]);return d?new Of(e,v):(N("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class od{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new od(t.clientId,t.onlineState):(N("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Ap{constructor(){this.activeTargetIds=ll()}tr(e){this.activeTargetIds=this.activeTargetIds.add(e)}er(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Xi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class kf{constructor(e,t,o,d,v){this.window=e,this.Ws=t,this.persistenceKey=o,this.nr=d,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.sr=this.ir.bind(this),this.rr=new mt(Rn),this.started=!1,this.ur=[];const x=o.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=v,this.cr=M_(this.persistenceKey,this.nr),this.ar=`firestore_sequence_number_${this.persistenceKey}`,this.rr=this.rr.insert(this.nr,new Ap),this.hr=new RegExp(`^firestore_clients_${x}_([^_]*)$`),this.lr=new RegExp(`^firestore_mutations_${x}_(\\d+)(?:_(.*))?$`),this.dr=new RegExp(`^firestore_targets_${x}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this._r=function(H){return`firestore_bundle_loaded_v2_${H}`}(this.persistenceKey),this.window.addEventListener("storage",this.sr)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,f.Z)(function*(){const t=yield e.syncEngine.bi();for(const d of t){if(d===e.nr)continue;const v=e.getItem(M_(e.persistenceKey,d));if(v){const x=Of.Zi(d,v);x&&(e.rr=e.rr.insert(x.clientId,x))}}e.mr();const o=e.storage.getItem(e.wr);if(o){const d=e.gr(o);d&&e.yr(d)}for(const d of e.ur)e.ir(d);e.ur=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ar,JSON.stringify(e))}getAllActiveQueryTargets(){return this.pr(this.rr)}isActiveQueryTarget(e){let t=!1;return this.rr.forEach((o,d)=>{d.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Ir(e,"pending")}updateMutationState(e,t,o){this.Ir(e,t,o),this.Tr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const o=this.storage.getItem(xp(this.persistenceKey,e));if(o){const d=Pf.Zi(e,o);d&&(t=d.state)}}return this.Er.tr(e),this.mr(),t}removeLocalQueryTarget(e){this.Er.er(e),this.mr()}isLocalQueryTarget(e){return this.Er.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(xp(this.persistenceKey,e))}updateQueryState(e,t,o){this.Ar(e,t,o)}handleUserChange(e,t,o){t.forEach(d=>{this.Tr(d)}),this.currentUser=e,o.forEach(d=>{this.addPendingMutation(d)})}setOnlineState(e){this.Rr(e)}notifyBundleLoaded(e){this.vr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.sr),this.removeItem(this.cr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return S("SharedClientState","READ",e,t),t}setItem(e,t){S("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){S("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ir(e){var t=this;const o=e;if(o.storageArea===this.storage){if(S("SharedClientState","EVENT",o.key,o.newValue),o.key===this.cr)return void N("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Ws.enqueueRetryable((0,f.Z)(function*(){if(t.started){if(null!==o.key)if(t.hr.test(o.key)){if(null==o.newValue){const d=t.br(o.key);return t.Pr(d,null)}{const d=t.Vr(o.key,o.newValue);if(d)return t.Pr(d.clientId,d)}}else if(t.lr.test(o.key)){if(null!==o.newValue){const d=t.Sr(o.key,o.newValue);if(d)return t.Dr(d)}}else if(t.dr.test(o.key)){if(null!==o.newValue){const d=t.Cr(o.key,o.newValue);if(d)return t.Nr(d)}}else if(o.key===t.wr){if(null!==o.newValue){const d=t.gr(o.newValue);if(d)return t.yr(d)}}else if(o.key===t.ar){const d=function(v){let x=mo.ct;if(null!=v)try{const H=JSON.parse(v);$e("number"==typeof H),x=H}catch(H){N("SharedClientState","Failed to read sequence number from WebStorage",H)}return x}(o.newValue);d!==mo.ct&&t.sequenceNumberHandler(d)}else if(o.key===t._r){const d=t.kr(o.newValue);yield Promise.all(d.map(v=>t.syncEngine.Or(v)))}}else t.ur.push(o)}))}}get Er(){return this.rr.get(this.nr)}mr(){this.setItem(this.cr,this.Er.Xi())}Ir(e,t,o){const d=new Lh(this.currentUser,e,t,o),v=R_(this.persistenceKey,this.currentUser,e);this.setItem(v,d.Xi())}Tr(e){const t=R_(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Rr(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.nr,onlineState:e}))}Ar(e,t,o){const d=xp(this.persistenceKey,e),v=new Pf(e,t,o);this.setItem(d,v.Xi())}vr(e){const t=JSON.stringify(Array.from(e));this.setItem(this._r,t)}br(e){const t=this.hr.exec(e);return t?t[1]:null}Vr(e,t){const o=this.br(e);return Of.Zi(o,t)}Sr(e,t){const o=this.lr.exec(e),d=Number(o[1]);return Lh.Zi(new ls(void 0!==o[2]?o[2]:null),d,t)}Cr(e,t){const o=this.dr.exec(e),d=Number(o[1]);return Pf.Zi(d,t)}gr(e){return od.Zi(e)}kr(e){return JSON.parse(e)}Dr(e){var t=this;return(0,f.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.$r(e.batchId,e.state,e.error);S("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Nr(e){return this.syncEngine.Mr(e.targetId,e.state,e.error)}Pr(e,t){const o=t?this.rr.insert(e,t):this.rr.remove(e),d=this.pr(this.rr),v=this.pr(o),x=[],H=[];return v.forEach(oe=>{d.has(oe)||x.push(oe)}),d.forEach(oe=>{v.has(oe)||H.push(oe)}),this.syncEngine.Fr(x,H).then(()=>{this.rr=o})}yr(e){this.rr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}pr(e){let t=ll();return e.forEach((o,d)=>{t=t.unionWith(d.activeTargetIds)}),t}}class Uh{constructor(){this.Br=new Ap,this.Lr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,o){}addLocalQueryTarget(e){return this.Br.tr(e),this.Lr[e]||"not-current"}updateQueryState(e,t,o){this.Lr[e]=t}removeLocalQueryTarget(e){this.Br.er(e)}isLocalQueryTarget(e){return this.Br.activeTargetIds.has(e)}clearQueryState(e){delete this.Lr[e]}getAllActiveQueryTargets(){return this.Br.activeTargetIds}isActiveQueryTarget(e){return this.Br.activeTargetIds.has(e)}start(){return this.Br=new Ap,Promise.resolve()}handleUserChange(e,t,o){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class P_{qr(e){}shutdown(){}}class Mp{constructor(){this.Ur=()=>this.Kr(),this.Gr=()=>this.Qr(),this.zr=[],this.jr()}qr(e){this.zr.push(e)}shutdown(){window.removeEventListener("online",this.Ur),window.removeEventListener("offline",this.Gr)}jr(){window.addEventListener("online",this.Ur),window.addEventListener("offline",this.Gr)}Kr(){S("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.zr)e(0)}Qr(){S("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.zr)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Nf=null;function Rp(){return null===Nf?Nf=268435456+Math.round(2147483648*Math.random()):Nf++,"0x"+Nf.toString(16)}const O_={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class k_{constructor(e){this.Wr=e.Wr,this.Hr=e.Hr}Jr(e){this.Yr=e}Zr(e){this.Xr=e}onMessage(e){this.eo=e}close(){this.Hr()}send(e){this.Wr(e)}no(){this.Yr()}so(e){this.Xr(e)}io(e){this.eo(e)}}const rc="WebChannelConnection";class sg extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.ro=(e.ssl?"https":"http")+"://"+e.host,this.oo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get uo(){return!1}co(e,t,o,d,v){const x=Rp(),H=this.ao(e,t);S("RestConnection",`Sending RPC '${e}' ${x}:`,H,o);const oe={};return this.ho(oe,d,v),this.lo(e,H,oe,o).then(fe=>(S("RestConnection",`Received RPC '${e}' ${x}: `,fe),fe),fe=>{throw J("RestConnection",`RPC '${e}' ${x} failed with error: `,fe,"url: ",H,"request:",o),fe})}fo(e,t,o,d,v,x){return this.co(e,t,o,d,v)}ho(e,t,o){e["X-Goog-Api-Client"]="gl-js/ fire/"+$o,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((d,v)=>e[v]=d),o&&o.headers.forEach((d,v)=>e[v]=d)}ao(e,t){return`${this.ro}/v1/${t}:${O_[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}lo(e,t,o,d){const v=Rp();return new Promise((x,H)=>{const oe=new Xo;oe.setWithCredentials(!0),oe.listenOnce(El.COMPLETE,()=>{try{switch(oe.getLastErrorCode()){case zo.NO_ERROR:const Oe=oe.getResponseJson();S(rc,`XHR for RPC '${e}' ${v} received:`,JSON.stringify(Oe)),x(Oe);break;case zo.TIMEOUT:S(rc,`RPC '${e}' ${v} timed out`),H(new k(Ke.DEADLINE_EXCEEDED,"Request time out"));break;case zo.HTTP_ERROR:const ft=oe.getStatus();if(S(rc,`RPC '${e}' ${v} failed with status:`,ft,"response text:",oe.getResponseText()),ft>0){let Wt=oe.getResponseJson();Array.isArray(Wt)&&(Wt=Wt[0]);const yn=Wt?.error;if(yn&&yn.status&&yn.message){const Vn=function(mi){const qi=mi.toLowerCase().replace(/_/g,"-");return Object.values(Ke).indexOf(qi)>=0?qi:Ke.UNKNOWN}(yn.status);H(new k(Vn,yn.message))}else H(new k(Ke.UNKNOWN,"Server responded with status "+oe.getStatus()))}else H(new k(Ke.UNAVAILABLE,"Connection failed."));break;default:ve()}}finally{S(rc,`RPC '${e}' ${v} completed.`)}});const fe=JSON.stringify(d);S(rc,`RPC '${e}' ${v} sending request:`,d),oe.send(t,"POST",fe,o,15)})}wo(e,t,o){const d=Rp(),v=[this.ro,"/","google.firestore.v1.Firestore","/",e,"/channel"],x=Qo(),H=La(),oe={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(oe.xmlHttpFactory=new za({})),this.ho(oe.initMessageHeaders,t,o),oe.encodeInitMessageHeaders=!0;const fe=v.join("");S(rc,`Creating RPC '${e}' stream ${d}: ${fe}`,oe);const Oe=x.createWebChannel(fe,oe);let ft=!1,Wt=!1;const yn=new k_({Wr:mi=>{Wt?S(rc,`Not sending because RPC '${e}' stream ${d} is closed:`,mi):(ft||(S(rc,`Opening RPC '${e}' stream ${d} transport.`),Oe.open(),ft=!0),S(rc,`RPC '${e}' stream ${d} sending:`,mi),Oe.send(mi))},Hr:()=>Oe.close()}),Vn=(mi,qi,vo)=>{mi.listen(qi,Na=>{try{vo(Na)}catch(oo){setTimeout(()=>{throw oo},0)}})};return Vn(Oe,$a.EventType.OPEN,()=>{Wt||S(rc,`RPC '${e}' stream ${d} transport opened.`)}),Vn(Oe,$a.EventType.CLOSE,()=>{Wt||(Wt=!0,S(rc,`RPC '${e}' stream ${d} transport closed`),yn.so())}),Vn(Oe,$a.EventType.ERROR,mi=>{Wt||(Wt=!0,J(rc,`RPC '${e}' stream ${d} transport errored:`,mi),yn.so(new k(Ke.UNAVAILABLE,"The operation could not be completed")))}),Vn(Oe,$a.EventType.MESSAGE,mi=>{var qi;if(!Wt){const vo=mi.data[0];$e(!!vo);const oo=vo.error||(null===(qi=vo[0])||void 0===qi?void 0:qi.error);if(oo){S(rc,`RPC '${e}' stream ${d} received error:`,oo);const Cc=oo.status;let ul=function(Tc){const gd=pa[Tc];if(void 0!==gd)return gu(gd)}(Cc),Fa=oo.message;void 0===ul&&(ul=Ke.INTERNAL,Fa="Unknown error status: "+Cc+" with message "+oo.message),Wt=!0,yn.so(new k(ul,Fa)),Oe.close()}else S(rc,`RPC '${e}' stream ${d} received:`,vo),yn.io(vo)}}),Vn(H,ds.STAT_EVENT,mi=>{mi.stat===Ua.PROXY?S(rc,`RPC '${e}' stream ${d} detected buffering proxy`):mi.stat===Ua.NOPROXY&&S(rc,`RPC '${e}' stream ${d} detected no buffering proxy`)}),setTimeout(()=>{yn.no()},0),yn}}function og(){return typeof window<"u"?window:null}function Vh(){return typeof document<"u"?document:null}function Qd(r){return new A(r,!0)}class Bh{constructor(e,t,o=1e3,d=1.5,v=6e4){this.Ws=e,this.timerId=t,this._o=o,this.mo=d,this.yo=v,this.po=0,this.Io=null,this.To=Date.now(),this.reset()}reset(){this.po=0}Eo(){this.po=this.yo}Ao(e){this.cancel();const t=Math.floor(this.po+this.Ro()),o=Math.max(0,Date.now()-this.To),d=Math.max(0,t-o);d>0&&S("ExponentialBackoff",`Backing off for ${d} ms (base delay: ${this.po} ms, delay with jitter: ${t} ms, last attempt: ${o} ms ago)`),this.Io=this.Ws.enqueueAfterDelay(this.timerId,d,()=>(this.To=Date.now(),e())),this.po*=this.mo,this.po<this._o&&(this.po=this._o),this.po>this.yo&&(this.po=this.yo)}vo(){null!==this.Io&&(this.Io.skipDelay(),this.Io=null)}cancel(){null!==this.Io&&(this.Io.cancel(),this.Io=null)}Ro(){return(Math.random()-.5)*this.po}}class N_{constructor(e,t,o,d,v,x,H,oe){this.Ws=e,this.bo=o,this.Po=d,this.connection=v,this.authCredentialsProvider=x,this.appCheckCredentialsProvider=H,this.listener=oe,this.state=0,this.Vo=0,this.So=null,this.Do=null,this.stream=null,this.Co=new Bh(e,t)}xo(){return 1===this.state||5===this.state||this.No()}No(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.ko()}stop(){var e=this;return(0,f.Z)(function*(){e.xo()&&(yield e.close(0))})()}Oo(){this.state=0,this.Co.reset()}$o(){this.No()&&null===this.So&&(this.So=this.Ws.enqueueAfterDelay(this.bo,6e4,()=>this.Mo()))}Fo(e){this.Bo(),this.stream.send(e)}Mo(){var e=this;return(0,f.Z)(function*(){if(e.No())return e.close(0)})()}Bo(){this.So&&(this.So.cancel(),this.So=null)}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}close(e,t){var o=this;return(0,f.Z)(function*(){o.Bo(),o.Lo(),o.Co.cancel(),o.Vo++,4!==e?o.Co.reset():t&&t.code===Ke.RESOURCE_EXHAUSTED?(N(t.toString()),N("Using maximum backoff delay to prevent overloading the backend."),o.Co.Eo()):t&&t.code===Ke.UNAUTHENTICATED&&3!==o.state&&(o.authCredentialsProvider.invalidateToken(),o.appCheckCredentialsProvider.invalidateToken()),null!==o.stream&&(o.qo(),o.stream.close(),o.stream=null),o.state=e,yield o.listener.Zr(t)})()}qo(){}auth(){this.state=1;const e=this.Uo(this.Vo),t=this.Vo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([o,d])=>{this.Vo===t&&this.Ko(o,d)},o=>{e(()=>{const d=new k(Ke.UNKNOWN,"Fetching auth token failed: "+o.message);return this.Go(d)})})}Ko(e,t){const o=this.Uo(this.Vo);this.stream=this.Qo(e,t),this.stream.Jr(()=>{o(()=>(this.state=2,this.Do=this.Ws.enqueueAfterDelay(this.Po,1e4,()=>(this.No()&&(this.state=3),Promise.resolve())),this.listener.Jr()))}),this.stream.Zr(d=>{o(()=>this.Go(d))}),this.stream.onMessage(d=>{o(()=>this.onMessage(d))})}ko(){var e=this;this.state=5,this.Co.Ao((0,f.Z)(function*(){e.state=0,e.start()}))}Go(e){return S("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Uo(e){return t=>{this.Ws.enqueueAndForget(()=>this.Vo===e?t():(S("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Pp extends N_{constructor(e,t,o,d,v,x){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,o,d,x),this.serializer=v}Qo(e,t){return this.connection.wo("Listen",e,t)}onMessage(e){this.Co.reset();const t=function Vd(r,e){let t;if("targetChange"in e){const o="NO_CHANGE"===(oe=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===oe?1:"REMOVE"===oe?2:"CURRENT"===oe?3:"RESET"===oe?4:ve(),d=e.targetChange.targetIds||[],v=function(oe,fe){return oe.useProto3Json?($e(void 0===fe||"string"==typeof fe),Ys.fromBase64String(fe||"")):($e(void 0===fe||fe instanceof Uint8Array),Ys.fromUint8Array(fe||new Uint8Array))}(r,e.targetChange.resumeToken),x=e.targetChange.cause,H=x&&function(oe){const fe=void 0===oe.code?Ke.UNKNOWN:gu(oe.code);return new k(fe,oe.message||"")}(x);t=new vd(o,d,v,H||null)}else if("documentChange"in e){const o=e.documentChange,d=Fn(r,o.document.name),v=le(o.document.updateTime),x=o.document.createTime?le(o.document.createTime):qn.min(),H=new Uo({mapValue:{fields:o.document.fields}}),oe=$s.newFoundDocument(d,v,x,H);t=new Za(o.targetIds||[],o.removedTargetIds||[],oe.key,oe)}else if("documentDelete"in e){const o=e.documentDelete,d=Fn(r,o.document),v=o.readTime?le(o.readTime):qn.min(),x=$s.newNoDocument(d,v);t=new Za([],o.removedTargetIds||[],x.key,x)}else if("documentRemove"in e){const o=e.documentRemove,d=Fn(r,o.document);t=new Za([],o.removedTargetIds||[],d,null)}else{if(!("filter"in e))return ve();{const o=e.filter,v=new Ld(o.count||0);t=new yu(o.targetId,v)}}var oe;return t}(this.serializer,e),o=function(d){if(!("targetChange"in d))return qn.min();const v=d.targetChange;return v.targetIds&&v.targetIds.length?qn.min():v.readTime?le(v.readTime):qn.min()}(e);return this.listener.zo(t,o)}jo(e){const t={};t.database=ki(this.serializer),t.addTarget=function(d,v){let x;const H=v.target;return x=lc(H)?{documents:Bd(d,H)}:{query:Ed(d,H)},x.targetId=v.targetId,v.resumeToken.approximateByteSize()>0?x.resumeToken=E(d,v.resumeToken):v.snapshotVersion.compareTo(qn.min())>0&&(x.readTime=y(d,v.snapshotVersion.toTimestamp())),x}(this.serializer,e);const o=function Hd(r,e){const t=function(o,d){switch(d){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return ve()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);o&&(t.labels=o),this.Fo(t)}Wo(e){const t={};t.database=ki(this.serializer),t.removeTarget=e,this.Fo(t)}}class F_ extends N_{constructor(e,t,o,d,v,x){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,o,d,x),this.serializer=v,this.Ho=!1}get Jo(){return this.Ho}start(){this.Ho=!1,this.lastStreamToken=void 0,super.start()}qo(){this.Ho&&this.Yo([])}Qo(e,t){return this.connection.wo("Write",e,t)}onMessage(e){if($e(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Ho){this.Co.reset();const t=function Ou(r,e){return r&&r.length>0?($e(void 0!==e),r.map(t=>function(o,d){let v=le(o.updateTime?o.updateTime:d);return v.isEqual(qn.min())&&(v=le(d)),new ei(v,o.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),o=le(e.commitTime);return this.listener.Zo(o,t)}return $e(!e.writeResults||0===e.writeResults.length),this.Ho=!0,this.listener.Xo()}tu(){const e={};e.database=ki(this.serializer),this.Fo(e)}Yo(e){const t={streamToken:this.lastStreamToken,writes:e.map(o=>Pu(this.serializer,o))};this.Fo(t)}}class mv extends class{}{constructor(e,t,o,d){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=o,this.serializer=d,this.eu=!1}nu(){if(this.eu)throw new k(Ke.FAILED_PRECONDITION,"The client has already been terminated.")}co(e,t,o){return this.nu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([d,v])=>this.connection.co(e,t,o,d,v)).catch(d=>{throw"FirebaseError"===d.name?(d.code===Ke.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new k(Ke.UNKNOWN,d.toString())})}fo(e,t,o,d){return this.nu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([v,x])=>this.connection.fo(e,t,o,v,x,d)).catch(v=>{throw"FirebaseError"===v.name?(v.code===Ke.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),v):new k(Ke.UNKNOWN,v.toString())})}terminate(){this.eu=!0}}class L_{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.su=0,this.iu=null,this.ru=!0}ou(){0===this.su&&(this.uu("Unknown"),this.iu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.iu=null,this.cu("Backend didn't respond within 10 seconds."),this.uu("Offline"),Promise.resolve())))}au(e){"Online"===this.state?this.uu("Unknown"):(this.su++,this.su>=1&&(this.hu(),this.cu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.uu("Offline")))}set(e){this.hu(),this.su=0,"Online"===e&&(this.ru=!1),this.uu(e)}uu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}cu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ru?(N(t),this.ru=!1):S("OnlineStateTracker",t)}hu(){null!==this.iu&&(this.iu.cancel(),this.iu=null)}}class ag{constructor(e,t,o,d,v){var x=this;this.localStore=e,this.datastore=t,this.asyncQueue=o,this.remoteSyncer={},this.lu=[],this.fu=new Map,this.du=new Set,this.wu=[],this._u=v,this._u.qr(H=>{o.enqueueAndForget((0,f.Z)(function*(){var oe;uu(x)&&(S("RemoteStore","Restarting streams for network reachability change."),yield(oe=(0,f.Z)(function*(fe){const Oe=at(fe);Oe.du.add(4),yield zu(Oe),Oe.mu.set("Unknown"),Oe.du.delete(4),yield Hh(Oe)}),function(fe){return oe.apply(this,arguments)})(x))}))}),this.mu=new L_(o,d)}}function Hh(r){return Op.apply(this,arguments)}function Op(){return Op=(0,f.Z)(function*(r){if(uu(r))for(const e of r.wu)yield e(!0)}),Op.apply(this,arguments)}function zu(r){return ad.apply(this,arguments)}function ad(){return ad=(0,f.Z)(function*(r){for(const e of r.wu)yield e(!1)}),ad.apply(this,arguments)}function Jd(r,e){const t=at(r);t.fu.has(e.targetId)||(t.fu.set(e.targetId,e),$h(t)?Lf(t):th(t).No()&&jh(t,e))}function $u(r,e){const t=at(r),o=th(t);t.fu.delete(e),o.No()&&zh(t,e),0===t.fu.size&&(o.No()?o.$o():uu(t)&&t.mu.set("Unknown"))}function jh(r,e){r.gu.Ot(e.targetId),th(r).jo(e)}function zh(r,e){r.gu.Ot(e),th(r).Wo(e)}function Lf(r){r.gu=new Th({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),ne:e=>r.fu.get(e)||null}),th(r).start(),r.mu.ou()}function $h(r){return uu(r)&&!th(r).xo()&&r.fu.size>0}function uu(r){return 0===at(r).du.size}function Uf(r){r.gu=void 0}function lg(r){return Gh.apply(this,arguments)}function Gh(){return Gh=(0,f.Z)(function*(r){r.fu.forEach((e,t)=>{jh(r,e)})}),Gh.apply(this,arguments)}function U_(r,e){return kp.apply(this,arguments)}function kp(){return kp=(0,f.Z)(function*(r,e){Uf(r),$h(r)?(r.mu.au(e),Lf(r)):r.mu.set("Unknown")}),kp.apply(this,arguments)}function cg(r,e,t){return Np.apply(this,arguments)}function Np(){return Np=(0,f.Z)(function*(r,e,t){if(r.mu.set("Online"),e instanceof vd&&2===e.state&&e.cause)try{yield(o=(0,f.Z)(function*(d,v){const x=v.cause;for(const H of v.targetIds)d.fu.has(H)&&(yield d.remoteSyncer.rejectListen(H,x),d.fu.delete(H),d.gu.removeTarget(H))}),function(d,v){return o.apply(this,arguments)})(r,e)}catch(o){S("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),o),yield Wh(r,o)}else if(e instanceof Za?r.gu.Kt(e):e instanceof yu?r.gu.Jt(e):r.gu.zt(e),!t.isEqual(qn.min()))try{const o=yield Xm(r.localStore);t.compareTo(o)>=0&&(yield function(d,v){const x=d.gu.Xt(v);return x.targetChanges.forEach((H,oe)=>{if(H.resumeToken.approximateByteSize()>0){const fe=d.fu.get(oe);fe&&d.fu.set(oe,fe.withResumeToken(H.resumeToken,v))}}),x.targetMismatches.forEach(H=>{const oe=d.fu.get(H);if(!oe)return;d.fu.set(H,oe.withResumeToken(Ys.EMPTY_BYTE_STRING,oe.snapshotVersion)),zh(d,H);const fe=new Eu(oe.target,H,1,oe.sequenceNumber);jh(d,fe)}),d.remoteSyncer.applyRemoteEvent(x)}(r,t))}catch(o){S("RemoteStore","Failed to raise snapshot:",o),yield Wh(r,o)}var o}),Np.apply(this,arguments)}function Wh(r,e,t){return Vf.apply(this,arguments)}function Vf(){return Vf=(0,f.Z)(function*(r,e,t){if(!Hr(e))throw e;r.du.add(1),yield zu(r),r.mu.set("Offline"),t||(t=()=>Xm(r.localStore)),r.asyncQueue.enqueueRetryable((0,f.Z)(function*(){S("RemoteStore","Retrying IndexedDB access"),yield t(),r.du.delete(1),yield Hh(r)}))}),Vf.apply(this,arguments)}function ug(r,e){return e().catch(t=>Wh(r,t,e))}function eh(r){return dc.apply(this,arguments)}function dc(){return dc=(0,f.Z)(function*(r){const e=at(r),t=Ul(e);let o=e.lu.length>0?e.lu[e.lu.length-1].batchId:-1;for(;dg(e);)try{const d=yield tg(e.localStore,o);if(null===d){0===e.lu.length&&t.$o();break}o=d.batchId,V_(e,d)}catch(d){yield Wh(e,d)}B_(e)&&Bf(e)}),dc.apply(this,arguments)}function dg(r){return uu(r)&&r.lu.length<10}function V_(r,e){r.lu.push(e);const t=Ul(r);t.No()&&t.Jo&&t.Yo(e.mutations)}function B_(r){return uu(r)&&!Ul(r).xo()&&r.lu.length>0}function Bf(r){Ul(r).start()}function hg(r){return Fp.apply(this,arguments)}function Fp(){return Fp=(0,f.Z)(function*(r){Ul(r).tu()}),Fp.apply(this,arguments)}function H_(r){return Lp.apply(this,arguments)}function Lp(){return Lp=(0,f.Z)(function*(r){const e=Ul(r);for(const t of r.lu)e.Yo(t.mutations)}),Lp.apply(this,arguments)}function fg(r,e,t){return Up.apply(this,arguments)}function Up(){return Up=(0,f.Z)(function*(r,e,t){const o=r.lu.shift(),d=bc.from(o,e,t);yield ug(r,()=>r.remoteSyncer.applySuccessfulWrite(d)),yield eh(r)}),Up.apply(this,arguments)}function j_(r,e){return Kh.apply(this,arguments)}function Kh(){return Kh=(0,f.Z)(function*(r,e){var t;e&&Ul(r).Jo&&(yield(t=(0,f.Z)(function*(o,d){if(yd(v=d.code)&&v!==Ke.ABORTED){const x=o.lu.shift();Ul(o).Oo(),yield ug(o,()=>o.remoteSyncer.rejectFailedWrite(x.batchId,d)),yield eh(o)}var v}),function(o,d){return t.apply(this,arguments)})(r,e)),B_(r)&&Bf(r)}),Kh.apply(this,arguments)}function pg(r,e){return Vp.apply(this,arguments)}function Vp(){return Vp=(0,f.Z)(function*(r,e){const t=at(r);t.asyncQueue.verifyOperationInProgress(),S("RemoteStore","RemoteStore received new credentials");const o=uu(t);t.du.add(3),yield zu(t),o&&t.mu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.du.delete(3),yield Hh(t)}),Vp.apply(this,arguments)}function Bp(r,e){return Hp.apply(this,arguments)}function Hp(){return Hp=(0,f.Z)(function*(r,e){const t=at(r);e?(t.du.delete(2),yield Hh(t)):e||(t.du.add(2),yield zu(t),t.mu.set("Unknown"))}),Hp.apply(this,arguments)}function th(r){return r.yu||(r.yu=function(e,t,o){const d=at(e);return d.nu(),new Pp(t,d.connection,d.authCredentials,d.appCheckCredentials,d.serializer,o)}(r.datastore,r.asyncQueue,{Jr:lg.bind(null,r),Zr:U_.bind(null,r),zo:cg.bind(null,r)}),r.wu.push(function(){var e=(0,f.Z)(function*(t){t?(r.yu.Oo(),$h(r)?Lf(r):r.mu.set("Unknown")):(yield r.yu.stop(),Uf(r))});return function(t){return e.apply(this,arguments)}}())),r.yu}function Ul(r){return r.pu||(r.pu=function(e,t,o){const d=at(e);return d.nu(),new F_(t,d.connection,d.authCredentials,d.appCheckCredentials,d.serializer,o)}(r.datastore,r.asyncQueue,{Jr:hg.bind(null,r),Zr:j_.bind(null,r),Xo:H_.bind(null,r),Zo:fg.bind(null,r)}),r.wu.push(function(){var e=(0,f.Z)(function*(t){t?(r.pu.Oo(),yield eh(r)):(yield r.pu.stop(),r.lu.length>0&&(S("RemoteStore",`Stopping write stream with ${r.lu.length} pending writes`),r.lu=[]))});return function(t){return e.apply(this,arguments)}}())),r.pu}class qh{constructor(e,t,o,d,v){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=o,this.op=d,this.removalCallback=v,this.deferred=new te,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(x=>{})}static createAndSchedule(e,t,o,d,v){const x=Date.now()+o,H=new qh(e,t,x,d,v);return H.start(o),H}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new k(Ke.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function nh(r,e){if(N("AsyncQueue",`${e}: ${r}`),Hr(r))return new k(Ke.UNAVAILABLE,`${e}: ${r}`);throw r}class ih{constructor(e){this.comparator=e?(t,o)=>e(t,o)||Jt.comparator(t.key,o.key):(t,o)=>Jt.comparator(t.key,o.key),this.keyedMap=Er(),this.sortedSet=new mt(this.comparator)}static emptySet(e){return new ih(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,o)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ih)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),o=e.sortedSet.getIterator();for(;t.hasNext();){const d=t.getNext().key,v=o.getNext().key;if(!d.isEqual(v))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const o=new ih;return o.comparator=this.comparator,o.keyedMap=e,o.sortedSet=t,o}}class jp{constructor(){this.Iu=new mt(Jt.comparator)}track(e){const t=e.doc.key,o=this.Iu.get(t);o?0!==e.type&&3===o.type?this.Iu=this.Iu.insert(t,e):3===e.type&&1!==o.type?this.Iu=this.Iu.insert(t,{type:o.type,doc:e.doc}):2===e.type&&2===o.type?this.Iu=this.Iu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===o.type?this.Iu=this.Iu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===o.type?this.Iu=this.Iu.remove(t):1===e.type&&2===o.type?this.Iu=this.Iu.insert(t,{type:1,doc:o.doc}):0===e.type&&1===o.type?this.Iu=this.Iu.insert(t,{type:2,doc:e.doc}):ve():this.Iu=this.Iu.insert(t,e)}Tu(){const e=[];return this.Iu.inorderTraversal((t,o)=>{e.push(o)}),e}}class rh{constructor(e,t,o,d,v,x,H,oe,fe){this.query=e,this.docs=t,this.oldDocs=o,this.docChanges=d,this.mutatedKeys=v,this.fromCache=x,this.syncStateChanged=H,this.excludesMetadataChanges=oe,this.hasCachedResults=fe}static fromInitialDocuments(e,t,o,d,v){const x=[];return t.forEach(H=>{x.push({type:0,doc:H})}),new rh(e,t,ih.emptySet(t),x,o,d,!0,!1,v)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ql(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,o=e.docChanges;if(t.length!==o.length)return!1;for(let d=0;d<t.length;d++)if(t[d].type!==o[d].type||!t[d].doc.isEqual(o[d].doc))return!1;return!0}}class z_{constructor(){this.Eu=void 0,this.listeners=[]}}class $_{constructor(){this.queries=new $t(e=>B(e),Ql),this.onlineState="Unknown",this.Au=new Set}}function Zh(r,e){return zp.apply(this,arguments)}function zp(){return zp=(0,f.Z)(function*(r,e){const t=at(r),o=e.query;let d=!1,v=t.queries.get(o);if(v||(d=!0,v=new z_),d)try{v.Eu=yield t.onListen(o)}catch(x){const H=nh(x,`Initialization of query '${w(e.query)}' failed`);return void e.onError(H)}t.queries.set(o,v),v.listeners.push(e),e.Ru(t.onlineState),v.Eu&&e.vu(v.Eu)&&mg(t)}),zp.apply(this,arguments)}function $p(r,e){return sh.apply(this,arguments)}function sh(){return sh=(0,f.Z)(function*(r,e){const t=at(r),o=e.query;let d=!1;const v=t.queries.get(o);if(v){const x=v.listeners.indexOf(e);x>=0&&(v.listeners.splice(x,1),d=0===v.listeners.length)}if(d)return t.queries.delete(o),t.onUnlisten(o)}),sh.apply(this,arguments)}function Gp(r,e){const t=at(r);let o=!1;for(const d of e){const x=t.queries.get(d.query);if(x){for(const H of x.listeners)H.vu(d)&&(o=!0);x.Eu=d}}o&&mg(t)}function Hf(r,e,t){const o=at(r),d=o.queries.get(e);if(d)for(const v of d.listeners)v.onError(t);o.queries.delete(e)}function mg(r){r.Au.forEach(e=>{e.next()})}class Yh{constructor(e,t,o){this.query=e,this.bu=t,this.Pu=!1,this.Vu=null,this.onlineState="Unknown",this.options=o||{}}vu(e){if(!this.options.includeMetadataChanges){const o=[];for(const d of e.docChanges)3!==d.type&&o.push(d);e=new rh(e.query,e.docs,e.oldDocs,o,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Pu?this.Su(e)&&(this.bu.next(e),t=!0):this.Du(e,this.onlineState)&&(this.Cu(e),t=!0),this.Vu=e,t}onError(e){this.bu.error(e)}Ru(e){this.onlineState=e;let t=!1;return this.Vu&&!this.Pu&&this.Du(this.Vu,e)&&(this.Cu(this.Vu),t=!0),t}Du(e,t){return!e.fromCache||(!this.options.xu||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Su(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Vu&&this.Vu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Cu(e){e=rh.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Pu=!0,this.bu.next(e)}}class gv{constructor(e,t){this.Nu=e,this.byteLength=t}ku(){return"metadata"in this.Nu}}class Wp{constructor(e){this.serializer=e}Hi(e){return Fn(this.serializer,e)}Ji(e){return e.metadata.exists?Ru(this.serializer,e.document,!1):$s.newNoDocument(this.Hi(e.metadata.name),this.Yi(e.metadata.readTime))}Yi(e){return le(e)}}class gg{constructor(e,t,o){this.Ou=e,this.localStore=t,this.serializer=o,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Kp(e)}$u(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Nu.namedQuery)this.queries.push(e.Nu.namedQuery);else if(e.Nu.documentMetadata){this.documents.push({metadata:e.Nu.documentMetadata}),e.Nu.documentMetadata.exists||++t;const o=Ki.fromString(e.Nu.documentMetadata.name);this.collectionGroups.add(o.get(o.length-2))}else e.Nu.document&&(this.documents[this.documents.length-1].document=e.Nu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Mu(e){const t=new Map,o=new Wp(this.serializer);for(const d of e)if(d.metadata.queries){const v=o.Hi(d.metadata.name);for(const x of d.metadata.queries){const H=(t.get(x)||Ir()).add(v);t.set(x,H)}}return t}complete(){var e=this;return(0,f.Z)(function*(){const t=yield function Sp(r,e,t,o){return Fh.apply(this,arguments)}(e.localStore,new Wp(e.serializer),e.documents,e.Ou.id),o=e.Mu(e.documents);for(const d of e.queries)yield A_(e.localStore,d,o.get(d.name));return e.progress.taskState="Success",{progress:e.progress,Fu:e.collectionGroups,Bu:t}})()}}function Kp(r){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:r.totalDocuments,totalBytes:r.totalBytes}}class qp{constructor(e){this.key=e}}class jf{constructor(e){this.key=e}}class Tu{constructor(e,t){this.query=e,this.Lu=t,this.qu=null,this.hasCachedResults=!1,this.current=!1,this.Uu=Ir(),this.mutatedKeys=Ir(),this.Ku=we(e),this.Gu=new ih(this.Ku)}get Qu(){return this.Lu}zu(e,t){const o=t?t.ju:new jp,d=t?t.Gu:this.Gu;let v=t?t.mutatedKeys:this.mutatedKeys,x=d,H=!1;const oe="F"===this.query.limitType&&d.size===this.query.limit?d.last():null,fe="L"===this.query.limitType&&d.size===this.query.limit?d.first():null;if(e.inorderTraversal((Oe,ft)=>{const Wt=d.get(Oe),yn=M(this.query,ft)?ft:null,Vn=!!Wt&&this.mutatedKeys.has(Wt.key),mi=!!yn&&(yn.hasLocalMutations||this.mutatedKeys.has(yn.key)&&yn.hasCommittedMutations);let qi=!1;Wt&&yn?Wt.data.isEqual(yn.data)?Vn!==mi&&(o.track({type:3,doc:yn}),qi=!0):this.Wu(Wt,yn)||(o.track({type:2,doc:yn}),qi=!0,(oe&&this.Ku(yn,oe)>0||fe&&this.Ku(yn,fe)<0)&&(H=!0)):!Wt&&yn?(o.track({type:0,doc:yn}),qi=!0):Wt&&!yn&&(o.track({type:1,doc:Wt}),qi=!0,(oe||fe)&&(H=!0)),qi&&(yn?(x=x.add(yn),v=mi?v.add(Oe):v.delete(Oe)):(x=x.delete(Oe),v=v.delete(Oe)))}),null!==this.query.limit)for(;x.size>this.query.limit;){const Oe="F"===this.query.limitType?x.last():x.first();x=x.delete(Oe.key),v=v.delete(Oe.key),o.track({type:1,doc:Oe})}return{Gu:x,ju:o,Mi:H,mutatedKeys:v}}Wu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,o){const d=this.Gu;this.Gu=e.Gu,this.mutatedKeys=e.mutatedKeys;const v=e.ju.Tu();v.sort((fe,Oe)=>function(ft,Wt){const yn=Vn=>{switch(Vn){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ve()}};return yn(ft)-yn(Wt)}(fe.type,Oe.type)||this.Ku(fe.doc,Oe.doc)),this.Hu(o);const x=t?this.Ju():[],H=0===this.Uu.size&&this.current?1:0,oe=H!==this.qu;return this.qu=H,0!==v.length||oe?{snapshot:new rh(this.query,e.Gu,d,v,e.mutatedKeys,0===H,oe,!1,!!o&&o.resumeToken.approximateByteSize()>0),Yu:x}:{Yu:x}}Ru(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Gu:this.Gu,ju:new jp,mutatedKeys:this.mutatedKeys,Mi:!1},!1)):{Yu:[]}}Zu(e){return!this.Lu.has(e)&&!!this.Gu.has(e)&&!this.Gu.get(e).hasLocalMutations}Hu(e){e&&(e.addedDocuments.forEach(t=>this.Lu=this.Lu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Lu=this.Lu.delete(t)),this.current=e.current)}Ju(){if(!this.current)return[];const e=this.Uu;this.Uu=Ir(),this.Gu.forEach(o=>{this.Zu(o.key)&&(this.Uu=this.Uu.add(o.key))});const t=[];return e.forEach(o=>{this.Uu.has(o)||t.push(new jf(o))}),this.Uu.forEach(o=>{e.has(o)||t.push(new qp(o))}),t}Xu(e){this.Lu=e.Wi,this.Uu=Ir();const t=this.zu(e.documents);return this.applyChanges(t,!0)}tc(){return rh.fromInitialDocuments(this.query,this.Gu,this.mutatedKeys,0===this.qu,this.hasCachedResults)}}class zf{constructor(e,t,o){this.query=e,this.targetId=t,this.view=o}}class $f{constructor(e){this.key=e,this.ec=!1}}class Qh{constructor(e,t,o,d,v,x){this.localStore=e,this.remoteStore=t,this.eventManager=o,this.sharedClientState=d,this.currentUser=v,this.maxConcurrentLimboResolutions=x,this.nc={},this.sc=new $t(H=>B(H),Ql),this.ic=new Map,this.rc=new Set,this.oc=new mt(Jt.comparator),this.uc=new Map,this.cc=new Gm,this.ac={},this.hc=new Map,this.lc=Ll.bn(),this.onlineState="Unknown",this.fc=void 0}get isPrimaryClient(){return!0===this.fc}}function G_(r,e){return Gf.apply(this,arguments)}function Gf(){return Gf=(0,f.Z)(function*(r,e){const t=ud(r);let o,d;const v=t.sc.get(e);if(v)o=v.targetId,t.sharedClientState.addLocalQueryTarget(o),d=v.view.tc();else{const x=yield Zd(t.localStore,Pa(e));t.isPrimaryClient&&Jd(t.remoteStore,x);const H=t.sharedClientState.addLocalQueryTarget(x.targetId);o=x.targetId,d=yield Wf(t,e,o,"current"===H,x.resumeToken)}return d}),Gf.apply(this,arguments)}function Wf(r,e,t,o,d){return Zp.apply(this,arguments)}function Zp(){return Zp=(0,f.Z)(function*(r,e,t,o,d){r.dc=(ft,Wt,yn)=>{return(Vn=(0,f.Z)(function*(mi,qi,vo,Na){let oo=qi.view.zu(vo);oo.Mi&&(oo=yield Nh(mi.localStore,qi.query,!1).then(({documents:Fa})=>qi.view.zu(Fa,oo)));const Cc=Na&&Na.targetChanges.get(qi.targetId),ul=qi.view.applyChanges(oo,mi.isPrimaryClient,Cc);return tm(mi,qi.targetId,ul.Yu),ul.snapshot}),function(mi,qi,vo,Na){return Vn.apply(this,arguments)})(r,ft,Wt,yn);var Vn};const v=yield Nh(r.localStore,e,!0),x=new Tu(e,v.Wi),H=x.zu(v.documents),oe=_u.createSynthesizedTargetChangeForCurrentChange(t,o&&"Offline"!==r.onlineState,d),fe=x.applyChanges(H,r.isPrimaryClient,oe);tm(r,t,fe.Yu);const Oe=new zf(e,t,x);return r.sc.set(e,Oe),r.ic.has(t)?r.ic.get(t).push(e):r.ic.set(t,[e]),fe.snapshot}),Zp.apply(this,arguments)}function W_(r,e){return Sd.apply(this,arguments)}function Sd(){return Sd=(0,f.Z)(function*(r,e){const t=at(r),o=t.sc.get(e),d=t.ic.get(o.targetId);if(d.length>1)return t.ic.set(o.targetId,d.filter(v=>!Ql(v,e))),void t.sc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(o.targetId),t.sharedClientState.isActiveQueryTarget(o.targetId)||(yield Yd(t.localStore,o.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(o.targetId),$u(t.remoteStore,o.targetId),oh(t,o.targetId)}).catch(ua))):(oh(t,o.targetId),yield Yd(t.localStore,o.targetId,!0))}),Sd.apply(this,arguments)}function _g(){return _g=(0,f.Z)(function*(r,e,t){const o=dd(r);try{const d=yield function(v,x){const H=at(v),oe=ni.now(),fe=x.reduce((Wt,yn)=>Wt.add(yn.key),Ir());let Oe,ft;return H.persistence.runTransaction("Locally write mutations","readwrite",Wt=>{let yn=Zn(),Vn=Ir();return H.Ki.getEntries(Wt,fe).next(mi=>{yn=mi,yn.forEach((qi,vo)=>{vo.isValidDocument()||(Vn=Vn.add(qi))})}).next(()=>H.localDocuments.getOverlayedDocuments(Wt,yn)).next(mi=>{Oe=mi;const qi=[];for(const vo of x){const Na=Pc(vo,Oe.get(vo.key).overlayedDocument);null!=Na&&qi.push(new Oa(vo.key,Na,ql(Na.value.mapValue),jn.exists(!0)))}return H.mutationQueue.addMutationBatch(Wt,oe,qi,x)}).next(mi=>{ft=mi;const qi=mi.applyToLocalDocumentSet(Oe,Vn);return H.documentOverlayCache.saveOverlays(Wt,mi.batchId,qi)})}).then(()=>({batchId:ft.batchId,changes:yo(Oe)}))}(o.localStore,e);o.sharedClientState.addPendingMutation(d.batchId),function(v,x,H){let oe=v.ac[v.currentUser.toKey()];oe||(oe=new mt(Rn)),oe=oe.insert(x,H),v.ac[v.currentUser.toKey()]=oe}(o,d.batchId,t),yield Du(o,d.changes),yield eh(o.remoteStore)}catch(d){const v=nh(d,"Failed to persist write");t.reject(v)}}),_g.apply(this,arguments)}function yg(r,e){return Yp.apply(this,arguments)}function Yp(){return Yp=(0,f.Z)(function*(r,e){const t=at(r);try{const o=yield function Jm(r,e){const t=at(r),o=e.snapshotVersion;let d=t.Li;return t.persistence.runTransaction("Apply remote event","readwrite-primary",v=>{const x=t.Ki.newChangeBuffer({trackRemovals:!0});d=t.Li;const H=[];e.targetChanges.forEach((Oe,ft)=>{const Wt=d.get(ft);if(!Wt)return;H.push(t.Ds.removeMatchingKeys(v,Oe.removedDocuments,ft).next(()=>t.Ds.addMatchingKeys(v,Oe.addedDocuments,ft)));let yn=Wt.withSequenceNumber(v.currentSequenceNumber);var Vn,mi,qi;e.targetMismatches.has(ft)?yn=yn.withResumeToken(Ys.EMPTY_BYTE_STRING,qn.min()).withLastLimboFreeSnapshotVersion(qn.min()):Oe.resumeToken.approximateByteSize()>0&&(yn=yn.withResumeToken(Oe.resumeToken,o)),d=d.insert(ft,yn),mi=yn,qi=Oe,(0===(Vn=Wt).resumeToken.approximateByteSize()||mi.snapshotVersion.toMicroseconds()-Vn.snapshotVersion.toMicroseconds()>=3e8||qi.addedDocuments.size+qi.modifiedDocuments.size+qi.removedDocuments.size>0)&&H.push(t.Ds.updateTargetData(v,yn))});let oe=Zn(),fe=Ir();if(e.documentUpdates.forEach(Oe=>{e.resolvedLimboDocuments.has(Oe)&&H.push(t.persistence.referenceDelegate.updateLimboDocument(v,Oe))}),H.push(eg(v,x,e.documentUpdates).next(Oe=>{oe=Oe.zi,fe=Oe.ji})),!o.isEqual(qn.min())){const Oe=t.Ds.getLastRemoteSnapshotVersion(v).next(ft=>t.Ds.setTargetsMetadata(v,v.currentSequenceNumber,o));H.push(Oe)}return nn.waitFor(H).next(()=>x.apply(v)).next(()=>t.localDocuments.getLocalViewOfDocuments(v,oe,fe)).next(()=>oe)}).then(v=>(t.Li=d,v))}(t.localStore,e);e.targetChanges.forEach((d,v)=>{const x=t.uc.get(v);x&&($e(d.addedDocuments.size+d.modifiedDocuments.size+d.removedDocuments.size<=1),d.addedDocuments.size>0?x.ec=!0:d.modifiedDocuments.size>0?$e(x.ec):d.removedDocuments.size>0&&($e(x.ec),x.ec=!1))}),yield Du(t,o,e)}catch(o){yield ua(o)}}),Yp.apply(this,arguments)}function vg(r,e,t){const o=at(r);if(o.isPrimaryClient&&0===t||!o.isPrimaryClient&&1===t){const d=[];o.sc.forEach((v,x)=>{const H=x.view.Ru(e);H.snapshot&&d.push(H.snapshot)}),function(v,x){const H=at(v);H.onlineState=x;let oe=!1;H.queries.forEach((fe,Oe)=>{for(const ft of Oe.listeners)ft.Ru(x)&&(oe=!0)}),oe&&mg(H)}(o.eventManager,e),d.length&&o.nc.zo(d),o.onlineState=e,o.isPrimaryClient&&o.sharedClientState.setOnlineState(e)}}function q_(r,e,t){return Qp.apply(this,arguments)}function Qp(){return Qp=(0,f.Z)(function*(r,e,t){const o=at(r);o.sharedClientState.updateQueryState(e,"rejected",t);const d=o.uc.get(e),v=d&&d.key;if(v){let x=new mt(Jt.comparator);x=x.insert(v,$s.newNoDocument(v,qn.min()));const H=Ir().add(v),oe=new Jc(qn.min(),new Map,new Un(Rn),x,H);yield yg(o,oe),o.oc=o.oc.remove(v),o.uc.delete(e),nm(o)}else yield Yd(o.localStore,e,!1).then(()=>oh(o,e,t)).catch(ua)}),Qp.apply(this,arguments)}function Z_(r,e){return Xp.apply(this,arguments)}function Xp(){return Xp=(0,f.Z)(function*(r,e){const t=at(r),o=e.batch.batchId;try{const d=yield function x_(r,e){const t=at(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",o=>{const d=e.batch.keys(),v=t.Ki.newChangeBuffer({trackRemovals:!0});return function(x,H,oe,fe){const Oe=oe.batch,ft=Oe.keys();let Wt=nn.resolve();return ft.forEach(yn=>{Wt=Wt.next(()=>fe.getEntry(H,yn)).next(Vn=>{const mi=oe.docVersions.get(yn);$e(null!==mi),Vn.version.compareTo(mi)<0&&(Oe.applyToRemoteDocument(Vn,oe),Vn.isValidDocument()&&(Vn.setReadTime(oe.commitVersion),fe.addEntry(Vn)))})}),Wt.next(()=>x.mutationQueue.removeMutationBatch(H,Oe))}(t,o,e,v).next(()=>v.apply(o)).next(()=>t.mutationQueue.performConsistencyCheck(o)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(o,d,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(o,function(x){let H=Ir();for(let oe=0;oe<x.mutationResults.length;++oe)x.mutationResults[oe].transformResults.length>0&&(H=H.add(x.batch.mutations[oe].key));return H}(e))).next(()=>t.localDocuments.getDocuments(o,d))})}(t.localStore,e);em(t,o,null),Jp(t,o),t.sharedClientState.updateMutationState(o,"acknowledged"),yield Du(t,d)}catch(d){yield ua(d)}}),Xp.apply(this,arguments)}function bg(r,e,t){return Xh.apply(this,arguments)}function Xh(){return Xh=(0,f.Z)(function*(r,e,t){const o=at(r);try{const d=yield function(v,x){const H=at(v);return H.persistence.runTransaction("Reject batch","readwrite-primary",oe=>{let fe;return H.mutationQueue.lookupMutationBatch(oe,x).next(Oe=>($e(null!==Oe),fe=Oe.keys(),H.mutationQueue.removeMutationBatch(oe,Oe))).next(()=>H.mutationQueue.performConsistencyCheck(oe)).next(()=>H.documentOverlayCache.removeOverlaysForBatchId(oe,fe,x)).next(()=>H.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(oe,fe)).next(()=>H.localDocuments.getDocuments(oe,fe))})}(o.localStore,e);em(o,e,t),Jp(o,e),o.sharedClientState.updateMutationState(e,"rejected",t),yield Du(o,d)}catch(d){yield ua(d)}}),Xh.apply(this,arguments)}function Jh(){return Jh=(0,f.Z)(function*(r,e){const t=at(r);uu(t.remoteStore)||S("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const o=yield function(v){const x=at(v);return x.persistence.runTransaction("Get highest unacknowledged batch id","readonly",H=>x.mutationQueue.getHighestUnacknowledgedBatchId(H))}(t.localStore);if(-1===o)return void e.resolve();const d=t.hc.get(o)||[];d.push(e),t.hc.set(o,d)}catch(o){const d=nh(o,"Initialization of waitForPendingWrites() operation failed");e.reject(d)}}),Jh.apply(this,arguments)}function Jp(r,e){(r.hc.get(e)||[]).forEach(t=>{t.resolve()}),r.hc.delete(e)}function em(r,e,t){const o=at(r);let d=o.ac[o.currentUser.toKey()];if(d){const v=d.get(e);v&&(t?v.reject(t):v.resolve(),d=d.remove(e)),o.ac[o.currentUser.toKey()]=d}}function oh(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const o of r.ic.get(e))r.sc.delete(o),t&&r.nc.wc(o,t);r.ic.delete(e),r.isPrimaryClient&&r.cc.hs(e).forEach(o=>{r.cc.containsKey(o)||Eg(r,o)})}function Eg(r,e){r.rc.delete(e.path.canonicalString());const t=r.oc.get(e);null!==t&&($u(r.remoteStore,t),r.oc=r.oc.remove(e),r.uc.delete(t),nm(r))}function tm(r,e,t){for(const o of t)o instanceof qp?(r.cc.addReference(o.key,e),Q_(r,o)):o instanceof jf?(S("SyncEngine","Document no longer in limbo: "+o.key),r.cc.removeReference(o.key,e),r.cc.containsKey(o.key)||Eg(r,o.key)):ve()}function Q_(r,e){const t=e.key,o=t.path.canonicalString();r.oc.get(t)||r.rc.has(o)||(S("SyncEngine","New document in limbo: "+t),r.rc.add(o),nm(r))}function nm(r){for(;r.rc.size>0&&r.oc.size<r.maxConcurrentLimboResolutions;){const e=r.rc.values().next().value;r.rc.delete(e);const t=new Jt(Ki.fromString(e)),o=r.lc.next();r.uc.set(o,new $f(t)),r.oc=r.oc.insert(t,o),Jd(r.remoteStore,new Eu(Pa(al(t.path)),o,2,mo.ct))}}function Du(r,e,t){return Kf.apply(this,arguments)}function Kf(){return Kf=(0,f.Z)(function*(r,e,t){const o=at(r),d=[],v=[],x=[];var H;o.sc.isEmpty()||(o.sc.forEach((H,oe)=>{x.push(o.dc(oe,e,t).then(fe=>{if((fe||t)&&o.isPrimaryClient&&o.sharedClientState.updateQueryState(oe.targetId,fe?.fromCache?"not-current":"current"),fe){d.push(fe);const Oe=wp.Di(oe.targetId,fe);v.push(Oe)}}))}),yield Promise.all(x),o.nc.zo(d),yield(H=(0,f.Z)(function*(oe,fe){const Oe=at(oe);try{yield Oe.persistence.runTransaction("notifyLocalViewChanges","readwrite",ft=>nn.forEach(fe,Wt=>nn.forEach(Wt.Vi,yn=>Oe.persistence.referenceDelegate.addReference(ft,Wt.targetId,yn)).next(()=>nn.forEach(Wt.Si,yn=>Oe.persistence.referenceDelegate.removeReference(ft,Wt.targetId,yn)))))}catch(ft){if(!Hr(ft))throw ft;S("LocalStore","Failed to update sequence numbers: "+ft)}for(const ft of fe){const Wt=ft.targetId;if(!ft.fromCache){const yn=Oe.Li.get(Wt),mi=yn.withLastLimboFreeSnapshotVersion(yn.snapshotVersion);Oe.Li=Oe.Li.insert(Wt,mi)}}}),function(oe,fe){return H.apply(this,arguments)})(o.localStore,v))}),Kf.apply(this,arguments)}function X_(r,e){return Ig.apply(this,arguments)}function Ig(){return Ig=(0,f.Z)(function*(r,e){const t=at(r);if(!t.currentUser.isEqual(e)){S("SyncEngine","User change. New user:",e.toKey());const o=yield Tp(t.localStore,e);t.currentUser=e,(d=t).hc.forEach(x=>{x.forEach(H=>{H.reject(new k(Ke.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),d.hc.clear(),t.sharedClientState.handleUserChange(e,o.removedBatchIds,o.addedBatchIds),yield Du(t,o.Qi)}var d}),Ig.apply(this,arguments)}function wg(r,e){const t=at(r),o=t.uc.get(e);if(o&&o.ec)return Ir().add(o.key);{let d=Ir();const v=t.ic.get(e);if(!v)return d;for(const x of v){const H=t.sc.get(x);d=d.unionWith(H.view.Qu)}return d}}function _v(r,e){return ah.apply(this,arguments)}function ah(){return ah=(0,f.Z)(function*(r,e){const t=at(r),o=yield Nh(t.localStore,e.query,!0),d=e.view.Xu(o);return t.isPrimaryClient&&tm(t,e.targetId,d.Yu),d}),ah.apply(this,arguments)}function J_(r,e){return im.apply(this,arguments)}function im(){return im=(0,f.Z)(function*(r,e){const t=at(r);return sd(t.localStore,e).then(o=>Du(t,o))}),im.apply(this,arguments)}function rm(r,e,t,o){return sm.apply(this,arguments)}function sm(){return sm=(0,f.Z)(function*(r,e,t,o){const d=at(r),v=yield function(x,H){const oe=at(x),fe=at(oe.mutationQueue);return oe.persistence.runTransaction("Lookup mutation documents","readonly",Oe=>fe.In(Oe,H).next(ft=>ft?oe.localDocuments.getDocuments(Oe,ft):nn.resolve(null)))}(d.localStore,e);var H;null!==v?("pending"===t?yield eh(d.remoteStore):"acknowledged"===t||"rejected"===t?(em(d,e,o||null),Jp(d,e),H=e,at(at(d.localStore).mutationQueue).En(H)):ve(),yield Du(d,v)):S("SyncEngine","Cannot apply mutation batch with id: "+e)}),sm.apply(this,arguments)}function xd(){return xd=(0,f.Z)(function*(r,e){const t=at(r);if(ud(t),dd(t),!0===e&&!0!==t.fc){const o=t.sharedClientState.getAllActiveQueryTargets(),d=yield Vl(t,o.toArray());t.fc=!0,yield Bp(t.remoteStore,!0);for(const v of d)Jd(t.remoteStore,v)}else if(!1===e&&!1!==t.fc){const o=[];let d=Promise.resolve();t.ic.forEach((v,x)=>{t.sharedClientState.isLocalQueryTarget(x)?o.push(x):d=d.then(()=>(oh(t,x),Yd(t.localStore,x,!0))),$u(t.remoteStore,x)}),yield d,yield Vl(t,o),function(v){const x=at(v);x.uc.forEach((H,oe)=>{$u(x.remoteStore,oe)}),x.cc.ls(),x.uc=new Map,x.oc=new mt(Jt.comparator)}(t),t.fc=!1,yield Bp(t.remoteStore,!1)}}),xd.apply(this,arguments)}function Vl(r,e,t){return Gu.apply(this,arguments)}function Gu(){return Gu=(0,f.Z)(function*(r,e,t){const o=at(r),d=[],v=[];for(const x of e){let H;const oe=o.ic.get(x);if(oe&&0!==oe.length){H=yield Zd(o.localStore,Pa(oe[0]));for(const fe of oe){const Oe=o.sc.get(fe),ft=yield _v(o,Oe);ft.snapshot&&v.push(ft.snapshot)}}else{const fe=yield Dp(o.localStore,x);H=yield Zd(o.localStore,fe),yield Wf(o,ef(fe),x,!1,H.resumeToken)}d.push(H)}return o.nc.zo(v),d}),Gu.apply(this,arguments)}function ef(r){return Zl(r.path,r.collectionGroup,r.orderBy,r.filters,r.limit,"F",r.startAt,r.endAt)}function tu(r){const e=at(r);return at(at(e.localStore).persistence).bi()}function om(r,e,t,o){return ld.apply(this,arguments)}function ld(){return ld=(0,f.Z)(function*(r,e,t,o){const d=at(r);if(d.fc)return void S("SyncEngine","Ignoring unexpected query state notification.");const v=d.ic.get(e);if(v&&v.length>0)switch(t){case"current":case"not-current":{const x=yield sd(d.localStore,K(v[0])),H=Jc.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Ys.EMPTY_BYTE_STRING);yield Du(d,x,H);break}case"rejected":yield Yd(d.localStore,e,!0),oh(d,e,o);break;default:ve()}}),ld.apply(this,arguments)}function lh(r,e,t){return cd.apply(this,arguments)}function cd(){return cd=(0,f.Z)(function*(r,e,t){const o=ud(r);if(o.fc){for(const d of e){if(o.ic.has(d)){S("SyncEngine","Adding an already active target "+d);continue}const v=yield Dp(o.localStore,d),x=yield Zd(o.localStore,v);yield Wf(o,ef(v),x.targetId,!1,x.resumeToken),Jd(o.remoteStore,x)}for(const d of t)o.ic.has(d)&&(yield Yd(o.localStore,d,!1).then(()=>{$u(o.remoteStore,d),oh(o,d)}).catch(ua))}}),cd.apply(this,arguments)}function ud(r){const e=at(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=yg.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=wg.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=q_.bind(null,e),e.nc.zo=Gp.bind(null,e.eventManager),e.nc.wc=Hf.bind(null,e.eventManager),e}function dd(r){const e=at(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Z_.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=bg.bind(null,e),e}class Wu{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,f.Z)(function*(){t.serializer=Qd(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return Cp(this.persistence,new Qm,e.initialUser,this.serializer)}createPersistence(e){return new qm(Mf.Fs,this.serializer)}createSharedClientState(e){return new Uh}terminate(){var e=this;return(0,f.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class hd extends Wu{constructor(e,t,o){super(),this.mc=e,this.cacheSizeBytes=t,this.forceOwnership=o,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,o=this;return(0,f.Z)(function*(){yield t().call(o,e),yield o.mc.initialize(o,e),yield dd(o.mc.syncEngine),yield eh(o.mc.remoteStore),yield o.persistence.hi(()=>(o.gcScheduler&&!o.gcScheduler.started&&o.gcScheduler.start(),o.indexBackfillerScheduler&&!o.indexBackfillerScheduler.started&&o.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return Cp(this.persistence,new Qm,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new E_(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const o=new Xa(t,this.persistence);return new ta(e.asyncQueue,o)}createPersistence(e){const t=Ip(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),o=void 0!==this.cacheSizeBytes?cn.withCacheSize(this.cacheSizeBytes):cn.DEFAULT;return new Ep(this.synchronizeTabs,t,e.clientId,o,e.asyncQueue,og(),Vh(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new Uh}}class Ad extends hd{constructor(e,t){super(e,t,!1),this.mc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,o=this;return(0,f.Z)(function*(){yield t().call(o,e);const d=o.mc.syncEngine;o.sharedClientState instanceof kf&&(o.sharedClientState.syncEngine={$r:rm.bind(null,d),Mr:om.bind(null,d),Fr:lh.bind(null,d),bi:tu.bind(null,d),Or:J_.bind(null,d)},yield o.sharedClientState.start()),yield o.persistence.hi(function(){var v=(0,f.Z)(function*(x){yield function Su(r,e){return xd.apply(this,arguments)}(o.mc.syncEngine,x),o.gcScheduler&&(x&&!o.gcScheduler.started?o.gcScheduler.start():x||o.gcScheduler.stop()),o.indexBackfillerScheduler&&(x&&!o.indexBackfillerScheduler.started?o.indexBackfillerScheduler.start():x||o.indexBackfillerScheduler.stop())});return function(x){return v.apply(this,arguments)}}())})()}createSharedClientState(e){const t=og();if(!kf.D(t))throw new k(Ke.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const o=Ip(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new kf(t,e.asyncQueue,o,e.clientId,e.initialUser)}}class Md{initialize(e,t){var o=this;return(0,f.Z)(function*(){o.localStore||(o.localStore=e.localStore,o.sharedClientState=e.sharedClientState,o.datastore=o.createDatastore(t),o.remoteStore=o.createRemoteStore(t),o.eventManager=o.createEventManager(t),o.syncEngine=o.createSyncEngine(t,!e.synchronizeTabs),o.sharedClientState.onlineStateHandler=d=>vg(o.syncEngine,d,1),o.remoteStore.remoteSyncer.handleCredentialChange=X_.bind(null,o.syncEngine),yield Bp(o.remoteStore,o.syncEngine.isPrimaryClient))})()}createEventManager(e){return new $_}createDatastore(e){const t=Qd(e.databaseInfo.databaseId),o=new sg(e.databaseInfo);return new mv(e.authCredentials,e.appCheckCredentials,o,t)}createRemoteStore(e){return t=this.localStore,o=this.datastore,d=e.asyncQueue,v=H=>vg(this.syncEngine,H,0),x=Mp.D()?new Mp:new P_,new ag(t,o,d,v,x);var t,o,d,v,x}createSyncEngine(e,t){return function(o,d,v,x,H,oe,fe){const Oe=new Qh(o,d,v,x,H,oe);return fe&&(Oe.fc=!0),Oe}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,f.Z)(function*(t){const o=at(t);S("RemoteStore","RemoteStore shutting down."),o.du.add(5),yield zu(o),o._u.shutdown(),o.mu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function am(r,e=10240){let t=0;return{read:()=>(0,f.Z)(function*(){if(t<r.byteLength){const o={value:r.slice(t,t+e),done:!1};return t+=e,o}return{done:!0}})(),cancel:()=>(0,f.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class tf{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.gc(this.observer.next,e)}error(e){this.observer.error?this.gc(this.observer.error,e):N("Uncaught Error in snapshot listener:",e.toString())}yc(){this.muted=!0}gc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class Cg{constructor(e,t){this.Ic=e,this.serializer=t,this.metadata=new te,this.buffer=new Uint8Array,this.Tc=new TextDecoder("utf-8"),this.Ec().then(o=>{o&&o.ku()?this.metadata.resolve(o.Nu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(o?.Nu)}`))},o=>this.metadata.reject(o))}close(){return this.Ic.cancel()}getMetadata(){var e=this;return(0,f.Z)(function*(){return e.metadata.promise})()}_c(){var e=this;return(0,f.Z)(function*(){return yield e.getMetadata(),e.Ec()})()}Ec(){var e=this;return(0,f.Z)(function*(){const t=yield e.Ac();if(null===t)return null;const o=e.Tc.decode(t),d=Number(o);isNaN(d)&&e.Rc(`length string (${o}) is not valid number`);const v=yield e.vc(d);return new gv(JSON.parse(v),t.length+d)})()}bc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Ac(){var e=this;return(0,f.Z)(function*(){for(;e.bc()<0&&!(yield e.Pc()););if(0===e.buffer.length)return null;const t=e.bc();t<0&&e.Rc("Reached the end of bundle when a length string is expected.");const o=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),o})()}vc(e){var t=this;return(0,f.Z)(function*(){for(;t.buffer.length<e;)(yield t.Pc())&&t.Rc("Reached the end of bundle when more is expected.");const o=t.Tc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),o})()}Rc(e){throw this.Ic.cancel(),new Error(`Invalid bundle format: ${e}`)}Pc(){var e=this;return(0,f.Z)(function*(){const t=yield e.Ic.read();if(!t.done){const o=new Uint8Array(e.buffer.length+t.value.length);o.set(e.buffer),o.set(t.value,e.buffer.length),e.buffer=o}return t.done})()}}class Tg{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,f.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new k(Ke.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const o=yield(d=(0,f.Z)(function*(v,x){const H=at(v),oe=ki(H.serializer)+"/documents",fe={documents:x.map(yn=>hn(H.serializer,yn))},Oe=yield H.fo("BatchGetDocuments",oe,fe,x.length),ft=new Map;Oe.forEach(yn=>{const Vn=function Ud(r,e){return"found"in e?function(t,o){$e(!!o.found);const d=Fn(t,o.found.name),v=le(o.found.updateTime),x=o.found.createTime?le(o.found.createTime):qn.min(),H=new Uo({mapValue:{fields:o.found.fields}});return $s.newFoundDocument(d,v,x,H)}(r,e):"missing"in e?function(t,o){$e(!!o.missing),$e(!!o.readTime);const d=Fn(t,o.missing),v=le(o.readTime);return $s.newNoDocument(d,v)}(r,e):ve()}(H.serializer,yn);ft.set(Vn.key.toString(),Vn)});const Wt=[];return x.forEach(yn=>{const Vn=ft.get(yn.toString());$e(!!Vn),Wt.push(Vn)}),Wt}),function(v,x){return d.apply(this,arguments)})(t.datastore,e);var d;return o.forEach(d=>t.recordVersion(d)),o})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(o){this.lastWriteError=o}this.writtenDocs.add(e.toString())}delete(e){this.write(new tc(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,f.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var o;e.mutations.forEach(o=>{t.delete(o.key.toString())}),t.forEach((o,d)=>{const v=Jt.fromPath(d);e.mutations.push(new ru(v,e.precondition(v)))}),yield(o=(0,f.Z)(function*(d,v){const x=at(d),H=ki(x.serializer)+"/documents",oe={writes:v.map(fe=>Pu(x.serializer,fe))};yield x.co("Commit",H,oe)}),function(d,v){return o.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ve();t=qn.min()}const o=this.readVersions.get(e.key.toString());if(o){if(!t.isEqual(o))throw new k(Ke.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(qn.min())?jn.exists(!1):jn.updateTime(t):jn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(qn.min()))throw new k(Ke.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return jn.updateTime(t)}return jn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Dg{constructor(e,t,o,d,v){this.asyncQueue=e,this.datastore=t,this.options=o,this.updateFunction=d,this.deferred=v,this.Vc=o.maxAttempts,this.Co=new Bh(this.asyncQueue,"transaction_retry")}run(){this.Vc-=1,this.Sc()}Sc(){var e=this;this.Co.Ao((0,f.Z)(function*(){const t=new Tg(e.datastore),o=e.Dc(t);o&&o.then(d=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(d)}).catch(v=>{e.Cc(v)}))}).catch(d=>{e.Cc(d)})}))}Dc(e){try{const t=this.updateFunction(e);return!Va(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Cc(e){this.Vc>0&&this.xc(e)?(this.Vc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Sc(),Promise.resolve()))):this.deferred.reject(e)}xc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!yd(t)}return!1}}class Sg{constructor(e,t,o,d){var v=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=o,this.databaseInfo=d,this.user=ls.UNAUTHENTICATED,this.clientId=Nr.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(o,function(){var x=(0,f.Z)(function*(H){S("FirestoreClient","Received user=",H.uid),yield v.authCredentialListener(H),v.user=H});return function(H){return x.apply(this,arguments)}}()),this.appCheckCredentials.start(o,x=>(S("FirestoreClient","Received new app check token=",x),this.appCheckCredentialListener(x,this.user)))}getConfiguration(){var e=this;return(0,f.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new k(Ke.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new te;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,f.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(o){const d=nh(o,"Failed to shutdown persistence");t.reject(d)}})),t.promise}}function nf(r,e){return qf.apply(this,arguments)}function qf(){return qf=(0,f.Z)(function*(r,e){r.asyncQueue.verifyOperationInProgress(),S("FirestoreClient","Initializing OfflineComponentProvider");const t=yield r.getConfiguration();yield e.initialize(t);let o=t.initialUser;r.setCredentialChangeListener(function(){var d=(0,f.Z)(function*(v){o.isEqual(v)||(yield Tp(e.localStore,v),o=v)});return function(v){return d.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>r.terminate()),r._offlineComponents=e}),qf.apply(this,arguments)}function lm(r,e){return cm.apply(this,arguments)}function cm(){return cm=(0,f.Z)(function*(r,e){r.asyncQueue.verifyOperationInProgress();const t=yield dm(r);S("FirestoreClient","Initializing OnlineComponentProvider");const o=yield r.getConfiguration();yield e.initialize(t,o),r.setCredentialChangeListener(d=>pg(e.remoteStore,d)),r.setAppCheckTokenChangeListener((d,v)=>pg(e.remoteStore,v)),r._onlineComponents=e}),cm.apply(this,arguments)}function um(r){return"FirebaseError"===r.name?r.code===Ke.FAILED_PRECONDITION||r.code===Ke.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||22===r.code||20===r.code||11===r.code}function dm(r){return Zf.apply(this,arguments)}function Zf(){return Zf=(0,f.Z)(function*(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){S("FirestoreClient","Using user provided OfflineComponentProvider");try{yield nf(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!um(t))throw t;J("Error using user provided cache. Falling back to memory cache: "+t),yield nf(r,new Wu)}}else S("FirestoreClient","Using default OfflineComponentProvider"),yield nf(r,new Wu);return r._offlineComponents}),Zf.apply(this,arguments)}function uh(r){return rf.apply(this,arguments)}function rf(){return rf=(0,f.Z)(function*(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(S("FirestoreClient","Using user provided OnlineComponentProvider"),yield lm(r,r._uninitializedComponentsProvider._online)):(S("FirestoreClient","Using default OnlineComponentProvider"),yield lm(r,new Md))),r._onlineComponents}),rf.apply(this,arguments)}function xg(r){return dm(r).then(e=>e.persistence)}function Rd(r){return dm(r).then(e=>e.localStore)}function dh(r){return uh(r).then(e=>e.remoteStore)}function sf(r){return uh(r).then(e=>e.syncEngine)}function fd(r){return af.apply(this,arguments)}function af(){return af=(0,f.Z)(function*(r){const e=yield uh(r),t=e.eventManager;return t.onListen=G_.bind(null,e.syncEngine),t.onUnlisten=W_.bind(null,e.syncEngine),t}),af.apply(this,arguments)}function fm(r,e,t={}){const o=new te;return r.asyncQueue.enqueueAndForget((0,f.Z)(function*(){return function(d,v,x,H,oe){const fe=new tf({next:ft=>{v.enqueueAndForget(()=>$p(d,Oe));const Wt=ft.docs.has(x);!Wt&&ft.fromCache?oe.reject(new k(Ke.UNAVAILABLE,"Failed to get document because the client is offline.")):Wt&&ft.fromCache&&H&&"server"===H.source?oe.reject(new k(Ke.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):oe.resolve(ft)},error:ft=>oe.reject(ft)}),Oe=new Yh(al(x.path),fe,{includeMetadataChanges:!0,xu:!0});return Zh(d,Oe)}(yield fd(r),r.asyncQueue,e,t,o)})),o.promise}function Yf(r,e,t={}){const o=new te;return r.asyncQueue.enqueueAndForget((0,f.Z)(function*(){return function(d,v,x,H,oe){const fe=new tf({next:ft=>{v.enqueueAndForget(()=>$p(d,Oe)),ft.fromCache&&"server"===H.source?oe.reject(new k(Ke.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):oe.resolve(ft)},error:ft=>oe.reject(ft)}),Oe=new Yh(x,fe,{includeMetadataChanges:!0,xu:!0});return Zh(d,Oe)}(yield fd(r),r.asyncQueue,e,t,o)})),o.promise}const pm=new Map;function Qf(r,e,t){if(!t)throw new k(Ke.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function Fg(r,e,t,o){if(!0===e&&!0===o)throw new k(Ke.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function mm(r){if(!Jt.isDocumentKey(r))throw new k(Ke.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function gm(r){if(Jt.isDocumentKey(r))throw new k(Ke.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function hh(r){if(void 0===r)return"undefined";if(null===r)return"null";if("string"==typeof r)return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if("number"==typeof r||"boolean"==typeof r)return""+r;if("object"==typeof r){if(r instanceof Array)return"an array";{const e=(t=r).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof r?"a function":ve()}function xs(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new k(Ke.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=hh(r);throw new k(Ke.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}function _m(r,e){if(e<=0)throw new k(Ke.INVALID_ARGUMENT,`Function ${r}() requires a positive number, but it was: ${e}.`)}class ym{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new k(Ke.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new k(Ke.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,Fg("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class fh{constructor(e,t,o,d){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=o,this._app=d,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ym({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new k(Ke.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new k(Ke.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ym(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new ge;switch(t.type){case"firstParty":return new An(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new k(Ke.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=pm.get(e);t&&(S("ComponentProvider","Removing Datastore"),pm.delete(e),t.terminate())}(this),Promise.resolve()}}function vm(r,e,t,o={}){var d;const v=(r=xs(r,fh))._getSettings();if("firestore.googleapis.com"!==v.host&&v.host!==e&&J("Host has been set in both settings() and useEmulator(), emulator host will be used"),r._setSettings(Object.assign(Object.assign({},v),{host:`${e}:${t}`,ssl:!1})),o.mockUserToken){let x,H;if("string"==typeof o.mockUserToken)x=o.mockUserToken,H=ls.MOCK_USER;else{x=(0,ke.Sg)(o.mockUserToken,null===(d=r._app)||void 0===d?void 0:d.options.projectId);const oe=o.mockUserToken.sub||o.mockUserToken.user_id;if(!oe)throw new k(Ke.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");H=new ls(oe)}r._authCredentials=new Ve(new G(x,H))}}class ja{constructor(e,t,o){this.converter=t,this._key=o,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new du(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ja(this.firestore,e,this._key)}}class xl{constructor(e,t,o){this.converter=t,this._query=o,this.type="query",this.firestore=e}withConverter(e){return new xl(this.firestore,e,this._query)}}class du extends xl{constructor(e,t,o){super(e,t,al(o)),this._path=o,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ja(this.firestore,null,new Jt(e))}withConverter(e){return new du(this.firestore,e,this._path)}}function Lg(r,e,...t){if(r=(0,ke.m9)(r),Qf("collection","path",e),r instanceof fh){const o=Ki.fromString(e,...t);return gm(o),new du(r,null,o)}{if(!(r instanceof ja||r instanceof du))throw new k(Ke.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=r._path.child(Ki.fromString(e,...t));return gm(o),new du(r.firestore,null,o)}}function Xf(r,e){if(r=xs(r,fh),Qf("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new k(Ke.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new xl(r,null,(t=e,new Ko(Ki.emptyPath(),t)));var t}function Ku(r,e,...t){if(r=(0,ke.m9)(r),1===arguments.length&&(e=Nr.A()),Qf("doc","path",e),r instanceof fh){const o=Ki.fromString(e,...t);return mm(o),new ja(r,null,new Jt(o))}{if(!(r instanceof ja||r instanceof du))throw new k(Ke.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=r._path.child(Ki.fromString(e,...t));return mm(o),new ja(r.firestore,r instanceof du?r.converter:null,new Jt(o))}}function ty(r,e){return r=(0,ke.m9)(r),e=(0,ke.m9)(e),(r instanceof ja||r instanceof du)&&(e instanceof ja||e instanceof du)&&r.firestore===e.firestore&&r.path===e.path&&r.converter===e.converter}function bm(r,e){return r=(0,ke.m9)(r),e=(0,ke.m9)(e),r instanceof xl&&e instanceof xl&&r.firestore===e.firestore&&Ql(r._query,e._query)&&r.converter===e.converter}class Em{constructor(){this.Nc=Promise.resolve(),this.kc=[],this.Oc=!1,this.$c=[],this.Mc=null,this.Fc=!1,this.Bc=!1,this.Lc=[],this.Co=new Bh(this,"async_queue_retry"),this.qc=()=>{const t=Vh();t&&S("AsyncQueue","Visibility state changed to "+t.visibilityState),this.Co.vo()};const e=Vh();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.qc)}get isShuttingDown(){return this.Oc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Uc(),this.Kc(e)}enterRestrictedMode(e){if(!this.Oc){this.Oc=!0,this.Bc=e||!1;const t=Vh();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.qc)}}enqueue(e){if(this.Uc(),this.Oc)return new Promise(()=>{});const t=new te;return this.Kc(()=>this.Oc&&this.Bc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.kc.push(e),this.Gc()))}Gc(){var e=this;return(0,f.Z)(function*(){if(0!==e.kc.length){try{yield e.kc[0](),e.kc.shift(),e.Co.reset()}catch(t){if(!Hr(t))throw t;S("AsyncQueue","Operation failed with retryable error: "+t)}e.kc.length>0&&e.Co.Ao(()=>e.Gc())}})()}Kc(e){const t=this.Nc.then(()=>(this.Fc=!0,e().catch(o=>{throw this.Mc=o,this.Fc=!1,N("INTERNAL UNHANDLED ERROR: ",function(v){let x=v.message||"";return v.stack&&(x=v.stack.includes(v.message)?v.stack:v.message+"\n"+v.stack),x}(o)),o}).then(o=>(this.Fc=!1,o))));return this.Nc=t,t}enqueueAfterDelay(e,t,o){this.Uc(),this.Lc.indexOf(e)>-1&&(t=0);const d=qh.createAndSchedule(this,e,t,o,v=>this.Qc(v));return this.$c.push(d),d}Uc(){this.Mc&&ve()}verifyOperationInProgress(){}zc(){var e=this;return(0,f.Z)(function*(){let t;do{t=e.Nc,yield t}while(t!==e.Nc)})()}jc(e){for(const t of this.$c)if(t.timerId===e)return!0;return!1}Wc(e){return this.zc().then(()=>{this.$c.sort((t,o)=>t.targetTimeMs-o.targetTimeMs);for(const t of this.$c)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.zc()})}Hc(e){this.Lc.push(e)}Qc(e){const t=this.$c.indexOf(e);this.$c.splice(t,1)}}function qu(r){return function(e,t){if("object"!=typeof e||null===e)return!1;const o=e;for(const d of["next","error","complete"])if(d in o&&"function"==typeof o[d])return!0;return!1}(r)}class Im{constructor(){this._progressObserver={},this._taskCompletionResolver=new te,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,o){this._progressObserver={next:e,error:t,complete:o}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}const ny=-1;class oa extends fh{constructor(e,t,o,d){super(e,t,o,d),this.type="firestore",this._queue=new Em,this._persistenceKey=d?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||Ug(this),this._firestoreClient.terminate()}}function yv(r,e){const t="object"==typeof r?r:(0,_.getApp)(),o="string"==typeof r?r:e||"(default)",d=(0,_._getProvider)(t,"firestore").getImmediate({identifier:o});if(!d._initialized){const v=(0,ke.P0)("firestore");v&&vm(d,...v)}return d}function nl(r){return r._firestoreClient||Ug(r),r._firestoreClient.verifyNotTerminated(),r._firestoreClient}function Ug(r){var e,t,o;const d=r._freezeSettings(),v=(H=(null===(e=r._app)||void 0===e?void 0:e.options.appId)||"",new Z(r._databaseId,H,r._persistenceKey,(fe=d).host,fe.ssl,fe.experimentalForceLongPolling,fe.experimentalAutoDetectLongPolling,fe.useFetchStreams));var H,fe;r._firestoreClient=new Sg(r._authCredentials,r._appCheckCredentials,r._queue,v),null!==(t=d.cache)&&void 0!==t&&t._offlineComponentProvider&&null!==(o=d.cache)&&void 0!==o&&o._onlineComponentProvider&&(r._firestoreClient._uninitializedComponentsProvider={_offlineKind:d.cache.kind,_offline:d.cache._offlineComponentProvider,_online:d.cache._onlineComponentProvider})}function Vg(r,e){Pd(r=xs(r,oa));const t=nl(r);if(t._uninitializedComponentsProvider)throw new k(Ke.FAILED_PRECONDITION,"SDK cache is already specified.");J("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const o=r._freezeSettings(),d=new Md;return cl(t,d,new hd(d,o.cacheSizeBytes,e?.forceOwnership))}function iy(r){Pd(r=xs(r,oa));const e=nl(r);if(e._uninitializedComponentsProvider)throw new k(Ke.FAILED_PRECONDITION,"SDK cache is already specified.");J("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=r._freezeSettings(),o=new Md;return cl(e,o,new Ad(o,t.cacheSizeBytes))}function cl(r,e,t){const o=new te;return r.asyncQueue.enqueue((0,f.Z)(function*(){try{yield nf(r,t),yield lm(r,e),o.resolve()}catch(d){const v=d;if(!um(v))throw v;J("Error enabling indexeddb cache. Falling back to memory cache: "+v),o.reject(v)}})).then(()=>o.promise)}function Bg(r){if(r._initialized&&!r._terminated)throw new k(Ke.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new te;return r._queue.enqueueAndForgetEvenWhileRestricted((0,f.Z)(function*(){try{yield(t=(0,f.Z)(function*(o){if(!Lo.D())return Promise.resolve();const d=o+"main";yield Lo.delete(d)}),function(o){return t.apply(this,arguments)})(Ip(r._databaseId,r._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}function ry(r){return function(e){const t=new te;return e.asyncQueue.enqueueAndForget((0,f.Z)(function*(){return function Y_(r,e){return Jh.apply(this,arguments)}(yield sf(e),t)})),t.promise}(nl(r=xs(r,oa)))}function sy(r){return function Mg(r){return r.asyncQueue.enqueue((0,f.Z)(function*(){const e=yield xg(r),t=yield dh(r);return e.setNetworkEnabled(!0),function(o){const d=at(o);return d.du.delete(0),Hh(d)}(t)}))}(nl(r=xs(r,oa)))}function Hg(r){return function Rg(r){return r.asyncQueue.enqueue((0,f.Z)(function*(){const e=yield xg(r),t=yield dh(r);return e.setNetworkEnabled(!1),(o=(0,f.Z)(function*(d){const v=at(d);v.du.add(0),yield zu(v),v.mu.set("Offline")}),function(d){return o.apply(this,arguments)})(t);var o}))}(nl(r=xs(r,oa)))}function jg(r,e){const t=nl(r=xs(r,oa)),o=new Im;return function ey(r,e,t,o){const d=function(v,x){let H;return H="string"==typeof v?(new TextEncoder).encode(v):v,oe=function(oe,fe){if(oe instanceof Uint8Array)return am(oe,void 0);if(oe instanceof ArrayBuffer)return am(new Uint8Array(oe),void 0);if(oe instanceof ReadableStream)return oe.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(H),new Cg(oe,x);var oe}(t,Qd(e));r.asyncQueue.enqueueAndForget((0,f.Z)(function*(){!function ch(r,e,t){const o=at(r);var d;(d=(0,f.Z)(function*(v,x,H){try{const oe=yield x.getMetadata();if(yield function(Wt,yn){const Vn=at(Wt),mi=le(yn.createTime);return Vn.persistence.runTransaction("hasNewerBundle","readonly",qi=>Vn.xs.getBundleMetadata(qi,yn.id)).then(qi=>!!qi&&qi.createTime.compareTo(mi)>=0)}(v.localStore,oe))return yield x.close(),H._completeWith({taskState:"Success",documentsLoaded:(Wt=oe).totalDocuments,bytesLoaded:Wt.totalBytes,totalDocuments:Wt.totalDocuments,totalBytes:Wt.totalBytes}),Promise.resolve(new Set);H._updateProgress(Kp(oe));const fe=new gg(oe,v.localStore,x.serializer);let Oe=yield x._c();for(;Oe;){const Wt=yield fe.$u(Oe);Wt&&H._updateProgress(Wt),Oe=yield x._c()}const ft=yield fe.complete();return yield Du(v,ft.Bu,void 0),yield function(Wt,yn){const Vn=at(Wt);return Vn.persistence.runTransaction("Save bundle","readwrite",mi=>Vn.xs.saveBundleMetadata(mi,yn))}(v.localStore,oe),H._completeWith(ft.progress),Promise.resolve(ft.Fu)}catch(oe){return J("SyncEngine",`Loading bundle failed with ${oe}`),H._failWith(oe),Promise.resolve(new Set)}var Wt}),function(v,x,H){return d.apply(this,arguments)})(o,e,t).then(d=>{o.sharedClientState.notifyBundleLoaded(d)})}(yield sf(r),d,o)}))}(t,r._databaseId,e,o),o}function zg(r,e){return function kg(r,e){return r.asyncQueue.enqueue((0,f.Z)(function*(){return function(t,o){const d=at(t);return d.persistence.runTransaction("Get named query","readonly",v=>d.xs.getNamedQuery(v,o))}(yield Rd(r),e)}))}(nl(r=xs(r,oa)),e).then(t=>t?new xl(r,null,t.query):null)}function Pd(r){if(r._initialized||r._terminated)throw new k(Ke.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Zu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Zu(Ys.fromBase64String(e))}catch(t){throw new k(Ke.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Zu(Ys.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class pd{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new k(Ke.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ts(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class ph{constructor(e){this._methodName=e}}class mh{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new k(Ke.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new k(Ke.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Rn(this._lat,e._lat)||Rn(this._long,e._long)}}const wm=/^__.*__$/;class xu{constructor(e,t,o){this.data=e,this.fieldMask=t,this.fieldTransforms=o}toMutation(e,t){return null!==this.fieldMask?new Oa(e,this.data,this.fieldMask,t,this.fieldTransforms):new Oc(e,this.data,t,this.fieldTransforms)}}class $g{constructor(e,t,o){this.data=e,this.fieldMask=t,this.fieldTransforms=o}toMutation(e,t){return new Oa(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Gg(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ve()}}class Lc{constructor(e,t,o,d,v,x){this.settings=e,this.databaseId=t,this.serializer=o,this.ignoreUndefinedProperties=d,void 0===v&&this.Jc(),this.fieldTransforms=v||[],this.fieldMask=x||[]}get path(){return this.settings.path}get Yc(){return this.settings.Yc}Zc(e){return new Lc(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Xc(e){var t;const o=null===(t=this.path)||void 0===t?void 0:t.child(e),d=this.Zc({path:o,ta:!1});return d.ea(e),d}na(e){var t;const o=null===(t=this.path)||void 0===t?void 0:t.child(e),d=this.Zc({path:o,ta:!1});return d.Jc(),d}sa(e){return this.Zc({path:void 0,ta:!0})}ia(e){return yh(e,this.settings.methodName,this.settings.ra||!1,this.path,this.settings.oa)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Jc(){if(this.path)for(let e=0;e<this.path.length;e++)this.ea(this.path.get(e))}ea(e){if(0===e.length)throw this.ia("Document fields must not be empty");if(Gg(this.Yc)&&wm.test(e))throw this.ia('Document fields cannot begin and end with "__"')}}class hu{constructor(e,t,o){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=o||Qd(e)}ua(e,t,o,d=!1){return new Lc({Yc:e,methodName:t,oa:o,path:ts.emptyPath(),ta:!1,ra:d},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Bl(r){const e=r._freezeSettings(),t=Qd(r._databaseId);return new hu(r._databaseId,!!e.ignoreUndefinedProperties,t)}function cf(r,e,t,o,d,v={}){const x=r.ua(v.merge||v.mergeFields?2:0,e,t,d);_h("Data must be an object, but it was:",x,o);const H=xm(o,x);let oe,fe;if(v.merge)oe=new ur(x.fieldMask),fe=x.fieldTransforms;else if(v.mergeFields){const Oe=[];for(const ft of v.mergeFields){const Wt=uf(e,ft,t);if(!x.contains(Wt))throw new k(Ke.INVALID_ARGUMENT,`Field '${Wt}' is specified in your field mask but missing from your input data.`);hf(Oe,Wt)||Oe.push(Wt)}oe=new ur(Oe),fe=x.fieldTransforms.filter(ft=>oe.covers(ft.field))}else oe=null,fe=x.fieldTransforms;return new xu(new Uo(H),oe,fe)}class gh extends ph{_toFieldTransform(e){if(2!==e.Yc)throw e.ia(1===e.Yc?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof gh}}function Wg(r,e,t){return new Lc({Yc:3,oa:e.settings.oa,methodName:r._methodName,ta:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Cm extends ph{_toFieldTransform(e){return new Qt(e.path,new yl)}isEqual(e){return e instanceof Cm}}class ly extends ph{constructor(e,t){super(e),this.ca=t}_toFieldTransform(e){const t=Wg(this,e,!0),o=this.ca.map(v=>kd(v,t)),d=new U(o);return new Qt(e.path,d)}isEqual(e){return this===e}}class cy extends ph{constructor(e,t){super(e),this.ca=t}_toFieldTransform(e){const t=Wg(this,e,!0),o=this.ca.map(v=>kd(v,t)),d=new D(o);return new Qt(e.path,d)}isEqual(e){return this===e}}class Tm extends ph{constructor(e,t){super(e),this.aa=t}_toFieldTransform(e){const t=new he(e.serializer,_l(e.serializer,this.aa));return new Qt(e.path,t)}isEqual(e){return this===e}}function Od(r,e,t,o){const d=r.ua(1,e,t);_h("Data must be an object, but it was:",d,o);const v=[],x=Uo.empty();ce(o,(oe,fe)=>{const Oe=df(e,oe,t);fe=(0,ke.m9)(fe);const ft=d.na(Oe);if(fe instanceof gh)v.push(Oe);else{const Wt=kd(fe,ft);null!=Wt&&(v.push(Oe),x.set(Oe,Wt))}});const H=new ur(v);return new $g(x,H,d.fieldTransforms)}function Dm(r,e,t,o,d,v){const x=r.ua(1,e,t),H=[uf(e,o,t)],oe=[d];if(v.length%2!=0)throw new k(Ke.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let Wt=0;Wt<v.length;Wt+=2)H.push(uf(e,v[Wt])),oe.push(v[Wt+1]);const fe=[],Oe=Uo.empty();for(let Wt=H.length-1;Wt>=0;--Wt)if(!hf(fe,H[Wt])){const yn=H[Wt];let Vn=oe[Wt];Vn=(0,ke.m9)(Vn);const mi=x.na(yn);if(Vn instanceof gh)fe.push(yn);else{const qi=kd(Vn,mi);null!=qi&&(fe.push(yn),Oe.set(yn,qi))}}const ft=new ur(fe);return new $g(Oe,ft,x.fieldTransforms)}function Sm(r,e,t,o=!1){return kd(t,r.ua(o?4:3,e))}function kd(r,e){if(Am(r=(0,ke.m9)(r)))return _h("Unsupported field value:",e,r),xm(r,e);if(r instanceof ph)return function(t,o){if(!Gg(o.Yc))throw o.ia(`${t._methodName}() can only be used with update() and set()`);if(!o.path)throw o.ia(`${t._methodName}() is not currently supported inside arrays`);const d=t._toFieldTransform(o);d&&o.fieldTransforms.push(d)}(r,e),null;if(void 0===r&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.ta&&4!==e.Yc)throw e.ia("Nested arrays are not supported");return function(t,o){const d=[];let v=0;for(const x of t){let H=kd(x,o.sa(v));null==H&&(H={nullValue:"NULL_VALUE"}),d.push(H),v++}return{arrayValue:{values:d}}}(r,e)}return function(t,o){if(null===(t=(0,ke.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return _l(o.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const d=ni.fromDate(t);return{timestampValue:y(o.serializer,d)}}if(t instanceof ni){const d=new ni(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:y(o.serializer,d)}}if(t instanceof mh)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Zu)return{bytesValue:E(o.serializer,t._byteString)};if(t instanceof ja){const d=o.databaseId,v=t.firestore._databaseId;if(!v.isEqual(d))throw o.ia(`Document reference is for database ${v.projectId}/${v.database} but should be for database ${d.projectId}/${d.database}`);return{referenceValue:Se(t.firestore._databaseId||o.databaseId,t._key.path)}}throw o.ia(`Unsupported field value: ${hh(t)}`)}(r,e)}function xm(r,e){const t={};return We(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ce(r,(o,d)=>{const v=kd(d,e.Xc(o));null!=v&&(t[o]=v)}),{mapValue:{fields:t}}}function Am(r){return!("object"!=typeof r||null===r||r instanceof Array||r instanceof Date||r instanceof ni||r instanceof mh||r instanceof Zu||r instanceof ja||r instanceof ph)}function _h(r,e,t){if(!Am(t)||"object"!=typeof(o=t)||null===o||Object.getPrototypeOf(o)!==Object.prototype&&null!==Object.getPrototypeOf(o)){const o=hh(t);throw e.ia("an object"===o?r+" a custom object":r+" "+o)}var o}function uf(r,e,t){if((e=(0,ke.m9)(e))instanceof pd)return e._internalPath;if("string"==typeof e)return df(r,e);throw yh("Field path arguments must be of type string or ",r,!1,void 0,t)}const Kg=new RegExp("[~\\*/\\[\\]]");function df(r,e,t){if(e.search(Kg)>=0)throw yh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new pd(...e.split("."))._internalPath}catch{throw yh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function yh(r,e,t,o,d){const v=o&&!o.isEmpty(),x=void 0!==d;let H=`Function ${e}() called with invalid data`;t&&(H+=" (via `toFirestore()`)"),H+=". ";let oe="";return(v||x)&&(oe+=" (found",v&&(oe+=` in field ${o}`),x&&(oe+=` in document ${d}`),oe+=")"),new k(Ke.INVALID_ARGUMENT,H+r+oe)}function hf(r,e){return r.some(t=>t.isEqual(e))}class vh{constructor(e,t,o,d,v){this._firestore=e,this._userDataWriter=t,this._key=o,this._document=d,this._converter=v}get id(){return this._key.path.lastSegment()}get ref(){return new ja(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new qg(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(ff("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class qg extends vh{data(){return super.data()}}function ff(r,e){return"string"==typeof e?df(r,e):e instanceof pd?e._internalPath:e._delegate._internalPath}function Mm(r){if("L"===r.limitType&&0===r.explicitOrderBy.length)throw new k(Ke.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Jf{}class bh extends Jf{}function Zg(r,e,...t){let o=[];e instanceof Jf&&o.push(e),o=o.concat(t),function(d){const v=d.filter(H=>H instanceof Ih).length,x=d.filter(H=>H instanceof Eh).length;if(v>1||v>0&&x>0)throw new k(Ke.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(o);for(const d of o)r=d._apply(r);return r}class Eh extends bh{constructor(e,t,o){super(),this._field=e,this._op=t,this._value=o,this.type="where"}static _create(e,t,o){return new Eh(e,t,o)}_apply(e){const t=this._parse(e);return Pm(e._query,t),new xl(e.firestore,e.converter,Kc(e._query,t))}_parse(e){const t=Bl(e.firestore);return function(d,v,x,H,oe,fe,Oe){let ft;if(oe.isKeyField()){if("array-contains"===fe||"array-contains-any"===fe)throw new k(Ke.INVALID_ARGUMENT,`Invalid Query. You can't perform '${fe}' queries on documentId().`);if("in"===fe||"not-in"===fe){Xg(Oe,fe);const Wt=[];for(const yn of Oe)Wt.push(Qg(H,d,yn));ft={arrayValue:{values:Wt}}}else ft=Qg(H,d,Oe)}else"in"!==fe&&"not-in"!==fe&&"array-contains-any"!==fe||Xg(Oe,fe),ft=Sm(x,"where",Oe,"in"===fe||"not-in"===fe);return Wr.create(oe,fe,ft)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}function uy(r,e,t){const o=e,d=ff("where",r);return Eh._create(d,o,t)}class Ih extends Jf{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Ih(e,t)}_parse(e){const t=this._queryConstraints.map(o=>o._parse(e)).filter(o=>o.getFilters().length>0);return 1===t.length?t[0]:Is.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(o,d){let v=o;const x=d.getFlattenedFilters();for(const H of x)Pm(v,H),v=Kc(v,H)}(e._query,t),new xl(e.firestore,e.converter,Kc(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Rm extends bh{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Rm(e,t)}_apply(e){const t=function(o,d,v){if(null!==o.startAt)throw new k(Ke.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==o.endAt)throw new k(Ke.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const x=new ol(d,v);return function(H,oe){if(null===Yl(H)){const fe=Pl(H);null!==fe&&Om(0,fe,oe.field)}}(o,x),x}(e._query,this._field,this._direction);return new xl(e.firestore,e.converter,function(o,d){const v=o.explicitOrderBy.concat([d]);return new Ko(o.path,o.collectionGroup,v,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)}(e._query,t))}}function dy(r,e="asc"){const t=e,o=ff("orderBy",r);return Rm._create(o,t)}class ep extends bh{constructor(e,t,o){super(),this.type=e,this._limit=t,this._limitType=o}static _create(e,t,o){return new ep(e,t,o)}_apply(e){return new xl(e.firestore,e.converter,qc(e._query,this._limit,this._limitType))}}function hy(r){return _m("limit",r),ep._create("limit",r,"F")}function fy(r){return _m("limitToLast",r),ep._create("limitToLast",r,"L")}class tp extends bh{constructor(e,t,o){super(),this.type=e,this._docOrFields=t,this._inclusive=o}static _create(e,t,o){return new tp(e,t,o)}_apply(e){const t=Yg(e,this.type,this._docOrFields,this._inclusive);return new xl(e.firestore,e.converter,(d=t,new Ko((o=e._query).path,o.collectionGroup,o.explicitOrderBy.slice(),o.filters.slice(),o.limit,o.limitType,d,o.endAt)));var o,d}}function py(...r){return tp._create("startAt",r,!0)}function my(...r){return tp._create("startAfter",r,!1)}class np extends bh{constructor(e,t,o){super(),this.type=e,this._docOrFields=t,this._inclusive=o}static _create(e,t,o){return new np(e,t,o)}_apply(e){const t=Yg(e,this.type,this._docOrFields,this._inclusive);return new xl(e.firestore,e.converter,(d=t,new Ko((o=e._query).path,o.collectionGroup,o.explicitOrderBy.slice(),o.filters.slice(),o.limit,o.limitType,o.startAt,d)));var o,d}}function gy(...r){return np._create("endBefore",r,!1)}function _y(...r){return np._create("endAt",r,!0)}function Yg(r,e,t,o){if(t[0]=(0,ke.m9)(t[0]),t[0]instanceof vh)return function(d,v,x,H,oe){if(!H)throw new k(Ke.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${x}().`);const fe=[];for(const Oe of gl(d))if(Oe.field.isKeyField())fe.push(Gi(v,H.key));else{const ft=H.data.field(Oe.field);if(pl(ft))throw new k(Ke.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+Oe.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===ft){const Wt=Oe.field.canonicalString();throw new k(Ke.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${Wt}' (used as the orderBy) does not exist.`)}fe.push(ft)}return new ml(fe,oe)}(r._query,r.firestore._databaseId,e,t[0]._document,o);{const d=Bl(r.firestore);return function(v,x,H,oe,fe,Oe){const ft=v.explicitOrderBy;if(fe.length>ft.length)throw new k(Ke.INVALID_ARGUMENT,`Too many arguments provided to ${oe}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const Wt=[];for(let yn=0;yn<fe.length;yn++){const Vn=fe[yn];if(ft[yn].field.isKeyField()){if("string"!=typeof Vn)throw new k(Ke.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${oe}(), but got a ${typeof Vn}`);if(!Wc(v)&&-1!==Vn.indexOf("/"))throw new k(Ke.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${oe}() must be a plain document ID, but '${Vn}' contains a slash.`);const mi=v.path.child(Ki.fromString(Vn));if(!Jt.isDocumentKey(mi))throw new k(Ke.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${oe}() must result in a valid document path, but '${mi}' is not because it contains an odd number of segments.`);const qi=new Jt(mi);Wt.push(Gi(x,qi))}else{const mi=Sm(H,oe,Vn);Wt.push(mi)}}return new ml(Wt,Oe)}(r._query,r.firestore._databaseId,d,e,t,o)}}function Qg(r,e,t){if("string"==typeof(t=(0,ke.m9)(t))){if(""===t)throw new k(Ke.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Wc(e)&&-1!==t.indexOf("/"))throw new k(Ke.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const o=e.path.child(Ki.fromString(t));if(!Jt.isDocumentKey(o))throw new k(Ke.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${o}' is not because it has an odd number of segments (${o.length}).`);return Gi(r,new Jt(o))}if(t instanceof ja)return Gi(r,t._key);throw new k(Ke.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${hh(t)}.`)}function Xg(r,e){if(!Array.isArray(r)||0===r.length)throw new k(Ke.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Pm(r,e){if(e.isInequality()){const o=Pl(r),d=e.field;if(null!==o&&!o.isEqual(d))throw new k(Ke.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${o.toString()}' and '${d.toString()}'`);const v=Yl(r);null!==v&&Om(0,d,v)}const t=function(o,d){for(const v of o)for(const x of v.getFlattenedFilters())if(d.indexOf(x.op)>=0)return x.op;return null}(r.filters,function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new k(Ke.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function Om(r,e,t){if(!t.isEqual(e))throw new k(Ke.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class ip{convertValue(e,t="none"){switch(xt(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ss(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ia(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw ve()}}convertObject(e,t){const o={};return ce(e.fields,(d,v)=>{o[d]=this.convertValue(v,t)}),o}convertGeoPoint(e){return new mh(Ss(e.latitude),Ss(e.longitude))}convertArray(e,t){return(e.values||[]).map(o=>this.convertValue(o,t))}convertServerTimestamp(e,t){switch(t){case"previous":const o=Kl(e);return null==o?null:this.convertValue(o,t);case"estimate":return this.convertTimestamp(Ca(e));default:return null}}convertTimestamp(e){const t=Aa(e);return new ni(t.seconds,t.nanos)}convertDocumentKey(e,t){const o=Ki.fromString(e);$e(ka(o));const d=new se(o.get(1),o.get(3)),v=new Jt(o.popFirst(5));return d.isEqual(t)||N(`Document ${v} contains a document reference within a different database (${d.projectId}/${d.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),v}}function pf(r,e,t){let o;return o=r?t&&(t.merge||t.mergeFields)?r.toFirestore(e,t):r.toFirestore(e):e,o}class Jg extends ip{constructor(e){super(),this.firestore=e}convertBytes(e){return new Zu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ja(this.firestore,null,t)}}class Uc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Nd extends vh{constructor(e,t,o,d,v,x){super(e,t,o,d,x),this._firestore=e,this._firestoreImpl=e,this.metadata=v}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new mf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const o=this._document.data.field(ff("DocumentSnapshot.get",e));if(null!==o)return this._userDataWriter.convertValue(o,t.serverTimestamps)}}}class mf extends Nd{data(e={}){return super.data(e)}}class nu{constructor(e,t,o,d){this._firestore=e,this._userDataWriter=t,this._snapshot=d,this.metadata=new Uc(d.hasPendingWrites,d.fromCache),this.query=o}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(o=>{e.call(t,new mf(this._firestore,this._userDataWriter,o.key,o,new Uc(this._snapshot.mutatedKeys.has(o.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new k(Ke.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(o,d){if(o._snapshot.oldDocs.isEmpty()){let v=0;return o._snapshot.docChanges.map(x=>({type:"added",doc:new mf(o._firestore,o._userDataWriter,x.doc.key,x.doc,new Uc(o._snapshot.mutatedKeys.has(x.doc.key),o._snapshot.fromCache),o.query.converter),oldIndex:-1,newIndex:v++}))}{let v=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(x=>d||3!==x.type).map(x=>{const H=new mf(o._firestore,o._userDataWriter,x.doc.key,x.doc,new Uc(o._snapshot.mutatedKeys.has(x.doc.key),o._snapshot.fromCache),o.query.converter);let oe=-1,fe=-1;return 0!==x.type&&(oe=v.indexOf(x.doc.key),v=v.delete(x.doc.key)),1!==x.type&&(v=v.add(x.doc),fe=v.indexOf(x.doc.key)),{type:Iv(x.type),doc:H,oldIndex:oe,newIndex:fe}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Iv(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ve()}}function Nm(r,e){return r instanceof Nd&&e instanceof Nd?r._firestore===e._firestore&&r._key.isEqual(e._key)&&(null===r._document?null===e._document:r._document.isEqual(e._document))&&r._converter===e._converter:r instanceof nu&&e instanceof nu&&r._firestore===e._firestore&&bm(r.query,e.query)&&r.metadata.isEqual(e.metadata)&&r._snapshot.isEqual(e._snapshot)}function wv(r){r=xs(r,ja);const e=xs(r.firestore,oa);return fm(nl(e),r._key).then(t=>op(e,r,t))}class Yu extends ip{constructor(e){super(),this.firestore=e}convertBytes(e){return new Zu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ja(this.firestore,null,t)}}function n_(r){r=xs(r,ja);const e=xs(r.firestore,oa),t=nl(e),o=new Yu(e);return function hm(r,e){const t=new te;return r.asyncQueue.enqueueAndForget((0,f.Z)(function*(){return(o=(0,f.Z)(function*(d,v,x){try{const H=yield function(oe,fe){const Oe=at(oe);return Oe.persistence.runTransaction("read document","readonly",ft=>Oe.localDocuments.getDocument(ft,fe))}(d,v);H.isFoundDocument()?x.resolve(H):H.isNoDocument()?x.resolve(null):x.reject(new k(Ke.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(H){const oe=nh(H,`Failed to get document '${v} from cache`);x.reject(oe)}}),function(d,v,x){return o.apply(this,arguments)})(yield Rd(r),e,t);var o})),t.promise}(t,r._key).then(d=>new Nd(e,o,r._key,d,new Uc(null!==d&&d.hasLocalMutations,!0),r.converter))}function Cv(r){r=xs(r,ja);const e=xs(r.firestore,oa);return fm(nl(e),r._key,{source:"server"}).then(t=>op(e,r,t))}function xr(r){r=xs(r,xl);const e=xs(r.firestore,oa),t=nl(e),o=new Yu(e);return Mm(r._query),Yf(t,r._query).then(d=>new nu(e,o,r,d))}function Ey(r){r=xs(r,xl);const e=xs(r.firestore,oa),t=nl(e),o=new Yu(e);return function Pg(r,e){const t=new te;return r.asyncQueue.enqueueAndForget((0,f.Z)(function*(){return(o=(0,f.Z)(function*(d,v,x){try{const H=yield Nh(d,v,!0),oe=new Tu(v,H.Wi),fe=oe.zu(H.documents),Oe=oe.applyChanges(fe,!1);x.resolve(Oe.snapshot)}catch(H){const oe=nh(H,`Failed to execute query '${v} against cache`);x.reject(oe)}}),function(d,v,x){return o.apply(this,arguments)})(yield Rd(r),e,t);var o})),t.promise}(t,r._query).then(d=>new nu(e,o,r,d))}function Iy(r){r=xs(r,xl);const e=xs(r.firestore,oa),t=nl(e),o=new Yu(e);return Yf(t,r._query,{source:"server"}).then(d=>new nu(e,o,r,d))}function wy(r,e,t){r=xs(r,ja);const o=xs(r.firestore,oa),d=pf(r.converter,e,t);return gf(o,[cf(Bl(o),"setDoc",r._key,d,null!==r.converter,t).toMutation(r._key,jn.none())])}function wh(r,e,t,...o){r=xs(r,ja);const d=xs(r.firestore,oa),v=Bl(d);let x;return x="string"==typeof(e=(0,ke.m9)(e))||e instanceof pd?Dm(v,"updateDoc",r._key,e,t,o):Od(v,"updateDoc",r._key,e),gf(d,[x.toMutation(r._key,jn.exists(!0))])}function Cy(r){return gf(xs(r.firestore,oa),[new tc(r._key,jn.none())])}function rp(r,e){const t=xs(r.firestore,oa),o=Ku(r),d=pf(r.converter,e);return gf(t,[cf(Bl(r.firestore),"addDoc",o._key,d,null!==r.converter,{}).toMutation(o._key,jn.exists(!1))]).then(()=>o)}function sp(r,...e){var t,o,d;r=(0,ke.m9)(r);let v={includeMetadataChanges:!1},x=0;"object"!=typeof e[x]||qu(e[x])||(v=e[x],x++);const H={includeMetadataChanges:v.includeMetadataChanges};if(qu(e[x])){const ft=e[x];e[x]=null===(t=ft.next)||void 0===t?void 0:t.bind(ft),e[x+1]=null===(o=ft.error)||void 0===o?void 0:o.bind(ft),e[x+2]=null===(d=ft.complete)||void 0===d?void 0:d.bind(ft)}let oe,fe,Oe;if(r instanceof ja)fe=xs(r.firestore,oa),Oe=al(r._key.path),oe={next:ft=>{e[x]&&e[x](op(fe,r,ft))},error:e[x+1],complete:e[x+2]};else{const ft=xs(r,xl);fe=xs(ft.firestore,oa),Oe=ft._query;const Wt=new Yu(fe);oe={next:yn=>{e[x]&&e[x](new nu(fe,Wt,ft,yn))},error:e[x+1],complete:e[x+2]},Mm(r._query)}return function(ft,Wt,yn,Vn){const mi=new tf(Vn),qi=new Yh(Wt,mi,yn);return ft.asyncQueue.enqueueAndForget((0,f.Z)(function*(){return Zh(yield fd(ft),qi)})),()=>{mi.yc(),ft.asyncQueue.enqueueAndForget((0,f.Z)(function*(){return $p(yield fd(ft),qi)}))}}(nl(fe),Oe,H,oe)}function Ya(r,e){return function Og(r,e){const t=new tf(e);return r.asyncQueue.enqueueAndForget((0,f.Z)(function*(){return o=yield fd(r),d=t,at(o).Au.add(d),void d.next();var o,d})),()=>{t.yc(),r.asyncQueue.enqueueAndForget((0,f.Z)(function*(){return o=yield fd(r),d=t,void at(o).Au.delete(d);var o,d}))}}(nl(r=xs(r,oa)),qu(e)?e:{next:e})}function gf(r,e){return function(t,o){const d=new te;return t.asyncQueue.enqueueAndForget((0,f.Z)(function*(){return function K_(r,e,t){return _g.apply(this,arguments)}(yield sf(t),o,d)})),d.promise}(nl(r),e)}function op(r,e,t){const o=t.docs.get(e._key),d=new Yu(r);return new Nd(r,d,e._key,o,new Uc(t.hasPendingWrites,t.fromCache),e.converter)}const Py={maxAttempts:5};class s_{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Bl(e)}set(e,t,o){this._verifyNotCommitted();const d=md(e,this._firestore),v=pf(d.converter,t,o),x=cf(this._dataReader,"WriteBatch.set",d._key,v,null!==d.converter,o);return this._mutations.push(x.toMutation(d._key,jn.none())),this}update(e,t,o,...d){this._verifyNotCommitted();const v=md(e,this._firestore);let x;return x="string"==typeof(t=(0,ke.m9)(t))||t instanceof pd?Dm(this._dataReader,"WriteBatch.update",v._key,t,o,d):Od(this._dataReader,"WriteBatch.update",v._key,t),this._mutations.push(x.toMutation(v._key,jn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=md(e,this._firestore);return this._mutations=this._mutations.concat(new tc(t._key,jn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new k(Ke.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function md(r,e){if((r=(0,ke.m9)(r)).firestore!==e)throw new k(Ke.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}class lp extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Bl(e)}get(e){const t=md(e,this._firestore),o=new Jg(this._firestore);return this._transaction.lookup([t._key]).then(d=>{if(!d||1!==d.length)return ve();const v=d[0];if(v.isFoundDocument())return new vh(this._firestore,o,v.key,v,t.converter);if(v.isNoDocument())return new vh(this._firestore,o,t._key,null,t.converter);throw ve()})}set(e,t,o){const d=md(e,this._firestore),v=pf(d.converter,t,o),x=cf(this._dataReader,"Transaction.set",d._key,v,null!==d.converter,o);return this._transaction.set(d._key,x),this}update(e,t,o,...d){const v=md(e,this._firestore);let x;return x="string"==typeof(t=(0,ke.m9)(t))||t instanceof pd?Dm(this._dataReader,"Transaction.update",v._key,t,o,d):Od(this._dataReader,"Transaction.update",v._key,t),this._transaction.update(v._key,x),this}delete(e){const t=md(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=md(e,this._firestore),o=new Yu(this._firestore);return super.get(e).then(d=>new Nd(this._firestore,o,t._key,d._document,new Uc(!1,!1),t.converter))}}function o_(r,e,t){r=xs(r,oa);const o=Object.assign(Object.assign({},Py),t);return function(d){if(d.maxAttempts<1)throw new k(Ke.INVALID_ARGUMENT,"Max attempts must be at least 1")}(o),function(d,v,x){const H=new te;return d.asyncQueue.enqueueAndForget((0,f.Z)(function*(){const oe=yield function Ag(r){return uh(r).then(e=>e.datastore)}(d);new Dg(d.asyncQueue,oe,x,v,H).run()})),H.promise}(nl(r),d=>e(new lp(r,d)),o)}function a_(){return new gh("deleteField")}function l_(){return new Cm("serverTimestamp")}function Oy(...r){return new ly("arrayUnion",r)}function _f(...r){return new cy("arrayRemove",r)}function yf(r){return new Tm("increment",r)}!function(r,e=!0){$o=_.SDK_VERSION,(0,_._registerComponent)(new re.wA("firestore",(t,{instanceIdentifier:o,options:d})=>{const v=t.getProvider("app").getImmediate(),x=new oa(new Dt(t.getProvider("auth-internal")),new li(t.getProvider("app-check-internal")),function(H,oe){if(!Object.prototype.hasOwnProperty.apply(H.options,["projectId"]))throw new k(Ke.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new se(H.options.projectId,oe)}(v,o),v);return d=Object.assign({useFetchStreams:e},d),x._setSettings(d),x},"PUBLIC").setMultipleInstances(!0)),(0,_.registerVersion)(il,"3.10.0",r),(0,_.registerVersion)(il,"3.10.0","esm2017")}()},2090:(wn,dt,L)=>{L.d(dt,{$s:()=>de,BH:()=>lt,DV:()=>ii,Dv:()=>Hi,G6:()=>jt,GJ:()=>Pi,L:()=>ze,LL:()=>Zt,P0:()=>_t,Pz:()=>Ue,Sg:()=>kt,UG:()=>ct,UI:()=>zn,US:()=>He,Wj:()=>er,Wl:()=>fi,Yr:()=>Ot,ZB:()=>Ne,ZR:()=>rn,aH:()=>Qe,b$:()=>gn,cI:()=>bn,dS:()=>$r,eu:()=>Tt,g5:()=>re,gK:()=>Vi,gQ:()=>Pr,h$:()=>xe,hl:()=>Gt,hu:()=>_,jU:()=>bt,lb:()=>Fi,m9:()=>Nt,ne:()=>Hn,p$:()=>Me,pd:()=>Yi,q4:()=>Ae,r3:()=>Cr,ru:()=>Ft,tV:()=>pe,uI:()=>z,ug:()=>$n,vZ:()=>Mi,w1:()=>Pt,w9:()=>oi,xO:()=>ri,xb:()=>Ai,z$:()=>Ye,zI:()=>Ut,zd:()=>Gn});const f={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},_=function(Le,Be){if(!Le)throw re(Be)},re=function(Le){return new Error("Firebase Database ("+f.SDK_VERSION+") INTERNAL ASSERT FAILED: "+Le)},Te=function(Le){const Be=[];let it=0;for(let qt=0;qt<Le.length;qt++){let St=Le.charCodeAt(qt);St<128?Be[it++]=St:St<2048?(Be[it++]=St>>6|192,Be[it++]=63&St|128):55296==(64512&St)&&qt+1<Le.length&&56320==(64512&Le.charCodeAt(qt+1))?(St=65536+((1023&St)<<10)+(1023&Le.charCodeAt(++qt)),Be[it++]=St>>18|240,Be[it++]=St>>12&63|128,Be[it++]=St>>6&63|128,Be[it++]=63&St|128):(Be[it++]=St>>12|224,Be[it++]=St>>6&63|128,Be[it++]=63&St|128)}return Be},He={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(Le,Be){if(!Array.isArray(Le))throw Error("encodeByteArray takes an array as a parameter");this.init_();const it=Be?this.byteToCharMapWebSafe_:this.byteToCharMap_,qt=[];for(let St=0;St<Le.length;St+=3){const Mn=Le[St],Je=St+1<Le.length,ot=Je?Le[St+1]:0,Fe=St+2<Le.length,ht=Fe?Le[St+2]:0;let Kn=(15&ot)<<2|ht>>6,vi=63&ht;Fe||(vi=64,Je||(Kn=64)),qt.push(it[Mn>>2],it[(3&Mn)<<4|ot>>4],it[Kn],it[vi])}return qt.join("")},encodeString(Le,Be){return this.HAS_NATIVE_SUPPORT&&!Be?btoa(Le):this.encodeByteArray(Te(Le),Be)},decodeString(Le,Be){return this.HAS_NATIVE_SUPPORT&&!Be?atob(Le):function(Le){const Be=[];let it=0,qt=0;for(;it<Le.length;){const St=Le[it++];if(St<128)Be[qt++]=String.fromCharCode(St);else if(St>191&&St<224){const Mn=Le[it++];Be[qt++]=String.fromCharCode((31&St)<<6|63&Mn)}else if(St>239&&St<365){const Fe=((7&St)<<18|(63&Le[it++])<<12|(63&Le[it++])<<6|63&Le[it++])-65536;Be[qt++]=String.fromCharCode(55296+(Fe>>10)),Be[qt++]=String.fromCharCode(56320+(1023&Fe))}else{const Mn=Le[it++],Je=Le[it++];Be[qt++]=String.fromCharCode((15&St)<<12|(63&Mn)<<6|63&Je)}}return Be.join("")}(this.decodeStringToByteArray(Le,Be))},decodeStringToByteArray(Le,Be){this.init_();const it=Be?this.charToByteMapWebSafe_:this.charToByteMap_,qt=[];for(let St=0;St<Le.length;){const Mn=it[Le.charAt(St++)],ot=St<Le.length?it[Le.charAt(St)]:0;++St;const ht=St<Le.length?it[Le.charAt(St)]:64;++St;const un=St<Le.length?it[Le.charAt(St)]:64;if(++St,null==Mn||null==ot||null==ht||null==un)throw new Ze;qt.push(Mn<<2|ot>>4),64!==ht&&(qt.push(ot<<4&240|ht>>2),64!==un&&qt.push(ht<<6&192|un))}return qt},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let Le=0;Le<this.ENCODED_VALS.length;Le++)this.byteToCharMap_[Le]=this.ENCODED_VALS.charAt(Le),this.charToByteMap_[this.byteToCharMap_[Le]]=Le,this.byteToCharMapWebSafe_[Le]=this.ENCODED_VALS_WEBSAFE.charAt(Le),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[Le]]=Le,Le>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(Le)]=Le,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(Le)]=Le)}}};class Ze extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const xe=function(Le){const Be=Te(Le);return He.encodeByteArray(Be,!0)},ze=function(Le){return xe(Le).replace(/\./g,"")},pe=function(Le){try{return He.decodeString(Le,!0)}catch(Be){console.error("base64Decode failed: ",Be)}return null};function Me(Le){return Ne(void 0,Le)}function Ne(Le,Be){if(!(Be instanceof Object))return Be;switch(Be.constructor){case Date:return new Date(Be.getTime());case Object:void 0===Le&&(Le={});break;case Array:Le=[];break;default:return Be}for(const it in Be)!Be.hasOwnProperty(it)||!yt(it)||(Le[it]=Ne(Le[it],Be[it]));return Le}function yt(Le){return"__proto__"!==Le}const Mt=()=>{try{return function pt(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const Le=process.env.__FIREBASE_DEFAULTS__;return Le?JSON.parse(Le):void 0})()||(()=>{if(typeof document>"u")return;let Le;try{Le=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const Be=Le&&pe(Le[1]);return Be&&JSON.parse(Be)})()}catch(Le){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${Le}`)}},Ae=Le=>{var Be,it;return null===(it=null===(Be=Mt())||void 0===Be?void 0:Be.emulatorHosts)||void 0===it?void 0:it[Le]},_t=Le=>{const Be=Ae(Le);if(!Be)return;const it=Be.lastIndexOf(":");if(it<=0||it+1===Be.length)throw new Error(`Invalid host ${Be} with no separate hostname and port!`);const qt=parseInt(Be.substring(it+1),10);return"["===Be[0]?[Be.substring(1,it-1),qt]:[Be.substring(0,it),qt]},Qe=()=>{var Le;return null===(Le=Mt())||void 0===Le?void 0:Le.config},Ue=Le=>{var Be;return null===(Be=Mt())||void 0===Be?void 0:Be[`_${Le}`]};class lt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((Be,it)=>{this.resolve=Be,this.reject=it})}wrapCallback(Be){return(it,qt)=>{it?this.reject(it):this.resolve(qt),"function"==typeof Be&&(this.promise.catch(()=>{}),1===Be.length?Be(it):Be(it,qt))}}}function kt(Le,Be){if(Le.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const qt=Be||"demo-project",St=Le.iat||0,Mn=Le.sub||Le.user_id;if(!Mn)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Je=Object.assign({iss:`https://securetoken.google.com/${qt}`,aud:qt,iat:St,exp:St+3600,auth_time:St,sub:Mn,user_id:Mn,firebase:{sign_in_provider:"custom",identities:{}}},Le);return[ze(JSON.stringify({alg:"none",type:"JWT"})),ze(JSON.stringify(Je)),""].join(".")}function Ye(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function z(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ye())}function ct(){var Le;const Be=null===(Le=Mt())||void 0===Le?void 0:Le.forceEnvironment;if("node"===Be)return!0;if("browser"===Be)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function bt(){return"object"==typeof self&&self.self===self}function Ft(){const Le="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof Le&&void 0!==Le.id}function gn(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Pt(){const Le=Ye();return Le.indexOf("MSIE ")>=0||Le.indexOf("Trident/")>=0}function Ot(){return!0===f.NODE_CLIENT||!0===f.NODE_ADMIN}function jt(){return!ct()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Gt(){try{return"object"==typeof indexedDB}catch{return!1}}function Tt(){return new Promise((Le,Be)=>{try{let it=!0;const qt="validate-browser-context-for-indexeddb-analytics-module",St=self.indexedDB.open(qt);St.onsuccess=()=>{St.result.close(),it||self.indexedDB.deleteDatabase(qt),Le(!0)},St.onupgradeneeded=()=>{it=!1},St.onerror=()=>{var Mn;Be((null===(Mn=St.error)||void 0===Mn?void 0:Mn.message)||"")}}catch(it){Be(it)}})}function Ut(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class rn extends Error{constructor(Be,it,qt){super(it),this.code=Be,this.customData=qt,this.name="FirebaseError",Object.setPrototypeOf(this,rn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Zt.prototype.create)}}class Zt{constructor(Be,it,qt){this.service=Be,this.serviceName=it,this.errors=qt}create(Be,...it){const qt=it[0]||{},St=`${this.service}/${Be}`,Mn=this.errors[Be],Je=Mn?function _n(Le,Be){return Le.replace(sn,(it,qt)=>{const St=Be[qt];return null!=St?String(St):`<${qt}?>`})}(Mn,qt):"Error";return new rn(St,`${this.serviceName}: ${Je} (${St}).`,qt)}}const sn=/\{\$([^}]+)}/g;function bn(Le){return JSON.parse(Le)}function fi(Le){return JSON.stringify(Le)}const ui=function(Le){let Be={},it={},qt={},St="";try{const Mn=Le.split(".");Be=bn(pe(Mn[0])||""),it=bn(pe(Mn[1])||""),St=Mn[2],qt=it.d||{},delete it.d}catch{}return{header:Be,claims:it,data:qt,signature:St}},oi=function(Le){const it=ui(Le).claims;return!!it&&"object"==typeof it&&it.hasOwnProperty("iat")},Pi=function(Le){const Be=ui(Le).claims;return"object"==typeof Be&&!0===Be.admin};function Cr(Le,Be){return Object.prototype.hasOwnProperty.call(Le,Be)}function ii(Le,Be){if(Object.prototype.hasOwnProperty.call(Le,Be))return Le[Be]}function Ai(Le){for(const Be in Le)if(Object.prototype.hasOwnProperty.call(Le,Be))return!1;return!0}function zn(Le,Be,it){const qt={};for(const St in Le)Object.prototype.hasOwnProperty.call(Le,St)&&(qt[St]=Be.call(it,Le[St],St,Le));return qt}function Mi(Le,Be){if(Le===Be)return!0;const it=Object.keys(Le),qt=Object.keys(Be);for(const St of it){if(!qt.includes(St))return!1;const Mn=Le[St],Je=Be[St];if(Tn(Mn)&&Tn(Je)){if(!Mi(Mn,Je))return!1}else if(Mn!==Je)return!1}for(const St of qt)if(!it.includes(St))return!1;return!0}function Tn(Le){return null!==Le&&"object"==typeof Le}function ri(Le){const Be=[];for(const[it,qt]of Object.entries(Le))Array.isArray(qt)?qt.forEach(St=>{Be.push(encodeURIComponent(it)+"="+encodeURIComponent(St))}):Be.push(encodeURIComponent(it)+"="+encodeURIComponent(qt));return Be.length?"&"+Be.join("&"):""}function Gn(Le){const Be={};return Le.replace(/^\?/,"").split("&").forEach(qt=>{if(qt){const[St,Mn]=qt.split("=");Be[decodeURIComponent(St)]=decodeURIComponent(Mn)}}),Be}function Yi(Le){const Be=Le.indexOf("?");if(!Be)return"";const it=Le.indexOf("#",Be);return Le.substring(Be,it>0?it:void 0)}class Pr{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let Be=1;Be<this.blockSize;++Be)this.pad_[Be]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(Be,it){it||(it=0);const qt=this.W_;if("string"==typeof Be)for(let un=0;un<16;un++)qt[un]=Be.charCodeAt(it)<<24|Be.charCodeAt(it+1)<<16|Be.charCodeAt(it+2)<<8|Be.charCodeAt(it+3),it+=4;else for(let un=0;un<16;un++)qt[un]=Be[it]<<24|Be[it+1]<<16|Be[it+2]<<8|Be[it+3],it+=4;for(let un=16;un<80;un++){const Kn=qt[un-3]^qt[un-8]^qt[un-14]^qt[un-16];qt[un]=4294967295&(Kn<<1|Kn>>>31)}let ht,Yt,St=this.chain_[0],Mn=this.chain_[1],Je=this.chain_[2],ot=this.chain_[3],Fe=this.chain_[4];for(let un=0;un<80;un++){un<40?un<20?(ht=ot^Mn&(Je^ot),Yt=1518500249):(ht=Mn^Je^ot,Yt=1859775393):un<60?(ht=Mn&Je|ot&(Mn|Je),Yt=2400959708):(ht=Mn^Je^ot,Yt=3395469782);const Kn=(St<<5|St>>>27)+ht+Fe+Yt+qt[un]&4294967295;Fe=ot,ot=Je,Je=4294967295&(Mn<<30|Mn>>>2),Mn=St,St=Kn}this.chain_[0]=this.chain_[0]+St&4294967295,this.chain_[1]=this.chain_[1]+Mn&4294967295,this.chain_[2]=this.chain_[2]+Je&4294967295,this.chain_[3]=this.chain_[3]+ot&4294967295,this.chain_[4]=this.chain_[4]+Fe&4294967295}update(Be,it){if(null==Be)return;void 0===it&&(it=Be.length);const qt=it-this.blockSize;let St=0;const Mn=this.buf_;let Je=this.inbuf_;for(;St<it;){if(0===Je)for(;St<=qt;)this.compress_(Be,St),St+=this.blockSize;if("string"==typeof Be){for(;St<it;)if(Mn[Je]=Be.charCodeAt(St),++Je,++St,Je===this.blockSize){this.compress_(Mn),Je=0;break}}else for(;St<it;)if(Mn[Je]=Be[St],++Je,++St,Je===this.blockSize){this.compress_(Mn),Je=0;break}}this.inbuf_=Je,this.total_+=it}digest(){const Be=[];let it=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let St=this.blockSize-1;St>=56;St--)this.buf_[St]=255&it,it/=256;this.compress_(this.buf_);let qt=0;for(let St=0;St<5;St++)for(let Mn=24;Mn>=0;Mn-=8)Be[qt]=this.chain_[St]>>Mn&255,++qt;return Be}}function Hn(Le,Be){const it=new Pn(Le,Be);return it.subscribe.bind(it)}class Pn{constructor(Be,it){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=it,this.task.then(()=>{Be(this)}).catch(qt=>{this.error(qt)})}next(Be){this.forEachObserver(it=>{it.next(Be)})}error(Be){this.forEachObserver(it=>{it.error(Be)}),this.close(Be)}complete(){this.forEachObserver(Be=>{Be.complete()}),this.close()}subscribe(Be,it,qt){let St;if(void 0===Be&&void 0===it&&void 0===qt)throw new Error("Missing Observer.");St=function Nn(Le,Be){if("object"!=typeof Le||null===Le)return!1;for(const it of Be)if(it in Le&&"function"==typeof Le[it])return!0;return!1}(Be,["next","error","complete"])?Be:{next:Be,error:it,complete:qt},void 0===St.next&&(St.next=Ni),void 0===St.error&&(St.error=Ni),void 0===St.complete&&(St.complete=Ni);const Mn=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?St.error(this.finalError):St.complete()}catch{}}),this.observers.push(St),Mn}unsubscribeOne(Be){void 0===this.observers||void 0===this.observers[Be]||(delete this.observers[Be],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(Be){if(!this.finalized)for(let it=0;it<this.observers.length;it++)this.sendOne(it,Be)}sendOne(Be,it){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[Be])try{it(this.observers[Be])}catch(qt){typeof console<"u"&&console.error&&console.error(qt)}})}close(Be){this.finalized||(this.finalized=!0,void 0!==Be&&(this.finalError=Be),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Ni(){}const Hi=function(Le,Be,it,qt){let St;if(qt<Be?St="at least "+Be:qt>it&&(St=0===it?"none":"no more than "+it),St)throw new Error(Le+" failed: Was called with "+qt+(1===qt?" argument.":" arguments.")+" Expects "+St+".")};function Vi(Le,Be){return`${Le} failed: ${Be} argument `}function er(Le,Be,it,qt){if((!qt||it)&&"function"!=typeof it)throw new Error(Vi(Le,Be)+"must be a valid function.")}function Fi(Le,Be,it,qt){if((!qt||it)&&("object"!=typeof it||null===it))throw new Error(Vi(Le,Be)+"must be a valid context object.")}const $r=function(Le){const Be=[];let it=0;for(let qt=0;qt<Le.length;qt++){let St=Le.charCodeAt(qt);if(St>=55296&&St<=56319){const Mn=St-55296;qt++,_(qt<Le.length,"Surrogate pair missing trail surrogate."),St=65536+(Mn<<10)+(Le.charCodeAt(qt)-56320)}St<128?Be[it++]=St:St<2048?(Be[it++]=St>>6|192,Be[it++]=63&St|128):St<65536?(Be[it++]=St>>12|224,Be[it++]=St>>6&63|128,Be[it++]=63&St|128):(Be[it++]=St>>18|240,Be[it++]=St>>12&63|128,Be[it++]=St>>6&63|128,Be[it++]=63&St|128)}return Be},$n=function(Le){let Be=0;for(let it=0;it<Le.length;it++){const qt=Le.charCodeAt(it);qt<128?Be++:qt<2048?Be+=2:qt>=55296&&qt<=56319?(Be+=4,it++):Be+=3}return Be},dn=1e3,be=2,$=144e5,ne=.5;function de(Le,Be=dn,it=be){const qt=Be*Math.pow(it,Le),St=Math.round(ne*qt*(Math.random()-.5)*2);return Math.min($,qt+St)}function Nt(Le){return Le&&Le._delegate?Le._delegate:Le}},7693:(wn,dt,L)=>{L.d(dt,{I:()=>re});var f=L(1135),_=L(4650);let re=(()=>{class Te{constructor(){this.dialog$=new f.X(null)}}return Te.\u0275fac=function(He){return new(He||Te)},Te.\u0275prov=_.Yz7({token:Te,factory:Te.\u0275fac,providedIn:"root"}),Te})()},3862:(wn,dt,L)=>{L.r(dt),L.d(dt,{MessengerModule:()=>Go});var f=L(6895),_=L(4650),re=L(9998),Te=L(3659),ke=L(7799),He=L(926),Ze=L(1135),xe=L(9300),ze=L(4006),pe=L(1281),Me=L(7579),Ne=L(9646),yt=L(9751),pt=L(8421),Lt=L(5577),an=L(1144),It=L(576),Mt=L(3268);const Ae=["addListener","removeListener"],_t=["addEventListener","removeEventListener"],Qe=["on","off"];function Ue(Y,p,a,h){if((0,It.m)(a)&&(h=a,a=void 0),h)return Ue(Y,p,a).pipe((0,Mt.Z)(h));const[T,P]=function z(Y){return(0,It.m)(Y.addEventListener)&&(0,It.m)(Y.removeEventListener)}(Y)?_t.map(X=>ce=>Y[X](p,ce,a)):function kt(Y){return(0,It.m)(Y.addListener)&&(0,It.m)(Y.removeListener)}(Y)?Ae.map(lt(Y,p)):function Ye(Y){return(0,It.m)(Y.on)&&(0,It.m)(Y.off)}(Y)?Qe.map(lt(Y,p)):[];if(!T&&(0,an.z)(Y))return(0,Lt.z)(X=>Ue(X,p,a))((0,pt.Xf)(Y));if(!T)throw new TypeError("Invalid event target");return new yt.y(X=>{const ce=(...We)=>X.next(1<We.length?We:We[0]);return T(ce),()=>P(ce)})}function lt(Y,p){return a=>h=>Y[a](p,h)}var ct=L(4408),bt=L(727);const Ft={schedule(Y){let p=requestAnimationFrame,a=cancelAnimationFrame;const{delegate:h}=Ft;h&&(p=h.requestAnimationFrame,a=h.cancelAnimationFrame);const T=p(P=>{a=void 0,Y(P)});return new bt.w0(()=>a?.(T))},requestAnimationFrame(...Y){const{delegate:p}=Ft;return(p?.requestAnimationFrame||requestAnimationFrame)(...Y)},cancelAnimationFrame(...Y){const{delegate:p}=Ft;return(p?.cancelAnimationFrame||cancelAnimationFrame)(...Y)},delegate:void 0};var vn=L(7565);const Ht=new class Pt extends vn.v{flush(p){this._active=!0;const a=this._scheduled;this._scheduled=void 0;const{actions:h}=this;let T;p=p||h.shift();do{if(T=p.execute(p.state,p.delay))break}while((p=h[0])&&p.id===a&&h.shift());if(this._active=!1,T){for(;(p=h[0])&&p.id===a&&h.shift();)p.unsubscribe();throw T}}}(class gn extends ct.o{constructor(p,a){super(p,a),this.scheduler=p,this.work=a}requestAsyncId(p,a,h=0){return null!==h&&h>0?super.requestAsyncId(p,a,h):(p.actions.push(this),p._scheduled||(p._scheduled=Ft.requestAnimationFrame(()=>p.flush(void 0))))}recycleAsyncId(p,a,h=0){var T;if(null!=h?h>0:this.delay>0)return super.recycleAsyncId(p,a,h);const{actions:P}=p;null!=a&&(null===(T=P[P.length-1])||void 0===T?void 0:T.id)!==a&&(Ft.cancelAnimationFrame(a),p._scheduled=void 0)}});let Gt,jt=1;const Tt={};function Ut(Y){return Y in Tt&&(delete Tt[Y],!0)}const Et={setImmediate(Y){const p=jt++;return Tt[p]=!0,Gt||(Gt=Promise.resolve()),Gt.then(()=>Ut(p)&&Y()),p},clearImmediate(Y){Ut(Y)}},{setImmediate:Zt,clearImmediate:_n}=Et,sn={setImmediate(...Y){const{delegate:p}=sn;return(p?.setImmediate||Zt)(...Y)},clearImmediate(Y){const{delegate:p}=sn;return(p?.clearImmediate||_n)(Y)},delegate:void 0},ui=new class fi extends vn.v{flush(p){this._active=!0;const a=this._scheduled;this._scheduled=void 0;const{actions:h}=this;let T;p=p||h.shift();do{if(T=p.execute(p.state,p.delay))break}while((p=h[0])&&p.id===a&&h.shift());if(this._active=!1,T){for(;(p=h[0])&&p.id===a&&h.shift();)p.unsubscribe();throw T}}}(class bn extends ct.o{constructor(p,a){super(p,a),this.scheduler=p,this.work=a}requestAsyncId(p,a,h=0){return null!==h&&h>0?super.requestAsyncId(p,a,h):(p.actions.push(this),p._scheduled||(p._scheduled=sn.setImmediate(p.flush.bind(p,void 0))))}recycleAsyncId(p,a,h=0){var T;if(null!=h?h>0:this.delay>0)return super.recycleAsyncId(p,a,h);const{actions:P}=p;null!=a&&(null===(T=P[P.length-1])||void 0===T?void 0:T.id)!==a&&(sn.clearImmediate(a),p._scheduled=void 0)}});var Qn=L(4986),oi=L(4482),Pi=L(5403),ii=L(3532);function zn(Y=0,p,a=Qn.P){let h=-1;return null!=p&&((0,ii.K)(p)?a=p:h=p),new yt.y(T=>{let P=function Ai(Y){return Y instanceof Date&&!isNaN(Y)}(Y)?+Y-a.now():Y;P<0&&(P=0);let X=0;return a.schedule(function(){T.closed||(T.next(X++),0<=h?this.schedule(void 0,h):T.complete())},P)})}function Mi(Y,p=Qn.z){return function Cr(Y){return(0,oi.e)((p,a)=>{let h=!1,T=null,P=null,X=!1;const ce=()=>{if(P?.unsubscribe(),P=null,h){h=!1;const mt=T;T=null,a.next(mt)}X&&a.complete()},We=()=>{P=null,X&&a.complete()};p.subscribe((0,Pi.x)(a,mt=>{h=!0,T=mt,P||(0,pt.Xf)(Y(mt)).subscribe(P=(0,Pi.x)(a,ce,We))},()=>{X=!0,(!h||!P||P.closed)&&a.complete()}))})}(()=>zn(Y,p))}var Tn=L(2722),Ji=L(8675),ri=L(3353),Gn=L(445);const Yi=["contentWrapper"],Pr=["*"],Hn=new _.OlP("VIRTUAL_SCROLL_STRATEGY");let Hi=(()=>{class Y{constructor(a,h,T){this._ngZone=a,this._platform=h,this._scrolled=new Me.x,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=T}register(a){this.scrollContainers.has(a)||this.scrollContainers.set(a,a.elementScrolled().subscribe(()=>this._scrolled.next(a)))}deregister(a){const h=this.scrollContainers.get(a);h&&(h.unsubscribe(),this.scrollContainers.delete(a))}scrolled(a=20){return this._platform.isBrowser?new yt.y(h=>{this._globalSubscription||this._addGlobalListener();const T=a>0?this._scrolled.pipe(Mi(a)).subscribe(h):this._scrolled.subscribe(h);return this._scrolledCount++,()=>{T.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):(0,Ne.of)()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((a,h)=>this.deregister(h)),this._scrolled.complete()}ancestorScrolled(a,h){const T=this.getAncestorScrollContainers(a);return this.scrolled(h).pipe((0,xe.h)(P=>!P||T.indexOf(P)>-1))}getAncestorScrollContainers(a){const h=[];return this.scrollContainers.forEach((T,P)=>{this._scrollableContainsElement(P,a)&&h.push(P)}),h}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(a,h){let T=(0,pe.fI)(h),P=a.getElementRef().nativeElement;do{if(T==P)return!0}while(T=T.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>Ue(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return Y.\u0275fac=function(a){return new(a||Y)(_.LFG(_.R0b),_.LFG(ri.t4),_.LFG(f.K0,8))},Y.\u0275prov=_.Yz7({token:Y,factory:Y.\u0275fac,providedIn:"root"}),Y})(),Vi=(()=>{class Y{constructor(a,h,T,P){this.elementRef=a,this.scrollDispatcher=h,this.ngZone=T,this.dir=P,this._destroyed=new Me.x,this._elementScrolled=new yt.y(X=>this.ngZone.runOutsideAngular(()=>Ue(this.elementRef.nativeElement,"scroll").pipe((0,Tn.R)(this._destroyed)).subscribe(X)))}ngOnInit(){this.scrollDispatcher.register(this)}ngOnDestroy(){this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(a){const h=this.elementRef.nativeElement,T=this.dir&&"rtl"==this.dir.value;null==a.left&&(a.left=T?a.end:a.start),null==a.right&&(a.right=T?a.start:a.end),null!=a.bottom&&(a.top=h.scrollHeight-h.clientHeight-a.bottom),T&&0!=(0,ri._i)()?(null!=a.left&&(a.right=h.scrollWidth-h.clientWidth-a.left),2==(0,ri._i)()?a.left=a.right:1==(0,ri._i)()&&(a.left=a.right?-a.right:a.right)):null!=a.right&&(a.left=h.scrollWidth-h.clientWidth-a.right),this._applyScrollToOptions(a)}_applyScrollToOptions(a){const h=this.elementRef.nativeElement;(0,ri.Mq)()?h.scrollTo(a):(null!=a.top&&(h.scrollTop=a.top),null!=a.left&&(h.scrollLeft=a.left))}measureScrollOffset(a){const h="left",T="right",P=this.elementRef.nativeElement;if("top"==a)return P.scrollTop;if("bottom"==a)return P.scrollHeight-P.clientHeight-P.scrollTop;const X=this.dir&&"rtl"==this.dir.value;return"start"==a?a=X?T:h:"end"==a&&(a=X?h:T),X&&2==(0,ri._i)()?a==h?P.scrollWidth-P.clientWidth-P.scrollLeft:P.scrollLeft:X&&1==(0,ri._i)()?a==h?P.scrollLeft+P.scrollWidth-P.clientWidth:-P.scrollLeft:a==h?P.scrollLeft:P.scrollWidth-P.clientWidth-P.scrollLeft}}return Y.\u0275fac=function(a){return new(a||Y)(_.Y36(_.SBq),_.Y36(Hi),_.Y36(_.R0b),_.Y36(Gn.Is,8))},Y.\u0275dir=_.lG2({type:Y,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]],standalone:!0}),Y})(),er=(()=>{class Y{constructor(a,h,T){this._platform=a,this._change=new Me.x,this._changeListener=P=>{this._change.next(P)},this._document=T,h.runOutsideAngular(()=>{if(a.isBrowser){const P=this._getWindow();P.addEventListener("resize",this._changeListener),P.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const a=this._getWindow();a.removeEventListener("resize",this._changeListener),a.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const a={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),a}getViewportRect(){const a=this.getViewportScrollPosition(),{width:h,height:T}=this.getViewportSize();return{top:a.top,left:a.left,bottom:a.top+T,right:a.left+h,height:T,width:h}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const a=this._document,h=this._getWindow(),T=a.documentElement,P=T.getBoundingClientRect();return{top:-P.top||a.body.scrollTop||h.scrollY||T.scrollTop||0,left:-P.left||a.body.scrollLeft||h.scrollX||T.scrollLeft||0}}change(a=20){return a>0?this._change.pipe(Mi(a)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const a=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:a.innerWidth,height:a.innerHeight}:{width:0,height:0}}}return Y.\u0275fac=function(a){return new(a||Y)(_.LFG(ri.t4),_.LFG(_.R0b),_.LFG(f.K0,8))},Y.\u0275prov=_.Yz7({token:Y,factory:Y.\u0275fac,providedIn:"root"}),Y})();const Fi=new _.OlP("VIRTUAL_SCROLLABLE");let $r=(()=>{class Y extends Vi{constructor(a,h,T,P){super(a,h,T,P)}measureViewportSize(a){const h=this.elementRef.nativeElement;return"horizontal"===a?h.clientWidth:h.clientHeight}}return Y.\u0275fac=function(a){return new(a||Y)(_.Y36(_.SBq),_.Y36(Hi),_.Y36(_.R0b),_.Y36(Gn.Is,8))},Y.\u0275dir=_.lG2({type:Y,features:[_.qOj]}),Y})();const Oi=typeof requestAnimationFrame<"u"?Ht:ui;let dn=(()=>{class Y extends $r{get orientation(){return this._orientation}set orientation(a){this._orientation!==a&&(this._orientation=a,this._calculateSpacerSize())}get appendOnly(){return this._appendOnly}set appendOnly(a){this._appendOnly=(0,pe.Ig)(a)}constructor(a,h,T,P,X,ce,We,mt){super(a,ce,T,X),this.elementRef=a,this._changeDetectorRef=h,this._scrollStrategy=P,this.scrollable=mt,this._platform=(0,_.f3M)(ri.t4),this._detachedSubject=new Me.x,this._renderedRangeSubject=new Me.x,this._orientation="vertical",this._appendOnly=!1,this.scrolledIndexChange=new yt.y(on=>this._scrollStrategy.scrolledIndexChange.subscribe(ln=>Promise.resolve().then(()=>this.ngZone.run(()=>on.next(ln))))),this.renderedRangeStream=this._renderedRangeSubject,this._totalContentSize=0,this._totalContentWidth="",this._totalContentHeight="",this._renderedRange={start:0,end:0},this._dataLength=0,this._viewportSize=0,this._renderedContentOffset=0,this._renderedContentOffsetNeedsRewrite=!1,this._isChangeDetectionPending=!1,this._runAfterChangeDetection=[],this._viewportChanges=bt.w0.EMPTY,this._viewportChanges=We.change().subscribe(()=>{this.checkViewportSize()}),this.scrollable||(this.elementRef.nativeElement.classList.add("cdk-virtual-scrollable"),this.scrollable=this)}ngOnInit(){this._platform.isBrowser&&(this.scrollable===this&&super.ngOnInit(),this.ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>{this._measureViewportSize(),this._scrollStrategy.attach(this),this.scrollable.elementScrolled().pipe((0,Ji.O)(null),Mi(0,Oi)).subscribe(()=>this._scrollStrategy.onContentScrolled()),this._markChangeDetectionNeeded()})))}ngOnDestroy(){this.detach(),this._scrollStrategy.detach(),this._renderedRangeSubject.complete(),this._detachedSubject.complete(),this._viewportChanges.unsubscribe(),super.ngOnDestroy()}attach(a){this.ngZone.runOutsideAngular(()=>{this._forOf=a,this._forOf.dataStream.pipe((0,Tn.R)(this._detachedSubject)).subscribe(h=>{const T=h.length;T!==this._dataLength&&(this._dataLength=T,this._scrollStrategy.onDataLengthChanged()),this._doChangeDetection()})})}detach(){this._forOf=null,this._detachedSubject.next()}getDataLength(){return this._dataLength}getViewportSize(){return this._viewportSize}getRenderedRange(){return this._renderedRange}measureBoundingClientRectWithScrollOffset(a){return this.getElementRef().nativeElement.getBoundingClientRect()[a]}setTotalContentSize(a){this._totalContentSize!==a&&(this._totalContentSize=a,this._calculateSpacerSize(),this._markChangeDetectionNeeded())}setRenderedRange(a){(function $n(Y,p){return Y.start==p.start&&Y.end==p.end})(this._renderedRange,a)||(this.appendOnly&&(a={start:0,end:Math.max(this._renderedRange.end,a.end)}),this._renderedRangeSubject.next(this._renderedRange=a),this._markChangeDetectionNeeded(()=>this._scrollStrategy.onContentRendered()))}getOffsetToRenderedContentStart(){return this._renderedContentOffsetNeedsRewrite?null:this._renderedContentOffset}setRenderedContentOffset(a,h="to-start"){a=this.appendOnly&&"to-start"===h?0:a;const P="horizontal"==this.orientation,X=P?"X":"Y";let We=`translate${X}(${Number((P&&this.dir&&"rtl"==this.dir.value?-1:1)*a)}px)`;this._renderedContentOffset=a,"to-end"===h&&(We+=` translate${X}(-100%)`,this._renderedContentOffsetNeedsRewrite=!0),this._renderedContentTransform!=We&&(this._renderedContentTransform=We,this._markChangeDetectionNeeded(()=>{this._renderedContentOffsetNeedsRewrite?(this._renderedContentOffset-=this.measureRenderedContentSize(),this._renderedContentOffsetNeedsRewrite=!1,this.setRenderedContentOffset(this._renderedContentOffset)):this._scrollStrategy.onRenderedOffsetChanged()}))}scrollToOffset(a,h="auto"){const T={behavior:h};"horizontal"===this.orientation?T.start=a:T.top=a,this.scrollable.scrollTo(T)}scrollToIndex(a,h="auto"){this._scrollStrategy.scrollToIndex(a,h)}measureScrollOffset(a){let h;return h=this.scrollable==this?T=>super.measureScrollOffset(T):T=>this.scrollable.measureScrollOffset(T),Math.max(0,h(a??("horizontal"===this.orientation?"start":"top"))-this.measureViewportOffset())}measureViewportOffset(a){let h;const T="left",P="right",X="rtl"==this.dir?.value;h="start"==a?X?P:T:"end"==a?X?T:P:a||("horizontal"===this.orientation?"left":"top");const ce=this.scrollable.measureBoundingClientRectWithScrollOffset(h);return this.elementRef.nativeElement.getBoundingClientRect()[h]-ce}measureRenderedContentSize(){const a=this._contentWrapper.nativeElement;return"horizontal"===this.orientation?a.offsetWidth:a.offsetHeight}measureRangeSize(a){return this._forOf?this._forOf.measureRangeSize(a,this.orientation):0}checkViewportSize(){this._measureViewportSize(),this._scrollStrategy.onDataLengthChanged()}_measureViewportSize(){this._viewportSize=this.scrollable.measureViewportSize(this.orientation)}_markChangeDetectionNeeded(a){a&&this._runAfterChangeDetection.push(a),this._isChangeDetectionPending||(this._isChangeDetectionPending=!0,this.ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>{this._doChangeDetection()})))}_doChangeDetection(){this._isChangeDetectionPending=!1,this._contentWrapper.nativeElement.style.transform=this._renderedContentTransform,this.ngZone.run(()=>this._changeDetectorRef.markForCheck());const a=this._runAfterChangeDetection;this._runAfterChangeDetection=[];for(const h of a)h()}_calculateSpacerSize(){this._totalContentHeight="horizontal"===this.orientation?"":`${this._totalContentSize}px`,this._totalContentWidth="horizontal"===this.orientation?`${this._totalContentSize}px`:""}}return Y.\u0275fac=function(a){return new(a||Y)(_.Y36(_.SBq),_.Y36(_.sBO),_.Y36(_.R0b),_.Y36(Hn,8),_.Y36(Gn.Is,8),_.Y36(Hi),_.Y36(er),_.Y36(Fi,8))},Y.\u0275cmp=_.Xpm({type:Y,selectors:[["cdk-virtual-scroll-viewport"]],viewQuery:function(a,h){if(1&a&&_.Gf(Yi,7),2&a){let T;_.iGM(T=_.CRH())&&(h._contentWrapper=T.first)}},hostAttrs:[1,"cdk-virtual-scroll-viewport"],hostVars:4,hostBindings:function(a,h){2&a&&_.ekj("cdk-virtual-scroll-orientation-horizontal","horizontal"===h.orientation)("cdk-virtual-scroll-orientation-vertical","horizontal"!==h.orientation)},inputs:{orientation:"orientation",appendOnly:"appendOnly"},outputs:{scrolledIndexChange:"scrolledIndexChange"},standalone:!0,features:[_._Bn([{provide:Vi,useFactory:(p,a)=>p||a,deps:[[new _.FiY,new _.tBr(Fi)],Y]}]),_.qOj,_.jDz],ngContentSelectors:Pr,decls:4,vars:4,consts:[[1,"cdk-virtual-scroll-content-wrapper"],["contentWrapper",""],[1,"cdk-virtual-scroll-spacer"]],template:function(a,h){1&a&&(_.F$t(),_.TgZ(0,"div",0,1),_.Hsn(2),_.qZA(),_._UZ(3,"div",2)),2&a&&(_.xp6(3),_.Udp("width",h._totalContentWidth)("height",h._totalContentHeight))},styles:["cdk-virtual-scroll-viewport{display:block;position:relative;transform:translateZ(0)}.cdk-virtual-scrollable{overflow:auto;will-change:scroll-position;contain:strict;-webkit-overflow-scrolling:touch}.cdk-virtual-scroll-content-wrapper{position:absolute;top:0;left:0;contain:content}[dir=rtl] .cdk-virtual-scroll-content-wrapper{right:0;left:auto}.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper{min-height:100%}.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>dl:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>ol:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>table:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>ul:not([cdkVirtualFor]){padding-left:0;padding-right:0;margin-left:0;margin-right:0;border-left-width:0;border-right-width:0;outline:none}.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper{min-width:100%}.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>dl:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>ol:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>table:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>ul:not([cdkVirtualFor]){padding-top:0;padding-bottom:0;margin-top:0;margin-bottom:0;border-top-width:0;border-bottom-width:0;outline:none}.cdk-virtual-scroll-spacer{height:1px;transform-origin:0 0;flex:0 0 auto}[dir=rtl] .cdk-virtual-scroll-spacer{transform-origin:100% 0}"],encapsulation:2,changeDetection:0}),Y})(),ye=(()=>{class Y{}return Y.\u0275fac=function(a){return new(a||Y)},Y.\u0275mod=_.oAB({type:Y}),Y.\u0275inj=_.cJS({}),Y})(),rt=(()=>{class Y{}return Y.\u0275fac=function(a){return new(a||Y)},Y.\u0275mod=_.oAB({type:Y}),Y.\u0275inj=_.cJS({imports:[Gn.vT,ye,dn,Gn.vT,ye]}),Y})();var Nt=L(5698);class Je{attach(p){return this._attachedHost=p,p.attach(this)}detach(){let p=this._attachedHost;null!=p&&(this._attachedHost=null,p.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(p){this._attachedHost=p}}class ot extends Je{constructor(p,a,h,T,P){super(),this.component=p,this.viewContainerRef=a,this.injector=h,this.componentFactoryResolver=T,this.projectableNodes=P}}class Fe extends Je{constructor(p,a,h,T){super(),this.templateRef=p,this.viewContainerRef=a,this.context=h,this.injector=T}get origin(){return this.templateRef.elementRef}attach(p,a=this.context){return this.context=a,super.attach(p)}detach(){return this.context=void 0,super.detach()}}class ht extends Je{constructor(p){super(),this.element=p instanceof _.SBq?p.nativeElement:p}}class Yt{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(p){return p instanceof ot?(this._attachedPortal=p,this.attachComponentPortal(p)):p instanceof Fe?(this._attachedPortal=p,this.attachTemplatePortal(p)):this.attachDomPortal&&p instanceof ht?(this._attachedPortal=p,this.attachDomPortal(p)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(p){this._disposeFn=p}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class Kn extends Yt{constructor(p,a,h,T,P){super(),this.outletElement=p,this._componentFactoryResolver=a,this._appRef=h,this._defaultInjector=T,this.attachDomPortal=X=>{const ce=X.element,We=this._document.createComment("dom-portal");ce.parentNode.insertBefore(We,ce),this.outletElement.appendChild(ce),this._attachedPortal=X,super.setDisposeFn(()=>{We.parentNode&&We.parentNode.replaceChild(ce,We)})},this._document=P}attachComponentPortal(p){const h=(p.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(p.component);let T;return p.viewContainerRef?(T=p.viewContainerRef.createComponent(h,p.viewContainerRef.length,p.injector||p.viewContainerRef.injector,p.projectableNodes||void 0),this.setDisposeFn(()=>T.destroy())):(T=h.create(p.injector||this._defaultInjector||_.zs3.NULL),this._appRef.attachView(T.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(T.hostView),T.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(T)),this._attachedPortal=p,T}attachTemplatePortal(p){let a=p.viewContainerRef,h=a.createEmbeddedView(p.templateRef,p.context,{injector:p.injector});return h.rootNodes.forEach(T=>this.outletElement.appendChild(T)),h.detectChanges(),this.setDisposeFn(()=>{let T=a.indexOf(h);-1!==T&&a.remove(T)}),this._attachedPortal=p,h}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(p){return p.hostView.rootNodes[0]}}let is=(()=>{class Y extends Yt{constructor(a,h,T){super(),this._componentFactoryResolver=a,this._viewContainerRef=h,this._isInitialized=!1,this.attached=new _.vpe,this.attachDomPortal=P=>{const X=P.element,ce=this._document.createComment("dom-portal");P.setAttachedHost(this),X.parentNode.insertBefore(ce,X),this._getRootNode().appendChild(X),this._attachedPortal=P,super.setDisposeFn(()=>{ce.parentNode&&ce.parentNode.replaceChild(X,ce)})},this._document=T}get portal(){return this._attachedPortal}set portal(a){this.hasAttached()&&!a&&!this._isInitialized||(this.hasAttached()&&super.detach(),a&&super.attach(a),this._attachedPortal=a||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(a){a.setAttachedHost(this);const h=null!=a.viewContainerRef?a.viewContainerRef:this._viewContainerRef,P=(a.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(a.component),X=h.createComponent(P,h.length,a.injector||h.injector,a.projectableNodes||void 0);return h!==this._viewContainerRef&&this._getRootNode().appendChild(X.hostView.rootNodes[0]),super.setDisposeFn(()=>X.destroy()),this._attachedPortal=a,this._attachedRef=X,this.attached.emit(X),X}attachTemplatePortal(a){a.setAttachedHost(this);const h=this._viewContainerRef.createEmbeddedView(a.templateRef,a.context,{injector:a.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=a,this._attachedRef=h,this.attached.emit(h),h}_getRootNode(){const a=this._viewContainerRef.element.nativeElement;return a.nodeType===a.ELEMENT_NODE?a:a.parentNode}}return Y.\u0275fac=function(a){return new(a||Y)(_.Y36(_._Vd),_.Y36(_.s_b),_.Y36(f.K0))},Y.\u0275dir=_.lG2({type:Y,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[_.qOj]}),Y})(),os=(()=>{class Y{}return Y.\u0275fac=function(a){return new(a||Y)},Y.\u0275mod=_.oAB({type:Y}),Y.\u0275inj=_.cJS({}),Y})();var ji=L(6451);const Cs=(0,ri.Mq)();class rs{constructor(p,a){this._viewportRuler=p,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=a}attach(){}enable(){if(this._canBeEnabled()){const p=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=p.style.left||"",this._previousHTMLStyles.top=p.style.top||"",p.style.left=(0,pe.HM)(-this._previousScrollPosition.left),p.style.top=(0,pe.HM)(-this._previousScrollPosition.top),p.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const p=this._document.documentElement,h=p.style,T=this._document.body.style,P=h.scrollBehavior||"",X=T.scrollBehavior||"";this._isEnabled=!1,h.left=this._previousHTMLStyles.left,h.top=this._previousHTMLStyles.top,p.classList.remove("cdk-global-scrollblock"),Cs&&(h.scrollBehavior=T.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),Cs&&(h.scrollBehavior=P,T.scrollBehavior=X)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const a=this._document.body,h=this._viewportRuler.getViewportSize();return a.scrollHeight>h.height||a.scrollWidth>h.width}}class Sr{constructor(p,a,h,T){this._scrollDispatcher=p,this._ngZone=a,this._viewportRuler=h,this._config=T,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(p){this._overlayRef=p}enable(){if(this._scrollSubscription)return;const p=this._scrollDispatcher.scrolled(0).pipe((0,xe.h)(a=>!a||!this._overlayRef.overlayElement.contains(a.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=p.subscribe(()=>{const a=this._viewportRuler.getViewportScrollPosition().top;Math.abs(a-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=p.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class Dr{enable(){}disable(){}attach(){}}function ps(Y,p){return p.some(a=>Y.bottom<a.top||Y.top>a.bottom||Y.right<a.left||Y.left>a.right)}function Ar(Y,p){return p.some(a=>Y.top<a.top||Y.bottom>a.bottom||Y.left<a.left||Y.right>a.right)}class wr{constructor(p,a,h,T){this._scrollDispatcher=p,this._viewportRuler=a,this._ngZone=h,this._config=T,this._scrollSubscription=null}attach(p){this._overlayRef=p}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const a=this._overlayRef.overlayElement.getBoundingClientRect(),{width:h,height:T}=this._viewportRuler.getViewportSize();ps(a,[{width:h,height:T,bottom:T,right:h,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let Vt=(()=>{class Y{constructor(a,h,T,P){this._scrollDispatcher=a,this._viewportRuler=h,this._ngZone=T,this.noop=()=>new Dr,this.close=X=>new Sr(this._scrollDispatcher,this._ngZone,this._viewportRuler,X),this.block=()=>new rs(this._viewportRuler,this._document),this.reposition=X=>new wr(this._scrollDispatcher,this._viewportRuler,this._ngZone,X),this._document=P}}return Y.\u0275fac=function(a){return new(a||Y)(_.LFG(Hi),_.LFG(er),_.LFG(_.R0b),_.LFG(f.K0))},Y.\u0275prov=_.Yz7({token:Y,factory:Y.\u0275fac,providedIn:"root"}),Y})();class et{constructor(p){if(this.scrollStrategy=new Dr,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,p){const a=Object.keys(p);for(const h of a)void 0!==p[h]&&(this[h]=p[h])}}}class vt{constructor(p,a){this.connectionPair=p,this.scrollableViewProperties=a}}let st=(()=>{class Y{constructor(a){this._attachedOverlays=[],this._document=a}ngOnDestroy(){this.detach()}add(a){this.remove(a),this._attachedOverlays.push(a)}remove(a){const h=this._attachedOverlays.indexOf(a);h>-1&&this._attachedOverlays.splice(h,1),0===this._attachedOverlays.length&&this.detach()}}return Y.\u0275fac=function(a){return new(a||Y)(_.LFG(f.K0))},Y.\u0275prov=_.Yz7({token:Y,factory:Y.\u0275fac,providedIn:"root"}),Y})(),nt=(()=>{class Y extends st{constructor(a,h){super(a),this._ngZone=h,this._keydownListener=T=>{const P=this._attachedOverlays;for(let X=P.length-1;X>-1;X--)if(P[X]._keydownEvents.observers.length>0){const ce=P[X]._keydownEvents;this._ngZone?this._ngZone.run(()=>ce.next(T)):ce.next(T);break}}}add(a){super.add(a),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return Y.\u0275fac=function(a){return new(a||Y)(_.LFG(f.K0),_.LFG(_.R0b,8))},Y.\u0275prov=_.Yz7({token:Y,factory:Y.\u0275fac,providedIn:"root"}),Y})(),wt=(()=>{class Y extends st{constructor(a,h,T){super(a),this._platform=h,this._ngZone=T,this._cursorStyleIsSet=!1,this._pointerDownListener=P=>{this._pointerDownEventTarget=(0,ri.sA)(P)},this._clickListener=P=>{const X=(0,ri.sA)(P),ce="click"===P.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:X;this._pointerDownEventTarget=null;const We=this._attachedOverlays.slice();for(let mt=We.length-1;mt>-1;mt--){const on=We[mt];if(on._outsidePointerEvents.observers.length<1||!on.hasAttached())continue;if(on.overlayElement.contains(X)||on.overlayElement.contains(ce))break;const ln=on._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>ln.next(P)):ln.next(P)}}}add(a){if(super.add(a),!this._isAttached){const h=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(h)):this._addEventListeners(h),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=h.style.cursor,h.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const a=this._document.body;a.removeEventListener("pointerdown",this._pointerDownListener,!0),a.removeEventListener("click",this._clickListener,!0),a.removeEventListener("auxclick",this._clickListener,!0),a.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(a.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(a){a.addEventListener("pointerdown",this._pointerDownListener,!0),a.addEventListener("click",this._clickListener,!0),a.addEventListener("auxclick",this._clickListener,!0),a.addEventListener("contextmenu",this._clickListener,!0)}}return Y.\u0275fac=function(a){return new(a||Y)(_.LFG(f.K0),_.LFG(ri.t4),_.LFG(_.R0b,8))},Y.\u0275prov=_.Yz7({token:Y,factory:Y.\u0275fac,providedIn:"root"}),Y})(),Bt=(()=>{class Y{constructor(a,h){this._platform=h,this._document=a}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const a="cdk-overlay-container";if(this._platform.isBrowser||(0,ri.Oy)()){const T=this._document.querySelectorAll(`.${a}[platform="server"], .${a}[platform="test"]`);for(let P=0;P<T.length;P++)T[P].remove()}const h=this._document.createElement("div");h.classList.add(a),(0,ri.Oy)()?h.setAttribute("platform","test"):this._platform.isBrowser||h.setAttribute("platform","server"),this._document.body.appendChild(h),this._containerElement=h}}return Y.\u0275fac=function(a){return new(a||Y)(_.LFG(f.K0),_.LFG(ri.t4))},Y.\u0275prov=_.Yz7({token:Y,factory:Y.\u0275fac,providedIn:"root"}),Y})();class mn{constructor(p,a,h,T,P,X,ce,We,mt,on=!1){this._portalOutlet=p,this._host=a,this._pane=h,this._config=T,this._ngZone=P,this._keyboardDispatcher=X,this._document=ce,this._location=We,this._outsideClickDispatcher=mt,this._animationsDisabled=on,this._backdropElement=null,this._backdropClick=new Me.x,this._attachments=new Me.x,this._detachments=new Me.x,this._locationChanges=bt.w0.EMPTY,this._backdropClickHandler=ln=>this._backdropClick.next(ln),this._backdropTransitionendHandler=ln=>{this._disposeBackdrop(ln.target)},this._keydownEvents=new Me.x,this._outsidePointerEvents=new Me.x,T.scrollStrategy&&(this._scrollStrategy=T.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=T.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(p){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const a=this._portalOutlet.attach(p);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe((0,Nt.q)(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),"function"==typeof a?.onDestroy&&a.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),a}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const p=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),p}dispose(){const p=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,p&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(p){p!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=p,this.hasAttached()&&(p.attach(this),this.updatePosition()))}updateSize(p){this._config={...this._config,...p},this._updateElementSize()}setDirection(p){this._config={...this._config,direction:p},this._updateElementDirection()}addPanelClass(p){this._pane&&this._toggleClasses(this._pane,p,!0)}removePanelClass(p){this._pane&&this._toggleClasses(this._pane,p,!1)}getDirection(){const p=this._config.direction;return p?"string"==typeof p?p:p.value:"ltr"}updateScrollStrategy(p){p!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=p,this.hasAttached()&&(p.attach(this),p.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const p=this._pane.style;p.width=(0,pe.HM)(this._config.width),p.height=(0,pe.HM)(this._config.height),p.minWidth=(0,pe.HM)(this._config.minWidth),p.minHeight=(0,pe.HM)(this._config.minHeight),p.maxWidth=(0,pe.HM)(this._config.maxWidth),p.maxHeight=(0,pe.HM)(this._config.maxHeight)}_togglePointerEvents(p){this._pane.style.pointerEvents=p?"":"none"}_attachBackdrop(){const p="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(p)})}):this._backdropElement.classList.add(p)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const p=this._backdropElement;if(p){if(this._animationsDisabled)return void this._disposeBackdrop(p);p.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{p.addEventListener("transitionend",this._backdropTransitionendHandler)}),p.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(p)},500))}}_toggleClasses(p,a,h){const T=(0,pe.Eq)(a||[]).filter(P=>!!P);T.length&&(h?p.classList.add(...T):p.classList.remove(...T))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const p=this._ngZone.onStable.pipe((0,Tn.R)((0,ji.T)(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),p.unsubscribe())})})}_disposeScrollStrategy(){const p=this._scrollStrategy;p&&(p.disable(),p.detach&&p.detach())}_disposeBackdrop(p){p&&(p.removeEventListener("click",this._backdropClickHandler),p.removeEventListener("transitionend",this._backdropTransitionendHandler),p.remove(),this._backdropElement===p&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}const Wn="cdk-overlay-connected-position-bounding-box",xn=/([A-Za-z%]+)$/;class _r{get positions(){return this._preferredPositions}constructor(p,a,h,T,P){this._viewportRuler=a,this._document=h,this._platform=T,this._overlayContainer=P,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new Me.x,this._resizeSubscription=bt.w0.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(p)}attach(p){this._validatePositions(),p.hostElement.classList.add(Wn),this._overlayRef=p,this._boundingBox=p.hostElement,this._pane=p.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const p=this._originRect,a=this._overlayRect,h=this._viewportRect,T=this._containerRect,P=[];let X;for(let ce of this._preferredPositions){let We=this._getOriginPoint(p,T,ce),mt=this._getOverlayPoint(We,a,ce),on=this._getOverlayFit(mt,a,h,ce);if(on.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(ce,We);this._canFitWithFlexibleDimensions(on,mt,h)?P.push({position:ce,origin:We,overlayRect:a,boundingBoxRect:this._calculateBoundingBoxRect(We,ce)}):(!X||X.overlayFit.visibleArea<on.visibleArea)&&(X={overlayFit:on,overlayPoint:mt,originPoint:We,position:ce,overlayRect:a})}if(P.length){let ce=null,We=-1;for(const mt of P){const on=mt.boundingBoxRect.width*mt.boundingBoxRect.height*(mt.position.weight||1);on>We&&(We=on,ce=mt)}return this._isPushed=!1,void this._applyPosition(ce.position,ce.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(X.position,X.originPoint);this._applyPosition(X.position,X.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Ii(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(Wn),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const p=this._lastPosition;if(p){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const a=this._getOriginPoint(this._originRect,this._containerRect,p);this._applyPosition(p,a)}else this.apply()}withScrollableContainers(p){return this._scrollables=p,this}withPositions(p){return this._preferredPositions=p,-1===p.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(p){return this._viewportMargin=p,this}withFlexibleDimensions(p=!0){return this._hasFlexibleDimensions=p,this}withGrowAfterOpen(p=!0){return this._growAfterOpen=p,this}withPush(p=!0){return this._canPush=p,this}withLockedPosition(p=!0){return this._positionLocked=p,this}setOrigin(p){return this._origin=p,this}withDefaultOffsetX(p){return this._offsetX=p,this}withDefaultOffsetY(p){return this._offsetY=p,this}withTransformOriginOn(p){return this._transformOriginSelector=p,this}_getOriginPoint(p,a,h){let T,P;if("center"==h.originX)T=p.left+p.width/2;else{const X=this._isRtl()?p.right:p.left,ce=this._isRtl()?p.left:p.right;T="start"==h.originX?X:ce}return a.left<0&&(T-=a.left),P="center"==h.originY?p.top+p.height/2:"top"==h.originY?p.top:p.bottom,a.top<0&&(P-=a.top),{x:T,y:P}}_getOverlayPoint(p,a,h){let T,P;return T="center"==h.overlayX?-a.width/2:"start"===h.overlayX?this._isRtl()?-a.width:0:this._isRtl()?0:-a.width,P="center"==h.overlayY?-a.height/2:"top"==h.overlayY?0:-a.height,{x:p.x+T,y:p.y+P}}_getOverlayFit(p,a,h,T){const P=As(a);let{x:X,y:ce}=p,We=this._getOffset(T,"x"),mt=this._getOffset(T,"y");We&&(X+=We),mt&&(ce+=mt);let Un=0-ce,sr=ce+P.height-h.height,jr=this._subtractOverflows(P.width,0-X,X+P.width-h.width),ur=this._subtractOverflows(P.height,Un,sr),wa=jr*ur;return{visibleArea:wa,isCompletelyWithinViewport:P.width*P.height===wa,fitsInViewportVertically:ur===P.height,fitsInViewportHorizontally:jr==P.width}}_canFitWithFlexibleDimensions(p,a,h){if(this._hasFlexibleDimensions){const T=h.bottom-a.y,P=h.right-a.x,X=ms(this._overlayRef.getConfig().minHeight),ce=ms(this._overlayRef.getConfig().minWidth);return(p.fitsInViewportVertically||null!=X&&X<=T)&&(p.fitsInViewportHorizontally||null!=ce&&ce<=P)}return!1}_pushOverlayOnScreen(p,a,h){if(this._previousPushAmount&&this._positionLocked)return{x:p.x+this._previousPushAmount.x,y:p.y+this._previousPushAmount.y};const T=As(a),P=this._viewportRect,X=Math.max(p.x+T.width-P.width,0),ce=Math.max(p.y+T.height-P.height,0),We=Math.max(P.top-h.top-p.y,0),mt=Math.max(P.left-h.left-p.x,0);let on=0,ln=0;return on=T.width<=P.width?mt||-X:p.x<this._viewportMargin?P.left-h.left-p.x:0,ln=T.height<=P.height?We||-ce:p.y<this._viewportMargin?P.top-h.top-p.y:0,this._previousPushAmount={x:on,y:ln},{x:p.x+on,y:p.y+ln}}_applyPosition(p,a){if(this._setTransformOrigin(p),this._setOverlayElementStyles(a,p),this._setBoundingBoxStyles(a,p),p.panelClass&&this._addPanelClasses(p.panelClass),this._lastPosition=p,this._positionChanges.observers.length){const h=this._getScrollVisibility(),T=new vt(p,h);this._positionChanges.next(T)}this._isInitialRender=!1}_setTransformOrigin(p){if(!this._transformOriginSelector)return;const a=this._boundingBox.querySelectorAll(this._transformOriginSelector);let h,T=p.overlayY;h="center"===p.overlayX?"center":this._isRtl()?"start"===p.overlayX?"right":"left":"start"===p.overlayX?"left":"right";for(let P=0;P<a.length;P++)a[P].style.transformOrigin=`${h} ${T}`}_calculateBoundingBoxRect(p,a){const h=this._viewportRect,T=this._isRtl();let P,X,ce,on,ln,Un;if("top"===a.overlayY)X=p.y,P=h.height-X+this._viewportMargin;else if("bottom"===a.overlayY)ce=h.height-p.y+2*this._viewportMargin,P=h.height-ce+this._viewportMargin;else{const sr=Math.min(h.bottom-p.y+h.top,p.y),jr=this._lastBoundingBoxSize.height;P=2*sr,X=p.y-sr,P>jr&&!this._isInitialRender&&!this._growAfterOpen&&(X=p.y-jr/2)}if("end"===a.overlayX&&!T||"start"===a.overlayX&&T)Un=h.width-p.x+this._viewportMargin,on=p.x-this._viewportMargin;else if("start"===a.overlayX&&!T||"end"===a.overlayX&&T)ln=p.x,on=h.right-p.x;else{const sr=Math.min(h.right-p.x+h.left,p.x),jr=this._lastBoundingBoxSize.width;on=2*sr,ln=p.x-sr,on>jr&&!this._isInitialRender&&!this._growAfterOpen&&(ln=p.x-jr/2)}return{top:X,left:ln,bottom:ce,right:Un,width:on,height:P}}_setBoundingBoxStyles(p,a){const h=this._calculateBoundingBoxRect(p,a);!this._isInitialRender&&!this._growAfterOpen&&(h.height=Math.min(h.height,this._lastBoundingBoxSize.height),h.width=Math.min(h.width,this._lastBoundingBoxSize.width));const T={};if(this._hasExactPosition())T.top=T.left="0",T.bottom=T.right=T.maxHeight=T.maxWidth="",T.width=T.height="100%";else{const P=this._overlayRef.getConfig().maxHeight,X=this._overlayRef.getConfig().maxWidth;T.height=(0,pe.HM)(h.height),T.top=(0,pe.HM)(h.top),T.bottom=(0,pe.HM)(h.bottom),T.width=(0,pe.HM)(h.width),T.left=(0,pe.HM)(h.left),T.right=(0,pe.HM)(h.right),T.alignItems="center"===a.overlayX?"center":"end"===a.overlayX?"flex-end":"flex-start",T.justifyContent="center"===a.overlayY?"center":"bottom"===a.overlayY?"flex-end":"flex-start",P&&(T.maxHeight=(0,pe.HM)(P)),X&&(T.maxWidth=(0,pe.HM)(X))}this._lastBoundingBoxSize=h,Ii(this._boundingBox.style,T)}_resetBoundingBoxStyles(){Ii(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Ii(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(p,a){const h={},T=this._hasExactPosition(),P=this._hasFlexibleDimensions,X=this._overlayRef.getConfig();if(T){const on=this._viewportRuler.getViewportScrollPosition();Ii(h,this._getExactOverlayY(a,p,on)),Ii(h,this._getExactOverlayX(a,p,on))}else h.position="static";let ce="",We=this._getOffset(a,"x"),mt=this._getOffset(a,"y");We&&(ce+=`translateX(${We}px) `),mt&&(ce+=`translateY(${mt}px)`),h.transform=ce.trim(),X.maxHeight&&(T?h.maxHeight=(0,pe.HM)(X.maxHeight):P&&(h.maxHeight="")),X.maxWidth&&(T?h.maxWidth=(0,pe.HM)(X.maxWidth):P&&(h.maxWidth="")),Ii(this._pane.style,h)}_getExactOverlayY(p,a,h){let T={top:"",bottom:""},P=this._getOverlayPoint(a,this._overlayRect,p);return this._isPushed&&(P=this._pushOverlayOnScreen(P,this._overlayRect,h)),"bottom"===p.overlayY?T.bottom=this._document.documentElement.clientHeight-(P.y+this._overlayRect.height)+"px":T.top=(0,pe.HM)(P.y),T}_getExactOverlayX(p,a,h){let X,T={left:"",right:""},P=this._getOverlayPoint(a,this._overlayRect,p);return this._isPushed&&(P=this._pushOverlayOnScreen(P,this._overlayRect,h)),X=this._isRtl()?"end"===p.overlayX?"left":"right":"end"===p.overlayX?"right":"left","right"===X?T.right=this._document.documentElement.clientWidth-(P.x+this._overlayRect.width)+"px":T.left=(0,pe.HM)(P.x),T}_getScrollVisibility(){const p=this._getOriginRect(),a=this._pane.getBoundingClientRect(),h=this._scrollables.map(T=>T.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:Ar(p,h),isOriginOutsideView:ps(p,h),isOverlayClipped:Ar(a,h),isOverlayOutsideView:ps(a,h)}}_subtractOverflows(p,...a){return a.reduce((h,T)=>h-Math.max(T,0),p)}_getNarrowedViewportRect(){const p=this._document.documentElement.clientWidth,a=this._document.documentElement.clientHeight,h=this._viewportRuler.getViewportScrollPosition();return{top:h.top+this._viewportMargin,left:h.left+this._viewportMargin,right:h.left+p-this._viewportMargin,bottom:h.top+a-this._viewportMargin,width:p-2*this._viewportMargin,height:a-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(p,a){return"x"===a?null==p.offsetX?this._offsetX:p.offsetX:null==p.offsetY?this._offsetY:p.offsetY}_validatePositions(){}_addPanelClasses(p){this._pane&&(0,pe.Eq)(p).forEach(a=>{""!==a&&-1===this._appliedPanelClasses.indexOf(a)&&(this._appliedPanelClasses.push(a),this._pane.classList.add(a))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(p=>{this._pane.classList.remove(p)}),this._appliedPanelClasses=[])}_getOriginRect(){const p=this._origin;if(p instanceof _.SBq)return p.nativeElement.getBoundingClientRect();if(p instanceof Element)return p.getBoundingClientRect();const a=p.width||0,h=p.height||0;return{top:p.y,bottom:p.y+h,left:p.x,right:p.x+a,height:h,width:a}}}function Ii(Y,p){for(let a in p)p.hasOwnProperty(a)&&(Y[a]=p[a]);return Y}function ms(Y){if("number"!=typeof Y&&null!=Y){const[p,a]=Y.split(xn);return a&&"px"!==a?null:parseFloat(p)}return Y||null}function As(Y){return{top:Math.floor(Y.top),right:Math.floor(Y.right),bottom:Math.floor(Y.bottom),left:Math.floor(Y.left),width:Math.floor(Y.width),height:Math.floor(Y.height)}}const bs="cdk-global-overlay-wrapper";class Vr{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(p){const a=p.getConfig();this._overlayRef=p,this._width&&!a.width&&p.updateSize({width:this._width}),this._height&&!a.height&&p.updateSize({height:this._height}),p.hostElement.classList.add(bs),this._isDisposed=!1}top(p=""){return this._bottomOffset="",this._topOffset=p,this._alignItems="flex-start",this}left(p=""){return this._xOffset=p,this._xPosition="left",this}bottom(p=""){return this._topOffset="",this._bottomOffset=p,this._alignItems="flex-end",this}right(p=""){return this._xOffset=p,this._xPosition="right",this}start(p=""){return this._xOffset=p,this._xPosition="start",this}end(p=""){return this._xOffset=p,this._xPosition="end",this}width(p=""){return this._overlayRef?this._overlayRef.updateSize({width:p}):this._width=p,this}height(p=""){return this._overlayRef?this._overlayRef.updateSize({height:p}):this._height=p,this}centerHorizontally(p=""){return this.left(p),this._xPosition="center",this}centerVertically(p=""){return this.top(p),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const p=this._overlayRef.overlayElement.style,a=this._overlayRef.hostElement.style,h=this._overlayRef.getConfig(),{width:T,height:P,maxWidth:X,maxHeight:ce}=h,We=!("100%"!==T&&"100vw"!==T||X&&"100%"!==X&&"100vw"!==X),mt=!("100%"!==P&&"100vh"!==P||ce&&"100%"!==ce&&"100vh"!==ce),on=this._xPosition,ln=this._xOffset,Un="rtl"===this._overlayRef.getConfig().direction;let sr="",jr="",ur="";We?ur="flex-start":"center"===on?(ur="center",Un?jr=ln:sr=ln):Un?"left"===on||"end"===on?(ur="flex-end",sr=ln):("right"===on||"start"===on)&&(ur="flex-start",jr=ln):"left"===on||"start"===on?(ur="flex-start",sr=ln):("right"===on||"end"===on)&&(ur="flex-end",jr=ln),p.position=this._cssPosition,p.marginLeft=We?"0":sr,p.marginTop=mt?"0":this._topOffset,p.marginBottom=this._bottomOffset,p.marginRight=We?"0":jr,a.justifyContent=ur,a.alignItems=mt?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const p=this._overlayRef.overlayElement.style,a=this._overlayRef.hostElement,h=a.style;a.classList.remove(bs),h.justifyContent=h.alignItems=p.marginTop=p.marginBottom=p.marginLeft=p.marginRight=p.position="",this._overlayRef=null,this._isDisposed=!0}}let Qr=(()=>{class Y{constructor(a,h,T,P){this._viewportRuler=a,this._document=h,this._platform=T,this._overlayContainer=P}global(){return new Vr}flexibleConnectedTo(a){return new _r(a,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return Y.\u0275fac=function(a){return new(a||Y)(_.LFG(er),_.LFG(f.K0),_.LFG(ri.t4),_.LFG(Bt))},Y.\u0275prov=_.Yz7({token:Y,factory:Y.\u0275fac,providedIn:"root"}),Y})(),ao=0,Ci=(()=>{class Y{constructor(a,h,T,P,X,ce,We,mt,on,ln,Un,sr){this.scrollStrategies=a,this._overlayContainer=h,this._componentFactoryResolver=T,this._positionBuilder=P,this._keyboardDispatcher=X,this._injector=ce,this._ngZone=We,this._document=mt,this._directionality=on,this._location=ln,this._outsideClickDispatcher=Un,this._animationsModuleType=sr}create(a){const h=this._createHostElement(),T=this._createPaneElement(h),P=this._createPortalOutlet(T),X=new et(a);return X.direction=X.direction||this._directionality.value,new mn(P,h,T,X,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,"NoopAnimations"===this._animationsModuleType)}position(){return this._positionBuilder}_createPaneElement(a){const h=this._document.createElement("div");return h.id="cdk-overlay-"+ao++,h.classList.add("cdk-overlay-pane"),a.appendChild(h),h}_createHostElement(){const a=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(a),a}_createPortalOutlet(a){return this._appRef||(this._appRef=this._injector.get(_.z2F)),new Kn(a,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return Y.\u0275fac=function(a){return new(a||Y)(_.LFG(Vt),_.LFG(Bt),_.LFG(_._Vd),_.LFG(Qr),_.LFG(nt),_.LFG(_.zs3),_.LFG(_.R0b),_.LFG(f.K0),_.LFG(Gn.Is),_.LFG(f.Ye),_.LFG(wt),_.LFG(_.QbO,8))},Y.\u0275prov=_.Yz7({token:Y,factory:Y.\u0275fac,providedIn:"root"}),Y})();const Xn={provide:new _.OlP("cdk-connected-overlay-scroll-strategy"),deps:[Ci],useFactory:function wi(Y){return()=>Y.scrollStrategies.reposition()}};let cr=(()=>{class Y{}return Y.\u0275fac=function(a){return new(a||Y)},Y.\u0275mod=_.oAB({type:Y}),Y.\u0275inj=_.cJS({providers:[Ci,Xn],imports:[Gn.vT,os,rt,rt]}),Y})();var Li=L(2687),ar=L(9521),vr=L(9770);function Ti(Y,p){}class nr{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.closeOnNavigation=!0,this.closeOnDestroy=!0,this.closeOnOverlayDetachments=!0}}let Us=(()=>{class Y extends Yt{constructor(a,h,T,P,X,ce,We,mt){super(),this._elementRef=a,this._focusTrapFactory=h,this._config=P,this._interactivityChecker=X,this._ngZone=ce,this._overlayRef=We,this._focusMonitor=mt,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this.attachDomPortal=on=>{this._portalOutlet.hasAttached();const ln=this._portalOutlet.attachDomPortal(on);return this._contentAttached(),ln},this._ariaLabelledBy=this._config.ariaLabelledBy||null,this._document=T}_contentAttached(){this._initializeFocusTrap(),this._handleBackdropClicks(),this._captureInitialFocus()}_captureInitialFocus(){this._trapFocus()}ngOnDestroy(){this._restoreFocus()}attachComponentPortal(a){this._portalOutlet.hasAttached();const h=this._portalOutlet.attachComponentPortal(a);return this._contentAttached(),h}attachTemplatePortal(a){this._portalOutlet.hasAttached();const h=this._portalOutlet.attachTemplatePortal(a);return this._contentAttached(),h}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(a,h){this._interactivityChecker.isFocusable(a)||(a.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const T=()=>{a.removeEventListener("blur",T),a.removeEventListener("mousedown",T),a.removeAttribute("tabindex")};a.addEventListener("blur",T),a.addEventListener("mousedown",T)})),a.focus(h)}_focusByCssSelector(a,h){let T=this._elementRef.nativeElement.querySelector(a);T&&this._forceFocus(T,h)}_trapFocus(){const a=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||a.focus();break;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(h=>{h||this._focusDialogContainer()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus)}}_restoreFocus(){const a=this._config.restoreFocus;let h=null;if("string"==typeof a?h=this._document.querySelector(a):"boolean"==typeof a?h=a?this._elementFocusedBeforeDialogWasOpened:null:a&&(h=a),this._config.restoreFocus&&h&&"function"==typeof h.focus){const T=(0,ri.ht)(),P=this._elementRef.nativeElement;(!T||T===this._document.body||T===P||P.contains(T))&&(this._focusMonitor?(this._focusMonitor.focusVia(h,this._closeInteractionType),this._closeInteractionType=null):h.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const a=this._elementRef.nativeElement,h=(0,ri.ht)();return a===h||a.contains(h)}_initializeFocusTrap(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=(0,ri.ht)())}_handleBackdropClicks(){this._overlayRef.backdropClick().subscribe(()=>{this._config.disableClose&&this._recaptureFocus()})}}return Y.\u0275fac=function(a){return new(a||Y)(_.Y36(_.SBq),_.Y36(Li.qV),_.Y36(f.K0,8),_.Y36(nr),_.Y36(Li.ic),_.Y36(_.R0b),_.Y36(mn),_.Y36(Li.tE))},Y.\u0275cmp=_.Xpm({type:Y,selectors:[["cdk-dialog-container"]],viewQuery:function(a,h){if(1&a&&_.Gf(is,7),2&a){let T;_.iGM(T=_.CRH())&&(h._portalOutlet=T.first)}},hostAttrs:["tabindex","-1",1,"cdk-dialog-container"],hostVars:6,hostBindings:function(a,h){2&a&&_.uIk("id",h._config.id||null)("role",h._config.role)("aria-modal",h._config.ariaModal)("aria-labelledby",h._config.ariaLabel?null:h._ariaLabelledBy)("aria-label",h._config.ariaLabel)("aria-describedby",h._config.ariaDescribedBy||null)},features:[_.qOj],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(a,h){1&a&&_.YNc(0,Ti,0,0,"ng-template",0)},dependencies:[is],styles:[".cdk-dialog-container{display:block;width:100%;height:100%;min-height:inherit;max-height:inherit}"],encapsulation:2}),Y})();class as{constructor(p,a){this.overlayRef=p,this.config=a,this.closed=new Me.x,this.disableClose=a.disableClose,this.backdropClick=p.backdropClick(),this.keydownEvents=p.keydownEvents(),this.outsidePointerEvents=p.outsidePointerEvents(),this.id=a.id,this.keydownEvents.subscribe(h=>{h.keyCode===ar.hY&&!this.disableClose&&!(0,ar.Vb)(h)&&(h.preventDefault(),this.close(void 0,{focusOrigin:"keyboard"}))}),this.backdropClick.subscribe(()=>{this.disableClose||this.close(void 0,{focusOrigin:"mouse"})}),this._detachSubscription=p.detachments().subscribe(()=>{!1!==a.closeOnOverlayDetachments&&this.close()})}close(p,a){if(this.containerInstance){const h=this.closed;this.containerInstance._closeInteractionType=a?.focusOrigin||"program",this._detachSubscription.unsubscribe(),this.overlayRef.dispose(),h.next(p),h.complete(),this.componentInstance=this.containerInstance=null}}updatePosition(){return this.overlayRef.updatePosition(),this}updateSize(p="",a=""){return this.overlayRef.updateSize({width:p,height:a}),this}addPanelClass(p){return this.overlayRef.addPanelClass(p),this}removePanelClass(p){return this.overlayRef.removePanelClass(p),this}}const zi=new _.OlP("DialogScrollStrategy"),Ms=new _.OlP("DialogData"),Ws=new _.OlP("DefaultDialogConfig"),bo={provide:zi,deps:[Ci],useFactory:function Ao(Y){return()=>Y.scrollStrategies.block()}};let qo=0,Mo=(()=>{class Y{get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}constructor(a,h,T,P,X,ce){this._overlay=a,this._injector=h,this._defaultOptions=T,this._parentDialog=P,this._overlayContainer=X,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new Me.x,this._afterOpenedAtThisLevel=new Me.x,this._ariaHiddenElements=new Map,this.afterAllClosed=(0,vr.P)(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe((0,Ji.O)(void 0))),this._scrollStrategy=ce}open(a,h){(h={...this._defaultOptions||new nr,...h}).id=h.id||"cdk-dialog-"+qo++,h.id&&this.getDialogById(h.id);const P=this._getOverlayConfig(h),X=this._overlay.create(P),ce=new as(X,h),We=this._attachContainer(X,ce,h);return ce.containerInstance=We,this._attachDialogContent(a,ce,We,h),this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(ce),ce.closed.subscribe(()=>this._removeOpenDialog(ce,!0)),this.afterOpened.next(ce),ce}closeAll(){Vs(this.openDialogs,a=>a.close())}getDialogById(a){return this.openDialogs.find(h=>h.id===a)}ngOnDestroy(){Vs(this._openDialogsAtThisLevel,a=>{!1===a.config.closeOnDestroy&&this._removeOpenDialog(a,!1)}),Vs(this._openDialogsAtThisLevel,a=>a.close()),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._openDialogsAtThisLevel=[]}_getOverlayConfig(a){const h=new et({positionStrategy:a.positionStrategy||this._overlay.position().global().centerHorizontally().centerVertically(),scrollStrategy:a.scrollStrategy||this._scrollStrategy(),panelClass:a.panelClass,hasBackdrop:a.hasBackdrop,direction:a.direction,minWidth:a.minWidth,minHeight:a.minHeight,maxWidth:a.maxWidth,maxHeight:a.maxHeight,width:a.width,height:a.height,disposeOnNavigation:a.closeOnNavigation});return a.backdropClass&&(h.backdropClass=a.backdropClass),h}_attachContainer(a,h,T){const P=T.injector||T.viewContainerRef?.injector,X=[{provide:nr,useValue:T},{provide:as,useValue:h},{provide:mn,useValue:a}];let ce;T.container?"function"==typeof T.container?ce=T.container:(ce=T.container.type,X.push(...T.container.providers(T))):ce=Us;const We=new ot(ce,T.viewContainerRef,_.zs3.create({parent:P||this._injector,providers:X}),T.componentFactoryResolver);return a.attach(We).instance}_attachDialogContent(a,h,T,P){if(a instanceof _.Rgc){const X=this._createInjector(P,h,T,void 0);let ce={$implicit:P.data,dialogRef:h};P.templateContext&&(ce={...ce,..."function"==typeof P.templateContext?P.templateContext():P.templateContext}),T.attachTemplatePortal(new Fe(a,null,ce,X))}else{const X=this._createInjector(P,h,T,this._injector),ce=T.attachComponentPortal(new ot(a,P.viewContainerRef,X,P.componentFactoryResolver));h.componentInstance=ce.instance}}_createInjector(a,h,T,P){const X=a.injector||a.viewContainerRef?.injector,ce=[{provide:Ms,useValue:a.data},{provide:as,useValue:h}];return a.providers&&("function"==typeof a.providers?ce.push(...a.providers(h,a,T)):ce.push(...a.providers)),a.direction&&(!X||!X.get(Gn.Is,null,{optional:!0}))&&ce.push({provide:Gn.Is,useValue:{value:a.direction,change:(0,Ne.of)()}}),_.zs3.create({parent:X||P,providers:ce})}_removeOpenDialog(a,h){const T=this.openDialogs.indexOf(a);T>-1&&(this.openDialogs.splice(T,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((P,X)=>{P?X.setAttribute("aria-hidden",P):X.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),h&&this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const a=this._overlayContainer.getContainerElement();if(a.parentElement){const h=a.parentElement.children;for(let T=h.length-1;T>-1;T--){const P=h[T];P!==a&&"SCRIPT"!==P.nodeName&&"STYLE"!==P.nodeName&&!P.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(P,P.getAttribute("aria-hidden")),P.setAttribute("aria-hidden","true"))}}}_getAfterAllClosed(){const a=this._parentDialog;return a?a._getAfterAllClosed():this._afterAllClosedAtThisLevel}}return Y.\u0275fac=function(a){return new(a||Y)(_.LFG(Ci),_.LFG(_.zs3),_.LFG(Ws,8),_.LFG(Y,12),_.LFG(Bt),_.LFG(zi))},Y.\u0275prov=_.Yz7({token:Y,factory:Y.\u0275fac}),Y})();function Vs(Y,p){let a=Y.length;for(;a--;)p(Y[a])}let ko=(()=>{class Y{}return Y.\u0275fac=function(a){return new(a||Y)},Y.\u0275mod=_.oAB({type:Y}),Y.\u0275inj=_.cJS({providers:[Mo,bo],imports:[cr,os,Li.rt,os]}),Y})();var Xr=L(3238),Di=L(7340);function Xs(Y,p){}class us{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.delayFocusTrap=!0,this.closeOnNavigation=!0}}const kr="mdc-dialog--open",ir="mdc-dialog--opening",Rs="mdc-dialog--closing";let Bs=(()=>{class Y extends Us{constructor(a,h,T,P,X,ce,We,mt){super(a,h,T,P,X,ce,We,mt),this._animationStateChanged=new _.vpe}_captureInitialFocus(){this._config.delayFocusTrap||this._trapFocus()}_openAnimationDone(a){this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:a})}}return Y.\u0275fac=function(a){return new(a||Y)(_.Y36(_.SBq),_.Y36(Li.qV),_.Y36(f.K0,8),_.Y36(us),_.Y36(Li.ic),_.Y36(_.R0b),_.Y36(mn),_.Y36(Li.tE))},Y.\u0275cmp=_.Xpm({type:Y,selectors:[["ng-component"]],features:[_.qOj],decls:0,vars:0,template:function(a,h){},encapsulation:2}),Y})();const Hs="--mat-dialog-transition-duration";function Ks(Y){return null==Y?null:"number"==typeof Y?Y:Y.endsWith("ms")?(0,pe.su)(Y.substring(0,Y.length-2)):Y.endsWith("s")?1e3*(0,pe.su)(Y.substring(0,Y.length-1)):"0"===Y?0:null}let lo=(()=>{class Y extends Bs{constructor(a,h,T,P,X,ce,We,mt,on){super(a,h,T,P,X,ce,We,on),this._animationMode=mt,this._animationsEnabled="NoopAnimations"!==this._animationMode,this._hostElement=this._elementRef.nativeElement,this._openAnimationDuration=this._animationsEnabled?Ks(this._config.enterAnimationDuration)??150:0,this._closeAnimationDuration=this._animationsEnabled?Ks(this._config.exitAnimationDuration)??75:0,this._animationTimer=null,this._finishDialogOpen=()=>{this._clearAnimationClasses(),this._openAnimationDone(this._openAnimationDuration)},this._finishDialogClose=()=>{this._clearAnimationClasses(),this._animationStateChanged.emit({state:"closed",totalTime:this._closeAnimationDuration})}}_contentAttached(){super._contentAttached(),this._startOpenAnimation()}ngOnDestroy(){super.ngOnDestroy(),null!==this._animationTimer&&clearTimeout(this._animationTimer)}_startOpenAnimation(){this._animationStateChanged.emit({state:"opening",totalTime:this._openAnimationDuration}),this._animationsEnabled?(this._hostElement.style.setProperty(Hs,`${this._openAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(ir,kr)),this._waitForAnimationToComplete(this._openAnimationDuration,this._finishDialogOpen)):(this._hostElement.classList.add(kr),Promise.resolve().then(()=>this._finishDialogOpen()))}_startExitAnimation(){this._animationStateChanged.emit({state:"closing",totalTime:this._closeAnimationDuration}),this._hostElement.classList.remove(kr),this._animationsEnabled?(this._hostElement.style.setProperty(Hs,`${this._openAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(Rs)),this._waitForAnimationToComplete(this._closeAnimationDuration,this._finishDialogClose)):Promise.resolve().then(()=>this._finishDialogClose())}_clearAnimationClasses(){this._hostElement.classList.remove(ir,Rs)}_waitForAnimationToComplete(a,h){null!==this._animationTimer&&clearTimeout(this._animationTimer),this._animationTimer=setTimeout(h,a)}_requestAnimationFrame(a){this._ngZone.runOutsideAngular(()=>{"function"==typeof requestAnimationFrame?requestAnimationFrame(a):a()})}}return Y.\u0275fac=function(a){return new(a||Y)(_.Y36(_.SBq),_.Y36(Li.qV),_.Y36(f.K0,8),_.Y36(us),_.Y36(Li.ic),_.Y36(_.R0b),_.Y36(mn),_.Y36(_.QbO,8),_.Y36(Li.tE))},Y.\u0275cmp=_.Xpm({type:Y,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1",1,"mat-mdc-dialog-container","mdc-dialog"],hostVars:8,hostBindings:function(a,h){2&a&&(_.Ikx("id",h._config.id),_.uIk("aria-modal",h._config.ariaModal)("role",h._config.role)("aria-labelledby",h._config.ariaLabel?null:h._ariaLabelledBy)("aria-label",h._config.ariaLabel)("aria-describedby",h._config.ariaDescribedBy||null),_.ekj("_mat-animation-noopable",!h._animationsEnabled))},features:[_.qOj],decls:3,vars:0,consts:[[1,"mdc-dialog__container"],[1,"mat-mdc-dialog-surface","mdc-dialog__surface"],["cdkPortalOutlet",""]],template:function(a,h){1&a&&(_.TgZ(0,"div",0)(1,"div",1),_.YNc(2,Xs,0,0,"ng-template",2),_.qZA()())},dependencies:[is],styles:['.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-dialog,.mdc-dialog__scrim{position:fixed;top:0;left:0;align-items:center;justify-content:center;box-sizing:border-box;width:100%;height:100%}.mdc-dialog{display:none;z-index:var(--mdc-dialog-z-index, 7)}.mdc-dialog .mdc-dialog__content{padding:20px 24px 20px 24px}.mdc-dialog .mdc-dialog__surface{min-width:280px}@media(max-width: 592px){.mdc-dialog .mdc-dialog__surface{max-width:calc(100vw - 32px)}}@media(min-width: 592px){.mdc-dialog .mdc-dialog__surface{max-width:560px}}.mdc-dialog .mdc-dialog__surface{max-height:calc(100% - 32px)}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-width:none}@media(max-width: 960px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:560px;width:560px}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}@media(max-width: 720px)and (max-width: 672px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:calc(100vw - 112px)}}@media(max-width: 720px)and (min-width: 672px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:560px}}@media(max-width: 720px)and (max-height: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:calc(100vh - 160px)}}@media(max-width: 720px)and (min-height: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:560px}}@media(max-width: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}@media(max-width: 720px)and (max-height: 400px),(max-width: 600px),(min-width: 720px)and (max-height: 400px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{height:100%;max-height:100vh;max-width:100vw;width:100vw;border-radius:0}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{order:-1;left:-12px}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__header{padding:0 16px 9px;justify-content:flex-start}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__title{margin-left:calc(16px - 2 * 12px)}}@media(min-width: 960px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:calc(100vw - 400px)}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}.mdc-dialog.mdc-dialog__scrim--hidden .mdc-dialog__scrim{opacity:0}.mdc-dialog__scrim{opacity:0;z-index:-1}.mdc-dialog__container{display:flex;flex-direction:row;align-items:center;justify-content:space-around;box-sizing:border-box;height:100%;transform:scale(0.8);opacity:0;pointer-events:none}.mdc-dialog__surface{position:relative;display:flex;flex-direction:column;flex-grow:0;flex-shrink:0;box-sizing:border-box;max-width:100%;max-height:100%;pointer-events:auto;overflow-y:auto}.mdc-dialog__surface .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}[dir=rtl] .mdc-dialog__surface,.mdc-dialog__surface[dir=rtl]{text-align:right}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mdc-dialog__surface{outline:2px solid windowText}}.mdc-dialog__surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:2px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-dialog__surface::before{border-color:CanvasText}}@media screen and (-ms-high-contrast: active),screen and (-ms-high-contrast: none){.mdc-dialog__surface::before{content:none}}.mdc-dialog__title{display:block;margin-top:0;position:relative;flex-shrink:0;box-sizing:border-box;margin:0 0 1px;padding:0 24px 9px}.mdc-dialog__title::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}[dir=rtl] .mdc-dialog__title,.mdc-dialog__title[dir=rtl]{text-align:right}.mdc-dialog--scrollable .mdc-dialog__title{margin-bottom:1px;padding-bottom:15px}.mdc-dialog--fullscreen .mdc-dialog__header{align-items:baseline;border-bottom:1px solid rgba(0,0,0,0);display:inline-flex;justify-content:space-between;padding:0 24px 9px;z-index:1}@media screen and (forced-colors: active){.mdc-dialog--fullscreen .mdc-dialog__header{border-bottom-color:CanvasText}}.mdc-dialog--fullscreen .mdc-dialog__header .mdc-dialog__close{right:-12px}.mdc-dialog--fullscreen .mdc-dialog__title{margin-bottom:0;padding:0;border-bottom:0}.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__title{border-bottom:0;margin-bottom:0}.mdc-dialog--fullscreen .mdc-dialog__close{top:5px}.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__actions{border-top:1px solid rgba(0,0,0,0)}@media screen and (forced-colors: active){.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__actions{border-top-color:CanvasText}}.mdc-dialog--fullscreen--titleless .mdc-dialog__close{margin-top:4px}.mdc-dialog--fullscreen--titleless.mdc-dialog--scrollable .mdc-dialog__close{margin-top:0}.mdc-dialog__content{flex-grow:1;box-sizing:border-box;margin:0;overflow:auto}.mdc-dialog__content>:first-child{margin-top:0}.mdc-dialog__content>:last-child{margin-bottom:0}.mdc-dialog__title+.mdc-dialog__content,.mdc-dialog__header+.mdc-dialog__content{padding-top:0}.mdc-dialog--scrollable .mdc-dialog__title+.mdc-dialog__content{padding-top:8px;padding-bottom:8px}.mdc-dialog__content .mdc-deprecated-list:first-child:last-child{padding:6px 0 0}.mdc-dialog--scrollable .mdc-dialog__content .mdc-deprecated-list:first-child:last-child{padding:0}.mdc-dialog__actions{display:flex;position:relative;flex-shrink:0;flex-wrap:wrap;align-items:center;justify-content:flex-end;box-sizing:border-box;min-height:52px;margin:0;padding:8px;border-top:1px solid rgba(0,0,0,0)}@media screen and (forced-colors: active){.mdc-dialog__actions{border-top-color:CanvasText}}.mdc-dialog--stacked .mdc-dialog__actions{flex-direction:column;align-items:flex-end}.mdc-dialog__button{margin-left:8px;margin-right:0;max-width:100%;text-align:right}[dir=rtl] .mdc-dialog__button,.mdc-dialog__button[dir=rtl]{margin-left:0;margin-right:8px}.mdc-dialog__button:first-child{margin-left:0;margin-right:0}[dir=rtl] .mdc-dialog__button:first-child,.mdc-dialog__button:first-child[dir=rtl]{margin-left:0;margin-right:0}[dir=rtl] .mdc-dialog__button,.mdc-dialog__button[dir=rtl]{text-align:left}.mdc-dialog--stacked .mdc-dialog__button:not(:first-child){margin-top:12px}.mdc-dialog--open,.mdc-dialog--opening,.mdc-dialog--closing{display:flex}.mdc-dialog--opening .mdc-dialog__scrim{transition:opacity 150ms linear}.mdc-dialog--opening .mdc-dialog__container{transition:opacity 75ms linear,transform 150ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-dialog--closing .mdc-dialog__scrim,.mdc-dialog--closing .mdc-dialog__container{transition:opacity 75ms linear}.mdc-dialog--closing .mdc-dialog__container{transform:none}.mdc-dialog--open .mdc-dialog__scrim{opacity:1}.mdc-dialog--open .mdc-dialog__container{transform:none;opacity:1}.mdc-dialog--open.mdc-dialog__surface-scrim--shown .mdc-dialog__surface-scrim{opacity:1}.mdc-dialog--open.mdc-dialog__surface-scrim--hiding .mdc-dialog__surface-scrim{transition:opacity 75ms linear}.mdc-dialog--open.mdc-dialog__surface-scrim--showing .mdc-dialog__surface-scrim{transition:opacity 150ms linear}.mdc-dialog__surface-scrim{display:none;opacity:0;position:absolute;width:100%;height:100%;z-index:1}.mdc-dialog__surface-scrim--shown .mdc-dialog__surface-scrim,.mdc-dialog__surface-scrim--showing .mdc-dialog__surface-scrim,.mdc-dialog__surface-scrim--hiding .mdc-dialog__surface-scrim{display:block}.mdc-dialog-scroll-lock{overflow:hidden}.mdc-dialog--no-content-padding .mdc-dialog__content{padding:0}.mdc-dialog--sheet .mdc-dialog__close{right:12px;top:9px;position:absolute;z-index:1}.mdc-dialog__scrim--removed{pointer-events:none}.mdc-dialog__scrim--removed .mdc-dialog__scrim,.mdc-dialog__scrim--removed .mdc-dialog__surface-scrim{display:none}.mat-mdc-dialog-content{max-height:65vh}.mat-mdc-dialog-container{position:static;display:block}.mat-mdc-dialog-container,.mat-mdc-dialog-container .mdc-dialog__container,.mat-mdc-dialog-container .mdc-dialog__surface{max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit}.mat-mdc-dialog-container .mdc-dialog__surface{display:block;width:100%;height:100%}.mat-mdc-dialog-container{outline:0}.mat-mdc-dialog-container .mdc-dialog__surface{background-color:var(--mdc-dialog-container-color, white)}.mat-mdc-dialog-container .mdc-dialog__surface{box-shadow:var(--mdc-dialog-container-elevation, 0px 11px 15px -7px rgba(0, 0, 0, 0.2), 0px 24px 38px 3px rgba(0, 0, 0, 0.14), 0px 9px 46px 8px rgba(0, 0, 0, 0.12))}.mat-mdc-dialog-container .mdc-dialog__surface{border-radius:var(--mdc-dialog-container-shape, var(--mdc-shape-medium, 4px))}.mat-mdc-dialog-container.mdc-dialog--scrollable .mdc-dialog__title,.mat-mdc-dialog-container.mdc-dialog--scrollable .mdc-dialog__actions,.mat-mdc-dialog-container.mdc-dialog--scrollable.mdc-dialog-scroll-divider-footer .mdc-dialog__actions{border-color:var(--mdc-dialog-with-divider-divider-color, black)}.mat-mdc-dialog-container.mdc-dialog--scrollable .mdc-dialog__title{border-bottom-color:var(--mdc-dialog-with-divider-divider-color, black)}.mat-mdc-dialog-container .mdc-dialog__title{font-family:var(--mdc-dialog-subhead-font, "Arial");line-height:var(--mdc-dialog-subhead-line-height, 14px);font-size:var(--mdc-dialog-subhead-size, 14px);font-weight:var(--mdc-dialog-subhead-weight, 500);letter-spacing:var(--mdc-dialog-subhead-tracking, 1px)}.mat-mdc-dialog-container .mdc-dialog__title{color:var(--mdc-dialog-subhead-color, black)}.mat-mdc-dialog-container .mdc-dialog__content{font-family:var(--mdc-dialog-supporting-text-font, "Arial");line-height:var(--mdc-dialog-supporting-text-line-height, 14px);font-size:var(--mdc-dialog-supporting-text-size, 14px);font-weight:var(--mdc-dialog-supporting-text-weight, 500);letter-spacing:var(--mdc-dialog-supporting-text-tracking, 1px)}.mat-mdc-dialog-container .mdc-dialog__content{color:var(--mdc-dialog-supporting-text-color, black)}.mat-mdc-dialog-container .mdc-dialog__container{transition-duration:var(--mat-dialog-transition-duration, 0ms)}.mat-mdc-dialog-container._mat-animation-noopable .mdc-dialog__container{transition:none}.mat-mdc-dialog-content{display:block}.mat-mdc-dialog-actions{justify-content:start}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-center,.mat-mdc-dialog-actions[align=center]{justify-content:center}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-end,.mat-mdc-dialog-actions[align=end]{justify-content:flex-end}.mat-mdc-dialog-actions .mat-button-base+.mat-button-base,.mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-mdc-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}'],encapsulation:2}),Y})();class Zr{constructor(p,a,h){this._ref=p,this._containerInstance=h,this._afterOpened=new Me.x,this._beforeClosed=new Me.x,this._state=0,this.disableClose=a.disableClose,this.id=p.id,h._animationStateChanged.pipe((0,xe.h)(T=>"opened"===T.state),(0,Nt.q)(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),h._animationStateChanged.pipe((0,xe.h)(T=>"closed"===T.state),(0,Nt.q)(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),p.overlayRef.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._finishDialogClose()}),(0,ji.T)(this.backdropClick(),this.keydownEvents().pipe((0,xe.h)(T=>T.keyCode===ar.hY&&!this.disableClose&&!(0,ar.Vb)(T)))).subscribe(T=>{this.disableClose||(T.preventDefault(),function eo(Y,p,a){Y._closeInteractionType=p,Y.close(a)}(this,"keydown"===T.type?"keyboard":"mouse"))})}close(p){this._result=p,this._containerInstance._animationStateChanged.pipe((0,xe.h)(a=>"closing"===a.state),(0,Nt.q)(1)).subscribe(a=>{this._beforeClosed.next(p),this._beforeClosed.complete(),this._ref.overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),a.totalTime+100)}),this._state=1,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._ref.closed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._ref.backdropClick}keydownEvents(){return this._ref.keydownEvents}updatePosition(p){let a=this._ref.config.positionStrategy;return p&&(p.left||p.right)?p.left?a.left(p.left):a.right(p.right):a.centerHorizontally(),p&&(p.top||p.bottom)?p.top?a.top(p.top):a.bottom(p.bottom):a.centerVertically(),this._ref.updatePosition(),this}updateSize(p="",a=""){return this._ref.updateSize(p,a),this}addPanelClass(p){return this._ref.addPanelClass(p),this}removePanelClass(p){return this._ref.removePanelClass(p),this}getState(){return this._state}_finishDialogClose(){this._state=2,this._ref.close(this._result,{focusOrigin:this._closeInteractionType}),this.componentInstance=null}}const co=new _.OlP("MatMdcDialogData"),Eo=new _.OlP("mat-mdc-dialog-default-options"),Vo=new _.OlP("mat-mdc-dialog-scroll-strategy"),uo={provide:Vo,deps:[Ci],useFactory:function go(Y){return()=>Y.scrollStrategies.block()}};let Xi=0,ho=(()=>{class Y{get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const a=this._parentDialog;return a?a._getAfterAllClosed():this._afterAllClosedAtThisLevel}constructor(a,h,T,P,X,ce,We,mt,on,ln){this._overlay=a,this._defaultOptions=T,this._parentDialog=P,this._dialogRefConstructor=We,this._dialogContainerType=mt,this._dialogDataToken=on,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new Me.x,this._afterOpenedAtThisLevel=new Me.x,this._idPrefix="mat-dialog-",this.dialogConfigClass=us,this.afterAllClosed=(0,vr.P)(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe((0,Ji.O)(void 0))),this._scrollStrategy=ce,this._dialog=h.get(Mo)}open(a,h){let T;(h={...this._defaultOptions||new us,...h}).id=h.id||`${this._idPrefix}${Xi++}`,h.scrollStrategy=h.scrollStrategy||this._scrollStrategy();const P=this._dialog.open(a,{...h,positionStrategy:this._overlay.position().global().centerHorizontally().centerVertically(),disableClose:!0,closeOnDestroy:!1,closeOnOverlayDetachments:!1,container:{type:this._dialogContainerType,providers:()=>[{provide:this.dialogConfigClass,useValue:h},{provide:nr,useValue:h}]},templateContext:()=>({dialogRef:T}),providers:(X,ce,We)=>(T=new this._dialogRefConstructor(X,h,We),T.updatePosition(h?.position),[{provide:this._dialogContainerType,useValue:We},{provide:this._dialogDataToken,useValue:ce.data},{provide:this._dialogRefConstructor,useValue:T}])});return T.componentInstance=P.componentInstance,this.openDialogs.push(T),this.afterOpened.next(T),T.afterClosed().subscribe(()=>{const X=this.openDialogs.indexOf(T);X>-1&&(this.openDialogs.splice(X,1),this.openDialogs.length||this._getAfterAllClosed().next())}),T}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(a){return this.openDialogs.find(h=>h.id===a)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_closeDialogs(a){let h=a.length;for(;h--;)a[h].close()}}return Y.\u0275fac=function(a){_.$Z()},Y.\u0275prov=_.Yz7({token:Y,factory:Y.\u0275fac}),Y})(),Kr=(()=>{class Y extends ho{constructor(a,h,T,P,X,ce,We,mt){super(a,h,P,ce,We,X,Zr,lo,co,mt),this._idPrefix="mat-mdc-dialog-"}}return Y.\u0275fac=function(a){return new(a||Y)(_.LFG(Ci),_.LFG(_.zs3),_.LFG(f.Ye,8),_.LFG(Eo,8),_.LFG(Vo),_.LFG(Y,12),_.LFG(Bt),_.LFG(_.QbO,8))},Y.\u0275prov=_.Yz7({token:Y,factory:Y.\u0275fac}),Y})(),rr=0,Ts=(()=>{class Y{constructor(a,h,T){this._dialogRef=a,this._elementRef=h,this._dialog=T,this.id="mat-mdc-dialog-title-"+rr++}ngOnInit(){this._dialogRef||(this._dialogRef=function Mr(Y,p){let a=Y.nativeElement.parentElement;for(;a&&!a.classList.contains("mat-mdc-dialog-container");)a=a.parentElement;return a?p.find(h=>h.id===a.id):null}(this._elementRef,this._dialog.openDialogs)),this._dialogRef&&Promise.resolve().then(()=>{const a=this._dialogRef._containerInstance;a&&!a._ariaLabelledBy&&(a._ariaLabelledBy=this.id)})}}return Y.\u0275fac=function(a){return new(a||Y)(_.Y36(Zr,8),_.Y36(_.SBq),_.Y36(Kr))},Y.\u0275dir=_.lG2({type:Y,selectors:[["","mat-dialog-title",""],["","matDialogTitle",""]],hostAttrs:[1,"mat-mdc-dialog-title","mdc-dialog__title"],hostVars:1,hostBindings:function(a,h){2&a&&_.Ikx("id",h.id)},inputs:{id:"id"},exportAs:["matDialogTitle"]}),Y})(),Bi=(()=>{class Y{}return Y.\u0275fac=function(a){return new(a||Y)},Y.\u0275dir=_.lG2({type:Y,selectors:[["","mat-dialog-content",""],["mat-dialog-content"],["","matDialogContent",""]],hostAttrs:[1,"mat-mdc-dialog-content","mdc-dialog__content"]}),Y})(),Bo=(()=>{class Y{constructor(){this.align="start"}}return Y.\u0275fac=function(a){return new(a||Y)},Y.\u0275dir=_.lG2({type:Y,selectors:[["","mat-dialog-actions",""],["mat-dialog-actions"],["","matDialogActions",""]],hostAttrs:[1,"mat-mdc-dialog-actions","mdc-dialog__actions"],hostVars:4,hostBindings:function(a,h){2&a&&_.ekj("mat-mdc-dialog-actions-align-center","center"===h.align)("mat-mdc-dialog-actions-align-end","end"===h.align)},inputs:{align:"align"}}),Y})(),Es=(()=>{class Y{}return Y.\u0275fac=function(a){return new(a||Y)},Y.\u0275mod=_.oAB({type:Y}),Y.\u0275inj=_.cJS({providers:[Kr,uo],imports:[ko,cr,os,Xr.BQ,Xr.BQ]}),Y})();var Jr=L(7977),Io=L(1173),ai=L(9101),fo=L(9643);const _s=["matFormFieldNotchedOutline",""],si=["*"],ie=["textField"],ee=["iconPrefixContainer"],Q=["textPrefixContainer"];function De(Y,p){1&Y&&_._UZ(0,"span",19)}function en(Y,p){if(1&Y){const a=_.EpF();_.TgZ(0,"label",17),_.NdJ("cdkObserveContent",function(){_.CHM(a);const T=_.oxw(2);return _.KtG(T._refreshOutlineNotchWidth())}),_.Hsn(1,1),_.YNc(2,De,1,0,"span",18),_.qZA()}if(2&Y){const a=_.oxw(2);_.Q6J("floating",a._shouldLabelFloat())("cdkObserveContentDisabled",!a._hasOutline())("id",a._labelId),_.uIk("for",a._control.id)("aria-owns",a._control.id),_.xp6(2),_.Q6J("ngIf",!a.hideRequiredMarker&&a._control.required)}}function ti(Y,p){if(1&Y&&_.YNc(0,en,3,6,"label",16),2&Y){const a=_.oxw();_.Q6J("ngIf",a._hasFloatingLabel())}}function Br(Y,p){1&Y&&_._UZ(0,"div",20)}function tr(Y,p){}function pn(Y,p){if(1&Y&&_.YNc(0,tr,0,0,"ng-template",22),2&Y){_.oxw(2);const a=_.MAs(1);_.Q6J("ngTemplateOutlet",a)}}function Si(Y,p){if(1&Y&&(_.TgZ(0,"div",21),_.YNc(1,pn,1,1,"ng-template",9),_.qZA()),2&Y){const a=_.oxw();_.Q6J("matFormFieldNotchedOutlineOpen",a._shouldLabelFloat())("matFormFieldNotchedOutlineLabelWidth",a._labelWidth),_.xp6(1),_.Q6J("ngIf",!a._forceDisplayInfixLabel())}}function Zo(Y,p){1&Y&&(_.TgZ(0,"div",23,24),_.Hsn(2,2),_.qZA())}function ma(Y,p){1&Y&&(_.TgZ(0,"div",25,26),_.Hsn(2,3),_.qZA())}function es(Y,p){}function ga(Y,p){if(1&Y&&_.YNc(0,es,0,0,"ng-template",22),2&Y){_.oxw();const a=_.MAs(1);_.Q6J("ngTemplateOutlet",a)}}function aa(Y,p){1&Y&&(_.TgZ(0,"div",27),_.Hsn(1,4),_.qZA())}function to(Y,p){1&Y&&(_.TgZ(0,"div",28),_.Hsn(1,5),_.qZA())}function _a(Y,p){1&Y&&_._UZ(0,"div",29)}function Yo(Y,p){if(1&Y&&(_.TgZ(0,"div",30),_.Hsn(1,6),_.qZA()),2&Y){const a=_.oxw();_.Q6J("@transitionMessages",a._subscriptAnimationState)}}function Ro(Y,p){if(1&Y&&(_.TgZ(0,"mat-hint",34),_._uU(1),_.qZA()),2&Y){const a=_.oxw(2);_.Q6J("id",a._hintLabelId),_.xp6(1),_.Oqu(a.hintLabel)}}function la(Y,p){if(1&Y&&(_.TgZ(0,"div",31),_.YNc(1,Ro,2,2,"mat-hint",32),_.Hsn(2,7),_._UZ(3,"div",33),_.Hsn(4,8),_.qZA()),2&Y){const a=_.oxw();_.Q6J("@transitionMessages",a._subscriptAnimationState),_.xp6(1),_.Q6J("ngIf",a.hintLabel)}}const ca=["*",[["mat-label"]],[["","matPrefix",""],["","matIconPrefix",""]],[["","matTextPrefix",""]],[["","matTextSuffix",""]],[["","matSuffix",""],["","matIconSuffix",""]],[["mat-error"],["","matError",""]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],Rr=["*","mat-label","[matPrefix], [matIconPrefix]","[matTextPrefix]","[matTextSuffix]","[matSuffix], [matIconSuffix]","mat-error, [matError]","mat-hint:not([align='end'])","mat-hint[align='end']"];let Os=(()=>{class Y{}return Y.\u0275fac=function(a){return new(a||Y)},Y.\u0275dir=_.lG2({type:Y,selectors:[["mat-label"]]}),Y})();const Ho=new _.OlP("MatError");let Co=0,Zs=(()=>{class Y{constructor(){this.align="start",this.id="mat-mdc-hint-"+Co++}}return Y.\u0275fac=function(a){return new(a||Y)},Y.\u0275dir=_.lG2({type:Y,selectors:[["mat-hint"]],hostAttrs:[1,"mat-mdc-form-field-hint","mat-mdc-form-field-bottom-align"],hostVars:4,hostBindings:function(a,h){2&a&&(_.Ikx("id",h.id),_.uIk("align",null),_.ekj("mat-mdc-form-field-hint-end","end"===h.align))},inputs:{align:"align",id:"id"}}),Y})();const ya=new _.OlP("MatPrefix"),To=new _.OlP("MatSuffix");let La=(()=>{class Y{constructor(a){this._elementRef=a,this.floating=!1}getWidth(){return function zo(Y){if(null!==Y.offsetParent)return Y.scrollWidth;const a=Y.cloneNode(!0);a.style.setProperty("position","absolute"),a.style.setProperty("transform","translate(-9999px, -9999px)"),document.documentElement.appendChild(a);const h=a.scrollWidth;return a.remove(),h}(this._elementRef.nativeElement)}get element(){return this._elementRef.nativeElement}}return Y.\u0275fac=function(a){return new(a||Y)(_.Y36(_.SBq))},Y.\u0275dir=_.lG2({type:Y,selectors:[["label","matFormFieldFloatingLabel",""]],hostAttrs:[1,"mdc-floating-label","mat-mdc-floating-label"],hostVars:2,hostBindings:function(a,h){2&a&&_.ekj("mdc-floating-label--float-above",h.floating)},inputs:{floating:"floating"}}),Y})();const El="mdc-line-ripple--active",ds="mdc-line-ripple--deactivating";let Ua=(()=>{class Y{constructor(a,h){this._elementRef=a,this._handleTransitionEnd=T=>{const P=this._elementRef.nativeElement.classList,X=P.contains(ds);"opacity"===T.propertyName&&X&&P.remove(El,ds)},h.runOutsideAngular(()=>{a.nativeElement.addEventListener("transitionend",this._handleTransitionEnd)})}activate(){const a=this._elementRef.nativeElement.classList;a.remove(ds),a.add(El)}deactivate(){this._elementRef.nativeElement.classList.add(ds)}ngOnDestroy(){this._elementRef.nativeElement.removeEventListener("transitionend",this._handleTransitionEnd)}}return Y.\u0275fac=function(a){return new(a||Y)(_.Y36(_.SBq),_.Y36(_.R0b))},Y.\u0275dir=_.lG2({type:Y,selectors:[["div","matFormFieldLineRipple",""]],hostAttrs:[1,"mdc-line-ripple"]}),Y})(),za=(()=>{class Y{constructor(a,h){this._elementRef=a,this._ngZone=h,this.labelWidth=0,this.open=!1}ngAfterViewInit(){const a=this._elementRef.nativeElement.querySelector(".mdc-floating-label");a?(this._elementRef.nativeElement.classList.add("mdc-notched-outline--upgraded"),"function"==typeof requestAnimationFrame&&(a.style.transitionDuration="0s",this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>a.style.transitionDuration="")}))):this._elementRef.nativeElement.classList.add("mdc-notched-outline--no-label")}_getNotchWidth(){return this.open?this.labelWidth>0?`calc(${this.labelWidth}px * var(--mat-mdc-form-field-floating-label-scale, 0.75) + 9px)`:"0px":null}}return Y.\u0275fac=function(a){return new(a||Y)(_.Y36(_.SBq),_.Y36(_.R0b))},Y.\u0275cmp=_.Xpm({type:Y,selectors:[["div","matFormFieldNotchedOutline",""]],hostAttrs:[1,"mdc-notched-outline"],hostVars:2,hostBindings:function(a,h){2&a&&_.ekj("mdc-notched-outline--notched",h.open)},inputs:{labelWidth:["matFormFieldNotchedOutlineLabelWidth","labelWidth"],open:["matFormFieldNotchedOutlineOpen","open"]},attrs:_s,ngContentSelectors:si,decls:4,vars:2,consts:[[1,"mdc-notched-outline__leading"],[1,"mdc-notched-outline__notch"],[1,"mdc-notched-outline__trailing"]],template:function(a,h){1&a&&(_.F$t(),_._UZ(0,"div",0),_.TgZ(1,"div",1),_.Hsn(2),_.qZA(),_._UZ(3,"div",2)),2&a&&(_.xp6(1),_.Udp("width",h._getNotchWidth()))},encapsulation:2,changeDetection:0}),Y})();const $a={transitionMessages:(0,Di.X$)("transitionMessages",[(0,Di.SB)("enter",(0,Di.oB)({opacity:1,transform:"translateY(0%)"})),(0,Di.eR)("void => enter",[(0,Di.oB)({opacity:0,transform:"translateY(-5px)"}),(0,Di.jt)("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let Xo=(()=>{class Y{}return Y.\u0275fac=function(a){return new(a||Y)},Y.\u0275dir=_.lG2({type:Y}),Y})();const Do=new _.OlP("MatFormField"),no=new _.OlP("MAT_FORM_FIELD_DEFAULT_OPTIONS");let me=0;const S="fill",J="fixed";let ve=(()=>{class Y{get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(a){this._hideRequiredMarker=(0,pe.Ig)(a)}get floatLabel(){return this._floatLabel||this._defaults?.floatLabel||"auto"}set floatLabel(a){a!==this._floatLabel&&(this._floatLabel=a,this._changeDetectorRef.markForCheck())}get appearance(){return this._appearance}set appearance(a){const h=this._appearance;this._appearance=a||this._defaults?.appearance||S,"outline"===this._appearance&&this._appearance!==h&&(this._refreshOutlineNotchWidth(),this._needsOutlineLabelOffsetUpdateOnStable=!0)}get subscriptSizing(){return this._subscriptSizing||this._defaults?.subscriptSizing||J}set subscriptSizing(a){this._subscriptSizing=a||this._defaults?.subscriptSizing||J}get hintLabel(){return this._hintLabel}set hintLabel(a){this._hintLabel=a,this._processHints()}get _control(){return this._explicitFormFieldControl||this._formFieldControl}set _control(a){this._explicitFormFieldControl=a}constructor(a,h,T,P,X,ce,We,mt){this._elementRef=a,this._changeDetectorRef=h,this._ngZone=T,this._dir=P,this._platform=X,this._defaults=ce,this._animationMode=We,this._document=mt,this._hideRequiredMarker=!1,this.color="primary",this._appearance=S,this._subscriptSizing=null,this._hintLabel="",this._hasIconPrefix=!1,this._hasTextPrefix=!1,this._hasIconSuffix=!1,this._hasTextSuffix=!1,this._labelId="mat-mdc-form-field-label-"+me++,this._hintLabelId="mat-mdc-hint-"+me++,this._subscriptAnimationState="",this._labelWidth=0,this._destroyed=new Me.x,this._isFocused=null,this._needsOutlineLabelOffsetUpdateOnStable=!1,ce&&(ce.appearance&&(this.appearance=ce.appearance),this._hideRequiredMarker=Boolean(ce?.hideRequiredMarker),ce.color&&(this.color=ce.color))}ngAfterViewInit(){this._updateFocusState(),this._refreshOutlineNotchWidth(),this._document?.fonts?.ready?this._document.fonts.ready.then(()=>{this._refreshOutlineNotchWidth(),this._changeDetectorRef.markForCheck()}):setTimeout(()=>this._refreshOutlineNotchWidth(),100),this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngAfterContentInit(){this._assertFormFieldControl(),this._initializeControl(),this._initializeSubscript(),this._initializePrefixAndSuffix(),this._initializeOutlineLabelOffsetSubscriptions()}ngAfterContentChecked(){this._assertFormFieldControl()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._textField||this._elementRef}_animateAndLockLabel(){this._hasFloatingLabel()&&(this.floatLabel="always")}_initializeControl(){const a=this._control;a.controlType&&this._elementRef.nativeElement.classList.add(`mat-mdc-form-field-type-${a.controlType}`),a.stateChanges.subscribe(()=>{this._updateFocusState(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),a.ngControl&&a.ngControl.valueChanges&&a.ngControl.valueChanges.pipe((0,Tn.R)(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck())}_checkPrefixAndSuffixTypes(){this._hasIconPrefix=!!this._prefixChildren.find(a=>!a._isText),this._hasTextPrefix=!!this._prefixChildren.find(a=>a._isText),this._hasIconSuffix=!!this._suffixChildren.find(a=>!a._isText),this._hasTextSuffix=!!this._suffixChildren.find(a=>a._isText)}_initializePrefixAndSuffix(){this._checkPrefixAndSuffixTypes(),(0,ji.T)(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._checkPrefixAndSuffixTypes(),this._changeDetectorRef.markForCheck()})}_initializeSubscript(){this._hintChildren.changes.subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._validateHints(),this._syncDescribedByIds()}_assertFormFieldControl(){}_updateFocusState(){this._control.focused&&!this._isFocused?(this._isFocused=!0,this._lineRipple?.activate()):!this._control.focused&&(this._isFocused||null===this._isFocused)&&(this._isFocused=!1,this._lineRipple?.deactivate()),this._textField?.nativeElement.classList.toggle("mdc-text-field--focused",this._control.focused)}_initializeOutlineLabelOffsetSubscriptions(){this._prefixChildren.changes.subscribe(()=>this._needsOutlineLabelOffsetUpdateOnStable=!0),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe((0,Tn.R)(this._destroyed)).subscribe(()=>{this._needsOutlineLabelOffsetUpdateOnStable&&(this._needsOutlineLabelOffsetUpdateOnStable=!1,this._updateOutlineLabelOffset())})}),this._dir.change.pipe((0,Tn.R)(this._destroyed)).subscribe(()=>this._needsOutlineLabelOffsetUpdateOnStable=!0)}_shouldAlwaysFloat(){return"always"===this.floatLabel}_hasOutline(){return"outline"===this.appearance}_forceDisplayInfixLabel(){return!this._platform.isBrowser&&this._prefixChildren.length&&!this._shouldLabelFloat()}_hasFloatingLabel(){return!!this._labelChildNonStatic||!!this._labelChildStatic}_shouldLabelFloat(){return this._control.shouldLabelFloat||this._shouldAlwaysFloat()}_shouldForward(a){const h=this._control?this._control.ngControl:null;return h&&h[a]}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_refreshOutlineNotchWidth(){!this._hasOutline()||!this._floatingLabel||(this._labelWidth=this._floatingLabel.getWidth())}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_syncDescribedByIds(){if(this._control){let a=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&a.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const h=this._hintChildren?this._hintChildren.find(P=>"start"===P.align):null,T=this._hintChildren?this._hintChildren.find(P=>"end"===P.align):null;h?a.push(h.id):this._hintLabel&&a.push(this._hintLabelId),T&&a.push(T.id)}else this._errorChildren&&a.push(...this._errorChildren.map(h=>h.id));this._control.setDescribedByIds(a)}}_updateOutlineLabelOffset(){if(!this._platform.isBrowser||!this._hasOutline()||!this._floatingLabel)return;const a=this._floatingLabel.element;if(!this._iconPrefixContainer&&!this._textPrefixContainer)return void(a.style.transform="");if(!this._isAttachedToDom())return void(this._needsOutlineLabelOffsetUpdateOnStable=!0);const h=this._iconPrefixContainer?.nativeElement,T=this._textPrefixContainer?.nativeElement,P=h?.getBoundingClientRect().width??0,X=T?.getBoundingClientRect().width??0;a.style.transform=`var(\n        --mat-mdc-form-field-label-transform,\n        translateY(-50%) translateX(calc(${"rtl"===this._dir.value?"-1":"1"} * (${P+X}px + var(--mat-mdc-form-field-label-offset-x, 0px))))\n    )`}_isAttachedToDom(){const a=this._elementRef.nativeElement;if(a.getRootNode){const h=a.getRootNode();return h&&h!==a}return document.documentElement.contains(a)}}return Y.\u0275fac=function(a){return new(a||Y)(_.Y36(_.SBq),_.Y36(_.sBO),_.Y36(_.R0b),_.Y36(Gn.Is),_.Y36(ri.t4),_.Y36(no,8),_.Y36(_.QbO,8),_.Y36(f.K0))},Y.\u0275cmp=_.Xpm({type:Y,selectors:[["mat-form-field"]],contentQueries:function(a,h,T){if(1&a&&(_.Suo(T,Os,5),_.Suo(T,Os,7),_.Suo(T,Xo,5),_.Suo(T,ya,5),_.Suo(T,To,5),_.Suo(T,Ho,5),_.Suo(T,Zs,5)),2&a){let P;_.iGM(P=_.CRH())&&(h._labelChildNonStatic=P.first),_.iGM(P=_.CRH())&&(h._labelChildStatic=P.first),_.iGM(P=_.CRH())&&(h._formFieldControl=P.first),_.iGM(P=_.CRH())&&(h._prefixChildren=P),_.iGM(P=_.CRH())&&(h._suffixChildren=P),_.iGM(P=_.CRH())&&(h._errorChildren=P),_.iGM(P=_.CRH())&&(h._hintChildren=P)}},viewQuery:function(a,h){if(1&a&&(_.Gf(ie,5),_.Gf(ee,5),_.Gf(Q,5),_.Gf(La,5),_.Gf(za,5),_.Gf(Ua,5)),2&a){let T;_.iGM(T=_.CRH())&&(h._textField=T.first),_.iGM(T=_.CRH())&&(h._iconPrefixContainer=T.first),_.iGM(T=_.CRH())&&(h._textPrefixContainer=T.first),_.iGM(T=_.CRH())&&(h._floatingLabel=T.first),_.iGM(T=_.CRH())&&(h._notchedOutline=T.first),_.iGM(T=_.CRH())&&(h._lineRipple=T.first)}},hostAttrs:[1,"mat-mdc-form-field"],hostVars:42,hostBindings:function(a,h){2&a&&_.ekj("mat-mdc-form-field-label-always-float",h._shouldAlwaysFloat())("mat-mdc-form-field-has-icon-prefix",h._hasIconPrefix)("mat-mdc-form-field-has-icon-suffix",h._hasIconSuffix)("mat-form-field-invalid",h._control.errorState)("mat-form-field-disabled",h._control.disabled)("mat-form-field-autofilled",h._control.autofilled)("mat-form-field-no-animations","NoopAnimations"===h._animationMode)("mat-form-field-appearance-fill","fill"==h.appearance)("mat-form-field-appearance-outline","outline"==h.appearance)("mat-form-field-hide-placeholder",h._hasFloatingLabel()&&!h._shouldLabelFloat())("mat-focused",h._control.focused)("mat-primary","accent"!==h.color&&"warn"!==h.color)("mat-accent","accent"===h.color)("mat-warn","warn"===h.color)("ng-untouched",h._shouldForward("untouched"))("ng-touched",h._shouldForward("touched"))("ng-pristine",h._shouldForward("pristine"))("ng-dirty",h._shouldForward("dirty"))("ng-valid",h._shouldForward("valid"))("ng-invalid",h._shouldForward("invalid"))("ng-pending",h._shouldForward("pending"))},inputs:{hideRequiredMarker:"hideRequiredMarker",color:"color",floatLabel:"floatLabel",appearance:"appearance",subscriptSizing:"subscriptSizing",hintLabel:"hintLabel"},exportAs:["matFormField"],features:[_._Bn([{provide:Do,useExisting:Y}])],ngContentSelectors:Rr,decls:18,vars:23,consts:[["labelTemplate",""],[1,"mat-mdc-text-field-wrapper","mdc-text-field",3,"click"],["textField",""],["class","mat-mdc-form-field-focus-overlay",4,"ngIf"],[1,"mat-mdc-form-field-flex"],["matFormFieldNotchedOutline","",3,"matFormFieldNotchedOutlineOpen","matFormFieldNotchedOutlineLabelWidth",4,"ngIf"],["class","mat-mdc-form-field-icon-prefix",4,"ngIf"],["class","mat-mdc-form-field-text-prefix",4,"ngIf"],[1,"mat-mdc-form-field-infix"],[3,"ngIf"],["class","mat-mdc-form-field-text-suffix",4,"ngIf"],["class","mat-mdc-form-field-icon-suffix",4,"ngIf"],["matFormFieldLineRipple","",4,"ngIf"],[1,"mat-mdc-form-field-subscript-wrapper","mat-mdc-form-field-bottom-align",3,"ngSwitch"],["class","mat-mdc-form-field-error-wrapper",4,"ngSwitchCase"],["class","mat-mdc-form-field-hint-wrapper",4,"ngSwitchCase"],["matFormFieldFloatingLabel","",3,"floating","cdkObserveContentDisabled","id","cdkObserveContent",4,"ngIf"],["matFormFieldFloatingLabel","",3,"floating","cdkObserveContentDisabled","id","cdkObserveContent"],["aria-hidden","true","class","mat-mdc-form-field-required-marker mdc-floating-label--required",4,"ngIf"],["aria-hidden","true",1,"mat-mdc-form-field-required-marker","mdc-floating-label--required"],[1,"mat-mdc-form-field-focus-overlay"],["matFormFieldNotchedOutline","",3,"matFormFieldNotchedOutlineOpen","matFormFieldNotchedOutlineLabelWidth"],[3,"ngTemplateOutlet"],[1,"mat-mdc-form-field-icon-prefix"],["iconPrefixContainer",""],[1,"mat-mdc-form-field-text-prefix"],["textPrefixContainer",""],[1,"mat-mdc-form-field-text-suffix"],[1,"mat-mdc-form-field-icon-suffix"],["matFormFieldLineRipple",""],[1,"mat-mdc-form-field-error-wrapper"],[1,"mat-mdc-form-field-hint-wrapper"],[3,"id",4,"ngIf"],[1,"mat-mdc-form-field-hint-spacer"],[3,"id"]],template:function(a,h){1&a&&(_.F$t(ca),_.YNc(0,ti,1,1,"ng-template",null,0,_.W1O),_.TgZ(2,"div",1,2),_.NdJ("click",function(P){return h._control.onContainerClick&&h._control.onContainerClick(P)}),_.YNc(4,Br,1,0,"div",3),_.TgZ(5,"div",4),_.YNc(6,Si,2,3,"div",5),_.YNc(7,Zo,3,0,"div",6),_.YNc(8,ma,3,0,"div",7),_.TgZ(9,"div",8),_.YNc(10,ga,1,1,"ng-template",9),_.Hsn(11),_.qZA(),_.YNc(12,aa,2,0,"div",10),_.YNc(13,to,2,0,"div",11),_.qZA(),_.YNc(14,_a,1,0,"div",12),_.qZA(),_.TgZ(15,"div",13),_.YNc(16,Yo,2,1,"div",14),_.YNc(17,la,5,2,"div",15),_.qZA()),2&a&&(_.xp6(2),_.ekj("mdc-text-field--filled",!h._hasOutline())("mdc-text-field--outlined",h._hasOutline())("mdc-text-field--no-label",!h._hasFloatingLabel())("mdc-text-field--disabled",h._control.disabled)("mdc-text-field--invalid",h._control.errorState),_.xp6(2),_.Q6J("ngIf",!h._hasOutline()&&!h._control.disabled),_.xp6(2),_.Q6J("ngIf",h._hasOutline()),_.xp6(1),_.Q6J("ngIf",h._hasIconPrefix),_.xp6(1),_.Q6J("ngIf",h._hasTextPrefix),_.xp6(2),_.Q6J("ngIf",!h._hasOutline()||h._forceDisplayInfixLabel()),_.xp6(2),_.Q6J("ngIf",h._hasTextSuffix),_.xp6(1),_.Q6J("ngIf",h._hasIconSuffix),_.xp6(1),_.Q6J("ngIf",!h._hasOutline()),_.xp6(1),_.ekj("mat-mdc-form-field-subscript-dynamic-size","dynamic"===h.subscriptSizing),_.Q6J("ngSwitch",h._getDisplayedMessages()),_.xp6(1),_.Q6J("ngSwitchCase","error"),_.xp6(1),_.Q6J("ngSwitchCase","hint"))},dependencies:[f.O5,f.tP,f.RF,f.n9,fo.wD,Zs,La,za,Ua],styles:['.mdc-text-field{border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:0;border-bottom-left-radius:0;display:inline-flex;align-items:baseline;padding:0 16px;position:relative;box-sizing:border-box;overflow:hidden;will-change:opacity,transform,color}.mdc-text-field .mdc-floating-label{top:50%;transform:translateY(-50%);pointer-events:none}.mdc-text-field__input{height:28px;width:100%;min-width:0;border:none;border-radius:0;background:none;appearance:none;padding:0}.mdc-text-field__input::-ms-clear{display:none}.mdc-text-field__input::-webkit-calendar-picker-indicator{display:none}.mdc-text-field__input:focus{outline:none}.mdc-text-field__input:invalid{box-shadow:none}@media all{.mdc-text-field__input::placeholder{opacity:0}}@media all{.mdc-text-field__input:-ms-input-placeholder{opacity:0}}@media all{.mdc-text-field--no-label .mdc-text-field__input::placeholder,.mdc-text-field--focused .mdc-text-field__input::placeholder{opacity:1}}@media all{.mdc-text-field--no-label .mdc-text-field__input:-ms-input-placeholder,.mdc-text-field--focused .mdc-text-field__input:-ms-input-placeholder{opacity:1}}.mdc-text-field__affix{height:28px;opacity:0;white-space:nowrap}.mdc-text-field--label-floating .mdc-text-field__affix,.mdc-text-field--no-label .mdc-text-field__affix{opacity:1}@supports(-webkit-hyphens: none){.mdc-text-field--outlined .mdc-text-field__affix{align-items:center;align-self:center;display:inline-flex;height:100%}}.mdc-text-field__affix--prefix{padding-left:0;padding-right:2px}[dir=rtl] .mdc-text-field__affix--prefix,.mdc-text-field__affix--prefix[dir=rtl]{padding-left:2px;padding-right:0}.mdc-text-field--end-aligned .mdc-text-field__affix--prefix{padding-left:0;padding-right:12px}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__affix--prefix,.mdc-text-field--end-aligned .mdc-text-field__affix--prefix[dir=rtl]{padding-left:12px;padding-right:0}.mdc-text-field__affix--suffix{padding-left:12px;padding-right:0}[dir=rtl] .mdc-text-field__affix--suffix,.mdc-text-field__affix--suffix[dir=rtl]{padding-left:0;padding-right:12px}.mdc-text-field--end-aligned .mdc-text-field__affix--suffix{padding-left:2px;padding-right:0}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__affix--suffix,.mdc-text-field--end-aligned .mdc-text-field__affix--suffix[dir=rtl]{padding-left:0;padding-right:2px}.mdc-text-field--filled{height:56px}.mdc-text-field--filled::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}.mdc-text-field--filled .mdc-floating-label{left:16px;right:initial}[dir=rtl] .mdc-text-field--filled .mdc-floating-label,.mdc-text-field--filled .mdc-floating-label[dir=rtl]{left:initial;right:16px}.mdc-text-field--filled .mdc-floating-label--float-above{transform:translateY(-106%) scale(0.75)}.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__input{height:100%}.mdc-text-field--filled.mdc-text-field--no-label .mdc-floating-label{display:none}.mdc-text-field--filled.mdc-text-field--no-label::before{display:none}@supports(-webkit-hyphens: none){.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__affix{align-items:center;align-self:center;display:inline-flex;height:100%}}.mdc-text-field--outlined{height:56px;overflow:visible}.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-37.25px) scale(1)}.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) scale(0.75)}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--outlined .mdc-text-field__input{height:100%}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:var(--mdc-shape-small, 4px)}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading[dir=rtl]{border-top-left-radius:0;border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:var(--mdc-shape-small, 4px);border-bottom-left-radius:0}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{width:max(12px, var(--mdc-shape-small, 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__notch{max-width:calc(100% - max(12px, var(--mdc-shape-small, 4px))*2)}}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing{border-top-left-radius:0;border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:var(--mdc-shape-small, 4px);border-bottom-left-radius:0}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing[dir=rtl]{border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:var(--mdc-shape-small, 4px)}@supports(top: max(0%)){.mdc-text-field--outlined{padding-left:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined{padding-right:max(16px, var(--mdc-shape-small, 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-left:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-right:max(16px, var(--mdc-shape-small, 4px))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-left:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-right:max(16px, var(--mdc-shape-small, 4px))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-right:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-left:max(16px, var(--mdc-shape-small, 4px))}}.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-right:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-left:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-left:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-right:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon{padding-left:0;padding-right:0}.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:1px}.mdc-text-field--outlined .mdc-floating-label{left:4px;right:initial}[dir=rtl] .mdc-text-field--outlined .mdc-floating-label,.mdc-text-field--outlined .mdc-floating-label[dir=rtl]{left:initial;right:4px}.mdc-text-field--outlined .mdc-text-field__input{display:flex;border:none !important;background-color:rgba(0,0,0,0)}.mdc-text-field--outlined .mdc-notched-outline{z-index:1}.mdc-text-field--textarea{flex-direction:column;align-items:center;width:auto;height:auto;padding:0}.mdc-text-field--textarea .mdc-floating-label{top:19px}.mdc-text-field--textarea .mdc-floating-label:not(.mdc-floating-label--float-above){transform:none}.mdc-text-field--textarea .mdc-text-field__input{flex-grow:1;height:auto;min-height:1.5rem;overflow-x:hidden;overflow-y:auto;box-sizing:border-box;resize:none;padding:0 16px}.mdc-text-field--textarea.mdc-text-field--filled::before{display:none}.mdc-text-field--textarea.mdc-text-field--filled .mdc-floating-label--float-above{transform:translateY(-10.25px) scale(0.75)}.mdc-text-field--textarea.mdc-text-field--filled .mdc-text-field__input{margin-top:23px;margin-bottom:9px}.mdc-text-field--textarea.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__input{margin-top:16px;margin-bottom:16px}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:0}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-27.25px) scale(1)}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--textarea.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-24.75px) scale(0.75)}.mdc-text-field--textarea.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-text-field__input{margin-top:16px;margin-bottom:16px}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label{top:18px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field__input{margin-bottom:2px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter{align-self:flex-end;padding:0 16px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter::after{display:inline-block;width:0;height:16px;content:"";vertical-align:-16px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter::before{display:none}.mdc-text-field__resizer{align-self:stretch;display:inline-flex;flex-direction:column;flex-grow:1;max-height:100%;max-width:100%;min-height:56px;min-width:fit-content;min-width:-moz-available;min-width:-webkit-fill-available;overflow:hidden;resize:both}.mdc-text-field--filled .mdc-text-field__resizer{transform:translateY(-1px)}.mdc-text-field--filled .mdc-text-field__resizer .mdc-text-field__input,.mdc-text-field--filled .mdc-text-field__resizer .mdc-text-field-character-counter{transform:translateY(1px)}.mdc-text-field--outlined .mdc-text-field__resizer{transform:translateX(-1px) translateY(-1px)}[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer,.mdc-text-field--outlined .mdc-text-field__resizer[dir=rtl]{transform:translateX(1px) translateY(-1px)}.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input,.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter{transform:translateX(1px) translateY(1px)}[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input,[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter,.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input[dir=rtl],.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter[dir=rtl]{transform:translateX(-1px) translateY(1px)}.mdc-text-field--with-leading-icon{padding-left:0;padding-right:16px}[dir=rtl] .mdc-text-field--with-leading-icon,.mdc-text-field--with-leading-icon[dir=rtl]{padding-left:16px;padding-right:0}.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 48px);left:48px;right:initial}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label,.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label[dir=rtl]{left:initial;right:48px}.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 64px / 0.75)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label{left:36px;right:initial}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label[dir=rtl]{left:initial;right:36px}.mdc-text-field--with-leading-icon.mdc-text-field--outlined :not(.mdc-notched-outline--notched) .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-37.25px) translateX(-32px) scale(1)}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above[dir=rtl]{transform:translateY(-37.25px) translateX(32px) scale(1)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) translateX(-32px) scale(0.75)}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above[dir=rtl],.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above[dir=rtl]{transform:translateY(-34.75px) translateX(32px) scale(0.75)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--with-trailing-icon{padding-left:16px;padding-right:0}[dir=rtl] .mdc-text-field--with-trailing-icon,.mdc-text-field--with-trailing-icon[dir=rtl]{padding-left:0;padding-right:16px}.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 64px)}.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 64px / 0.75)}.mdc-text-field--with-trailing-icon.mdc-text-field--outlined :not(.mdc-notched-outline--notched) .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon{padding-left:0;padding-right:0}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 96px)}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 96px / 0.75)}.mdc-text-field-helper-line{display:flex;justify-content:space-between;box-sizing:border-box}.mdc-text-field+.mdc-text-field-helper-line{padding-right:16px;padding-left:16px}.mdc-form-field>.mdc-text-field+label{align-self:flex-start}.mdc-text-field--focused .mdc-notched-outline__leading,.mdc-text-field--focused .mdc-notched-outline__notch,.mdc-text-field--focused .mdc-notched-outline__trailing{border-width:2px}.mdc-text-field--focused+.mdc-text-field-helper-line .mdc-text-field-helper-text:not(.mdc-text-field-helper-text--validation-msg){opacity:1}.mdc-text-field--focused.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:2px}.mdc-text-field--focused.mdc-text-field--outlined.mdc-text-field--textarea .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:0}.mdc-text-field--invalid+.mdc-text-field-helper-line .mdc-text-field-helper-text--validation-msg{opacity:1}.mdc-text-field--disabled{pointer-events:none}@media screen and (forced-colors: active){.mdc-text-field--disabled .mdc-text-field__input{background-color:Window}.mdc-text-field--disabled .mdc-floating-label{z-index:1}}.mdc-text-field--disabled .mdc-floating-label{cursor:default}.mdc-text-field--disabled.mdc-text-field--filled .mdc-text-field__ripple{display:none}.mdc-text-field--disabled .mdc-text-field__input{pointer-events:auto}.mdc-text-field--end-aligned .mdc-text-field__input{text-align:right}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__input,.mdc-text-field--end-aligned .mdc-text-field__input[dir=rtl]{text-align:left}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__input,[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__input,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix{direction:ltr}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--prefix{padding-left:0;padding-right:2px}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--suffix{padding-left:12px;padding-right:0}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__icon--leading,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__icon--leading{order:1}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--suffix{order:2}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__input,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__input{order:3}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--prefix{order:4}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__icon--trailing,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__icon--trailing{order:5}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__input,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__input{text-align:right}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__affix--prefix{padding-right:12px}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__affix--suffix{padding-left:2px}.mdc-floating-label{position:absolute;left:0;-webkit-transform-origin:left top;transform-origin:left top;line-height:1.15rem;text-align:left;text-overflow:ellipsis;white-space:nowrap;cursor:text;overflow:hidden;will-change:transform}[dir=rtl] .mdc-floating-label,.mdc-floating-label[dir=rtl]{right:0;left:auto;-webkit-transform-origin:right top;transform-origin:right top;text-align:right}.mdc-floating-label--float-above{cursor:auto}.mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after{margin-left:1px;margin-right:0px;content:"*"}[dir=rtl] .mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after,.mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)[dir=rtl]::after{margin-left:0;margin-right:1px}.mdc-floating-label--float-above{transform:translateY(-106%) scale(0.75)}.mdc-notched-outline{display:flex;position:absolute;top:0;right:0;left:0;box-sizing:border-box;width:100%;max-width:100%;height:100%;text-align:left;pointer-events:none}[dir=rtl] .mdc-notched-outline,.mdc-notched-outline[dir=rtl]{text-align:right}.mdc-notched-outline__leading,.mdc-notched-outline__notch,.mdc-notched-outline__trailing{box-sizing:border-box;height:100%;border-top:1px solid;border-bottom:1px solid;pointer-events:none}.mdc-notched-outline__leading{border-left:1px solid;border-right:none;width:12px}[dir=rtl] .mdc-notched-outline__leading,.mdc-notched-outline__leading[dir=rtl]{border-left:none;border-right:1px solid}.mdc-notched-outline__trailing{border-left:none;border-right:1px solid;flex-grow:1}[dir=rtl] .mdc-notched-outline__trailing,.mdc-notched-outline__trailing[dir=rtl]{border-left:1px solid;border-right:none}.mdc-notched-outline__notch{flex:0 0 auto;width:auto;max-width:calc(100% - 12px * 2)}.mdc-notched-outline .mdc-floating-label{display:inline-block;position:relative;max-width:100%}.mdc-notched-outline .mdc-floating-label--float-above{text-overflow:clip}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:133.3333333333%}.mdc-notched-outline--notched .mdc-notched-outline__notch{padding-left:0;padding-right:8px;border-top:none}[dir=rtl] .mdc-notched-outline--notched .mdc-notched-outline__notch,.mdc-notched-outline--notched .mdc-notched-outline__notch[dir=rtl]{padding-left:8px;padding-right:0}.mdc-notched-outline--no-label .mdc-notched-outline__notch{display:none}.mdc-line-ripple::before,.mdc-line-ripple::after{position:absolute;bottom:0;left:0;width:100%;border-bottom-style:solid;content:""}.mdc-line-ripple::before{border-bottom-width:1px}.mdc-line-ripple::after{border-bottom-width:2px}.mdc-line-ripple::before{z-index:1}.mdc-line-ripple::after{transform:scaleX(0);opacity:0;z-index:2}.mdc-line-ripple--active::after{transform:scaleX(1);opacity:1}.mdc-line-ripple--deactivating::after{opacity:0}.mat-mdc-form-field-textarea-control{vertical-align:middle;resize:vertical;box-sizing:border-box;height:auto;margin:0;padding:0;border:none;overflow:auto}.mat-mdc-form-field-input-control.mat-mdc-form-field-input-control{font:inherit;letter-spacing:inherit;text-decoration:inherit;text-transform:inherit;border:none}.mat-mdc-form-field .mat-mdc-floating-label.mdc-floating-label{line-height:normal;pointer-events:all}.mdc-text-field--no-label:not(.mdc-text-field--textarea) .mat-mdc-form-field-input-control.mdc-text-field__input,.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control{height:auto}.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control.mdc-text-field__input[type=color]{height:23px}.mat-mdc-text-field-wrapper{height:auto;flex:auto}.mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-left:0;--mat-mdc-form-field-label-offset-x: -16px}.mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-right:0}[dir=rtl] .mat-mdc-text-field-wrapper{padding-left:16px;padding-right:16px}[dir=rtl] .mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-left:0}[dir=rtl] .mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-right:0}.mat-mdc-form-field-label-always-float .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms;opacity:1}.mat-mdc-text-field-wrapper .mat-mdc-form-field-infix .mat-mdc-floating-label{left:auto;right:auto}.mat-mdc-text-field-wrapper.mdc-text-field--outlined .mdc-text-field__input{display:inline-block}.mat-mdc-form-field .mat-mdc-text-field-wrapper.mdc-text-field .mdc-notched-outline__notch{padding-top:0}.mat-mdc-text-field-wrapper::before{content:none}.mat-mdc-form-field-subscript-wrapper{box-sizing:border-box;width:100%;position:relative}.mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-error-wrapper{position:absolute;top:0;left:0;right:0;padding:0 16px}.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-error-wrapper{position:static}.mat-mdc-form-field-bottom-align::before{content:"";display:inline-block;height:16px}.mat-mdc-form-field-bottom-align.mat-mdc-form-field-subscript-dynamic-size::before{content:unset}.mat-mdc-form-field-hint-end{order:1}.mat-mdc-form-field-hint-wrapper{display:flex}.mat-mdc-form-field-hint-spacer{flex:1 0 1em}.mat-mdc-form-field-error{display:block}.mat-mdc-form-field-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;opacity:0;pointer-events:none}select.mat-mdc-form-field-input-control{-moz-appearance:none;-webkit-appearance:none;background-color:rgba(0,0,0,0);display:inline-flex;box-sizing:border-box}select.mat-mdc-form-field-input-control:not(:disabled){cursor:pointer}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid rgba(0,0,0,0);border-right:5px solid rgba(0,0,0,0);border-top:5px solid;position:absolute;right:0;top:50%;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{right:auto;left:0}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:15px}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:0;padding-left:15px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-mdc-text-field-wrapper{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-form-field-disabled .mat-mdc-text-field-wrapper{outline-color:GrayText}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-mdc-text-field-wrapper{outline:dashed 3px}.cdk-high-contrast-active .mat-mdc-form-field.mat-focused .mdc-notched-outline{border:dashed 3px}.mat-mdc-form-field-input-control[type=date],.mat-mdc-form-field-input-control[type=datetime],.mat-mdc-form-field-input-control[type=datetime-local],.mat-mdc-form-field-input-control[type=month],.mat-mdc-form-field-input-control[type=week],.mat-mdc-form-field-input-control[type=time]{line-height:1}.mat-mdc-form-field-input-control::-webkit-datetime-edit{line-height:1;padding:0;margin-bottom:-2px}.mat-mdc-form-field{--mat-mdc-form-field-floating-label-scale: 0.75;display:inline-flex;flex-direction:column;min-width:0;text-align:left}[dir=rtl] .mat-mdc-form-field{text-align:right}.mat-mdc-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-mdc-text-field-wrapper{width:100%}.mat-mdc-form-field-icon-prefix,.mat-mdc-form-field-icon-suffix{align-self:center;line-height:0;pointer-events:auto}.mat-mdc-form-field-icon-prefix,[dir=rtl] .mat-mdc-form-field-icon-suffix{padding:0 4px 0 0}.mat-mdc-form-field-icon-suffix,[dir=rtl] .mat-mdc-form-field-icon-prefix{padding:0 0 0 4px}.mat-mdc-form-field-icon-prefix>.mat-icon,.mat-mdc-form-field-icon-suffix>.mat-icon{padding:12px;box-sizing:content-box}.mat-mdc-form-field-subscript-wrapper .mat-icon,.mat-mdc-form-field label .mat-icon{width:1em;height:1em;font-size:inherit}.mat-mdc-form-field-infix{flex:auto;min-width:0;width:180px;position:relative;box-sizing:border-box}.mat-mdc-form-field .mdc-notched-outline__notch{margin-left:-1px;-webkit-clip-path:inset(-9em -999em -9em 1px);clip-path:inset(-9em -999em -9em 1px)}[dir=rtl] .mat-mdc-form-field .mdc-notched-outline__notch{margin-left:0;margin-right:-1px;-webkit-clip-path:inset(-9em 1px -9em -999em);clip-path:inset(-9em 1px -9em -999em)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input{transition:opacity 150ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}@media all{.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder{transition:opacity 67ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}}@media all{.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder{transition:opacity 67ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}}@media all{.mdc-text-field--no-label .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder,.mdc-text-field--focused .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms}}@media all{.mdc-text-field--no-label .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder,.mdc-text-field--focused .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder{transition-delay:40ms;transition-duration:110ms}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__affix{transition:opacity 150ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--filled.mdc-ripple-upgraded--background-focused .mdc-text-field__ripple::before,.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--filled:not(.mdc-ripple-upgraded):focus .mdc-text-field__ripple::before{transition-duration:75ms}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined{0%{transform:translateX(calc(0 - 0%)) translateY(-34.75px) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(-34.75px) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(-34.75px) scale(0.75)}100%{transform:translateX(calc(0 - 0%)) translateY(-34.75px) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea{transition:none}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea.mdc-text-field--filled .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-textarea-filled 250ms 1}@keyframes mdc-floating-label-shake-float-above-textarea-filled{0%{transform:translateX(calc(0 - 0%)) translateY(-10.25px) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(-10.25px) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(-10.25px) scale(0.75)}100%{transform:translateX(calc(0 - 0%)) translateY(-10.25px) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-textarea-outlined 250ms 1}@keyframes mdc-floating-label-shake-float-above-textarea-outlined{0%{transform:translateX(calc(0 - 0%)) translateY(-24.75px) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(-24.75px) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(-24.75px) scale(0.75)}100%{transform:translateX(calc(0 - 0%)) translateY(-24.75px) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined-leading-icon 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined-leading-icon{0%{transform:translateX(calc(0 - 32px)) translateY(-34.75px) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 32px)) translateY(-34.75px) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 32px)) translateY(-34.75px) scale(0.75)}100%{transform:translateX(calc(0 - 32px)) translateY(-34.75px) scale(0.75)}}[dir=rtl] .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--shake,.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined[dir=rtl] .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined-leading-icon 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined-leading-icon-rtl{0%{transform:translateX(calc(0 - -32px)) translateY(-34.75px) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - -32px)) translateY(-34.75px) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - -32px)) translateY(-34.75px) scale(0.75)}100%{transform:translateX(calc(0 - -32px)) translateY(-34.75px) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-floating-label{transition:transform 150ms cubic-bezier(0.4, 0, 0.2, 1),color 150ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-standard 250ms 1}@keyframes mdc-floating-label-shake-float-above-standard{0%{transform:translateX(calc(0 - 0%)) translateY(-106%) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(-106%) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(-106%) scale(0.75)}100%{transform:translateX(calc(0 - 0%)) translateY(-106%) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-line-ripple::after{transition:transform 180ms cubic-bezier(0.4, 0, 0.2, 1),opacity 180ms cubic-bezier(0.4, 0, 0.2, 1)}'],encapsulation:2,data:{animation:[$a.transitionMessages]},changeDetection:0}),Y})(),$e=(()=>{class Y{}return Y.\u0275fac=function(a){return new(a||Y)},Y.\u0275mod=_.oAB({type:Y}),Y.\u0275inj=_.cJS({imports:[Xr.BQ,f.ez,fo.Q8,Xr.BQ]}),Y})();var gt=L(515);const at=(0,ri.i$)({passive:!0});let Ke=(()=>{class Y{constructor(a,h){this._platform=a,this._ngZone=h,this._monitoredElements=new Map}monitor(a){if(!this._platform.isBrowser)return gt.E;const h=(0,pe.fI)(a),T=this._monitoredElements.get(h);if(T)return T.subject;const P=new Me.x,X="cdk-text-field-autofilled",ce=We=>{"cdk-text-field-autofill-start"!==We.animationName||h.classList.contains(X)?"cdk-text-field-autofill-end"===We.animationName&&h.classList.contains(X)&&(h.classList.remove(X),this._ngZone.run(()=>P.next({target:We.target,isAutofilled:!1}))):(h.classList.add(X),this._ngZone.run(()=>P.next({target:We.target,isAutofilled:!0})))};return this._ngZone.runOutsideAngular(()=>{h.addEventListener("animationstart",ce,at),h.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(h,{subject:P,unlisten:()=>{h.removeEventListener("animationstart",ce,at)}}),P}stopMonitoring(a){const h=(0,pe.fI)(a),T=this._monitoredElements.get(h);T&&(T.unlisten(),T.subject.complete(),h.classList.remove("cdk-text-field-autofill-monitored"),h.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(h))}ngOnDestroy(){this._monitoredElements.forEach((a,h)=>this.stopMonitoring(h))}}return Y.\u0275fac=function(a){return new(a||Y)(_.LFG(ri.t4),_.LFG(_.R0b))},Y.\u0275prov=_.Yz7({token:Y,factory:Y.\u0275fac,providedIn:"root"}),Y})(),G=(()=>{class Y{}return Y.\u0275fac=function(a){return new(a||Y)},Y.\u0275mod=_.oAB({type:Y}),Y.\u0275inj=_.cJS({}),Y})();const Ve=new _.OlP("MAT_INPUT_VALUE_ACCESSOR"),Dt=["button","checkbox","file","hidden","image","radio","range","reset","submit"];let tn=0;const An=(0,Xr.FD)(class{constructor(Y,p,a,h){this._defaultErrorStateMatcher=Y,this._parentForm=p,this._parentFormGroup=a,this.ngControl=h,this.stateChanges=new Me.x}});let xi=(()=>{class Y extends An{get disabled(){return this._disabled}set disabled(a){this._disabled=(0,pe.Ig)(a),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(a){this._id=a||this._uid}get required(){return this._required??this.ngControl?.control?.hasValidator(ze.kI.required)??!1}set required(a){this._required=(0,pe.Ig)(a)}get type(){return this._type}set type(a){this._type=a||"text",this._validateType(),!this._isTextarea&&(0,ri.qK)().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get value(){return this._inputValueAccessor.value}set value(a){a!==this.value&&(this._inputValueAccessor.value=a,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(a){this._readonly=(0,pe.Ig)(a)}constructor(a,h,T,P,X,ce,We,mt,on,ln){super(ce,P,X,T),this._elementRef=a,this._platform=h,this._autofillMonitor=mt,this._formField=ln,this._uid="mat-input-"+tn++,this.focused=!1,this.stateChanges=new Me.x,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(jr=>(0,ri.qK)().has(jr)),this._iOSKeyupListener=jr=>{const ur=jr.target;!ur.value&&0===ur.selectionStart&&0===ur.selectionEnd&&(ur.setSelectionRange(1,1),ur.setSelectionRange(0,0))};const Un=this._elementRef.nativeElement,sr=Un.nodeName.toLowerCase();this._inputValueAccessor=We||Un,this._previousNativeValue=this.value,this.id=this.id,h.IOS&&on.runOutsideAngular(()=>{a.nativeElement.addEventListener("keyup",this._iOSKeyupListener)}),this._isServer=!this._platform.isBrowser,this._isNativeSelect="select"===sr,this._isTextarea="textarea"===sr,this._isInFormField=!!ln,this._isNativeSelect&&(this.controlType=Un.multiple?"mat-native-select-multiple":"mat-native-select")}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(a=>{this.autofilled=a.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement),this._platform.IOS&&this._elementRef.nativeElement.removeEventListener("keyup",this._iOSKeyupListener)}ngDoCheck(){this.ngControl&&(this.updateErrorState(),null!==this.ngControl.disabled&&this.ngControl.disabled!==this.disabled&&(this.disabled=this.ngControl.disabled,this.stateChanges.next())),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(a){this._elementRef.nativeElement.focus(a)}_focusChanged(a){a!==this.focused&&(this.focused=a,this.stateChanges.next())}_onInput(){}_dirtyCheckNativeValue(){const a=this._elementRef.nativeElement.value;this._previousNativeValue!==a&&(this._previousNativeValue=a,this.stateChanges.next())}_dirtyCheckPlaceholder(){const a=this._getPlaceholder();if(a!==this._previousPlaceholder){const h=this._elementRef.nativeElement;this._previousPlaceholder=a,a?h.setAttribute("placeholder",a):h.removeAttribute("placeholder")}}_getPlaceholder(){return this.placeholder||null}_validateType(){Dt.indexOf(this._type)}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let a=this._elementRef.nativeElement.validity;return a&&a.badInput}get empty(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}get shouldLabelFloat(){if(this._isNativeSelect){const a=this._elementRef.nativeElement,h=a.options[0];return this.focused||a.multiple||!this.empty||!!(a.selectedIndex>-1&&h&&h.label)}return this.focused||!this.empty}setDescribedByIds(a){a.length?this._elementRef.nativeElement.setAttribute("aria-describedby",a.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){const a=this._elementRef.nativeElement;return this._isNativeSelect&&(a.multiple||a.size>1)}}return Y.\u0275fac=function(a){return new(a||Y)(_.Y36(_.SBq),_.Y36(ri.t4),_.Y36(ze.a5,10),_.Y36(ze.F,8),_.Y36(ze.sg,8),_.Y36(Xr.rD),_.Y36(Ve,10),_.Y36(Ke),_.Y36(_.R0b),_.Y36(Do,8))},Y.\u0275dir=_.lG2({type:Y,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-mdc-input-element"],hostVars:18,hostBindings:function(a,h){1&a&&_.NdJ("focus",function(){return h._focusChanged(!0)})("blur",function(){return h._focusChanged(!1)})("input",function(){return h._onInput()}),2&a&&(_.Ikx("id",h.id)("disabled",h.disabled)("required",h.required),_.uIk("name",h.name||null)("readonly",h.readonly&&!h._isNativeSelect||null)("aria-invalid",h.empty&&h.required?null:h.errorState)("aria-required",h.required)("id",h.id),_.ekj("mat-input-server",h._isServer)("mat-mdc-form-field-textarea-control",h._isInFormField&&h._isTextarea)("mat-mdc-form-field-input-control",h._isInFormField)("mdc-text-field__input",h._isInFormField)("mat-mdc-native-select-inline",h._isInlineSelect()))},inputs:{disabled:"disabled",id:"id",placeholder:"placeholder",name:"name",required:"required",type:"type",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],value:"value",readonly:"readonly"},exportAs:["matInput"],features:[_._Bn([{provide:Xo,useExisting:Y}]),_.qOj,_.TTD]}),Y})(),li=(()=>{class Y{}return Y.\u0275fac=function(a){return new(a||Y)},Y.\u0275mod=_.oAB({type:Y}),Y.\u0275inj=_.cJS({imports:[Xr.BQ,$e,$e,G,Xr.BQ]}),Y})();function Ui(Y,p){if(1&Y&&(_.TgZ(0,"span",8),_._uU(1),_.qZA()),2&Y){const a=p.ngIf;_.xp6(1),_.hij(" ",a," ")}}let yi=(()=>{class Y{constructor(a,h,T,P){this.dialogRef=a,this.store=h,this.dialogData=T,this.userData=P,this.error$=new Ze.X(null),this.myForm=new ze.cw({Phone:new ze.NI("+380",[ze.kI.pattern(/^\+\d{8,12}$/)])})}onCancel(){this.dialogRef.close()}onStart(){const a=this.myForm.get("Phone")?.value;this.myForm.valid?this.store.doc(`phones/${a}`).get().pipe((0,xe.h)(h=>this.checkOnErrors(h,a))).subscribe(h=>{this.createChat(h.data()?.id)}):this.error$.next("Invalid number.")}checkOnErrors(a,h){return a.exists?this.dialogData.otherUserIds.includes(a.data()?.id)?(this.error$.next("You have dialog with this user"),!1):this.userData.curUserData$.getValue()?.number!==h||(this.error$.next("You cant start dialog with yourself"),!1):(this.error$.next("User with this number does not exist"),!1)}createChat(a){this.dialogRef.close(),this.dialogData.createChat(a,this.userData.curUserDoc.ref.id).subscribe(),this.error$.next(null)}}return Y.\u0275fac=function(a){return new(a||Y)(_.Y36(Zr),_.Y36(Jr.ST),_.Y36(He.C),_.Y36(Io.M))},Y.\u0275cmp=_.Xpm({type:Y,selectors:[["app-new-dialog-window"]],decls:15,vars:4,consts:[["mat-dialog-title",""],[3,"formGroup"],["mat-dialog-content",""],["matInput","","maxlength","13","formControlName","Phone"],["class","error",4,"ngIf"],["mat-dialog-actions",""],["mat-button","",3,"click"],["mat-button","","cdkFocusInitial","",3,"click"],[1,"error"]],template:function(a,h){1&a&&(_.TgZ(0,"h1",0),_._uU(1,"Start new Chat"),_.qZA(),_.TgZ(2,"form",1)(3,"div",2)(4,"mat-form-field")(5,"mat-label"),_._uU(6,"Phone number"),_.qZA(),_._UZ(7,"input",3),_.YNc(8,Ui,2,1,"span",4),_.ALo(9,"async"),_.qZA()(),_.TgZ(10,"div",5)(11,"button",6),_.NdJ("click",function(){return h.onCancel()}),_._uU(12,"Cancel"),_.qZA(),_.TgZ(13,"button",7),_.NdJ("click",function(){return h.onStart()}),_._uU(14,"Start Dialog"),_.qZA()()()),2&a&&(_.xp6(2),_.Q6J("formGroup",h.myForm),_.xp6(6),_.Q6J("ngIf",_.lcZ(9,2,h.error$)))},dependencies:[f.O5,ai.lW,Ts,Bi,Bo,ve,Os,xi,ze._Y,ze.Fj,ze.JJ,ze.JL,ze.nD,ze.sg,ze.u,f.Ov],styles:[".error[_ngcontent-%COMP%]{font-size:1.4rem;color:#f03e3e}"]}),Y})();var Nr=L(7693),Rn=L(1584),hr=L(3336),fr=L(3900),ni=L(7272),qn=L(5032),Ki=L(9718);function Po(Y,p){return p?a=>(0,ni.z)(p.pipe((0,Nt.q)(1),function hs(){return(0,oi.e)((Y,p)=>{Y.subscribe((0,Pi.x)(p,qn.Z))})}()),a.pipe(Po(Y))):(0,Lt.z)((a,h)=>(0,pt.Xf)(Y(a,h)).pipe((0,Nt.q)(1),(0,Ki.h)(a)))}function ts(Y,p=Qn.z){const a=zn(Y,p);return Po(()=>a)}const Jt=["mat-menu-item",""];function pi(Y,p){1&Y&&(_.O4$(),_.TgZ(0,"svg",3),_._UZ(1,"polygon",4),_.qZA())}const ci=[[["mat-icon"],["","matMenuItemIcon",""]],"*"],pr=["mat-icon, [matMenuItemIcon]","*"];function fs(Y,p){if(1&Y){const a=_.EpF();_.TgZ(0,"div",0),_.NdJ("keydown",function(T){_.CHM(a);const P=_.oxw();return _.KtG(P._handleKeydown(T))})("click",function(){_.CHM(a);const T=_.oxw();return _.KtG(T.closed.emit("click"))})("@transformMenu.start",function(T){_.CHM(a);const P=_.oxw();return _.KtG(P._onAnimationStart(T))})("@transformMenu.done",function(T){_.CHM(a);const P=_.oxw();return _.KtG(P._onAnimationDone(T))}),_.TgZ(1,"div",1),_.Hsn(2),_.qZA()()}if(2&Y){const a=_.oxw();_.Q6J("id",a.panelId)("ngClass",a._classList)("@transformMenu",a._panelAnimationState),_.uIk("aria-label",a.ariaLabel||null)("aria-labelledby",a.ariaLabelledby||null)("aria-describedby",a.ariaDescribedby||null)}}const ks=["*"],Ns=new _.OlP("MAT_MENU_PANEL"),ys=(0,Xr.Kr)((0,Xr.Id)(class{}));let Fr=(()=>{class Y extends ys{constructor(a,h,T,P,X){super(),this._elementRef=a,this._document=h,this._focusMonitor=T,this._parentMenu=P,this._changeDetectorRef=X,this.role="menuitem",this._hovered=new Me.x,this._focused=new Me.x,this._highlighted=!1,this._triggersSubmenu=!1,P?.addItem?.(this)}focus(a,h){this._focusMonitor&&a?this._focusMonitor.focusVia(this._getHostElement(),a,h):this._getHostElement().focus(h),this._focused.next(this)}ngAfterViewInit(){this._focusMonitor&&this._focusMonitor.monitor(this._elementRef,!1)}ngOnDestroy(){this._focusMonitor&&this._focusMonitor.stopMonitoring(this._elementRef),this._parentMenu&&this._parentMenu.removeItem&&this._parentMenu.removeItem(this),this._hovered.complete(),this._focused.complete()}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._elementRef.nativeElement}_checkDisabled(a){this.disabled&&(a.preventDefault(),a.stopPropagation())}_handleMouseEnter(){this._hovered.next(this)}getLabel(){const a=this._elementRef.nativeElement.cloneNode(!0),h=a.querySelectorAll("mat-icon, .material-icons");for(let T=0;T<h.length;T++)h[T].remove();return a.textContent?.trim()||""}_setHighlighted(a){this._highlighted=a,this._changeDetectorRef?.markForCheck()}_setTriggersSubmenu(a){this._triggersSubmenu=a,this._changeDetectorRef?.markForCheck()}_hasFocus(){return this._document&&this._document.activeElement===this._getHostElement()}}return Y.\u0275fac=function(a){return new(a||Y)(_.Y36(_.SBq),_.Y36(f.K0),_.Y36(Li.tE),_.Y36(Ns,8),_.Y36(_.sBO))},Y.\u0275cmp=_.Xpm({type:Y,selectors:[["","mat-menu-item",""]],hostAttrs:[1,"mat-mdc-menu-item","mat-mdc-focus-indicator","mdc-list-item"],hostVars:8,hostBindings:function(a,h){1&a&&_.NdJ("click",function(P){return h._checkDisabled(P)})("mouseenter",function(){return h._handleMouseEnter()}),2&a&&(_.uIk("role",h.role)("tabindex",h._getTabIndex())("aria-disabled",h.disabled)("disabled",h.disabled||null),_.ekj("mat-mdc-menu-item-highlighted",h._highlighted)("mat-mdc-menu-item-submenu-trigger",h._triggersSubmenu))},inputs:{disabled:"disabled",disableRipple:"disableRipple",role:"role"},exportAs:["matMenuItem"],features:[_.qOj],attrs:Jt,ngContentSelectors:pr,decls:5,vars:3,consts:[[1,"mdc-list-item__primary-text"],["matRipple","",1,"mat-mdc-menu-ripple",3,"matRippleDisabled","matRippleTrigger"],["class","mat-mdc-menu-submenu-icon","viewBox","0 0 5 10","focusable","false",4,"ngIf"],["viewBox","0 0 5 10","focusable","false",1,"mat-mdc-menu-submenu-icon"],["points","0,0 5,5 0,10"]],template:function(a,h){1&a&&(_.F$t(ci),_.Hsn(0),_.TgZ(1,"span",0),_.Hsn(2,1),_.qZA(),_._UZ(3,"div",1),_.YNc(4,pi,2,0,"svg",2)),2&a&&(_.xp6(3),_.Q6J("matRippleDisabled",h.disableRipple||h.disabled)("matRippleTrigger",h._getHostElement()),_.xp6(1),_.Q6J("ngIf",h._triggersSubmenu))},dependencies:[f.O5,Xr.wG],encapsulation:2,changeDetection:0}),Y})();const po=new _.OlP("MatMenuContent"),Fo={transformMenu:(0,Di.X$)("transformMenu",[(0,Di.SB)("void",(0,Di.oB)({opacity:0,transform:"scale(0.8)"})),(0,Di.eR)("void => enter",(0,Di.jt)("120ms cubic-bezier(0, 0, 0.2, 1)",(0,Di.oB)({opacity:1,transform:"scale(1)"}))),(0,Di.eR)("* => void",(0,Di.jt)("100ms 25ms linear",(0,Di.oB)({opacity:0})))]),fadeInItems:(0,Di.X$)("fadeInItems",[(0,Di.SB)("showing",(0,Di.oB)({opacity:1})),(0,Di.eR)("void => *",[(0,Di.oB)({opacity:0}),(0,Di.jt)("400ms 100ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let Lo=0;const da=new _.OlP("mat-menu-default-options",{providedIn:"root",factory:function ea(){return{overlapTrigger:!1,xPosition:"after",yPosition:"below",backdropClass:"cdk-overlay-transparent-backdrop"}}});let Hr=(()=>{class Y{get xPosition(){return this._xPosition}set xPosition(a){this._xPosition=a,this.setPositionClasses()}get yPosition(){return this._yPosition}set yPosition(a){this._yPosition=a,this.setPositionClasses()}get overlapTrigger(){return this._overlapTrigger}set overlapTrigger(a){this._overlapTrigger=(0,pe.Ig)(a)}get hasBackdrop(){return this._hasBackdrop}set hasBackdrop(a){this._hasBackdrop=(0,pe.Ig)(a)}set panelClass(a){const h=this._previousPanelClass;h&&h.length&&h.split(" ").forEach(T=>{this._classList[T]=!1}),this._previousPanelClass=a,a&&a.length&&(a.split(" ").forEach(T=>{this._classList[T]=!0}),this._elementRef.nativeElement.className="")}get classList(){return this.panelClass}set classList(a){this.panelClass=a}constructor(a,h,T,P){this._elementRef=a,this._ngZone=h,this._defaultOptions=T,this._changeDetectorRef=P,this._xPosition=this._defaultOptions.xPosition,this._yPosition=this._defaultOptions.yPosition,this._directDescendantItems=new _.n_E,this._classList={},this._panelAnimationState="void",this._animationDone=new Me.x,this.overlayPanelClass=this._defaultOptions.overlayPanelClass||"",this.backdropClass=this._defaultOptions.backdropClass,this._overlapTrigger=this._defaultOptions.overlapTrigger,this._hasBackdrop=this._defaultOptions.hasBackdrop,this.closed=new _.vpe,this.close=this.closed,this.panelId="mat-menu-panel-"+Lo++}ngOnInit(){this.setPositionClasses()}ngAfterContentInit(){this._updateDirectDescendants(),this._keyManager=new Li.Em(this._directDescendantItems).withWrap().withTypeAhead().withHomeAndEnd(),this._keyManager.tabOut.subscribe(()=>this.closed.emit("tab")),this._directDescendantItems.changes.pipe((0,Ji.O)(this._directDescendantItems),(0,fr.w)(a=>(0,ji.T)(...a.map(h=>h._focused)))).subscribe(a=>this._keyManager.updateActiveItem(a)),this._directDescendantItems.changes.subscribe(a=>{const h=this._keyManager;if("enter"===this._panelAnimationState&&h.activeItem?._hasFocus()){const T=a.toArray(),P=Math.max(0,Math.min(T.length-1,h.activeItemIndex||0));T[P]&&!T[P].disabled?h.setActiveItem(P):h.setNextItemActive()}})}ngOnDestroy(){this._keyManager?.destroy(),this._directDescendantItems.destroy(),this.closed.complete(),this._firstItemFocusSubscription?.unsubscribe()}_hovered(){return this._directDescendantItems.changes.pipe((0,Ji.O)(this._directDescendantItems),(0,fr.w)(h=>(0,ji.T)(...h.map(T=>T._hovered))))}addItem(a){}removeItem(a){}_handleKeydown(a){const h=a.keyCode,T=this._keyManager;switch(h){case ar.hY:(0,ar.Vb)(a)||(a.preventDefault(),this.closed.emit("keydown"));break;case ar.oh:this.parentMenu&&"ltr"===this.direction&&this.closed.emit("keydown");break;case ar.SV:this.parentMenu&&"rtl"===this.direction&&this.closed.emit("keydown");break;default:return(h===ar.LH||h===ar.JH)&&T.setFocusOrigin("keyboard"),void T.onKeydown(a)}a.stopPropagation()}focusFirstItem(a="program"){this._firstItemFocusSubscription?.unsubscribe(),this._firstItemFocusSubscription=this._ngZone.onStable.pipe((0,Nt.q)(1)).subscribe(()=>{let h=null;if(this._directDescendantItems.length&&(h=this._directDescendantItems.first._getHostElement().closest('[role="menu"]')),!h||!h.contains(document.activeElement)){const T=this._keyManager;T.setFocusOrigin(a).setFirstItemActive(),!T.activeItem&&h&&h.focus()}})}resetActiveItem(){this._keyManager.setActiveItem(-1)}setElevation(a){const h=Math.min(this._baseElevation+a,24),T=`${this._elevationPrefix}${h}`,P=Object.keys(this._classList).find(X=>X.startsWith(this._elevationPrefix));(!P||P===this._previousElevation)&&(this._previousElevation&&(this._classList[this._previousElevation]=!1),this._classList[T]=!0,this._previousElevation=T)}setPositionClasses(a=this.xPosition,h=this.yPosition){const T=this._classList;T["mat-menu-before"]="before"===a,T["mat-menu-after"]="after"===a,T["mat-menu-above"]="above"===h,T["mat-menu-below"]="below"===h,this._changeDetectorRef?.markForCheck()}_startAnimation(){this._panelAnimationState="enter"}_resetAnimation(){this._panelAnimationState="void"}_onAnimationDone(a){this._animationDone.next(a),this._isAnimating=!1}_onAnimationStart(a){this._isAnimating=!0,"enter"===a.toState&&0===this._keyManager.activeItemIndex&&(a.element.scrollTop=0)}_updateDirectDescendants(){this._allItems.changes.pipe((0,Ji.O)(this._allItems)).subscribe(a=>{this._directDescendantItems.reset(a.filter(h=>h._parentMenu===this)),this._directDescendantItems.notifyOnChanges()})}}return Y.\u0275fac=function(a){return new(a||Y)(_.Y36(_.SBq),_.Y36(_.R0b),_.Y36(da),_.Y36(_.sBO))},Y.\u0275dir=_.lG2({type:Y,contentQueries:function(a,h,T){if(1&a&&(_.Suo(T,po,5),_.Suo(T,Fr,5),_.Suo(T,Fr,4)),2&a){let P;_.iGM(P=_.CRH())&&(h.lazyContent=P.first),_.iGM(P=_.CRH())&&(h._allItems=P),_.iGM(P=_.CRH())&&(h.items=P)}},viewQuery:function(a,h){if(1&a&&_.Gf(_.Rgc,5),2&a){let T;_.iGM(T=_.CRH())&&(h.templateRef=T.first)}},inputs:{backdropClass:"backdropClass",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"],xPosition:"xPosition",yPosition:"yPosition",overlapTrigger:"overlapTrigger",hasBackdrop:"hasBackdrop",panelClass:["class","panelClass"],classList:"classList"},outputs:{closed:"closed",close:"close"}}),Y})(),ba=(()=>{class Y extends Hr{constructor(a,h,T,P){super(a,h,T,P),this._elevationPrefix="mat-elevation-z",this._baseElevation=8}}return Y.\u0275fac=function(a){return new(a||Y)(_.Y36(_.SBq),_.Y36(_.R0b),_.Y36(da),_.Y36(_.sBO))},Y.\u0275cmp=_.Xpm({type:Y,selectors:[["mat-menu"]],hostVars:3,hostBindings:function(a,h){2&a&&_.uIk("aria-label",null)("aria-labelledby",null)("aria-describedby",null)},exportAs:["matMenu"],features:[_._Bn([{provide:Ns,useExisting:Y}]),_.qOj],ngContentSelectors:ks,decls:1,vars:0,consts:[["tabindex","-1","role","menu",1,"mat-mdc-menu-panel","mdc-menu-surface","mdc-menu-surface--open","mat-mdc-elevation-specific",3,"id","ngClass","keydown","click"],[1,"mat-mdc-menu-content","mdc-list"]],template:function(a,h){1&a&&(_.F$t(),_.YNc(0,fs,3,6,"ng-template"))},dependencies:[f.mk],styles:['.mdc-menu-surface{display:none;position:absolute;box-sizing:border-box;max-width:var(--mdc-menu-max-width, calc(100vw - 32px));max-height:var(--mdc-menu-max-height, calc(100vh - 32px));margin:0;padding:0;transform:scale(1);transform-origin:top left;opacity:0;overflow:auto;will-change:transform,opacity;z-index:8;border-radius:var(--mdc-shape-medium, 4px);transform-origin-left:top left;transform-origin-right:top right}.mdc-menu-surface:focus{outline:none}.mdc-menu-surface--animating-open{display:inline-block;transform:scale(0.8);opacity:0}.mdc-menu-surface--open{display:inline-block;transform:scale(1);opacity:1}.mdc-menu-surface--animating-closed{display:inline-block;opacity:0}[dir=rtl] .mdc-menu-surface,.mdc-menu-surface[dir=rtl]{transform-origin-left:top right;transform-origin-right:top left}.mdc-menu-surface--anchor{position:relative;overflow:visible}.mdc-menu-surface--fixed{position:fixed}.mdc-menu-surface--fullwidth{width:100%}mat-menu{display:none}.mat-mdc-menu-content{margin:0;padding:8px 0;list-style-type:none}.mat-mdc-menu-content:focus{outline:none}.mat-mdc-menu-panel.ng-animating{pointer-events:none}.cdk-high-contrast-active .mat-mdc-menu-panel{outline:solid 1px}.mat-mdc-menu-panel.mat-mdc-menu-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;position:relative}.mat-mdc-menu-item{display:flex;position:relative;align-items:center;justify-content:flex-start;overflow:hidden;padding:0;padding-left:16px;padding-right:16px;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);cursor:pointer;width:100%;text-align:left;box-sizing:border-box;color:inherit;font-size:inherit;background:none;text-decoration:none;margin:0;min-height:48px}.mat-mdc-menu-item:focus{outline:none}[dir=rtl] .mat-mdc-menu-item,.mat-mdc-menu-item[dir=rtl]{padding-left:16px;padding-right:16px}.mat-mdc-menu-item::-moz-focus-inner{border:0}.mat-mdc-menu-item.mdc-list-item{align-items:center}.mat-mdc-menu-item[disabled]{cursor:default;opacity:.38}.mat-mdc-menu-item[disabled]::after{display:block;position:absolute;content:"";top:0;left:0;bottom:0;right:0}.mat-mdc-menu-item .mat-icon{margin-right:16px}[dir=rtl] .mat-mdc-menu-item{text-align:right}[dir=rtl] .mat-mdc-menu-item .mat-icon{margin-right:0;margin-left:16px}.mat-mdc-menu-item .mdc-list-item__primary-text{white-space:normal}.mat-mdc-menu-item.mat-mdc-menu-item-submenu-trigger{padding-right:32px}[dir=rtl] .mat-mdc-menu-item.mat-mdc-menu-item-submenu-trigger{padding-right:16px;padding-left:32px}.cdk-high-contrast-active .mat-mdc-menu-item{margin-top:1px}.mat-mdc-menu-submenu-icon{position:absolute;top:50%;right:16px;transform:translateY(-50%);width:5px;height:10px;fill:currentColor}[dir=rtl] .mat-mdc-menu-submenu-icon{right:auto;left:16px;transform:translateY(-50%) scaleX(-1)}.cdk-high-contrast-active .mat-mdc-menu-submenu-icon{fill:CanvasText}.mat-mdc-menu-item .mat-mdc-menu-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}'],encapsulation:2,data:{animation:[Fo.transformMenu,Fo.fadeInItems]},changeDetection:0}),Y})();const ro=new _.OlP("mat-menu-scroll-strategy"),js={provide:ro,deps:[Ci],useFactory:function Ga(Y){return()=>Y.scrollStrategies.reposition()}},ta=(0,ri.i$)({passive:!0});let mo=(()=>{class Y{get _deprecatedMatMenuTriggerFor(){return this.menu}set _deprecatedMatMenuTriggerFor(a){this.menu=a}get menu(){return this._menu}set menu(a){a!==this._menu&&(this._menu=a,this._menuCloseSubscription.unsubscribe(),a&&(this._menuCloseSubscription=a.close.subscribe(h=>{this._destroyMenu(h),("click"===h||"tab"===h)&&this._parentMaterialMenu&&this._parentMaterialMenu.closed.emit(h)})),this._menuItemInstance?._setTriggersSubmenu(this.triggersSubmenu()))}constructor(a,h,T,P,X,ce,We,mt,on){this._overlay=a,this._element=h,this._viewContainerRef=T,this._menuItemInstance=ce,this._dir=We,this._focusMonitor=mt,this._ngZone=on,this._overlayRef=null,this._menuOpen=!1,this._closingActionsSubscription=bt.w0.EMPTY,this._hoverSubscription=bt.w0.EMPTY,this._menuCloseSubscription=bt.w0.EMPTY,this._changeDetectorRef=(0,_.f3M)(_.sBO),this._handleTouchStart=ln=>{(0,Li.yG)(ln)||(this._openedBy="touch")},this._openedBy=void 0,this.restoreFocus=!0,this.menuOpened=new _.vpe,this.onMenuOpen=this.menuOpened,this.menuClosed=new _.vpe,this.onMenuClose=this.menuClosed,this._scrollStrategy=P,this._parentMaterialMenu=X instanceof Hr?X:void 0,h.nativeElement.addEventListener("touchstart",this._handleTouchStart,ta)}ngAfterContentInit(){this._handleHover()}ngOnDestroy(){this._overlayRef&&(this._overlayRef.dispose(),this._overlayRef=null),this._element.nativeElement.removeEventListener("touchstart",this._handleTouchStart,ta),this._menuCloseSubscription.unsubscribe(),this._closingActionsSubscription.unsubscribe(),this._hoverSubscription.unsubscribe()}get menuOpen(){return this._menuOpen}get dir(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}triggersSubmenu(){return!!(this._menuItemInstance&&this._parentMaterialMenu&&this.menu)}toggleMenu(){return this._menuOpen?this.closeMenu():this.openMenu()}openMenu(){const a=this.menu;if(this._menuOpen||!a)return;const h=this._createOverlay(a),T=h.getConfig(),P=T.positionStrategy;this._setPosition(a,P),T.hasBackdrop=null==a.hasBackdrop?!this.triggersSubmenu():a.hasBackdrop,h.attach(this._getPortal(a)),a.lazyContent&&a.lazyContent.attach(this.menuData),this._closingActionsSubscription=this._menuClosingActions().subscribe(()=>this.closeMenu()),this._initMenu(a),a instanceof Hr&&(a._startAnimation(),a._directDescendantItems.changes.pipe((0,Tn.R)(a.close)).subscribe(()=>{P.withLockedPosition(!1).reapplyLastPosition(),P.withLockedPosition(!0)}))}closeMenu(){this.menu?.close.emit()}focus(a,h){this._focusMonitor&&a?this._focusMonitor.focusVia(this._element,a,h):this._element.nativeElement.focus(h)}updatePosition(){this._overlayRef?.updatePosition()}_destroyMenu(a){if(!this._overlayRef||!this.menuOpen)return;const h=this.menu;this._closingActionsSubscription.unsubscribe(),this._overlayRef.detach(),this.restoreFocus&&("keydown"===a||!this._openedBy||!this.triggersSubmenu())&&this.focus(this._openedBy),this._openedBy=void 0,h instanceof Hr?(h._resetAnimation(),h.lazyContent?h._animationDone.pipe((0,xe.h)(T=>"void"===T.toState),(0,Nt.q)(1),(0,Tn.R)(h.lazyContent._attached)).subscribe({next:()=>h.lazyContent.detach(),complete:()=>this._setIsMenuOpen(!1)}):this._setIsMenuOpen(!1)):(this._setIsMenuOpen(!1),h?.lazyContent?.detach())}_initMenu(a){a.parentMenu=this.triggersSubmenu()?this._parentMaterialMenu:void 0,a.direction=this.dir,this._setMenuElevation(a),a.focusFirstItem(this._openedBy||"program"),this._setIsMenuOpen(!0)}_setMenuElevation(a){if(a.setElevation){let h=0,T=a.parentMenu;for(;T;)h++,T=T.parentMenu;a.setElevation(h)}}_setIsMenuOpen(a){a!==this._menuOpen&&(this._menuOpen=a,this._menuOpen?this.menuOpened.emit():this.menuClosed.emit(),this.triggersSubmenu()&&this._menuItemInstance._setHighlighted(a),this._changeDetectorRef.markForCheck())}_createOverlay(a){if(!this._overlayRef){const h=this._getOverlayConfig(a);this._subscribeToPositions(a,h.positionStrategy),this._overlayRef=this._overlay.create(h),this._overlayRef.keydownEvents().subscribe()}return this._overlayRef}_getOverlayConfig(a){return new et({positionStrategy:this._overlay.position().flexibleConnectedTo(this._element).withLockedPosition().withGrowAfterOpen().withTransformOriginOn(".mat-menu-panel, .mat-mdc-menu-panel"),backdropClass:a.backdropClass||"cdk-overlay-transparent-backdrop",panelClass:a.overlayPanelClass,scrollStrategy:this._scrollStrategy(),direction:this._dir})}_subscribeToPositions(a,h){a.setPositionClasses&&h.positionChanges.subscribe(T=>{const P="start"===T.connectionPair.overlayX?"after":"before",X="top"===T.connectionPair.overlayY?"below":"above";this._ngZone?this._ngZone.run(()=>a.setPositionClasses(P,X)):a.setPositionClasses(P,X)})}_setPosition(a,h){let[T,P]="before"===a.xPosition?["end","start"]:["start","end"],[X,ce]="above"===a.yPosition?["bottom","top"]:["top","bottom"],[We,mt]=[X,ce],[on,ln]=[T,P],Un=0;if(this.triggersSubmenu()){if(ln=T="before"===a.xPosition?"start":"end",P=on="end"===T?"start":"end",this._parentMaterialMenu){if(null==this._parentInnerPadding){const sr=this._parentMaterialMenu.items.first;this._parentInnerPadding=sr?sr._getHostElement().offsetTop:0}Un="bottom"===X?this._parentInnerPadding:-this._parentInnerPadding}}else a.overlapTrigger||(We="top"===X?"bottom":"top",mt="top"===ce?"bottom":"top");h.withPositions([{originX:T,originY:We,overlayX:on,overlayY:X,offsetY:Un},{originX:P,originY:We,overlayX:ln,overlayY:X,offsetY:Un},{originX:T,originY:mt,overlayX:on,overlayY:ce,offsetY:-Un},{originX:P,originY:mt,overlayX:ln,overlayY:ce,offsetY:-Un}])}_menuClosingActions(){const a=this._overlayRef.backdropClick(),h=this._overlayRef.detachments(),T=this._parentMaterialMenu?this._parentMaterialMenu.closed:(0,Ne.of)(),P=this._parentMaterialMenu?this._parentMaterialMenu._hovered().pipe((0,xe.h)(X=>X!==this._menuItemInstance),(0,xe.h)(()=>this._menuOpen)):(0,Ne.of)();return(0,ji.T)(a,T,P,h)}_handleMousedown(a){(0,Li.X6)(a)||(this._openedBy=0===a.button?"mouse":void 0,this.triggersSubmenu()&&a.preventDefault())}_handleKeydown(a){const h=a.keyCode;(h===ar.K5||h===ar.L_)&&(this._openedBy="keyboard"),this.triggersSubmenu()&&(h===ar.SV&&"ltr"===this.dir||h===ar.oh&&"rtl"===this.dir)&&(this._openedBy="keyboard",this.openMenu())}_handleClick(a){this.triggersSubmenu()?(a.stopPropagation(),this.openMenu()):this.toggleMenu()}_handleHover(){!this.triggersSubmenu()||!this._parentMaterialMenu||(this._hoverSubscription=this._parentMaterialMenu._hovered().pipe((0,xe.h)(a=>a===this._menuItemInstance&&!a.disabled),ts(0,ui)).subscribe(()=>{this._openedBy="mouse",this.menu instanceof Hr&&this.menu._isAnimating?this.menu._animationDone.pipe((0,Nt.q)(1),ts(0,ui),(0,Tn.R)(this._parentMaterialMenu._hovered())).subscribe(()=>this.openMenu()):this.openMenu()}))}_getPortal(a){return(!this._portal||this._portal.templateRef!==a.templateRef)&&(this._portal=new Fe(a.templateRef,this._viewContainerRef)),this._portal}}return Y.\u0275fac=function(a){return new(a||Y)(_.Y36(Ci),_.Y36(_.SBq),_.Y36(_.s_b),_.Y36(ro),_.Y36(Ns,8),_.Y36(Fr,10),_.Y36(Gn.Is,8),_.Y36(Li.tE),_.Y36(_.R0b))},Y.\u0275dir=_.lG2({type:Y,hostVars:3,hostBindings:function(a,h){1&a&&_.NdJ("click",function(P){return h._handleClick(P)})("mousedown",function(P){return h._handleMousedown(P)})("keydown",function(P){return h._handleKeydown(P)}),2&a&&_.uIk("aria-haspopup",h.menu?"menu":null)("aria-expanded",h.menuOpen)("aria-controls",h.menuOpen?h.menu.panelId:null)},inputs:{_deprecatedMatMenuTriggerFor:["mat-menu-trigger-for","_deprecatedMatMenuTriggerFor"],menu:["matMenuTriggerFor","menu"],menuData:["matMenuTriggerData","menuData"],restoreFocus:["matMenuTriggerRestoreFocus","restoreFocus"]},outputs:{menuOpened:"menuOpened",onMenuOpen:"onMenuOpen",menuClosed:"menuClosed",onMenuClose:"onMenuClose"}}),Y})(),Va=(()=>{class Y extends mo{}return Y.\u0275fac=function(){let p;return function(h){return(p||(p=_.n5z(Y)))(h||Y)}}(),Y.\u0275dir=_.lG2({type:Y,selectors:[["","mat-menu-trigger-for",""],["","matMenuTriggerFor",""]],hostAttrs:[1,"mat-mdc-menu-trigger"],exportAs:["matMenuTrigger"],features:[_.qOj]}),Y})(),dl=(()=>{class Y{}return Y.\u0275fac=function(a){return new(a||Y)},Y.\u0275mod=_.oAB({type:Y}),Y.\u0275inj=_.cJS({providers:[js],imports:[f.ez,Xr.si,Xr.BQ,cr,ye,Xr.BQ]}),Y})();function Ja(Y,p){if(1&Y){const a=_.EpF();_.TgZ(0,"div",1,2),_.NdJ("click",function(){const P=_.CHM(a).$implicit,X=_.MAs(1),ce=_.oxw();return _.KtG(ce.onclick(P,X))}),_.TgZ(2,"div",3),_._UZ(3,"img",4),_.qZA(),_.TgZ(4,"div",5)(5,"div",6)(6,"p",7),_._uU(7),_.qZA(),_.TgZ(8,"p",8),_._uU(9),_.ALo(10,"date"),_.qZA()(),_.TgZ(11,"p",9),_._uU(12),_.qZA()()()}if(2&Y){const a=p.$implicit;_.Q6J("routerLink",a.ref.id),_.xp6(3),_.uIk("src",a.otherUserPhoto,_.LSH),_.xp6(4),_.Oqu(a.otherUserName),_.xp6(2),_.Oqu(_.xi3(10,5,a.lastMessageTime,"HH:mm")),_.xp6(3),_.Oqu(a.lastMessageValue)}}let Fs=(()=>{class Y{handleEscapeKey(a){this.selected?.classList.remove("selected"),this.selected=null}constructor(a,h){this.screensSize=a,this.componentsDisplay=h,this.dialogs$=new Ze.X(null),this.selectedDialog=new _.vpe,this.selected=null}onclick(a,h){this.selected&&this.selected.classList.remove("selected"),h.classList.add("selected"),this.selected=h,this.selectedDialog.emit(a),this.screensSize.isTablet$.getValue()&&this.componentsDisplay.hideDialogs(),this.screensSize.isMobile$.getValue()&&this.componentsDisplay.showChat()}ngAfterViewChecked(){this.selected&&!this.selected.classList.contains("selected")&&this.selected.classList.add("selected")}}return Y.\u0275fac=function(a){return new(a||Y)(_.Y36(Te.O),_.Y36(re.w))},Y.\u0275cmp=_.Xpm({type:Y,selectors:[["app-dialog"]],hostBindings:function(a,h){1&a&&_.NdJ("keydown.escape",function(P){return h.handleEscapeKey(P)},!1,_.evT)},inputs:{dialogs$:"dialogs$"},outputs:{selectedDialog:"selectedDialog"},decls:2,vars:3,consts:[["class","chat flex",3,"routerLink","click",4,"ngFor","ngForOf"],[1,"chat","flex",3,"routerLink","click"],["selected",""],[1,"img-box"],["alt","User's avatar","decoding","async",1,"avatar"],[1,"content-box"],[1,"header","flex"],[1,"username"],[1,"time"],[1,"message"]],template:function(a,h){1&a&&(_.YNc(0,Ja,13,8,"div",0),_.ALo(1,"async")),2&a&&_.Q6J("ngForOf",_.lcZ(1,1,h.dialogs$))},dependencies:[ke.rH,f.sg,f.Ov,f.uU],styles:[".chat[_ngcontent-%COMP%]{padding:.7rem;max-height:7.5rem;overflow:hidden;border-radius:10px;gap:1rem;cursor:pointer}.chat[_ngcontent-%COMP%]:hover{background-color:#27272a}.chat[_ngcontent-%COMP%]:focus{outline:none}.selected[_ngcontent-%COMP%]{background-color:#6c44e3!important}.selected[_ngcontent-%COMP%]   .content-box[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%], .selected[_ngcontent-%COMP%]   .content-box[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]{color:#d0d0d0!important}.content-box[_ngcontent-%COMP%]{width:100%}.avatar[_ngcontent-%COMP%]{border-radius:50%;height:5.3rem;width:5.3rem;object-fit:cover;object-position:center;image-rendering:smooth}.header[_ngcontent-%COMP%]{width:100%;justify-content:space-between;margin-bottom:1.2rem}.username[_ngcontent-%COMP%]{font-size:1.6rem;color:#d0d0d0;font-weight:600}.time[_ngcontent-%COMP%]{font-size:1.3rem;font-weight:600}.message[_ngcontent-%COMP%]{color:#777;width:100%}"],changeDetection:0}),Y})(),Ba=(()=>{class Y{constructor(a,h,T,P){this.dialogTrans=a,this.dialog=h,this.auth=T,this.dialogData=P,this.dialogs$=new Ze.X(null),this.nameFilter=""}ngOnInit(){this.dialogData.dialogs$.subscribe(a=>this.dialogs$.next(a))}filterDialogs(a){a.trim()||this.dialogs$.next(this.dialogData.dialogs$.getValue());let h=this.dialogs$.getValue();h=h?.filter(T=>T.otherUserName.toLowerCase().includes(a.toLowerCase()))||null,this.dialogs$.next(h)}openDialog(){this.dialog.open(yi)}}return Y.\u0275fac=function(a){return new(a||Y)(_.Y36(Nr.I),_.Y36(Kr),_.Y36(Rn.e),_.Y36(He.C))},Y.\u0275cmp=_.Xpm({type:Y,selectors:[["app-dialogs"]],decls:24,vars:2,consts:[[1,"container"],[1,"header","flex"],["mat-icon-button","","color","accent",3,"matMenuTriggerFor"],["menu","matMenu"],["mat-menu-item","",3,"click"],[1,"search-box"],["type","text","placeholder","Search...",1,"search-input",3,"input"],["filter",""],[1,"icon","search-icon"],[1,"main"],[3,"dialogs$","selectedDialog"]],template:function(a,h){if(1&a){const T=_.EpF();_.TgZ(0,"div",0)(1,"header",1)(2,"button",2)(3,"mat-icon"),_._uU(4,"more_vert"),_.qZA()(),_.TgZ(5,"mat-menu",null,3)(7,"button",4),_.NdJ("click",function(){return h.openDialog()}),_.TgZ(8,"mat-icon"),_._uU(9,"edit"),_.qZA(),_.TgZ(10,"span"),_._uU(11,"Start new chat"),_.qZA()(),_.TgZ(12,"button",4),_.NdJ("click",function(){return h.auth.logout()}),_.TgZ(13,"mat-icon"),_._uU(14,"logout"),_.qZA(),_.TgZ(15,"span"),_._uU(16,"Logout"),_.qZA()()(),_.TgZ(17,"div",5)(18,"input",6,7),_.NdJ("input",function(){_.CHM(T);const X=_.MAs(19);return _.KtG(h.filterDialogs(X.value))}),_.qZA(),_.TgZ(20,"mat-icon",8),_._uU(21,"search"),_.qZA()()(),_.TgZ(22,"main",9)(23,"app-dialog",10),_.NdJ("selectedDialog",function(X){return h.dialogTrans.dialog$.next(X)}),_.qZA()()()}if(2&a){const T=_.MAs(6);_.xp6(2),_.Q6J("matMenuTriggerFor",T),_.xp6(21),_.Q6J("dialogs$",h.dialogs$)}},dependencies:[hr.Hw,ai.RK,ba,Fr,Va,Fs],styles:['@charset "UTF-8";.container[_ngcontent-%COMP%]{height:100%;background-color:#18181b;border-right:1px solid #2e2e2e}.header[_ngcontent-%COMP%]{align-items:center;background-color:#1f1f21;box-shadow:0 2px 2px #00000040}.search-box[_ngcontent-%COMP%]{width:100%;padding:1.3rem;position:relative}.search-input[_ngcontent-%COMP%]{width:100%;border:none;padding:1.2rem 1.5rem 1.2rem 4rem;border-radius:20px;font-size:1.6rem;color:#fff;background-color:#27272a;transition:.1s}.search-input[_ngcontent-%COMP%]:focus{outline:2px solid #5f3dc4}.search-icon[_ngcontent-%COMP%]{position:absolute;left:23px;top:22px}.main[_ngcontent-%COMP%]{padding:1rem;height:calc(100% - 6.8rem);overflow-y:scroll}[_ngcontent-%COMP%]::-webkit-scrollbar{width:5px;background-color:transparent}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#8080804d;border-radius:4px}*[_ngcontent-%COMP%]{scrollbar-width:thin;scrollbar-color:rgba(128,128,128,.3) transparent}*[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{border-radius:4px}*[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:vertical{height:30%}*[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:horizontal{width:30%}*[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#8080804d;border-radius:4px}'],changeDetection:0}),Y})();const rl=function(Y,p,a){return{"sidenav--pc":Y,"sidenav--tablet":p,"sidenav--mobile":a}};function xa(Y,p){if(1&Y&&(_.TgZ(0,"aside",3),_.ALo(1,"async"),_.ALo(2,"async"),_.ALo(3,"async"),_._UZ(4,"app-dialogs"),_.qZA()),2&Y){const a=_.oxw();_.Q6J("ngClass",_.kEZ(7,rl,!_.lcZ(1,1,a.screenSize.isTablet$),_.lcZ(2,3,a.screenSize.isTablet$),_.lcZ(3,5,a.screenSize.isMobile$)))}}function Al(Y,p){1&Y&&(_.TgZ(0,"main",4),_._UZ(1,"router-outlet"),_.qZA())}let Ea=(()=>{class Y{constructor(a,h,T,P){this.componentsDisplay=a,this.screenSize=h,this.router=T,this.dialogData=P,this.sidenav=!0,T.navigateByUrl("chat")}}return Y.\u0275fac=function(a){return new(a||Y)(_.Y36(re.w),_.Y36(Te.O),_.Y36(ke.F0),_.Y36(He.C))},Y.\u0275cmp=_.Xpm({type:Y,selectors:[["app-messenger"]],decls:5,vars:6,consts:[[1,"container","flex"],[3,"ngClass",4,"ngIf"],["class","main img",4,"ngIf"],[3,"ngClass"],[1,"main","img"]],template:function(a,h){1&a&&(_.TgZ(0,"div",0),_.YNc(1,xa,5,11,"aside",1),_.ALo(2,"async"),_.YNc(3,Al,2,0,"main",2),_.ALo(4,"async"),_.qZA()),2&a&&(_.xp6(1),_.Q6J("ngIf",_.lcZ(2,2,h.componentsDisplay.dialogsDisplay$)),_.xp6(2),_.Q6J("ngIf",_.lcZ(4,4,h.componentsDisplay.chatDisplay$)))},dependencies:[ke.lC,f.mk,f.O5,Ba,f.Ov],styles:[".container[_ngcontent-%COMP%]{height:100%;width:100%;overflow-x:hidden}.sidenav--pc[_ngcontent-%COMP%]{min-width:30rem;width:40%;max-width:40rem}.sidenav--tablet[_ngcontent-%COMP%]{min-width:40rem}.sidenav--mobile[_ngcontent-%COMP%]{width:100%;min-width:auto}.main[_ngcontent-%COMP%]{width:100%}.img[_ngcontent-%COMP%]{background:url(chats-background.3c213d0d71e60d4d.jpg) center no-repeat;background-size:cover}"]}),Y})();var Hl=L(8505),jl=L(9598);const cs=["messageRef"];function zl(Y,p){1&Y&&(_.TgZ(0,"div",10),_._UZ(1,"img",11),_.qZA())}function el(Y,p){1&Y&&(_.TgZ(0,"div",12),_._UZ(1,"img",13),_.qZA())}function Il(Y,p){if(1&Y&&(_.TgZ(0,"div",3,4)(2,"div",5),_.YNc(3,zl,2,0,"div",6),_.YNc(4,el,2,0,"ng-template",null,7,_.W1O),_.TgZ(6,"p",8),_._uU(7),_.qZA(),_.TgZ(8,"span",9),_.ALo(9,"date"),_._uU(10),_.ALo(11,"date"),_.qZA()()()),2&Y){const a=p.$implicit,h=p.index,T=_.MAs(1),P=_.MAs(5),X=_.oxw();_.ekj("lastMes",(null==X.messages?null:X.messages.length)===h+1),_.Q6J("ngClass",a.senderId.id===X.curUserId?"message-centering-right":"message-centering-left"),_.xp6(3),_.Q6J("ngIf",T.classList.contains("message-centering-right"))("ngIfElse",P),_.xp6(4),_.Oqu(a.content),_.xp6(1),_.s9C("title",_.xi3(9,8,a.time,"d MMMM, y, HH:mm:ss")),_.xp6(2),_.hij(" ",_.xi3(11,11,a.time,"HH:mm")," ")}}let hl=(()=>{class Y{constructor(a,h){this.userData=a,this.chatData=h,this.messages=null,this.newChat=!0,this.unsubscribe$=new Me.x,this.curUserId=this.userData.curUserDoc?.ref.id}ngAfterViewInit(){this.chatData.chatData$.pipe((0,Tn.R)(this.unsubscribe$)).subscribe(()=>this.newChat=!0),this.messageItems.changes.pipe((0,Tn.R)(this.unsubscribe$)).subscribe(()=>this.scrollToLastItem())}scrollToLastItem(){!this.newChat&&this.messageItems?.last&&this.messageItems.last.nativeElement.scrollIntoView({behavior:"smooth",block:"end"}),this.newChat&&this.messageItems?.last&&(this.messageItems.last.nativeElement.scrollIntoView({behavior:"instant",block:"end"}),this.newChat=!1)}ngOnDestroy(){this.unsubscribe$.next(),this.unsubscribe$.complete()}}return Y.\u0275fac=function(a){return new(a||Y)(_.Y36(Io.M),_.Y36(jl.Q))},Y.\u0275cmp=_.Xpm({type:Y,selectors:[["app-message"]],viewQuery:function(a,h){if(1&a&&_.Gf(cs,5),2&a){let T;_.iGM(T=_.CRH())&&(h.messageItems=T)}},inputs:{messages:"messages"},decls:3,vars:1,consts:[[1,"main"],[1,"messages-container"],["class","message flex",3,"ngClass","lastMes",4,"ngFor","ngForOf"],[1,"message","flex",3,"ngClass"],["messageRef",""],[1,"message-box"],["class","echo-box right",4,"ngIf","ngIfElse"],["echoLeft",""],[1,"message-text"],[1,"message-time",3,"title"],[1,"echo-box","right"],["src","../../../../../../assets/svg/echo-send.svg","alt","echo-svg"],[1,"echo-box","left"],["src","../../../../../../assets/svg/echo-receive.svg","alt","echo-svg"]],template:function(a,h){1&a&&(_.TgZ(0,"main",0)(1,"div",1),_.YNc(2,Il,12,14,"div",2),_.qZA()()),2&a&&(_.xp6(2),_.Q6J("ngForOf",h.messages))},dependencies:[f.mk,f.sg,f.O5,f.uU],styles:[".main[_ngcontent-%COMP%]{display:flex;align-items:flex-end;height:100%;width:100%;margin:0 auto;padding:0 1rem;line-height:2.1rem;font-size:1.8rem}.messages-container[_ngcontent-%COMP%]{max-width:70rem;width:100%;min-width:37rem;margin:0 auto;max-height:calc(100% - 6rem)}.message-box[_ngcontent-%COMP%]{position:relative;width:max-content;min-width:7.3rem;max-width:46rem;margin-bottom:1.3rem;padding:.9rem 4.5rem .9rem .9rem;background-color:#5f3dc4}.message-text[_ngcontent-%COMP%]{color:#e8e8e8;font-weight:400}.message-time[_ngcontent-%COMP%]{font-size:1.2rem;position:absolute;right:5px;bottom:0}.message-centering-left[_ngcontent-%COMP%]{justify-content:flex-start}.message-centering-left[_ngcontent-%COMP%]   .message-box[_ngcontent-%COMP%]{border-radius:.85rem 1.3rem .85rem 0;justify-content:flex-start;background-color:#27272a}.message-centering-left[_ngcontent-%COMP%]   .message-box[_ngcontent-%COMP%]   .message-time[_ngcontent-%COMP%]{color:#686c72}.message-centering-right[_ngcontent-%COMP%]{justify-content:flex-end}.message-centering-right[_ngcontent-%COMP%]   .message-box[_ngcontent-%COMP%]{border-radius:1.3rem .85rem 0;justify-content:flex-end;background-color:#6741d9}.message-centering-right[_ngcontent-%COMP%]   .message-box[_ngcontent-%COMP%]   .message-time[_ngcontent-%COMP%]{color:#d0bfff}.echo-box[_ngcontent-%COMP%]{position:absolute}.right[_ngcontent-%COMP%]{left:-19px;top:-11px}.left[_ngcontent-%COMP%]{right:-19px;top:-11px}"],changeDetection:0}),Y})();const $l=["message"];function sc(Y,p){if(1&Y){const a=_.EpF();_.TgZ(0,"button",22),_.NdJ("click",function(){_.CHM(a);const T=_.oxw(3);return _.KtG(T.onShowDialogs())}),_.TgZ(1,"mat-icon"),_._uU(2,"keyboard_arrow_left"),_.qZA()()}}function Gl(Y,p){if(1&Y){const a=_.EpF();_.TgZ(0,"button",22),_.NdJ("click",function(){_.CHM(a);const T=_.oxw(3);return _.KtG(T.onHideDialogs())}),_.TgZ(1,"mat-icon"),_._uU(2,"close"),_.qZA()()}}function Ia(Y,p){if(1&Y&&(_.TgZ(0,"div",20),_.YNc(1,sc,3,0,"button",21),_.ALo(2,"async"),_.YNc(3,Gl,3,0,"button",21),_.ALo(4,"async"),_.qZA()),2&Y){const a=_.oxw(2);_.xp6(1),_.Q6J("ngIf",!_.lcZ(2,2,a.componentsDisplay.dialogsDisplay$)),_.xp6(2),_.Q6J("ngIf",_.lcZ(4,4,a.componentsDisplay.dialogsDisplay$))}}function fl(Y,p){if(1&Y&&(_.TgZ(0,"div",15),_.YNc(1,Ia,5,6,"div",16),_.ALo(2,"async"),_.TgZ(3,"div",17),_._UZ(4,"img",18),_.qZA(),_.TgZ(5,"div",19),_._uU(6),_.qZA()()),2&Y){const a=p.ngIf,h=_.oxw();_.xp6(1),_.Q6J("ngIf",_.lcZ(2,3,h.screenSize.isTablet$)),_.xp6(3),_.uIk("src",a.photo,_.LSH),_.xp6(2),_.Oqu(a.name)}}let Wl=(()=>{class Y{handleEscapeKey(){this.router.navigateByUrl("chat"),this.componentsDisplay.dialogsDisplay$.getValue()||this.componentsDisplay.showDialogs()}handleEnterKey(){this.chatData.onSendMessage(this.messageInput.nativeElement)}constructor(a,h,T,P,X){this.chatData=a,this.screenSize=h,this.componentsDisplay=T,this.dialogTrans=P,this.router=X,this.messages$=new Ze.X([]),this.user$=new Ze.X({name:"Loading",photo:""})}ngOnInit(){this.chatData.chatData$.pipe((0,xe.h)(Boolean),(0,Hl.b)(a=>this.user$.next(a))).subscribe(),this.chatData.messagesData$.pipe((0,xe.h)(Boolean),(0,Hl.b)(a=>this.messages$.next(a))).subscribe()}ngAfterViewChecked(){this.screenSize.isTablet$||this.messageInput.nativeElement.focus()}onKeyDown(a){"Enter"===a.key&&!a.shiftKey&&a.preventDefault()}onHideDialogs(){this.componentsDisplay.hideDialogs()}onShowDialogs(){this.componentsDisplay.showDialogs(),this.screenSize.isMobile$.getValue()&&this.componentsDisplay.hideChat()}onChatClick(){this.screenSize.isTablet$.getValue()&&this.componentsDisplay.dialogsDisplay$.getValue()&&this.componentsDisplay.hideDialogs()}onDeleteChat(){this.router.navigateByUrl("/chat"),this.chatData.deleteChat()}}return Y.\u0275fac=function(a){return new(a||Y)(_.Y36(jl.Q),_.Y36(Te.O),_.Y36(re.w),_.Y36(Nr.I),_.Y36(ke.F0))},Y.\u0275cmp=_.Xpm({type:Y,selectors:[["app-chat"]],viewQuery:function(a,h){if(1&a&&_.Gf($l,5),2&a){let T;_.iGM(T=_.CRH())&&(h.messageInput=T.first)}},hostBindings:function(a,h){1&a&&_.NdJ("keydown.escape",function(P){return h.handleEscapeKey(P)},!1,_.evT)("keydown.enter",function(P){return h.handleEnterKey(P)},!1,_.evT)},decls:25,vars:7,consts:[[1,"container"],[1,"header","flex"],["class","user flex",4,"ngIf"],["mat-icon-button","","color","accent",3,"matMenuTriggerFor"],["menu","matMenu"],["mat-menu-item","",3,"click"],[1,"messenger-container","flex"],[1,"main",3,"click"],[3,"messages"],[1,"input-field"],[1,"input-container"],["placeholder","Message",1,"input",3,"input","keydown"],["message",""],["mat-icon-button","","color","accent",1,"btn-send",3,"click"],[1,"menu-icon"],[1,"user","flex"],["class","mobile-btn-box",4,"ngIf"],[1,"avatar-box"],["alt","user's avatar",1,"avatar"],[1,"username"],[1,"mobile-btn-box"],["mat-icon-button","","matTooltip","Basic",3,"click",4,"ngIf"],["mat-icon-button","","matTooltip","Basic",3,"click"]],template:function(a,h){if(1&a){const T=_.EpF();_.TgZ(0,"div",0)(1,"header",1),_.YNc(2,fl,7,5,"div",2),_.ALo(3,"async"),_.TgZ(4,"button",3)(5,"mat-icon"),_._uU(6,"more_vert"),_.qZA()(),_.TgZ(7,"mat-menu",null,4)(9,"button",5),_.NdJ("click",function(){return h.onDeleteChat()}),_.TgZ(10,"mat-icon"),_._uU(11,"delete"),_.qZA(),_.TgZ(12,"span"),_._uU(13,"Delete chat"),_.qZA()()()(),_.TgZ(14,"div",6)(15,"main",7),_.NdJ("click",function(){return h.onChatClick()}),_._UZ(16,"app-message",8),_.ALo(17,"async"),_.qZA(),_.TgZ(18,"div",9)(19,"div",10)(20,"textarea",11,12),_.NdJ("input",function(){_.CHM(T);const X=_.MAs(21);return _.KtG(h.chatData.messageHeightCalc(X))})("keydown",function(X){return h.onKeyDown(X)}),_.qZA(),_.TgZ(22,"button",13),_.NdJ("click",function(){_.CHM(T);const X=_.MAs(21);return _.KtG(h.chatData.onSendMessage(X))}),_.TgZ(23,"mat-icon",14),_._uU(24,"send"),_.qZA()()()()()()}if(2&a){const T=_.MAs(8);_.xp6(2),_.Q6J("ngIf",_.lcZ(3,3,h.user$)),_.xp6(2),_.Q6J("matMenuTriggerFor",T),_.xp6(12),_.Q6J("messages",_.lcZ(17,5,h.messages$))}},dependencies:[f.O5,hr.Hw,ai.RK,ba,Fr,Va,hl,f.Ov],styles:['@charset "UTF-8";.container[_ngcontent-%COMP%]{height:100%}.header[_ngcontent-%COMP%]{padding:.9rem 2rem;justify-content:space-between;background-color:#1f1f21;box-shadow:0 2px 2px #00000040}.user[_ngcontent-%COMP%]{height:100%;align-items:center;gap:.7rem;width:max-content}.avatar-box[_ngcontent-%COMP%]{width:5rem;height:5rem}.avatar[_ngcontent-%COMP%]{height:100%;width:100%;object-fit:cover;object-position:center;border-radius:50%}.username[_ngcontent-%COMP%]{font-size:1.6rem;color:#d0d0d0;font-weight:600}.main[_ngcontent-%COMP%]{overflow-y:auto;overflow-x:hidden;height:calc(100% - 6rem);margin-bottom:1rem}.messenger-container[_ngcontent-%COMP%]{height:calc(100% - 6.8rem);flex-direction:column;align-content:flex-start}.input-field[_ngcontent-%COMP%]{width:100%;margin-bottom:1rem;padding:0 1rem}.input-container[_ngcontent-%COMP%]{position:relative;max-width:70rem;width:available;margin:0 auto}.input[_ngcontent-%COMP%]{width:100%;border-radius:15px;padding:1.6rem 5rem 1.6rem 3rem;border:none;background-color:#27272a;height:54px;font-size:1.8rem;color:#fff;resize:none}.input[_ngcontent-%COMP%]:focus{outline:none}.btn-send[_ngcontent-%COMP%]{position:absolute;right:5px;top:2px}[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px;background-color:transparent}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#8080804d;border-radius:4px}*[_ngcontent-%COMP%]{scrollbar-width:thin;scrollbar-color:rgba(128,128,128,.3) transparent}*[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{border-radius:4px}*[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:vertical{height:30%}*[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:horizontal{width:30%}*[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#8080804d;border-radius:4px}'],changeDetection:0}),Y})();var zs=L(2289);const Ds=[{path:"chat",component:Ea,children:[{path:":id",component:Wl}],canActivate:[L(4995).J]}];let Go=(()=>{class Y{}return Y.\u0275fac=function(a){return new(a||Y)},Y.\u0275mod=_.oAB({type:Y}),Y.\u0275inj=_.cJS({imports:[ke.Bz.forChild(Ds),f.ez,hr.Ps,ai.ot,dl,zs.xu,Es,$e,li,ze.u5,ze.UX]}),Y})()},9598:(wn,dt,L)=>{L.d(dt,{Q:()=>Me});var f=L(1135),_=L(9300),re=L(3900),Te=L(4004),ke=L(8996),He=L(3357),Ze=L(4650),xe=L(1173),ze=L(7693),pe=L(7977);let Me=(()=>{class Ne{constructor(pt,Lt,an){this.userData=pt,this.dialogTrans=Lt,this.store=an,this.chatData$=new f.X(null),this.messagesData$=new f.X(null),Lt.dialog$.pipe((0,_.h)(Boolean),(0,re.w)(It=>this.getMessagesData(It)),(0,_.h)(It=>It.payload.data()?.message.length>this.messagesData$.getValue()?.length),(0,_.h)(It=>"modified"===It.type),(0,Te.U)(It=>It.payload.data()?.message)).subscribe(It=>this.messagesData$.next(It))}onSendMessage(pt){const Lt=pt.value.trim();Lt&&(pt.value="",this.messageHeightCalc(pt),this.sendMessageToDB(this.chatData$.getValue()?.ref,this.createMessageForDB(Lt)))}messageHeightCalc(pt){pt.style.height="auto",pt.style.height=pt.scrollHeight-22+"px"}deleteChat(){const pt=this.dialogTrans.dialog$.getValue()?.ref;pt&&(0,ke.D)(pt.get()).subscribe(Lt=>Lt.data()?.users.forEach(an=>{(0,He.r7)(an,{dialogs:(0,He.Ab)(pt)}),pt.delete()}))}createMessageForDB(pt,Lt=this.userData.curUserDoc?.ref){return{content:pt,senderId:Lt,time:(new Date).toISOString()}}getMessagesData(pt){return(0,ke.D)(pt.ref.get()).subscribe(Lt=>this.setNewUserAndMessages(pt.otherUserName,pt.otherUserPhoto,pt.ref,Lt.data()?.message)),this.store.doc(`chats/${pt.ref.id}`).snapshotChanges()}setNewUserAndMessages(pt,Lt,an,It){this.chatData$.next({name:pt,photo:Lt,ref:an}),this.messagesData$.next(It)}sendMessageToDB(pt,Lt){(0,He.r7)(pt,{message:(0,He.vr)(Lt)})}}return Ne.\u0275fac=function(pt){return new(pt||Ne)(Ze.LFG(xe.M),Ze.LFG(ze.I),Ze.LFG(pe.ST))},Ne.\u0275prov=Ze.Yz7({token:Ne,factory:Ne.\u0275fac,providedIn:"root"}),Ne})()},926:(wn,dt,L)=>{L.d(dt,{C:()=>an});var f=L(1135),_=L(8996),re=L(3900),Te=L(4004),ke=L(7579),He=L(9300),Ze=L(8505),xe=L(4128),ze=L(2722),pe=L(5684),Me=L(3357),Ne=L(4650),yt=L(7977),pt=L(1173),Lt=L(3659);let an=(()=>{class It{constructor(Ae,_t,Qe){this.store=Ae,this.userData=_t,this.screenSize=Qe,this.dialogs$=new f.X(null),this.otherUserIds=[],this.getOtherUserData=Ue=>{const lt=this.userData.getOtherUser(Ue);return(0,_.D)(lt.get())},this.createUserDialog=(Ue,lt)=>{const kt=Ue.data()?.message.slice(-1)[0];return kt&&this.messageLengthFix(kt),{ref:Ue.ref,lastMessageValue:kt?.content,lastMessageTime:kt?.time,otherUserName:lt.data()?.name,otherUserPhoto:lt.data()?.photo}},this.getDialogAndOtherUser=Ue=>(0,_.D)(Ue.get()).pipe((0,re.w)(lt=>this.getOtherUserData(lt.data()?.users).pipe((0,Te.U)(kt=>this.createUserDialog(lt,kt))))),this.unsubscribe$=new ke.x,_t.curUserData$.pipe((0,He.h)(Ue=>!!Ue?.dialogs[0]),(0,Ze.b)(Ue=>{Ue&&this.createUsersList(Ue.dialogs)}),(0,re.w)(Ue=>{const lt=Ue?.dialogs.map(this.getDialogAndOtherUser);return(0,xe.D)(lt||[])}),(0,Te.U)(Ue=>this.sortDialogs(Ue)),(0,Ze.b)(Ue=>this.dialogs$.next(Ue))).subscribe(Ue=>{Ue.forEach(lt=>this.dialogSubscription(lt))})}createChat(Ae,_t){const[Qe,Ue]=[this.store.doc(`users/${Ae}`),this.store.doc(`users/${_t}`)],lt={message:[],users:[Qe.ref,Ue.ref]};return(0,_.D)(this.store.collection("chats").add(lt)).pipe((0,Ze.b)(kt=>{(0,Me.r7)(Qe.ref,{dialogs:(0,Me.vr)(kt)}),(0,Me.r7)(Ue.ref,{dialogs:(0,Me.vr)(kt)})}))}createUsersList(Ae){Ae.forEach(_t=>{(0,_.D)(_t.get()).subscribe(Qe=>this.otherUserIds.push(this.userData.getOtherUser(Qe.data()?.users).id))})}messageLengthFix(Ae){const _t=this.screenSize.isMobile$.getValue()?45:50;return Ae.content.length>_t&&(Ae.content=Ae.content.slice(0,_t)+"..."),Ae}sortDialogs(Ae){return Ae.sort((_t,Qe)=>new Date(Qe.lastMessageTime).getTime()-new Date(_t.lastMessageTime).getTime())}dialogSubscription(Ae){this.store.doc(`chats/${Ae.ref.id}`).valueChanges().pipe((0,ze.R)(this.unsubscribe$),(0,pe.T)(1)).subscribe(_t=>this.createDialogUpdate(Ae,_t))}createDialogUpdate(Ae,_t){let Qe=this.dialogs$.getValue()?.find(Ue=>Ue===Ae);Qe=this.changeDialog(Qe,_t),this.dialogToTop(Qe)}dialogToTop(Ae){const _t=this.dialogs$.getValue();_t?.splice(_t?.findIndex(Qe=>Qe.ref.id===Ae.ref.id),1),_t?.unshift(Ae),this.dialogs$.next(_t)}changeDialog(Ae,_t){const Qe=_t.message.slice(-1)[0];return this.messageLengthFix(Qe),Ae.lastMessageValue=Qe?.content,Ae.lastMessageTime=Qe?.time,Ae}ngOnDestroy(){this.unsubscribe$.next(),this.unsubscribe$.complete()}}return It.\u0275fac=function(Ae){return new(Ae||It)(Ne.LFG(yt.ST),Ne.LFG(pt.M),Ne.LFG(Lt.O))},It.\u0275prov=Ne.Yz7({token:It,factory:It.\u0275fac,providedIn:"root"}),It})()},9998:(wn,dt,L)=>{L.d(dt,{w:()=>re});var f=L(1135),_=L(4650);let re=(()=>{class Te{constructor(){this.chatDisplay$=new f.X(!0),this.dialogsDisplay$=new f.X(!0)}hideDialogs(){this.dialogsDisplay$.next(!1)}showDialogs(){this.dialogsDisplay$.next(!0)}hideChat(){this.chatDisplay$.next(!1)}showChat(){this.chatDisplay$.next(!0)}}return Te.\u0275fac=function(He){return new(He||Te)},Te.\u0275prov=_.Yz7({token:Te,factory:Te.\u0275fac,providedIn:"root"}),Te})()},3659:(wn,dt,L)=>{L.d(dt,{O:()=>He});var f=L(1135),_=L(4004),re=L(4650),Te=L(2289),ke=L(9998);let He=(()=>{class Ze{constructor(ze,pe){this.breakpointObserver=ze,this.componentsDisplay=pe,this.isTablet$=new f.X(!1),this.isMobile$=new f.X(!1);const[Me,Ne]=["(max-width: 500px)","(max-width: 850px)"];this.breakpointObserver.observe([Me,Ne]).pipe((0,_.U)(yt=>({mobile:yt.breakpoints[Me],tablet:yt.breakpoints[Ne]}))).subscribe(yt=>{yt.tablet!==this.isTablet$.getValue()&&this.onTabletSize(yt.tablet),yt.mobile!==this.isMobile$.getValue()&&this.onMobileSize(yt.mobile),!yt.tablet&&!yt.mobile&&this.onPcSize()})}onTabletSize(ze){this.isTablet$.next(ze)}onMobileSize(ze){this.isMobile$.next(ze),this.componentsDisplay.dialogsDisplay$.getValue()&&this.componentsDisplay.hideChat(),ze||this.componentsDisplay.showChat()}onPcSize(){const ze=this.componentsDisplay;(ze.chatDisplay$.getValue()||!ze.dialogsDisplay$.getValue())&&(ze.showDialogs(),ze.showChat())}}return Ze.\u0275fac=function(ze){return new(ze||Ze)(re.LFG(Te.Yg),re.LFG(ke.w))},Ze.\u0275prov=re.Yz7({token:Ze,factory:Ze.\u0275fac,providedIn:"root"}),Ze})()},1173:(wn,dt,L)=>{L.d(dt,{M:()=>He});var f=L(1135),_=L(7579),re=L(2722),Te=L(4650),ke=L(7977);let He=(()=>{class Ze{constructor(ze){this.store=ze,this.curUserData$=new f.X(null),this.unsubscribe$=new _.x,this.getOtherUser=pe=>pe[0].id===this.curUserDoc.ref.id?pe[1]:pe[0]}setCurrentUser(ze){this.unsubscribe$.next(),this.curUserDoc=this.store.doc(`users/${ze}`),this.curUserDoc.valueChanges().pipe((0,re.R)(this.unsubscribe$)).subscribe(pe=>this.curUserData$.next(pe))}}return Ze.\u0275fac=function(ze){return new(ze||Ze)(Te.LFG(ke.ST))},Ze.\u0275prov=Te.Yz7({token:Ze,factory:Ze.\u0275fac,providedIn:"root"}),Ze})()},1648:(wn,dt,L)=>{L.r(dt),L.d(dt,{AuthModule:()=>Ye});var f=L(4650),_=L(7799);let re=(()=>{class z{}return z.\u0275fac=function(bt){return new(bt||z)},z.\u0275cmp=f.Xpm({type:z,selectors:[["app-verifyPhone"]],decls:6,vars:0,consts:[[1,"fullscreen"],[1,"main"],[1,"img"],[1,"heading-primary"]],template:function(bt,Ft){1&bt&&(f.TgZ(0,"div",0)(1,"main",1),f._UZ(2,"div",2),f.TgZ(3,"h1",3),f._uU(4,"echo"),f.qZA(),f._UZ(5,"router-outlet"),f.qZA()())},dependencies:[_.lC],styles:[".fullscreen[_ngcontent-%COMP%]{background:#4b6cb7;background:linear-gradient(to right,#121e37,#1e0631);min-height:100vh;width:100%}.img[_ngcontent-%COMP%]{width:16rem;height:16rem;margin:0 auto 3rem;background:url(logo-transparent-notext.4c1e30da1756aa18.png) center no-repeat;background-size:100%}.main[_ngcontent-%COMP%]{margin:0 auto;padding-top:8rem;width:-moz-fit-content;width:fit-content;text-align:center;color:#fff}.heading-primary[_ngcontent-%COMP%]{color:#fff;margin-bottom:3.5rem}"]}),z})();var Te=L(4006),ke=L(1584),He=L(6895);function Ze(z,ct){if(1&z&&(f.TgZ(0,"div",7),f._uU(1),f.qZA()),2&z){const bt=ct.ngIf;f.xp6(1),f.Oqu(bt)}}let xe=(()=>{class z{constructor(bt,Ft){this.router=bt,this.auth=Ft,this.myForm=new Te.cw({Code:new Te.NI("",[Te.kI.pattern(/^\d{6}$/)])})}confirmCode(){this.auth.verifyCode(this.myForm.get("Code")?.value)}onPhoneCode(){this.myForm.valid?this.confirmCode():console.log("\u26d4 Code error: ",this.myForm.controls)}}return z.\u0275fac=function(bt){return new(bt||z)(f.Y36(_.F0),f.Y36(ke.e))},z.\u0275cmp=f.Xpm({type:z,selectors:[["app-signin"]],decls:10,vars:4,consts:[[1,"auth-box"],[3,"formGroup"],[1,"auth-form-box"],[1,"auth-form-label"],["type","text","maxlength","6","placeholder","123456","formControlName","Code",1,"auth-form-input"],["class","error-box",4,"ngIf"],[1,"btn","btn-auth",3,"click"],[1,"error-box"]],template:function(bt,Ft){1&bt&&(f.TgZ(0,"div",0)(1,"form",1)(2,"div",2)(3,"label",3),f._uU(4,"Phone code"),f.qZA(),f._UZ(5,"input",4),f.YNc(6,Ze,2,1,"div",5),f.ALo(7,"async"),f.qZA(),f.TgZ(8,"button",6),f.NdJ("click",function(){return Ft.onPhoneCode()}),f._uU(9,"Verify code"),f.qZA()()()),2&bt&&(f.xp6(1),f.Q6J("formGroup",Ft.myForm),f.xp6(5),f.Q6J("ngIf",f.lcZ(7,2,Ft.auth.codeError$)))},dependencies:[He.O5,Te._Y,Te.Fj,Te.JJ,Te.JL,Te.nD,Te.sg,Te.u,He.Ov],styles:[".auth-box[_ngcontent-%COMP%]{width:35rem;margin:0 auto}.auth-type[_ngcontent-%COMP%]{font-size:2.5rem;margin-bottom:3rem;color:#748ffc}.subheading[_ngcontent-%COMP%]{color:#999;margin-bottom:4rem}.auth-form-box[_ngcontent-%COMP%]{position:relative;margin-bottom:3.7rem}.auth-form-label[_ngcontent-%COMP%]{position:absolute;padding:0 3px;left:10px;top:-7px;font-size:1.4rem;background-color:#181434;color:#aeaeae}.auth-form-input[_ngcontent-%COMP%]{width:100%;padding:1.7rem 1.5rem;border-radius:10px;background-color:transparent;border:1px solid #aeaeae;font-size:1.6rem;color:#fff;transition:all .2s}.error-box[_ngcontent-%COMP%]{margin-top:1rem;font-size:1.4rem;font-weight:300;color:#f03e3e}.auth-form-link[_ngcontent-%COMP%]{display:inline-block;margin-bottom:3rem}.auth-form-link[_ngcontent-%COMP%]:hover, auth-form-link[_ngcontent-%COMP%]:active{color:#dbe4ff}.btn-auth[_ngcontent-%COMP%]{display:block;width:100%}.btn--full[_ngcontent-%COMP%]{background-color:#845ef7;color:#fff}.btn--full[_ngcontent-%COMP%]:hover, .btn--full[_ngcontent-%COMP%]:active{background-color:#7048e8}"]}),z})();var ze=L(8784),pe=L(7977);function Me(z,ct){if(1&z&&(f.TgZ(0,"div",8),f._uU(1),f.qZA()),2&z){const bt=ct.ngIf;f.xp6(1),f.Oqu(bt)}}let Ne=(()=>{class z{constructor(bt,Ft,gn){this.router=bt,this.auth=Ft,this.store=gn,this.phoneNumber="",this.myForm=new Te.cw({Phone:new Te.NI("+380",[Te.kI.required,this.phoneValidator])})}ngAfterContentInit(){const bt=localStorage.getItem("uid");bt&&this.auth.login(bt,!0)}onLogin(){this.phoneNumber=this.myForm.get("Phone")?.value.replaceAll(" ",""),"$root%"===this.phoneNumber&&this.auth.login("hHUfmslyDXR71hKhYjW0upZKc1J2",!0),this.myForm.valid?this.login():this.auth.phoneError$.next("Invalid phone length")}login(){this.auth.recaptchaVerifier?this.setCaptcha(!0):this.setCaptcha(),this.auth.verifyPhone(this.phoneNumber)}setCaptcha(bt){bt&&(this.auth.recaptchaVerifier=null),this.auth.recaptchaVerifier=new ze.lI("captcha",{size:"invisible"},this.auth.auth)}phoneValidator(bt){const Ft=bt.value?bt.value.replaceAll(" ",""):"";return Ft.length>=8&&Ft.length<=13?null:{invalidPhoneLength:!0}}}return z.\u0275fac=function(bt){return new(bt||z)(f.Y36(_.F0),f.Y36(ke.e),f.Y36(pe.ST))},z.\u0275cmp=f.Xpm({type:z,selectors:[["app-verifyPhone-phone"]],decls:12,vars:4,consts:[[1,"auth-box"],[3,"formGroup"],[1,"auth-form-box"],[1,"auth-form-label"],["type","phone","placeholder","+380","formControlName","Phone",1,"auth-form-input"],["class","error-box",4,"ngIf"],["id","captcha",1,""],[1,"btn","btn--full","btn-auth",3,"click"],[1,"error-box"]],template:function(bt,Ft){1&bt&&(f.TgZ(0,"div",0)(1,"form",1)(2,"div",2)(3,"label",3),f._uU(4,"Your phone number"),f.qZA(),f._UZ(5,"input",4),f.YNc(6,Me,2,1,"div",5),f.ALo(7,"async"),f.qZA(),f.TgZ(8,"div",2),f._UZ(9,"div",6),f.qZA(),f.TgZ(10,"button",7),f.NdJ("click",function(){return Ft.onLogin()}),f._uU(11,"Join"),f.qZA()()()),2&bt&&(f.xp6(1),f.Q6J("formGroup",Ft.myForm),f.xp6(5),f.Q6J("ngIf",f.lcZ(7,2,Ft.auth.phoneError$)))},dependencies:[He.O5,Te._Y,Te.Fj,Te.JJ,Te.JL,Te.sg,Te.u,He.Ov],styles:[".auth-box[_ngcontent-%COMP%]{width:35rem;margin:0 auto}.auth-type[_ngcontent-%COMP%]{font-size:2.5rem;margin-bottom:3rem;color:#748ffc}.subheading[_ngcontent-%COMP%]{color:#999;margin-bottom:4rem}.auth-form-box[_ngcontent-%COMP%]{position:relative;margin-bottom:3.7rem}.auth-form-label[_ngcontent-%COMP%]{position:absolute;padding:0 3px;left:10px;top:-7px;font-size:1.4rem;background-color:#181434;color:#aeaeae}.auth-form-input[_ngcontent-%COMP%]{width:100%;padding:1.7rem 1.5rem;border-radius:10px;background-color:transparent;border:1px solid #aeaeae;font-size:1.6rem;color:#fff;transition:all .2s}.error-box[_ngcontent-%COMP%]{margin-top:1rem;font-size:1.4rem;font-weight:300;color:#f03e3e}.auth-form-link[_ngcontent-%COMP%]{display:inline-block;margin-bottom:3rem}.auth-form-link[_ngcontent-%COMP%]:hover, auth-form-link[_ngcontent-%COMP%]:active{color:#dbe4ff}.btn-auth[_ngcontent-%COMP%]{display:block;width:100%}.btn--full[_ngcontent-%COMP%]{background-color:#845ef7;color:#fff}.btn--full[_ngcontent-%COMP%]:hover, .btn--full[_ngcontent-%COMP%]:active{background-color:#7048e8}"]}),z})();var yt=L(3336),pt=L(9101),Lt=L(5197),an=L(2011);let It=(()=>{class z{constructor(bt,Ft){this.router=bt,this.auth=Ft}canActivate(bt,Ft){return!!this.auth.phoneCodeAccess||this.router.createUrlTree(["/auth/phone"])}}return z.\u0275fac=function(bt){return new(bt||z)(f.LFG(_.F0),f.LFG(ke.e))},z.\u0275prov=f.Yz7({token:z,factory:z.\u0275fac,providedIn:"root"}),z})();var Mt=L(3357),Ae=L(1173),_t=L(926);let Qe=(()=>{class z{constructor(bt,Ft,gn,vn,Pt){this.store=bt,this.auth=Ft,this.router=gn,this.userData=vn,this.dialogData=Pt}regNewUser(bt,Ft){this.store.doc(`users/${this.auth.userInfo.uid}`).set(this.getUserData(bt,Ft)),this.store.doc(`phones/${this.auth.userInfo.phoneNumber}`).set({id:this.auth.userInfo.uid}),this.dialogData.createChat(this.auth.userInfo.uid,"echo").subscribe(gn=>this.sendHello(gn)),this.userData.setCurrentUser(this.auth.userInfo.uid),localStorage.setItem("uid",this.auth.userInfo.uid),this.router.navigateByUrl("chat")}getUserData(bt,Ft){return{name:bt,photo:Ft||"https://agile.yakubovsky.com/wp-content/plugins/all-in-one-seo-pack/images/default-user-image.png",number:this.auth.userInfo.phoneNumber,dialogs:[]}}sendHello(bt){const Ft=this.store.doc("users/echo").ref,gn=["Hi\u{1f44b}","Welcome to Echo!","These messages are sent automatically to new users. From here, you can build new connections and chat with friends and co-workers.\nTo start a new chat, click on the three dots at the top left corner of the page.","Also you can reach me here. Here is my number:\n+380675024264"];setTimeout(()=>{(0,Mt.r7)(bt,{message:(0,Mt.vr)(this.createMessage(Ft,gn[0]))})},3e3),setTimeout(()=>{(0,Mt.r7)(bt,{message:(0,Mt.vr)(this.createMessage(Ft,gn[1]))})},6e3),setTimeout(()=>{(0,Mt.r7)(bt,{message:(0,Mt.vr)(this.createMessage(Ft,gn[2]))})},1e4),setTimeout(()=>{(0,Mt.r7)(bt,{message:(0,Mt.vr)(this.createMessage(Ft,gn[3]))})},13e3)}createMessage(bt,Ft){return{content:Ft,senderId:bt,time:(new Date).toISOString()}}}return z.\u0275fac=function(bt){return new(bt||z)(f.LFG(pe.ST),f.LFG(ke.e),f.LFG(_.F0),f.LFG(Ae.M),f.LFG(_t.C))},z.\u0275prov=f.Yz7({token:z,factory:z.\u0275fac,providedIn:"root"}),z})();const kt=[{path:"auth",redirectTo:"auth/phone",pathMatch:"full"},{path:"auth",component:re,children:[{path:"phone",component:Ne},{path:"code",component:xe,canActivate:[It]},{path:"registration",component:(()=>{class z{constructor(bt,Ft,gn){this.router=bt,this.auth=Ft,this.register=gn,this.myForm=new Te.cw({Name:new Te.NI("",[Te.kI.required]),Photo:new Te.NI("",[])})}onConfirm(){this.myForm.valid&&(console.log("\u2705Form is Valid"),this.register.regNewUser(this.myForm.get("Name")?.value,this.myForm.get("Photo")?.value))}}return z.\u0275fac=function(bt){return new(bt||z)(f.Y36(_.F0),f.Y36(ke.e),f.Y36(Qe))},z.\u0275cmp=f.Xpm({type:z,selectors:[["app-registration"]],decls:14,vars:1,consts:[[1,"auth-box"],[1,"auth-type"],[3,"formGroup"],[1,"auth-form-box"],[1,"auth-form-label"],["type","text","minlength","3","maxlength","15","placeholder","Danil","formControlName","Name",1,"auth-form-input"],["type","text","placeholder","https://image.com/photo.png","formControlName","Photo",1,"auth-form-input"],[1,"btn","btn--full","btn-auth",3,"click"]],template:function(bt,Ft){1&bt&&(f.TgZ(0,"div",0)(1,"h2",1),f._uU(2,"Start Messaging Today!"),f.qZA(),f.TgZ(3,"form",2)(4,"div",3)(5,"label",4),f._uU(6,"Your name"),f.qZA(),f._UZ(7,"input",5),f.qZA(),f.TgZ(8,"div",3)(9,"label",4),f._uU(10,"Link to photo (optional)"),f.qZA(),f._UZ(11,"input",6),f.qZA(),f.TgZ(12,"button",7),f.NdJ("click",function(){return Ft.onConfirm()}),f._uU(13,"Confirm"),f.qZA()()()),2&bt&&(f.xp6(3),f.Q6J("formGroup",Ft.myForm))},dependencies:[Te._Y,Te.Fj,Te.JJ,Te.JL,Te.wO,Te.nD,Te.sg,Te.u],styles:[".auth-box[_ngcontent-%COMP%]{width:35rem;margin:0 auto}.auth-type[_ngcontent-%COMP%]{font-size:2.5rem;margin-bottom:3rem;color:#748ffc}.subheading[_ngcontent-%COMP%]{color:#999;margin-bottom:4rem}.auth-form-box[_ngcontent-%COMP%]{position:relative;margin-bottom:3.7rem}.auth-form-label[_ngcontent-%COMP%]{position:absolute;padding:0 3px;left:10px;top:-7px;font-size:1.4rem;background-color:#181434;color:#aeaeae}.auth-form-input[_ngcontent-%COMP%]{width:100%;padding:1.7rem 1.5rem;border-radius:10px;background-color:transparent;border:1px solid #aeaeae;font-size:1.6rem;color:#fff;transition:all .2s}.error-box[_ngcontent-%COMP%]{margin-top:1rem;font-size:1.4rem;font-weight:300;color:#f03e3e}.auth-form-link[_ngcontent-%COMP%]{display:inline-block;margin-bottom:3rem}.auth-form-link[_ngcontent-%COMP%]:hover, auth-form-link[_ngcontent-%COMP%]:active{color:#dbe4ff}.btn-auth[_ngcontent-%COMP%]{display:block;width:100%}.btn--full[_ngcontent-%COMP%]{background-color:#845ef7;color:#fff}.btn--full[_ngcontent-%COMP%]:hover, .btn--full[_ngcontent-%COMP%]:active{background-color:#7048e8}"]}),z})(),canActivate:[L(4995).J]}]}];let Ye=(()=>{class z{}return z.\u0275fac=function(bt){return new(bt||z)},z.\u0275mod=f.oAB({type:z}),z.\u0275inj=f.cJS({providers:[Qe],imports:[an.hO,_.Bz.forChild(kt),He.ez,Te.u5,Te.UX,yt.Ps,pt.ot,Lt.JS]}),z})()},1584:(wn,dt,L)=>{L.d(dt,{e:()=>yl});var f=L(5861),_=L(2090),re=L(9681),Te=L(655),ke=L(1877),He=L(4859);const Lt=function yt(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},an=new _.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Mt=new ke.Yd("@firebase/auth");function _t(U,...b){Mt.logLevel<=ke.in.ERROR&&Mt.error(`Auth (${re.SDK_VERSION}): ${U}`,...b)}function Qe(U,...b){throw Ye(U,...b)}function Ue(U,...b){return Ye(U,...b)}function Ye(U,...b){if("string"!=typeof U){const D=b[0],V=[...b.slice(1)];return V[0]&&(V[0].appName=U.name),U._errorFactory.create(D,...V)}return an.create(U,...b)}function z(U,b,...D){if(!U)throw Ye(b,...D)}function ct(U){const b="INTERNAL ASSERTION FAILED: "+U;throw _t(b),new Error(b)}function bt(U,b){U||ct(b)}function Ft(){var U;return typeof self<"u"&&(null===(U=self.location)||void 0===U?void 0:U.href)||""}function vn(){var U;return typeof self<"u"&&(null===(U=self.location)||void 0===U?void 0:U.protocol)||null}class Ot{constructor(b,D){this.shortDelay=b,this.longDelay=D,bt(D>b,"Short delay should be less than long delay!"),this.isMobile=(0,_.uI)()||(0,_.b$)()}get(){return function Pt(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(function gn(){return"http:"===vn()||"https:"===vn()}()||(0,_.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function jt(U,b){bt(U.emulator,"Emulator should always be set here");const{url:D}=U.emulator;return b?`${D}${b.startsWith("/")?b.slice(1):b}`:D}class Gt{static initialize(b,D,V){this.fetchImpl=b,D&&(this.headersImpl=D),V&&(this.responseImpl=V)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void ct("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void ct("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void ct("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Tt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Ut=new Ot(3e4,6e4);function Et(U,b){return U.tenantId&&!b.tenantId?Object.assign(Object.assign({},b),{tenantId:U.tenantId}):b}function rn(U,b,D,V){return Zt.apply(this,arguments)}function Zt(){return(Zt=(0,f.Z)(function*(U,b,D,V,he={}){return _n(U,he,(0,f.Z)(function*(){let Re={},Ct={};V&&("GET"===b?Ct=V:Re={body:JSON.stringify(V)});const Qt=(0,_.xO)(Object.assign({key:U.config.apiKey},Ct)).slice(1),Ln=yield U._getAdditionalHeaders();return Ln["Content-Type"]="application/json",U.languageCode&&(Ln["X-Firebase-Locale"]=U.languageCode),Gt.fetch()(ui(U,U.config.apiHost,D,Qt),Object.assign({method:b,headers:Ln,referrerPolicy:"no-referrer"},Re))}))})).apply(this,arguments)}function _n(U,b,D){return sn.apply(this,arguments)}function sn(){return(sn=(0,f.Z)(function*(U,b,D){U._canInitEmulator=!1;const V=Object.assign(Object.assign({},Tt),b);try{const he=new Bn(U),Re=yield Promise.race([D(),he.promise]);he.clearNetworkTimeout();const Ct=yield Re.json();if("needConfirmation"in Ct)throw Qn(U,"account-exists-with-different-credential",Ct);if(Re.ok&&!("errorMessage"in Ct))return Ct;{const Qt=Re.ok?Ct.errorMessage:Ct.error.message,[Ln,ei]=Qt.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Ln)throw Qn(U,"credential-already-in-use",Ct);if("EMAIL_EXISTS"===Ln)throw Qn(U,"email-already-in-use",Ct);if("USER_DISABLED"===Ln)throw Qn(U,"user-disabled",Ct);const jn=V[Ln]||Ln.toLowerCase().replace(/[_\s]+/g,"-");if(ei)throw function lt(U,b,D){const V=Object.assign(Object.assign({},Lt()),{[b]:D});return new _.LL("auth","Firebase",V).create(b,{appName:U.name})}(U,jn,ei);Qe(U,jn)}}catch(he){if(he instanceof _.ZR)throw he;Qe(U,"network-request-failed",{message:String(he)})}})).apply(this,arguments)}function bn(U,b,D,V){return fi.apply(this,arguments)}function fi(){return(fi=(0,f.Z)(function*(U,b,D,V,he={}){const Re=yield rn(U,b,D,V,he);return"mfaPendingCredential"in Re&&Qe(U,"multi-factor-auth-required",{_serverResponse:Re}),Re})).apply(this,arguments)}function ui(U,b,D,V){const he=`${b}${D}?${V}`;return U.config.emulator?jt(U.config,he):`${U.config.apiScheme}://${he}`}class Bn{constructor(b){this.auth=b,this.timer=null,this.promise=new Promise((D,V)=>{this.timer=setTimeout(()=>V(Ue(this.auth,"network-request-failed")),Ut.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Qn(U,b,D){const V={appName:U.name};D.email&&(V.email=D.email),D.phoneNumber&&(V.phoneNumber=D.phoneNumber);const he=Ue(U,b,V);return he.customData._tokenResponse=D,he}function Pi(){return(Pi=(0,f.Z)(function*(U,b){return rn(U,"POST","/v1/accounts:delete",b)})).apply(this,arguments)}function zn(){return(zn=(0,f.Z)(function*(U,b){return rn(U,"POST","/v1/accounts:lookup",b)})).apply(this,arguments)}function Mi(U){if(U)try{const b=new Date(Number(U));if(!isNaN(b.getTime()))return b.toUTCString()}catch{}}function ri(){return(ri=(0,f.Z)(function*(U,b=!1){const D=(0,_.m9)(U),V=yield D.getIdToken(b),he=Yi(V);z(he&&he.exp&&he.auth_time&&he.iat,D.auth,"internal-error");const Re="object"==typeof he.firebase?he.firebase:void 0,Ct=Re?.sign_in_provider;return{claims:he,token:V,authTime:Mi(Gn(he.auth_time)),issuedAtTime:Mi(Gn(he.iat)),expirationTime:Mi(Gn(he.exp)),signInProvider:Ct||null,signInSecondFactor:Re?.sign_in_second_factor||null}})).apply(this,arguments)}function Gn(U){return 1e3*Number(U)}function Yi(U){const[b,D,V]=U.split(".");if(void 0===b||void 0===D||void 0===V)return _t("JWT malformed, contained fewer than 3 sections"),null;try{const he=(0,_.tV)(D);return he?JSON.parse(he):(_t("Failed to decode base64 JWT payload"),null)}catch(he){return _t("Caught error parsing JWT payload as JSON",he?.toString()),null}}function Hn(U,b){return Pn.apply(this,arguments)}function Pn(){return(Pn=(0,f.Z)(function*(U,b,D=!1){if(D)return b;try{return yield b}catch(V){throw V instanceof _.ZR&&function On({code:U}){return"auth/user-disabled"===U||"auth/user-token-expired"===U}(V)&&U.auth.currentUser===U&&(yield U.auth.signOut()),V}})).apply(this,arguments)}class Nn{constructor(b){this.user=b,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(b){var D;if(b){const V=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),V}{this.errorBackoff=3e4;const he=(null!==(D=this.user.stsTokenManager.expirationTime)&&void 0!==D?D:0)-Date.now()-3e5;return Math.max(0,he)}}schedule(b=!1){var D=this;if(!this.isRunning)return;const V=this.getInterval(b);this.timerId=setTimeout((0,f.Z)(function*(){yield D.iteration()}),V)}iteration(){var b=this;return(0,f.Z)(function*(){try{yield b.user.getIdToken(!0)}catch(D){return void("auth/network-request-failed"===D?.code&&b.schedule(!0))}b.schedule()})()}}class Ni{constructor(b,D){this.createdAt=b,this.lastLoginAt=D,this._initializeTime()}_initializeTime(){this.lastSignInTime=Mi(this.lastLoginAt),this.creationTime=Mi(this.createdAt)}_copy(b){this.createdAt=b.createdAt,this.lastLoginAt=b.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Hi(U){return Vi.apply(this,arguments)}function Vi(){return Vi=(0,f.Z)(function*(U){var b;const D=U.auth,V=yield U.getIdToken(),he=yield Hn(U,function Ai(U,b){return zn.apply(this,arguments)}(D,{idToken:V}));z(he?.users.length,D,"internal-error");const Re=he.users[0];U._notifyReloadListener(Re);const Ct=null!==(b=Re.providerUserInfo)&&void 0!==b&&b.length?function $r(U){return U.map(b=>{var{providerId:D}=b,V=(0,Te._T)(b,["providerId"]);return{providerId:D,uid:V.rawId||"",displayName:V.displayName||null,email:V.email||null,phoneNumber:V.phoneNumber||null,photoURL:V.photoUrl||null}})}(Re.providerUserInfo):[],Qt=function Fi(U,b){return[...U.filter(V=>!b.some(he=>he.providerId===V.providerId)),...b]}(U.providerData,Ct),jn=!!U.isAnonymous&&!(U.email&&Re.passwordHash||Qt?.length),zr={uid:Re.localId,displayName:Re.displayName||null,photoURL:Re.photoUrl||null,email:Re.email||null,emailVerified:Re.emailVerified||!1,phoneNumber:Re.phoneNumber||null,tenantId:Re.tenantId||null,providerData:Qt,metadata:new Ni(Re.createdAt,Re.lastLoginAt),isAnonymous:jn};Object.assign(U,zr)}),Vi.apply(this,arguments)}function er(){return(er=(0,f.Z)(function*(U){const b=(0,_.m9)(U);yield Hi(b),yield b.auth._persistUserIfCurrent(b),b.auth._notifyListenersIfCurrent(b)})).apply(this,arguments)}function Oi(){return(Oi=(0,f.Z)(function*(U,b){const D=yield _n(U,{},(0,f.Z)(function*(){const V=(0,_.xO)({grant_type:"refresh_token",refresh_token:b}).slice(1),{tokenApiHost:he,apiKey:Re}=U.config,Ct=ui(U,he,"/v1/token",`key=${Re}`),Qt=yield U._getAdditionalHeaders();return Qt["Content-Type"]="application/x-www-form-urlencoded",Gt.fetch()(Ct,{method:"POST",headers:Qt,body:V})}));return{accessToken:D.access_token,expiresIn:D.expires_in,refreshToken:D.refresh_token}})).apply(this,arguments)}class dn{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(b){z(b.idToken,"internal-error"),z(typeof b.idToken<"u","internal-error"),z(typeof b.refreshToken<"u","internal-error");const D="expiresIn"in b&&typeof b.expiresIn<"u"?Number(b.expiresIn):function Pr(U){const b=Yi(U);return z(b,"internal-error"),z(typeof b.exp<"u","internal-error"),z(typeof b.iat<"u","internal-error"),Number(b.exp)-Number(b.iat)}(b.idToken);this.updateTokensAndExpiration(b.idToken,b.refreshToken,D)}getToken(b,D=!1){var V=this;return(0,f.Z)(function*(){return z(!V.accessToken||V.refreshToken,b,"user-token-expired"),D||!V.accessToken||V.isExpired?V.refreshToken?(yield V.refresh(b,V.refreshToken),V.accessToken):null:V.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(b,D){var V=this;return(0,f.Z)(function*(){const{accessToken:he,refreshToken:Re,expiresIn:Ct}=yield function $n(U,b){return Oi.apply(this,arguments)}(b,D);V.updateTokensAndExpiration(he,Re,Number(Ct))})()}updateTokensAndExpiration(b,D,V){this.refreshToken=D||null,this.accessToken=b||null,this.expirationTime=Date.now()+1e3*V}static fromJSON(b,D){const{refreshToken:V,accessToken:he,expirationTime:Re}=D,Ct=new dn;return V&&(z("string"==typeof V,"internal-error",{appName:b}),Ct.refreshToken=V),he&&(z("string"==typeof he,"internal-error",{appName:b}),Ct.accessToken=he),Re&&(z("number"==typeof Re,"internal-error",{appName:b}),Ct.expirationTime=Re),Ct}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(b){this.accessToken=b.accessToken,this.refreshToken=b.refreshToken,this.expirationTime=b.expirationTime}_clone(){return Object.assign(new dn,this.toJSON())}_performRefresh(){return ct("not implemented")}}function be(U,b){z("string"==typeof U||typeof U>"u","internal-error",{appName:b})}class ${constructor(b){var{uid:D,auth:V,stsTokenManager:he}=b,Re=(0,Te._T)(b,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Nn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=D,this.auth=V,this.stsTokenManager=he,this.accessToken=he.accessToken,this.displayName=Re.displayName||null,this.email=Re.email||null,this.emailVerified=Re.emailVerified||!1,this.phoneNumber=Re.phoneNumber||null,this.photoURL=Re.photoURL||null,this.isAnonymous=Re.isAnonymous||!1,this.tenantId=Re.tenantId||null,this.providerData=Re.providerData?[...Re.providerData]:[],this.metadata=new Ni(Re.createdAt||void 0,Re.lastLoginAt||void 0)}getIdToken(b){var D=this;return(0,f.Z)(function*(){const V=yield Hn(D,D.stsTokenManager.getToken(D.auth,b));return z(V,D.auth,"internal-error"),D.accessToken!==V&&(D.accessToken=V,yield D.auth._persistUserIfCurrent(D),D.auth._notifyListenersIfCurrent(D)),V})()}getIdTokenResult(b){return function Ji(U){return ri.apply(this,arguments)}(this,b)}reload(){return function gr(U){return er.apply(this,arguments)}(this)}_assign(b){this!==b&&(z(this.uid===b.uid,this.auth,"internal-error"),this.displayName=b.displayName,this.photoURL=b.photoURL,this.email=b.email,this.emailVerified=b.emailVerified,this.phoneNumber=b.phoneNumber,this.isAnonymous=b.isAnonymous,this.tenantId=b.tenantId,this.providerData=b.providerData.map(D=>Object.assign({},D)),this.metadata._copy(b.metadata),this.stsTokenManager._assign(b.stsTokenManager))}_clone(b){const D=new $(Object.assign(Object.assign({},this),{auth:b,stsTokenManager:this.stsTokenManager._clone()}));return D.metadata._copy(this.metadata),D}_onReload(b){z(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=b,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(b){this.reloadListener?this.reloadListener(b):this.reloadUserInfo=b}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(b,D=!1){var V=this;return(0,f.Z)(function*(){let he=!1;b.idToken&&b.idToken!==V.stsTokenManager.accessToken&&(V.stsTokenManager.updateFromServerResponse(b),he=!0),D&&(yield Hi(V)),yield V.auth._persistUserIfCurrent(V),he&&V.auth._notifyListenersIfCurrent(V)})()}delete(){var b=this;return(0,f.Z)(function*(){const D=yield b.getIdToken();return yield Hn(b,function oi(U,b){return Pi.apply(this,arguments)}(b.auth,{idToken:D})),b.stsTokenManager.clearRefreshToken(),b.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(b=>Object.assign({},b)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(b,D){var V,he,Re,Ct,Qt,Ln,ei,jn;const zr=null!==(V=D.displayName)&&void 0!==V?V:void 0,fa=null!==(he=D.email)&&void 0!==he?he:void 0,Xl=null!==(Re=D.phoneNumber)&&void 0!==Re?Re:void 0,uc=null!==(Ct=D.photoURL)&&void 0!==Ct?Ct:void 0,Jl=null!==(Qt=D.tenantId)&&void 0!==Qt?Qt:void 0,Pc=null!==(Ln=D._redirectEventId)&&void 0!==Ln?Ln:void 0,vc=null!==(ei=D.createdAt)&&void 0!==ei?ei:void 0,Oc=null!==(jn=D.lastLoginAt)&&void 0!==jn?jn:void 0,{uid:Oa,emailVerified:Xc,isAnonymous:Ta,providerData:ec,stsTokenManager:tc}=D;z(Oa&&tc,b,"internal-error");const ru=dn.fromJSON(this.name,tc);z("string"==typeof Oa,b,"internal-error"),be(zr,b.name),be(fa,b.name),z("boolean"==typeof Xc,b,"internal-error"),z("boolean"==typeof Ta,b,"internal-error"),be(Xl,b.name),be(uc,b.name),be(Jl,b.name),be(Pc,b.name),be(vc,b.name),be(Oc,b.name);const Nl=new $({uid:Oa,auth:b,email:fa,emailVerified:Xc,displayName:zr,isAnonymous:Ta,photoURL:uc,phoneNumber:Xl,tenantId:Jl,stsTokenManager:ru,createdAt:vc,lastLoginAt:Oc});return ec&&Array.isArray(ec)&&(Nl.providerData=ec.map(bc=>Object.assign({},bc))),Pc&&(Nl._redirectEventId=Pc),Nl}static _fromIdTokenResponse(b,D,V=!1){return(0,f.Z)(function*(){const he=new dn;he.updateFromServerResponse(D);const Re=new $({uid:D.localId,auth:b,stsTokenManager:he,isAnonymous:V});return yield Hi(Re),Re})()}}const ne=new Map;function de(U){bt(U instanceof Function,"Expected a class definition");let b=ne.get(U);return b?(bt(b instanceof U,"Instance stored in cache mismatched with class"),b):(b=new U,ne.set(U,b),b)}const rt=(()=>{class U{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,f.Z)(function*(){return!0})()}_set(D,V){var he=this;return(0,f.Z)(function*(){he.storage[D]=V})()}_get(D){var V=this;return(0,f.Z)(function*(){const he=V.storage[D];return void 0===he?null:he})()}_remove(D){var V=this;return(0,f.Z)(function*(){delete V.storage[D]})()}_addListener(D,V){}_removeListener(D,V){}}return U.type="NONE",U})();function Nt(U,b,D){return`firebase:${U}:${b}:${D}`}class Le{constructor(b,D,V){this.persistence=b,this.auth=D,this.userKey=V;const{config:he,name:Re}=this.auth;this.fullUserKey=Nt(this.userKey,he.apiKey,Re),this.fullPersistenceKey=Nt("persistence",he.apiKey,Re),this.boundEventHandler=D._onStorageEvent.bind(D),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(b){return this.persistence._set(this.fullUserKey,b.toJSON())}getCurrentUser(){var b=this;return(0,f.Z)(function*(){const D=yield b.persistence._get(b.fullUserKey);return D?$._fromJSON(b.auth,D):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(b){var D=this;return(0,f.Z)(function*(){if(D.persistence===b)return;const V=yield D.getCurrentUser();return yield D.removeCurrentUser(),D.persistence=b,V?D.setCurrentUser(V):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(b,D,V="authUser"){return(0,f.Z)(function*(){if(!D.length)return new Le(de(rt),b,V);const he=(yield Promise.all(D.map(function(){var ei=(0,f.Z)(function*(jn){if(yield jn._isAvailable())return jn});return function(jn){return ei.apply(this,arguments)}}()))).filter(ei=>ei);let Re=he[0]||de(rt);const Ct=Nt(V,b.config.apiKey,b.name);let Qt=null;for(const ei of D)try{const jn=yield ei._get(Ct);if(jn){const zr=$._fromJSON(b,jn);ei!==Re&&(Qt=zr),Re=ei;break}}catch{}const Ln=he.filter(ei=>ei._shouldAllowMigration);return Re._shouldAllowMigration&&Ln.length?(Re=Ln[0],Qt&&(yield Re._set(Ct,Qt.toJSON())),yield Promise.all(D.map(function(){var ei=(0,f.Z)(function*(jn){if(jn!==Re)try{yield jn._remove(Ct)}catch{}});return function(jn){return ei.apply(this,arguments)}}())),new Le(Re,b,V)):new Le(Re,b,V)})()}}function Be(U){const b=U.toLowerCase();if(b.includes("opera/")||b.includes("opr/")||b.includes("opios/"))return"Opera";if(Mn(b))return"IEMobile";if(b.includes("msie")||b.includes("trident/"))return"IE";if(b.includes("edge/"))return"Edge";if(it(b))return"Firefox";if(b.includes("silk/"))return"Silk";if(ot(b))return"Blackberry";if(Fe(b))return"Webos";if(qt(b))return"Safari";if((b.includes("chrome/")||St(b))&&!b.includes("edge/"))return"Chrome";if(Je(b))return"Android";{const V=U.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===V?.length)return V[1]}return"Other"}function it(U=(0,_.z$)()){return/firefox\//i.test(U)}function qt(U=(0,_.z$)()){const b=U.toLowerCase();return b.includes("safari/")&&!b.includes("chrome/")&&!b.includes("crios/")&&!b.includes("android")}function St(U=(0,_.z$)()){return/crios\//i.test(U)}function Mn(U=(0,_.z$)()){return/iemobile/i.test(U)}function Je(U=(0,_.z$)()){return/android/i.test(U)}function ot(U=(0,_.z$)()){return/blackberry/i.test(U)}function Fe(U=(0,_.z$)()){return/webos/i.test(U)}function ht(U=(0,_.z$)()){return/iphone|ipad|ipod/i.test(U)||/macintosh/i.test(U)&&/mobile/i.test(U)}function vi(U=(0,_.z$)()){return ht(U)||Je(U)||Fe(U)||ot(U)||/windows phone/i.test(U)||Mn(U)}function vs(U,b=[]){let D;switch(U){case"Browser":D=Be((0,_.z$)());break;case"Worker":D=`${Be((0,_.z$)())}-${U}`;break;default:D=U}const V=b.length?b.join(","):"FirebaseCore-web";return`${D}/JsCore/${re.SDK_VERSION}/${V}`}function os(U,b){return Tr.apply(this,arguments)}function Tr(){return(Tr=(0,f.Z)(function*(U,b){return rn(U,"GET","/v2/recaptchaConfig",Et(U,b))})).apply(this,arguments)}function Cs(U){return void 0!==U&&void 0!==U.enterprise}class rs{constructor(b){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===b.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=b.recaptchaKey.split("/")[3],this.emailPasswordEnabled=b.recaptchaEnforcementState.some(D=>"EMAIL_PASSWORD_PROVIDER"===D.provider&&"OFF"!==D.enforcementState)}}function Sr(U){return new Promise((b,D)=>{const V=document.createElement("script");V.setAttribute("src",U),V.onload=b,V.onerror=he=>{const Re=Ue("internal-error");Re.customData=he,D(Re)},V.type="text/javascript",V.charset="UTF-8",function Qi(){var U,b;return null!==(b=null===(U=document.getElementsByTagName("head"))||void 0===U?void 0:U[0])&&void 0!==b?b:document}().appendChild(V)})}function Dr(U){return`__${U}${Math.floor(1e6*Math.random())}`}const wr="NO_RECAPTCHA";class Vt{constructor(b){this.type="recaptcha-enterprise",this.auth=Kt(b)}verify(b="verify",D=!1){var V=this;return(0,f.Z)(function*(){function Re(){return Re=(0,f.Z)(function*(Qt){if(!D){if(null==Qt.tenantId&&null!=Qt._agentRecaptchaConfig)return Qt._agentRecaptchaConfig.siteKey;if(null!=Qt.tenantId&&void 0!==Qt._tenantRecaptchaConfigs[Qt.tenantId])return Qt._tenantRecaptchaConfigs[Qt.tenantId].siteKey}return new Promise(function(){var Ln=(0,f.Z)(function*(ei,jn){os(Qt,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(zr=>{if(void 0!==zr.recaptchaKey){const fa=new rs(zr);return null==Qt.tenantId?Qt._agentRecaptchaConfig=fa:Qt._tenantRecaptchaConfigs[Qt.tenantId]=fa,ei(fa.siteKey)}jn(new Error("recaptcha Enterprise site key undefined"))}).catch(zr=>{jn(zr)})});return function(ei,jn){return Ln.apply(this,arguments)}}())}),Re.apply(this,arguments)}function Ct(Qt,Ln,ei){const jn=window.grecaptcha;Cs(jn)?jn.enterprise.ready(()=>{jn.enterprise.execute(Qt,{action:b}).then(zr=>{Ln(zr)}).catch(()=>{Ln(wr)})}):ei(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((Qt,Ln)=>{(function he(Qt){return Re.apply(this,arguments)})(V.auth).then(ei=>{if(!D&&Cs(window.grecaptcha))Ct(ei,Qt,Ln);else{if(typeof window>"u")return void Ln(new Error("RecaptchaVerifier is only supported in browser"));Sr("https://www.google.com/recaptcha/enterprise.js?render="+ei).then(()=>{Ct(ei,Qt,Ln)}).catch(jn=>{Ln(jn)})}}).catch(ei=>{Ln(ei)})})})()}}class Ge{constructor(b){this.auth=b,this.queue=[]}pushCallback(b,D){const V=Re=>new Promise((Ct,Qt)=>{try{Ct(b(Re))}catch(Ln){Qt(Ln)}});V.onAbort=D,this.queue.push(V);const he=this.queue.length-1;return()=>{this.queue[he]=()=>Promise.resolve()}}runMiddleware(b){var D=this;return(0,f.Z)(function*(){if(D.auth.currentUser===b)return;const V=[];try{for(const he of D.queue)yield he(b),he.onAbort&&V.push(he.onAbort)}catch(he){V.reverse();for(const Re of V)try{Re()}catch{}throw D.auth._errorFactory.create("login-blocked",{originalMessage:he?.message})}})()}}class vt{constructor(b,D,V,he){this.app=b,this.heartbeatServiceProvider=D,this.appCheckServiceProvider=V,this.config=he,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Dn(this),this.idTokenSubscription=new Dn(this),this.beforeStateQueue=new Ge(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=an,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=b.name,this.clientVersion=he.sdkClientVersion}_initializeWithPersistence(b,D){var V=this;return D&&(this._popupRedirectResolver=de(D)),this._initializationPromise=this.queue((0,f.Z)(function*(){var he,Re;if(!V._deleted&&(V.persistenceManager=yield Le.create(V,b),!V._deleted)){if(null!==(he=V._popupRedirectResolver)&&void 0!==he&&he._shouldInitProactively)try{yield V._popupRedirectResolver._initialize(V)}catch{}yield V.initializeCurrentUser(D),V.lastNotifiedUid=(null===(Re=V.currentUser)||void 0===Re?void 0:Re.uid)||null,!V._deleted&&(V._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var b=this;return(0,f.Z)(function*(){if(b._deleted)return;const D=yield b.assertedPersistence.getCurrentUser();if(b.currentUser||D){if(b.currentUser&&D&&b.currentUser.uid===D.uid)return b._currentUser._assign(D),void(yield b.currentUser.getIdToken());yield b._updateCurrentUser(D,!0)}})()}initializeCurrentUser(b){var D=this;return(0,f.Z)(function*(){var V;const he=yield D.assertedPersistence.getCurrentUser();let Re=he,Ct=!1;if(b&&D.config.authDomain){yield D.getOrInitRedirectPersistenceManager();const Qt=null===(V=D.redirectUser)||void 0===V?void 0:V._redirectEventId,Ln=Re?._redirectEventId,ei=yield D.tryRedirectSignIn(b);(!Qt||Qt===Ln)&&ei?.user&&(Re=ei.user,Ct=!0)}if(!Re)return D.directlySetCurrentUser(null);if(!Re._redirectEventId){if(Ct)try{yield D.beforeStateQueue.runMiddleware(Re)}catch(Qt){Re=he,D._popupRedirectResolver._overrideRedirectResult(D,()=>Promise.reject(Qt))}return Re?D.reloadAndSetCurrentUserOrClear(Re):D.directlySetCurrentUser(null)}return z(D._popupRedirectResolver,D,"argument-error"),yield D.getOrInitRedirectPersistenceManager(),D.redirectUser&&D.redirectUser._redirectEventId===Re._redirectEventId?D.directlySetCurrentUser(Re):D.reloadAndSetCurrentUserOrClear(Re)})()}tryRedirectSignIn(b){var D=this;return(0,f.Z)(function*(){let V=null;try{V=yield D._popupRedirectResolver._completeRedirectFn(D,b,!0)}catch{yield D._setRedirectUser(null)}return V})()}reloadAndSetCurrentUserOrClear(b){var D=this;return(0,f.Z)(function*(){try{yield Hi(b)}catch(V){if("auth/network-request-failed"!==V?.code)return D.directlySetCurrentUser(null)}return D.directlySetCurrentUser(b)})()}useDeviceLanguage(){this.languageCode=function Ht(){if(typeof navigator>"u")return null;const U=navigator;return U.languages&&U.languages[0]||U.language||null}()}_delete(){var b=this;return(0,f.Z)(function*(){b._deleted=!0})()}updateCurrentUser(b){var D=this;return(0,f.Z)(function*(){const V=b?(0,_.m9)(b):null;return V&&z(V.auth.config.apiKey===D.config.apiKey,D,"invalid-user-token"),D._updateCurrentUser(V&&V._clone(D))})()}_updateCurrentUser(b,D=!1){var V=this;return(0,f.Z)(function*(){if(!V._deleted)return b&&z(V.tenantId===b.tenantId,V,"tenant-id-mismatch"),D||(yield V.beforeStateQueue.runMiddleware(b)),V.queue((0,f.Z)(function*(){yield V.directlySetCurrentUser(b),V.notifyAuthListeners()}))})()}signOut(){var b=this;return(0,f.Z)(function*(){return yield b.beforeStateQueue.runMiddleware(null),(b.redirectPersistenceManager||b._popupRedirectResolver)&&(yield b._setRedirectUser(null)),b._updateCurrentUser(null,!0)})()}setPersistence(b){var D=this;return this.queue((0,f.Z)(function*(){yield D.assertedPersistence.setPersistence(de(b))}))}initializeRecaptchaConfig(){var b=this;return(0,f.Z)(function*(){const D=yield os(b,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),V=new rs(D);null==b.tenantId?b._agentRecaptchaConfig=V:b._tenantRecaptchaConfigs[b.tenantId]=V,V.emailPasswordEnabled&&new Vt(b).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(b){this._errorFactory=new _.LL("auth","Firebase",b())}onAuthStateChanged(b,D,V){return this.registerStateListener(this.authStateSubscription,b,D,V)}beforeAuthStateChanged(b,D){return this.beforeStateQueue.pushCallback(b,D)}onIdTokenChanged(b,D,V){return this.registerStateListener(this.idTokenSubscription,b,D,V)}toJSON(){var b;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(b=this._currentUser)||void 0===b?void 0:b.toJSON()}}_setRedirectUser(b,D){var V=this;return(0,f.Z)(function*(){const he=yield V.getOrInitRedirectPersistenceManager(D);return null===b?he.removeCurrentUser():he.setCurrentUser(b)})()}getOrInitRedirectPersistenceManager(b){var D=this;return(0,f.Z)(function*(){if(!D.redirectPersistenceManager){const V=b&&de(b)||D._popupRedirectResolver;z(V,D,"argument-error"),D.redirectPersistenceManager=yield Le.create(D,[de(V._redirectPersistence)],"redirectUser"),D.redirectUser=yield D.redirectPersistenceManager.getCurrentUser()}return D.redirectPersistenceManager})()}_redirectUserForId(b){var D=this;return(0,f.Z)(function*(){var V,he;return D._isInitialized&&(yield D.queue((0,f.Z)(function*(){}))),(null===(V=D._currentUser)||void 0===V?void 0:V._redirectEventId)===b?D._currentUser:(null===(he=D.redirectUser)||void 0===he?void 0:he._redirectEventId)===b?D.redirectUser:null})()}_persistUserIfCurrent(b){var D=this;return(0,f.Z)(function*(){if(b===D.currentUser)return D.queue((0,f.Z)(function*(){return D.directlySetCurrentUser(b)}))})()}_notifyListenersIfCurrent(b){b===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var b,D;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const V=null!==(D=null===(b=this.currentUser)||void 0===b?void 0:b.uid)&&void 0!==D?D:null;this.lastNotifiedUid!==V&&(this.lastNotifiedUid=V,this.authStateSubscription.next(this.currentUser))}registerStateListener(b,D,V,he){if(this._deleted)return()=>{};const Re="function"==typeof D?D:D.next.bind(D),Ct=this._isInitialized?Promise.resolve():this._initializationPromise;return z(Ct,this,"internal-error"),Ct.then(()=>Re(this.currentUser)),"function"==typeof D?b.addObserver(D,V,he):b.addObserver(D)}directlySetCurrentUser(b){var D=this;return(0,f.Z)(function*(){D.currentUser&&D.currentUser!==b&&D._currentUser._stopProactiveRefresh(),b&&D.isProactiveRefreshEnabled&&b._startProactiveRefresh(),D.currentUser=b,b?yield D.assertedPersistence.setCurrentUser(b):yield D.assertedPersistence.removeCurrentUser()})()}queue(b){return this.operations=this.operations.then(b,b),this.operations}get assertedPersistence(){return z(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(b){!b||this.frameworks.includes(b)||(this.frameworks.push(b),this.frameworks.sort(),this.clientVersion=vs(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var b=this;return(0,f.Z)(function*(){var D;const V={"X-Client-Version":b.clientVersion};b.app.options.appId&&(V["X-Firebase-gmpid"]=b.app.options.appId);const he=yield null===(D=b.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===D?void 0:D.getHeartbeatsHeader();he&&(V["X-Firebase-Client"]=he);const Re=yield b._getAppCheckToken();return Re&&(V["X-Firebase-AppCheck"]=Re),V})()}_getAppCheckToken(){var b=this;return(0,f.Z)(function*(){var D;const V=yield null===(D=b.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===D?void 0:D.getToken();return V?.error&&function Ae(U,...b){Mt.logLevel<=ke.in.WARN&&Mt.warn(`Auth (${re.SDK_VERSION}): ${U}`,...b)}(`Error while retrieving App Check token: ${V.error}`),V?.token})()}}function Kt(U){return(0,_.m9)(U)}class Dn{constructor(b){this.auth=b,this.observer=null,this.addObserver=(0,_.ne)(D=>this.observer=D)}get next(){return z(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Bt(U){const b=U.indexOf(":");return b<0?"":U.substr(0,b+1)}function Wn(U){if(!U)return null;const b=Number(U);return isNaN(b)?null:b}class _r{constructor(b,D){this.providerId=b,this.signInMethod=D}toJSON(){return ct("not implemented")}_getIdTokenResponse(b){return ct("not implemented")}_linkToIdToken(b,D){return ct("not implemented")}_getReauthenticationResolver(b){return ct("not implemented")}}function Or(U,b){return Us.apply(this,arguments)}function Us(){return(Us=(0,f.Z)(function*(U,b){return bn(U,"POST","/v1/accounts:signInWithIdp",Et(U,b))})).apply(this,arguments)}function Ws(){return(Ws=(0,f.Z)(function*(U,b){return rn(U,"POST","/v1/accounts:sendVerificationCode",Et(U,b))})).apply(this,arguments)}function bo(){return(bo=(0,f.Z)(function*(U,b){return bn(U,"POST","/v1/accounts:signInWithPhoneNumber",Et(U,b))})).apply(this,arguments)}function Mo(){return(Mo=(0,f.Z)(function*(U,b){const D=yield bn(U,"POST","/v1/accounts:signInWithPhoneNumber",Et(U,b));if(D.temporaryProof)throw Qn(U,"account-exists-with-different-credential",D);return D})).apply(this,arguments)}const Vs={USER_NOT_FOUND:"user-not-found"};function Xr(){return(Xr=(0,f.Z)(function*(U,b){return bn(U,"POST","/v1/accounts:signInWithPhoneNumber",Et(U,Object.assign(Object.assign({},b),{operation:"REAUTH"})),Vs)})).apply(this,arguments)}class Di extends _r{constructor(b){super("phone","phone"),this.params=b}static _fromVerification(b,D){return new Di({verificationId:b,verificationCode:D})}static _fromTokenResponse(b,D){return new Di({phoneNumber:b,temporaryProof:D})}_getIdTokenResponse(b){return function Ao(U,b){return bo.apply(this,arguments)}(b,this._makeVerificationRequest())}_linkToIdToken(b,D){return function qo(U,b){return Mo.apply(this,arguments)}(b,Object.assign({idToken:D},this._makeVerificationRequest()))}_getReauthenticationResolver(b){return function ko(U,b){return Xr.apply(this,arguments)}(b,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:b,phoneNumber:D,verificationId:V,verificationCode:he}=this.params;return b&&D?{temporaryProof:b,phoneNumber:D}:{sessionInfo:V,code:he}}toJSON(){const b={providerId:this.providerId};return this.params.phoneNumber&&(b.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(b.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(b.verificationCode=this.params.verificationCode),this.params.verificationId&&(b.verificationId=this.params.verificationId),b}static fromJSON(b){"string"==typeof b&&(b=JSON.parse(b));const{verificationId:D,verificationCode:V,phoneNumber:he,temporaryProof:Re}=b;return V||D||he||Re?new Di({verificationId:D,verificationCode:V,phoneNumber:he,temporaryProof:Re}):null}}class gs{constructor(b){this.providerId=b,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(b){this.defaultLanguageCode=b}setCustomParameters(b){return this.customParameters=b,this}getCustomParameters(){return this.customParameters}}class Js extends gs{constructor(){super(...arguments),this.scopes=[]}addScope(b){return this.scopes.includes(b)||this.scopes.push(b),this}getScopes(){return[...this.scopes]}}class Ps{constructor(b){this.user=b.user,this.providerId=b.providerId,this._tokenResponse=b._tokenResponse,this.operationType=b.operationType}static _fromIdTokenResponse(b,D,V,he=!1){return(0,f.Z)(function*(){const Re=yield $._fromIdTokenResponse(b,V,he),Ct=Xi(V);return new Ps({user:Re,providerId:Ct,_tokenResponse:V,operationType:D})})()}static _forOperation(b,D,V){return(0,f.Z)(function*(){yield b._updateTokensIfNecessary(V,!0);const he=Xi(V);return new Ps({user:b,providerId:he,_tokenResponse:V,operationType:D})})()}}function Xi(U){return U.providerId?U.providerId:"phoneNumber"in U?"phone":null}class rr extends _.ZR{constructor(b,D,V,he){var Re;super(D.code,D.message),this.operationType=V,this.user=he,Object.setPrototypeOf(this,rr.prototype),this.customData={appName:b.name,tenantId:null!==(Re=b.tenantId)&&void 0!==Re?Re:void 0,_serverResponse:D.customData._serverResponse,operationType:V}}static _fromErrorAndOperation(b,D,V,he){return new rr(b,D,V,he)}}function _o(U,b,D,V){return("reauthenticate"===b?D._getReauthenticationResolver(U):D._getIdTokenResponse(U)).catch(Re=>{throw"auth/multi-factor-auth-required"===Re.code?rr._fromErrorAndOperation(U,Re,b,V):Re})}function Mr(U,b){return Es.apply(this,arguments)}function Es(){return(Es=(0,f.Z)(function*(U,b,D=!1){const V=yield Hn(U,b._linkToIdToken(U.auth,yield U.getIdToken()),D);return Ps._forOperation(U,"link",V)})).apply(this,arguments)}function Jr(U,b){return Io.apply(this,arguments)}function Io(){return(Io=(0,f.Z)(function*(U,b,D=!1){const{auth:V}=U,he="reauthenticate";try{const Re=yield Hn(U,_o(V,he,b,U),D);z(Re.idToken,V,"internal-error");const Ct=Yi(Re.idToken);z(Ct,V,"internal-error");const{sub:Qt}=Ct;return z(U.uid===Qt,V,"user-mismatch"),Ps._forOperation(U,he,Re)}catch(Re){throw"auth/user-not-found"===Re?.code&&Qe(V,"user-mismatch"),Re}})).apply(this,arguments)}function ai(U,b){return fo.apply(this,arguments)}function fo(){return(fo=(0,f.Z)(function*(U,b,D=!1){const V="signIn",he=yield _o(U,V,b),Re=yield Ps._fromIdTokenResponse(U,V,he);return D||(yield U._updateCurrentUser(Re.user)),Re})).apply(this,arguments)}function _s(U,b){return si.apply(this,arguments)}function si(){return(si=(0,f.Z)(function*(U,b){return ai(Kt(U),b)})).apply(this,arguments)}const Po="__sak";class ts{constructor(b,D){this.storageRetriever=b,this.type=D}_isAvailable(){try{return this.storage?(this.storage.setItem(Po,"1"),this.storage.removeItem(Po),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(b,D){return this.storage.setItem(b,JSON.stringify(D)),Promise.resolve()}_get(b){const D=this.storage.getItem(b);return Promise.resolve(D?JSON.parse(D):null)}_remove(b){return this.storage.removeItem(b),Promise.resolve()}get storage(){return this.storageRetriever()}}const fs=(()=>{class U extends ts{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(D,V)=>this.onStorageEvent(D,V),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Jt(){const U=(0,_.z$)();return qt(U)||ht(U)}()&&function yr(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=vi(),this._shouldAllowMigration=!0}forAllChangedKeys(D){for(const V of Object.keys(this.listeners)){const he=this.storage.getItem(V),Re=this.localCache[V];he!==Re&&D(V,Re,he)}}onStorageEvent(D,V=!1){if(!D.key)return void this.forAllChangedKeys((Qt,Ln,ei)=>{this.notifyListeners(Qt,ei)});const he=D.key;if(V?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Qt=this.storage.getItem(he);if(D.newValue!==Qt)null!==D.newValue?this.storage.setItem(he,D.newValue):this.storage.removeItem(he);else if(this.localCache[he]===D.newValue&&!V)return}const Re=()=>{const Qt=this.storage.getItem(he);!V&&this.localCache[he]===Qt||this.notifyListeners(he,Qt)},Ct=this.storage.getItem(he);!function Kn(){return(0,_.w1)()&&10===document.documentMode}()||Ct===D.newValue||D.newValue===D.oldValue?Re():setTimeout(Re,10)}notifyListeners(D,V){this.localCache[D]=V;const he=this.listeners[D];if(he)for(const Re of Array.from(he))Re(V&&JSON.parse(V))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((D,V,he)=>{this.onStorageEvent(new StorageEvent("storage",{key:D,oldValue:V,newValue:he}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(D,V){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[D]||(this.listeners[D]=new Set,this.localCache[D]=this.storage.getItem(D)),this.listeners[D].add(V)}_removeListener(D,V){this.listeners[D]&&(this.listeners[D].delete(V),0===this.listeners[D].size&&delete this.listeners[D]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(D,V){var he=()=>super._set,Re=this;return(0,f.Z)(function*(){yield he().call(Re,D,V),Re.localCache[D]=JSON.stringify(V)})()}_get(D){var V=()=>super._get,he=this;return(0,f.Z)(function*(){const Re=yield V().call(he,D);return he.localCache[D]=JSON.stringify(Re),Re})()}_remove(D){var V=()=>super._remove,he=this;return(0,f.Z)(function*(){yield V().call(he,D),delete he.localCache[D]})()}}return U.type="LOCAL",U})(),Ns=(()=>{class U extends ts{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(D,V){}_removeListener(D,V){}}return U.type="SESSION",U})();let Fr=(()=>{class U{constructor(D){this.eventTarget=D,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(D){const V=this.receivers.find(Re=>Re.isListeningto(D));if(V)return V;const he=new U(D);return this.receivers.push(he),he}isListeningto(D){return this.eventTarget===D}handleEvent(D){var V=this;return(0,f.Z)(function*(){const he=D,{eventId:Re,eventType:Ct,data:Qt}=he.data,Ln=V.handlersMap[Ct];if(!Ln?.size)return;he.ports[0].postMessage({status:"ack",eventId:Re,eventType:Ct});const ei=Array.from(Ln).map(function(){var zr=(0,f.Z)(function*(fa){return fa(he.origin,Qt)});return function(fa){return zr.apply(this,arguments)}}()),jn=yield function ys(U){return Promise.all(U.map(function(){var b=(0,f.Z)(function*(D){try{return{fulfilled:!0,value:yield D}}catch(V){return{fulfilled:!1,reason:V}}});return function(D){return b.apply(this,arguments)}}()))}(ei);he.ports[0].postMessage({status:"done",eventId:Re,eventType:Ct,response:jn})})()}_subscribe(D,V){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[D]||(this.handlersMap[D]=new Set),this.handlersMap[D].add(V)}_unsubscribe(D,V){this.handlersMap[D]&&V&&this.handlersMap[D].delete(V),(!V||0===this.handlersMap[D].size)&&delete this.handlersMap[D],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return U.receivers=[],U})();function Jo(U="",b=10){let D="";for(let V=0;V<b;V++)D+=Math.floor(10*Math.random());return U+D}class Lr{constructor(b){this.target=b,this.handlers=new Set}removeMessageHandler(b){b.messageChannel&&(b.messageChannel.port1.removeEventListener("message",b.onMessage),b.messageChannel.port1.close()),this.handlers.delete(b)}_send(b,D,V=50){var he=this;return(0,f.Z)(function*(){const Re=typeof MessageChannel<"u"?new MessageChannel:null;if(!Re)throw new Error("connection_unavailable");let Ct,Qt;return new Promise((Ln,ei)=>{const jn=Jo("",20);Re.port1.start();const zr=setTimeout(()=>{ei(new Error("unsupported_event"))},V);Qt={messageChannel:Re,onMessage(fa){const Xl=fa;if(Xl.data.eventId===jn)switch(Xl.data.status){case"ack":clearTimeout(zr),Ct=setTimeout(()=>{ei(new Error("timeout"))},3e3);break;case"done":clearTimeout(Ct),Ln(Xl.data.response);break;default:clearTimeout(zr),clearTimeout(Ct),ei(new Error("invalid_response"))}}},he.handlers.add(Qt),Re.port1.addEventListener("message",Qt.onMessage),he.target.postMessage({eventType:b,eventId:jn,data:D},[Re.port2])}).finally(()=>{Qt&&he.removeMessageHandler(Qt)})})()}}function mr(){return window}function io(){return typeof mr().WorkerGlobalScope<"u"&&"function"==typeof mr().importScripts}function Fo(){return(Fo=(0,f.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Lo="firebaseLocalStorageDb",da=1,ea="firebaseLocalStorage",Hr="fbase_key";class ba{constructor(b){this.request=b}toPromise(){return new Promise((b,D)=>{this.request.addEventListener("success",()=>{b(this.request.result)}),this.request.addEventListener("error",()=>{D(this.request.error)})})}}function ro(U,b){return U.transaction([ea],b?"readwrite":"readonly").objectStore(ea)}function js(){const U=indexedDB.open(Lo,da);return new Promise((b,D)=>{U.addEventListener("error",()=>{D(U.error)}),U.addEventListener("upgradeneeded",()=>{const V=U.result;try{V.createObjectStore(ea,{keyPath:Hr})}catch(he){D(he)}}),U.addEventListener("success",(0,f.Z)(function*(){const V=U.result;V.objectStoreNames.contains(ea)?b(V):(V.close(),yield function Ga(){const U=indexedDB.deleteDatabase(Lo);return new ba(U).toPromise()}(),b(yield js()))}))})}function ta(U,b,D){return Xa.apply(this,arguments)}function Xa(){return(Xa=(0,f.Z)(function*(U,b,D){const V=ro(U,!0).put({[Hr]:b,value:D});return new ba(V).toPromise()})).apply(this,arguments)}function Va(){return(Va=(0,f.Z)(function*(U,b){const D=ro(U,!1).get(b),V=yield new ba(D).toPromise();return void 0===V?null:V.value})).apply(this,arguments)}function dl(U,b){const D=ro(U,!0).delete(b);return new ba(D).toPromise()}const rl=(()=>{class U{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var D=this;return(0,f.Z)(function*(){return D.db||(D.db=yield js()),D.db})()}_withRetries(D){var V=this;return(0,f.Z)(function*(){let he=0;for(;;)try{const Re=yield V._openDb();return yield D(Re)}catch(Re){if(he++>3)throw Re;V.db&&(V.db.close(),V.db=void 0)}})()}initializeServiceWorkerMessaging(){var D=this;return(0,f.Z)(function*(){return io()?D.initializeReceiver():D.initializeSender()})()}initializeReceiver(){var D=this;return(0,f.Z)(function*(){D.receiver=Fr._getInstance(function va(){return io()?self:null}()),D.receiver._subscribe("keyChanged",function(){var V=(0,f.Z)(function*(he,Re){return{keyProcessed:(yield D._poll()).includes(Re.key)}});return function(he,Re){return V.apply(this,arguments)}}()),D.receiver._subscribe("ping",function(){var V=(0,f.Z)(function*(he,Re){return["keyChanged"]});return function(he,Re){return V.apply(this,arguments)}}())})()}initializeSender(){var D=this;return(0,f.Z)(function*(){var V,he;if(D.activeServiceWorker=yield function ua(){return Fo.apply(this,arguments)}(),!D.activeServiceWorker)return;D.sender=new Lr(D.activeServiceWorker);const Re=yield D.sender._send("ping",{},800);Re&&null!==(V=Re[0])&&void 0!==V&&V.fulfilled&&null!==(he=Re[0])&&void 0!==he&&he.value.includes("keyChanged")&&(D.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(D){var V=this;return(0,f.Z)(function*(){if(V.sender&&V.activeServiceWorker&&function nn(){var U;return(null===(U=navigator?.serviceWorker)||void 0===U?void 0:U.controller)||null}()===V.activeServiceWorker)try{yield V.sender._send("keyChanged",{key:D},V.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,f.Z)(function*(){try{if(!indexedDB)return!1;const D=yield js();return yield ta(D,Po,"1"),yield dl(D,Po),!0}catch{}return!1})()}_withPendingWrite(D){var V=this;return(0,f.Z)(function*(){V.pendingWrites++;try{yield D()}finally{V.pendingWrites--}})()}_set(D,V){var he=this;return(0,f.Z)(function*(){return he._withPendingWrite((0,f.Z)(function*(){return yield he._withRetries(Re=>ta(Re,D,V)),he.localCache[D]=V,he.notifyServiceWorker(D)}))})()}_get(D){var V=this;return(0,f.Z)(function*(){const he=yield V._withRetries(Re=>function mo(U,b){return Va.apply(this,arguments)}(Re,D));return V.localCache[D]=he,he})()}_remove(D){var V=this;return(0,f.Z)(function*(){return V._withPendingWrite((0,f.Z)(function*(){return yield V._withRetries(he=>dl(he,D)),delete V.localCache[D],V.notifyServiceWorker(D)}))})()}_poll(){var D=this;return(0,f.Z)(function*(){const V=yield D._withRetries(Ct=>{const Qt=ro(Ct,!1).getAll();return new ba(Qt).toPromise()});if(!V)return[];if(0!==D.pendingWrites)return[];const he=[],Re=new Set;for(const{fbase_key:Ct,value:Qt}of V)Re.add(Ct),JSON.stringify(D.localCache[Ct])!==JSON.stringify(Qt)&&(D.notifyListeners(Ct,Qt),he.push(Ct));for(const Ct of Object.keys(D.localCache))D.localCache[Ct]&&!Re.has(Ct)&&(D.notifyListeners(Ct,null),he.push(Ct));return he})()}notifyListeners(D,V){this.localCache[D]=V;const he=this.listeners[D];if(he)for(const Re of Array.from(he))Re(V)}startPolling(){var D=this;this.stopPolling(),this.pollTimer=setInterval((0,f.Z)(function*(){return D._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(D,V){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[D]||(this.listeners[D]=new Set,this._get(D)),this.listeners[D].add(V)}_removeListener(D,V){this.listeners[D]&&(this.listeners[D].delete(V),0===this.listeners[D].size&&delete this.listeners[D]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return U.type="LOCAL",U})();Dr("rcb"),new Ot(3e4,6e4);const Wl="recaptcha";class Go{constructor(b,D){this.verificationId=b,this.onConfirmation=D}confirm(b){const D=Di._fromVerification(this.verificationId,b);return this.onConfirmation(D)}}function p(){return(p=(0,f.Z)(function*(U,b,D){const V=Kt(U),he=yield X(V,b,(0,_.m9)(D));return new Go(he,Re=>_s(V,Re))})).apply(this,arguments)}function X(U,b,D){return ce.apply(this,arguments)}function ce(){return ce=(0,f.Z)(function*(U,b,D){var V;const he=yield D.verify();try{let Re;if(z("string"==typeof he,U,"argument-error"),z(D.type===Wl,U,"argument-error"),Re="string"==typeof b?{phoneNumber:b}:b,"session"in Re){const Ct=Re.session;if("phoneNumber"in Re)return z("enroll"===Ct.type,U,"internal-error"),(yield function Nr(U,b){return rn(U,"POST","/v2/accounts/mfaEnrollment:start",Et(U,b))}(U,{idToken:Ct.credential,phoneEnrollmentInfo:{phoneNumber:Re.phoneNumber,recaptchaToken:he}})).phoneSessionInfo.sessionInfo;{z("signin"===Ct.type,U,"internal-error");const Qt=(null===(V=Re.multiFactorHint)||void 0===V?void 0:V.uid)||Re.multiFactorUid;return z(Qt,U,"missing-multi-factor-info"),(yield function xa(U,b){return rn(U,"POST","/v2/accounts/mfaSignIn:start",Et(U,b))}(U,{mfaPendingCredential:Ct.credential,mfaEnrollmentId:Qt,phoneSignInInfo:{recaptchaToken:he}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Ct}=yield function Ms(U,b){return Ws.apply(this,arguments)}(U,{phoneNumber:Re.phoneNumber,recaptchaToken:he});return Ct}}finally{D._reset()}}),ce.apply(this,arguments)}let on=(()=>{class U{constructor(D){this.providerId=U.PROVIDER_ID,this.auth=Kt(D)}verifyPhoneNumber(D,V){return X(this.auth,D,(0,_.m9)(V))}static credential(D,V){return Di._fromVerification(D,V)}static credentialFromResult(D){return U.credentialFromTaggedObject(D)}static credentialFromError(D){return U.credentialFromTaggedObject(D.customData||{})}static credentialFromTaggedObject({_tokenResponse:D}){if(!D)return null;const{phoneNumber:V,temporaryProof:he}=D;return V&&he?Di._fromTokenResponse(V,he):null}}return U.PROVIDER_ID="phone",U.PHONE_SIGN_IN_METHOD="phone",U})();class Un extends _r{constructor(b){super("custom","custom"),this.params=b}_getIdTokenResponse(b){return Or(b,this._buildIdpRequest())}_linkToIdToken(b,D){return Or(b,this._buildIdpRequest(D))}_getReauthenticationResolver(b){return Or(b,this._buildIdpRequest())}_buildIdpRequest(b){const D={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return b&&(D.idToken=b),D}}function sr(U){return ai(U.auth,new Un(U),U.bypassAuthState)}function jr(U){const{auth:b,user:D}=U;return z(D,b,"internal-error"),Jr(D,new Un(U),U.bypassAuthState)}function ur(U){return wa.apply(this,arguments)}function wa(){return(wa=(0,f.Z)(function*(U){const{auth:b,user:D}=U;return z(D,b,"internal-error"),Mr(D,new Un(U),U.bypassAuthState)})).apply(this,arguments)}class So{constructor(b,D,V,he,Re=!1){this.auth=b,this.resolver=V,this.user=he,this.bypassAuthState=Re,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(D)?D:[D]}execute(){var b=this;return new Promise(function(){var D=(0,f.Z)(function*(V,he){b.pendingPromise={resolve:V,reject:he};try{b.eventManager=yield b.resolver._initialize(b.auth),yield b.onExecution(),b.eventManager.registerConsumer(b)}catch(Re){b.reject(Re)}});return function(V,he){return D.apply(this,arguments)}}())}onAuthEvent(b){var D=this;return(0,f.Z)(function*(){const{urlResponse:V,sessionId:he,postBody:Re,tenantId:Ct,error:Qt,type:Ln}=b;if(Qt)return void D.reject(Qt);const ei={auth:D.auth,requestUri:V,sessionId:he,tenantId:Ct||void 0,postBody:Re||void 0,user:D.user,bypassAuthState:D.bypassAuthState};try{D.resolve(yield D.getIdpTask(Ln)(ei))}catch(jn){D.reject(jn)}})()}onError(b){this.reject(b)}getIdpTask(b){switch(b){case"signInViaPopup":case"signInViaRedirect":return sr;case"linkViaPopup":case"linkViaRedirect":return ur;case"reauthViaPopup":case"reauthViaRedirect":return jr;default:Qe(this.auth,"internal-error")}}resolve(b){bt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(b),this.unregisterAndCleanUp()}reject(b){bt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(b),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}new Ot(2e3,1e4);const Z="pendingRedirect",se=new Map;class Ee extends So{constructor(b,D,V=!1){super(b,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],D,void 0,V),this.eventId=null}execute(){var b=()=>super.execute,D=this;return(0,f.Z)(function*(){let V=se.get(D.auth._key());if(!V){try{const Re=(yield function Xe(U,b){return xt.apply(this,arguments)}(D.resolver,D.auth))?yield b().call(D):null;V=()=>Promise.resolve(Re)}catch(he){V=()=>Promise.reject(he)}se.set(D.auth._key(),V)}return D.bypassAuthState||se.set(D.auth._key(),()=>Promise.resolve(null)),V()})()}onAuthEvent(b){var D=()=>super.onAuthEvent,V=this;return(0,f.Z)(function*(){if("signInViaRedirect"===b.type)return D().call(V,b);if("unknown"!==b.type){if(b.eventId){const he=yield V.auth._redirectUserForId(b.eventId);if(he)return V.user=he,D().call(V,b);V.resolve(null)}}else V.resolve(null)})()}onExecution(){return(0,f.Z)(function*(){})()}cleanUp(){}}function xt(){return(xt=(0,f.Z)(function*(U,b){const D=function br(U){return Nt(Z,U.config.apiKey,U.name)}(b),V=function Ei(U){return de(U._redirectPersistence)}(U);if(!(yield V._isAvailable()))return!1;const he="true"===(yield V._get(D));return yield V._remove(D),he})).apply(this,arguments)}function bi(U,b){se.set(U._key(),b)}function Sc(U,b){return Uo.apply(this,arguments)}function Uo(){return(Uo=(0,f.Z)(function*(U,b,D=!1){const V=Kt(U),he=function ln(U,b){return b?de(b):(z(U._popupRedirectResolver,U,"argument-error"),U._popupRedirectResolver)}(V,b),Ct=yield new Ee(V,he,D).execute();return Ct&&!D&&(delete Ct.user._redirectEventId,yield V._persistUserIfCurrent(Ct.user),yield V._setRedirectUser(null,b)),Ct})).apply(this,arguments)}class fc{constructor(b){this.auth=b,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(b){this.consumers.add(b),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,b)&&(this.sendToConsumer(this.queuedRedirectEvent,b),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(b){this.consumers.delete(b)}onEvent(b){if(this.hasEventBeenHandled(b))return!1;let D=!1;return this.consumers.forEach(V=>{this.isEventForConsumer(b,V)&&(D=!0,this.sendToConsumer(b,V),this.saveEventToCache(b))}),this.hasHandledPotentialRedirect||!function Xu(U){switch(U.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ol(U);default:return!1}}(b)||(this.hasHandledPotentialRedirect=!0,D||(this.queuedRedirectEvent=b,D=!0)),D}sendToConsumer(b,D){var V;if(b.error&&!ol(b)){const he=(null===(V=b.error.code)||void 0===V?void 0:V.split("auth/")[1])||"internal-error";D.onError(Ue(this.auth,he))}else D.onAuthEvent(b)}isEventForConsumer(b,D){const V=null===D.eventId||!!b.eventId&&b.eventId===D.eventId;return D.filter.includes(b.type)&&V}hasEventBeenHandled(b){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(oc(b))}saveEventToCache(b){this.cachedEventUids.add(oc(b)),this.lastProcessedEventTime=Date.now()}}function oc(U){return[U.type,U.eventId,U.sessionId,U.tenantId].filter(b=>b).join("-")}function ol({type:U,error:b}){return"unknown"===U&&"auth/no-auth-event"===b?.code}function Wr(){return(Wr=(0,f.Z)(function*(U,b={}){return rn(U,"GET","/v1/projects",b)})).apply(this,arguments)}const Is=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,pc=/^https?/;function Cl(){return Cl=(0,f.Z)(function*(U){if(U.config.emulator)return;const{authorizedDomains:b}=yield function Mu(U){return Wr.apply(this,arguments)}(U);for(const D of b)try{if(Ha(D))return}catch{}Qe(U,"unauthorized-domain")}),Cl.apply(this,arguments)}function Ha(U){const b=Ft(),{protocol:D,hostname:V}=new URL(b);if(U.startsWith("chrome-extension://")){const Ct=new URL(U);return""===Ct.hostname&&""===V?"chrome-extension:"===D&&U.replace("chrome-extension://","")===b.replace("chrome-extension://",""):"chrome-extension:"===D&&Ct.hostname===V}if(!pc.test(D))return!1;if(Is.test(U))return V===U;const he=U.replace(/\./g,"\\.");return new RegExp("^(.+\\."+he+"|"+he+")$","i").test(V)}const Tl=new Ot(3e4,6e4);function Bc(){const U=mr().___jsl;if(U?.H)for(const b of Object.keys(U.H))if(U.H[b].r=U.H[b].r||[],U.H[b].L=U.H[b].L||[],U.H[b].r=[...U.H[b].L],U.CP)for(let D=0;D<U.CP.length;D++)U.CP[D]=null}let Ra=null;const mc=new Ot(5e3,15e3),fu="__/auth/iframe",Ka="emulator/auth/iframe",jc={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},pu=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Ac(U){const b=U.config;z(b.authDomain,U,"auth-domain-config-required");const D=b.emulator?jt(b,Ka):`https://${U.config.authDomain}/${fu}`,V={apiKey:b.apiKey,appName:U.name,v:re.SDK_VERSION},he=pu.get(U.config.apiHost);he&&(V.eid=he);const Re=U._getFrameworks();return Re.length&&(V.fw=Re.join(",")),`${D}?${(0,_.xO)(V).slice(1)}`}function ha(){return ha=(0,f.Z)(function*(U){const b=yield function xc(U){return Ra=Ra||function Hc(U){return new Promise((b,D)=>{var V,he,Re;function Ct(){Bc(),gapi.load("gapi.iframes",{callback:()=>{b(gapi.iframes.getContext())},ontimeout:()=>{Bc(),D(Ue(U,"network-request-failed"))},timeout:Tl.get()})}if(null!==(he=null===(V=mr().gapi)||void 0===V?void 0:V.iframes)&&void 0!==he&&he.Iframe)b(gapi.iframes.getContext());else{if(null===(Re=mr().gapi)||void 0===Re||!Re.load){const Qt=Dr("iframefcb");return mr()[Qt]=()=>{gapi.load?Ct():D(Ue(U,"network-request-failed"))},Sr(`https://apis.google.com/js/api.js?onload=${Qt}`).catch(Ln=>D(Ln))}Ct()}}).catch(b=>{throw Ra=null,b})}(U),Ra}(U),D=mr().gapi;return z(D,U,"internal-error"),b.open({where:document.body,url:Ac(U),messageHandlersFilter:D.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:jc,dontclear:!0},V=>new Promise(function(){var he=(0,f.Z)(function*(Re,Ct){yield V.restyle({setHideOnLeave:!1});const Qt=Ue(U,"network-request-failed"),Ln=mr().setTimeout(()=>{Ct(Qt)},mc.get());function ei(){mr().clearTimeout(Ln),Re(V)}V.ping(ei).then(ei,()=>{Ct(Qt)})});return function(Re,Ct){return he.apply(this,arguments)}}()))}),ha.apply(this,arguments)}const Mc={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},ac=500,ra=600,lc="_blank",gc="http://localhost";class $c{constructor(b){this.window=b,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const Zl="__/auth/handler",al="emulator/auth/handler",Gc=encodeURIComponent("fac");function Yl(U,b,D,V,he,Re){return Pl.apply(this,arguments)}function Pl(){return(Pl=(0,f.Z)(function*(U,b,D,V,he,Re){z(U.config.authDomain,U,"auth-domain-config-required"),z(U.config.apiKey,U,"invalid-api-key");const Ct={apiKey:U.config.apiKey,appName:U.name,authType:D,redirectUrl:V,v:re.SDK_VERSION,eventId:he};if(b instanceof gs){b.setDefaultLanguage(U.languageCode),Ct.providerId=b.providerId||"",(0,_.xb)(b.getCustomParameters())||(Ct.customParameters=JSON.stringify(b.getCustomParameters()));for(const[jn,zr]of Object.entries(Re||{}))Ct[jn]=zr}if(b instanceof Js){const jn=b.getScopes().filter(zr=>""!==zr);jn.length>0&&(Ct.scopes=jn.join(","))}U.tenantId&&(Ct.tid=U.tenantId);const Qt=Ct;for(const jn of Object.keys(Qt))void 0===Qt[jn]&&delete Qt[jn];const Ln=yield U._getAppCheckToken(),ei=Ln?`#${Gc}=${encodeURIComponent(Ln)}`:"";return`${function Wc({config:U}){return U.emulator?jt(U,al):`https://${U.authDomain}/${Zl}`}(U)}?${(0,_.xO)(Qt).slice(1)}${ei}`})).apply(this,arguments)}const gl="webStorageSupport",Kc=class Pa{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ns,this._completeRedirectFn=Sc,this._overrideRedirectResult=bi}_openPopup(b,D,V,he){var Re=this;return(0,f.Z)(function*(){var Ct;bt(null===(Ct=Re.eventManagers[b._key()])||void 0===Ct?void 0:Ct.manager,"_initialize() not called before _openPopup()");const Qt=yield Yl(b,D,V,Ft(),he);return function sa(U,b,D,V=ac,he=ra){const Re=Math.max((window.screen.availHeight-he)/2,0).toString(),Ct=Math.max((window.screen.availWidth-V)/2,0).toString();let Qt="";const Ln=Object.assign(Object.assign({},Mc),{width:V.toString(),height:he.toString(),top:Re,left:Ct}),ei=(0,_.z$)().toLowerCase();D&&(Qt=St(ei)?lc:D),it(ei)&&(b=b||gc,Ln.scrollbars="yes");const jn=Object.entries(Ln).reduce((fa,[Xl,uc])=>`${fa}${Xl}=${uc},`,"");if(function un(U=(0,_.z$)()){var b;return ht(U)&&!(null===(b=window.navigator)||void 0===b||!b.standalone)}(ei)&&"_self"!==Qt)return function Ko(U,b){const D=document.createElement("a");D.href=U,D.target=b;const V=document.createEvent("MouseEvent");V.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),D.dispatchEvent(V)}(b||"",Qt),new $c(null);const zr=window.open(b||"",Qt,jn);z(zr,U,"popup-blocked");try{zr.focus()}catch{}return new $c(zr)}(b,Qt,Jo())})()}_openRedirect(b,D,V,he){var Re=this;return(0,f.Z)(function*(){return yield Re._originValidation(b),function po(U){mr().location.href=U}(yield Yl(b,D,V,Ft(),he)),new Promise(()=>{})})()}_initialize(b){const D=b._key();if(this.eventManagers[D]){const{manager:he,promise:Re}=this.eventManagers[D];return he?Promise.resolve(he):(bt(Re,"If manager is not set, promise should be"),Re)}const V=this.initAndGetManager(b);return this.eventManagers[D]={promise:V},V.catch(()=>{delete this.eventManagers[D]}),V}initAndGetManager(b){var D=this;return(0,f.Z)(function*(){const V=yield function zc(U){return ha.apply(this,arguments)}(b),he=new fc(b);return V.register("authEvent",Re=>(z(Re?.authEvent,b,"invalid-auth-event"),{status:he.onEvent(Re.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),D.eventManagers[b._key()]={manager:he},D.iframes[b._key()]=V,he})()}_isIframeWebStorageSupported(b,D){this.iframes[b._key()].send(gl,{type:gl},he=>{var Re;const Ct=null===(Re=he?.[0])||void 0===Re?void 0:Re[gl];void 0!==Ct&&D(!!Ct),Qe(b,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(b){const D=b._key();return this.originValidationPromises[D]||(this.originValidationPromises[D]=function iu(U){return Cl.apply(this,arguments)}(b)),this.originValidationPromises[D]}get _shouldInitProactively(){return vi()||qt()||ht()}};var je="@firebase/auth";class Sn{constructor(b){this.auth=b,this.internalListeners=new Map}getUid(){var b;return this.assertAuthConfigured(),(null===(b=this.auth.currentUser)||void 0===b?void 0:b.uid)||null}getToken(b){var D=this;return(0,f.Z)(function*(){return D.assertAuthConfigured(),yield D.auth._initializationPromise,D.auth.currentUser?{accessToken:yield D.auth.currentUser.getIdToken(b)}:null})()}addAuthTokenListener(b){if(this.assertAuthConfigured(),this.internalListeners.has(b))return;const D=this.auth.onIdTokenChanged(V=>{b(V?.stsTokenManager.accessToken||null)});this.internalListeners.set(b,D),this.updateProactiveRefresh()}removeAuthTokenListener(b){this.assertAuthConfigured();const D=this.internalListeners.get(b);D&&(this.internalListeners.delete(b),D(),this.updateProactiveRefresh())}assertAuthConfigured(){z(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const yo=(0,_.Pz)("authIdTokenMaxAge")||300;let Gs=null;const Ol=U=>function(){var b=(0,f.Z)(function*(D){const V=D&&(yield D.getIdTokenResult()),he=V&&((new Date).getTime()-Date.parse(V.issuedAtTime))/1e3;if(he&&he>yo)return;const Re=V?.token;Gs!==Re&&(Gs=Re,yield fetch(U,{method:Re?"POST":"DELETE",headers:Re?{Authorization:`Bearer ${Re}`}:{}}))});return function(D){return b.apply(this,arguments)}}();function kl(U=(0,re.getApp)()){const b=(0,re._getProvider)(U,"auth");if(b.isInitialized())return b.getImmediate();const D=function st(U,b){const D=(0,re._getProvider)(U,"auth");if(D.isInitialized()){const he=D.getImmediate(),Re=D.getOptions();if((0,_.vZ)(Re,b??{}))return he;Qe(he,"already-initialized")}return D.initialize({options:b})}(U,{popupRedirectResolver:Kc,persistence:[rl,fs,Ns]}),V=(0,_.Pz)("authTokenSyncURL");if(V){const Re=Ol(V);(function G(U,b,D){(0,_.m9)(U).beforeAuthStateChanged(b,D)})(D,Re,()=>Re(D.currentUser)),function te(U,b,D,V){(0,_.m9)(U).onIdTokenChanged(b,D,V)}(D,Ct=>Re(Ct))}const he=(0,_.q4)("auth");return he&&function wt(U,b,D){const V=Kt(U);z(V._canInitEmulator,V,"emulator-config-failed"),z(/^https?:\/\//.test(b),V,"invalid-emulator-scheme");const he=!!D?.disableWarnings,Re=Bt(b),{host:Ct,port:Qt}=function mn(U){const b=Bt(U),D=/(\/\/)?([^?#/]+)/.exec(U.substr(b.length));if(!D)return{host:"",port:null};const V=D[2].split("@").pop()||"",he=/^(\[[^\]]+\])(:|$)/.exec(V);if(he){const Re=he[1];return{host:Re,port:Wn(V.substr(Re.length+1))}}{const[Re,Ct]=V.split(":");return{host:Re,port:Wn(Ct)}}}(b);V.config.emulator={url:`${Re}//${Ct}${null===Qt?"":`:${Qt}`}/`},V.settings.appVerificationDisabledForTesting=!0,V.emulatorConfig=Object.freeze({host:Ct,port:Qt,protocol:Re.replace(":",""),options:Object.freeze({disableWarnings:he})}),he||function xn(){function U(){const b=document.createElement("p"),D=b.style;b.innerText="Running in emulator mode. Do not use with production credentials.",D.position="fixed",D.width="100%",D.backgroundColor="#ffffff",D.border=".1em solid #000000",D.color="#b50000",D.bottom="0px",D.left="0px",D.margin="0px",D.zIndex="10000",D.textAlign="center",b.classList.add("firebase-emulator-warning"),document.body.appendChild(b)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",U):U())}()}(D,`http://${he}`),D}!function Ri(U){(0,re._registerComponent)(new He.wA("auth",(b,{options:D})=>{const V=b.getProvider("app").getImmediate(),he=b.getProvider("heartbeat"),Re=b.getProvider("app-check-internal"),{apiKey:Ct,authDomain:Qt}=V.options;z(Ct&&!Ct.includes(":"),"invalid-api-key",{appName:V.name});const Ln={apiKey:Ct,authDomain:Qt,clientPlatform:U,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:vs(U)},ei=new vt(V,he,Re,Ln);return function nt(U,b){const D=b?.persistence||[],V=(Array.isArray(D)?D:[D]).map(de);b?.errorMap&&U._updateErrorMap(b.errorMap),U._initializeWithPersistence(V,b?.popupRedirectResolver)}(ei,D),ei},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((b,D,V)=>{b.getProvider("auth-internal").initialize()})),(0,re._registerComponent)(new He.wA("auth-internal",b=>{const D=Kt(b.getProvider("auth").getImmediate());return new Sn(D)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,re.registerVersion)(je,"0.23.2",function Zn(U){switch(U){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(U)),(0,re.registerVersion)(je,"0.23.2","esm2017")}("Browser");var Zc=L(1135),Yc=L(7579),Ir=L(8996),_c=L(262),ll=L(9646),yc=L(9300),Rc=L(8505),_l=L(2722),Dl=L(4650),mu=L(7799),Qc=L(1173),cc=L(7977);let yl=(()=>{class U{constructor(D,V,he){this.router=D,this.userData=V,this.store=he,this.userLoggedIn=!1,this.phoneCodeAccess=!1,this.phoneError$=new Zc.X(null),this.codeError$=new Zc.X(null),this.auth=kl(),this.recaptchaVerifier=null,this.unsubscribe$=new Yc.x}verifyPhone(D){(0,Ir.D)(function Y(U,b,D){return p.apply(this,arguments)}(this.auth,D,this.recaptchaVerifier)).pipe((0,_c.K)(V=>(this.sendErrorMessage(this.phoneError$,V),(0,ll.of)(null))),(0,yc.h)(Boolean),(0,Rc.b)(()=>{this.phoneError$.getValue()&&this.phoneError$.next(null),this.phoneCodeAccess=!0})).subscribe(V=>{this.verificationId=V.verificationId,this.router.navigateByUrl("auth/code")})}verifyCode(D){const V=on.credential(this.verificationId,D);(0,Ir.D)(_s(this.auth,V)).pipe((0,_l.R)(this.unsubscribe$),(0,_c.K)(he=>(this.sendErrorMessage(this.codeError$,he),(0,ll.of)(null))),(0,yc.h)(Boolean),(0,Rc.b)(()=>{this.userLoggedIn=!0,this.phoneCodeAccess=!1,this.phoneError$.getValue()&&this.codeError$.next(null)})).subscribe(he=>{this.userInfo=he.user,this.store.doc(`users/${he.user.uid}`).get().pipe((0,_l.R)(this.unsubscribe$)).subscribe(Re=>{he._tokenResponse.isNewUser||!Re.exists?this.router.navigateByUrl("auth/registration"):this.login(he.user.uid,!1)})})}logout(){this.unsubscribe$.next(),this.userLoggedIn=!1,localStorage.removeItem("uid"),this.router.navigateByUrl("auth/phone")}login(D,V){V?(this.userLoggedIn=!0,this.phoneCodeAccess=!1):localStorage.setItem("uid",D),this.userData.setCurrentUser(D),this.router.navigateByUrl("chat/")}sendErrorMessage(D,V){let he=V.message.slice(V.message.indexOf("/")+1,-2).toLowerCase().replaceAll("-"," ");D.next(he)}ngOnDestroy(){this.unsubscribe$.next(),this.unsubscribe$.complete()}}return U.\u0275fac=function(D){return new(D||U)(Dl.LFG(mu.F0),Dl.LFG(Qc.M),Dl.LFG(cc.ST))},U.\u0275prov=Dl.Yz7({token:U,factory:U.\u0275fac,providedIn:"root"}),U})()},4995:(wn,dt,L)=>{L.d(dt,{J:()=>Te});var f=L(4650),_=L(7799),re=L(1584);let Te=(()=>{class ke{constructor(Ze,xe){this.router=Ze,this.auth=xe}canActivate(Ze,xe){return!!this.auth.userLoggedIn||this.router.createUrlTree(["/auth/phone"])}}return ke.\u0275fac=function(Ze){return new(Ze||ke)(f.LFG(_.F0),f.LFG(re.e))},ke.\u0275prov=f.Yz7({token:ke,factory:ke.\u0275fac,providedIn:"root"}),ke})()},1981:(wn,dt,L)=>{var f=L(1481),_=L(4006),re=L(4650),Te=L(7799);let ke=(()=>{class me{constructor(){this.title="echo"}}return me.\u0275fac=function(N){return new(N||me)},me.\u0275cmp=re.Xpm({type:me,selectors:[["app-root"]],decls:1,vars:0,template:function(N,J){1&N&&re._UZ(0,"router-outlet")},dependencies:[Te.lC],styles:["app-login[_ngcontent-%COMP%]{height:100%}"],changeDetection:0}),me})();var He=L(3692);(0,L(259).ZF)({projectId:"project-echo-01",appId:"1:822906463628:web:12e7b848318fc09eb9a2a9",storageBucket:"project-echo-01.appspot.com",apiKey:"AIzaSyD1d4kv-gGmvR9-R_6soZIpXi5Fw1DUQHk",authDomain:"project-echo-01.firebaseapp.com",messagingSenderId:"822906463628",measurementId:"G-5XE6G7SPJ0"});const pe_firebase={projectId:"project-echo-01",appId:"1:822906463628:web:12e7b848318fc09eb9a2a9",storageBucket:"project-echo-01.appspot.com",apiKey:"AIzaSyD1d4kv-gGmvR9-R_6soZIpXi5Fw1DUQHk",authDomain:"project-echo-01.firebaseapp.com",messagingSenderId:"822906463628",measurementId:"G-5XE6G7SPJ0"};var Me=L(3357),Ne=L(2011),yt=L(5197),pt=L(1648),Lt=L(3336),an=L(3862),It=L(1173),Mt=L(7693),Ae=L(7340);function Qe(me){return new re.vHH(3e3,!1)}function ri(){return typeof window<"u"&&typeof window.document<"u"}function Gn(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function Yi(me){switch(me.length){case 0:return new Ae.ZN;case 1:return me[0];default:return new Ae.ZE(me)}}function Pr(me,S,N,J,_e=new Map,ve=new Map){const $e=[],gt=[];let at=-1,Ke=null;if(J.forEach(k=>{const te=k.get("offset"),G=te==at,ge=G&&Ke||new Map;k.forEach((Ve,Dt)=>{let tn=Dt,An=Ve;if("offset"!==Dt)switch(tn=S.normalizePropertyName(tn,$e),An){case Ae.k1:An=_e.get(Dt);break;case Ae.l3:An=ve.get(Dt);break;default:An=S.normalizeStyleValue(Dt,tn,An,$e)}ge.set(tn,An)}),G||gt.push(ge),Ke=ge,at=te}),$e.length)throw function fi(me){return new re.vHH(3502,!1)}();return gt}function Hn(me,S,N,J){switch(S){case"start":me.onStart(()=>J(N&&Pn(N,"start",me)));break;case"done":me.onDone(()=>J(N&&Pn(N,"done",me)));break;case"destroy":me.onDestroy(()=>J(N&&Pn(N,"destroy",me)))}}function Pn(me,S,N){const ve=On(me.element,me.triggerName,me.fromState,me.toState,S||me.phaseName,N.totalTime??me.totalTime,!!N.disabled),$e=me._data;return null!=$e&&(ve._data=$e),ve}function On(me,S,N,J,_e="",ve=0,$e){return{element:me,triggerName:S,fromState:N,toState:J,phaseName:_e,totalTime:ve,disabled:!!$e}}function Nn(me,S,N){let J=me.get(S);return J||me.set(S,J=N),J}function Ni(me){const S=me.indexOf(":");return[me.substring(1,S),me.slice(S+1)]}let Hi=(me,S)=>!1,Vi=(me,S,N)=>[],gr=null;function er(me){const S=me.parentNode||me.host;return S===gr?null:S}(Gn()||typeof Element<"u")&&(ri()?(gr=(()=>document.documentElement)(),Hi=(me,S)=>{for(;S;){if(S===me)return!0;S=er(S)}return!1}):Hi=(me,S)=>me.contains(S),Vi=(me,S,N)=>{if(N)return Array.from(me.querySelectorAll(S));const J=me.querySelector(S);return J?[J]:[]});let $n=null,Oi=!1;const ne=Hi,de=Vi;let rt=(()=>{class me{validateStyleProperty(N){return function dn(me){$n||($n=function $(){return typeof document<"u"?document.body:null}()||{},Oi=!!$n.style&&"WebkitAppearance"in $n.style);let S=!0;return $n.style&&!function $r(me){return"ebkit"==me.substring(1,6)}(me)&&(S=me in $n.style,!S&&Oi&&(S="Webkit"+me.charAt(0).toUpperCase()+me.slice(1)in $n.style)),S}(N)}matchesElement(N,J){return!1}containsElement(N,J){return ne(N,J)}getParentElement(N){return er(N)}query(N,J,_e){return de(N,J,_e)}computeStyle(N,J,_e){return _e||""}animate(N,J,_e,ve,$e,gt=[],at){return new Ae.ZN(_e,ve)}}return me.\u0275fac=function(N){return new(N||me)},me.\u0275prov=re.Yz7({token:me,factory:me.\u0275fac}),me})(),Nt=(()=>{class me{}return me.NOOP=new rt,me})();const Le=1e3,qt="ng-enter",St="ng-leave",Mn="ng-trigger",Je=".ng-trigger",ot="ng-animating",Fe=".ng-animating";function ht(me){if("number"==typeof me)return me;const S=me.match(/^(-?[\.\d]+)(m?s)/);return!S||S.length<2?0:Yt(parseFloat(S[1]),S[2])}function Yt(me,S){return"s"===S?me*Le:me}function un(me,S,N){return me.hasOwnProperty("duration")?me:function Kn(me,S,N){let _e,ve=0,$e="";if("string"==typeof me){const gt=me.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===gt)return S.push(Qe()),{duration:0,delay:0,easing:""};_e=Yt(parseFloat(gt[1]),gt[2]);const at=gt[3];null!=at&&(ve=Yt(parseFloat(at),gt[4]));const Ke=gt[5];Ke&&($e=Ke)}else _e=me;if(!N){let gt=!1,at=S.length;_e<0&&(S.push(function Ue(){return new re.vHH(3100,!1)}()),gt=!0),ve<0&&(S.push(function lt(){return new re.vHH(3101,!1)}()),gt=!0),gt&&S.splice(at,0,Qe())}return{duration:_e,delay:ve,easing:$e}}(me,S,N)}function vi(me,S={}){return Object.keys(me).forEach(N=>{S[N]=me[N]}),S}function yr(me){const S=new Map;return Object.keys(me).forEach(N=>{S.set(N,me[N])}),S}function Gr(me,S=new Map,N){if(N)for(let[J,_e]of N)S.set(J,_e);for(let[J,_e]of me)S.set(J,_e);return S}function os(me,S,N){return N?S+":"+N+";":""}function Tr(me){let S="";for(let N=0;N<me.style.length;N++){const J=me.style.item(N);S+=os(0,J,me.style.getPropertyValue(J))}for(const N in me.style)me.style.hasOwnProperty(N)&&!N.startsWith("_")&&(S+=os(0,et(N),me.style[N]));me.setAttribute("style",S)}function ji(me,S,N){me.style&&(S.forEach((J,_e)=>{const ve=Vt(_e);N&&!N.has(_e)&&N.set(_e,me.style[ve]),me.style[ve]=J}),Gn()&&Tr(me))}function Cs(me,S){me.style&&(S.forEach((N,J)=>{const _e=Vt(J);me.style[_e]=""}),Gn()&&Tr(me))}function rs(me){return Array.isArray(me)?1==me.length?me[0]:(0,Ae.vP)(me):me}const Sr=new RegExp("{{\\s*(.+?)\\s*}}","g");function Dr(me){let S=[];if("string"==typeof me){let N;for(;N=Sr.exec(me);)S.push(N[1]);Sr.lastIndex=0}return S}function ps(me,S,N){const J=me.toString(),_e=J.replace(Sr,(ve,$e)=>{let gt=S[$e];return null==gt&&(N.push(function Ye(me){return new re.vHH(3003,!1)}()),gt=""),gt.toString()});return _e==J?me:_e}function Ar(me){const S=[];let N=me.next();for(;!N.done;)S.push(N.value),N=me.next();return S}const wr=/-+([a-z0-9])/g;function Vt(me){return me.replace(wr,(...S)=>S[1].toUpperCase())}function et(me){return me.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function vt(me,S,N){switch(S.type){case 7:return me.visitTrigger(S,N);case 0:return me.visitState(S,N);case 1:return me.visitTransition(S,N);case 2:return me.visitSequence(S,N);case 3:return me.visitGroup(S,N);case 4:return me.visitAnimate(S,N);case 5:return me.visitKeyframes(S,N);case 6:return me.visitStyle(S,N);case 8:return me.visitReference(S,N);case 9:return me.visitAnimateChild(S,N);case 10:return me.visitAnimateRef(S,N);case 11:return me.visitQuery(S,N);case 12:return me.visitStagger(S,N);default:throw function z(me){return new re.vHH(3004,!1)}()}}function Kt(me,S){return window.getComputedStyle(me)[S]}const xn="*";function _r(me,S){const N=[];return"string"==typeof me?me.split(/\s*,\s*/).forEach(J=>function Ii(me,S,N){if(":"==me[0]){const at=function ms(me,S){switch(me){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(N,J)=>parseFloat(J)>parseFloat(N);case":decrement":return(N,J)=>parseFloat(J)<parseFloat(N);default:return S.push(function Zt(me){return new re.vHH(3016,!1)}()),"* => *"}}(me,N);if("function"==typeof at)return void S.push(at);me=at}const J=me.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==J||J.length<4)return N.push(function rn(me){return new re.vHH(3015,!1)}()),S;const _e=J[1],ve=J[2],$e=J[3];S.push(Qs(_e,$e));"<"==ve[0]&&!(_e==xn&&$e==xn)&&S.push(Qs($e,_e))}(J,N,S)):N.push(me),N}const As=new Set(["true","1"]),dr=new Set(["false","0"]);function Qs(me,S){const N=As.has(me)||dr.has(me),J=As.has(S)||dr.has(S);return(_e,ve)=>{let $e=me==xn||me==_e,gt=S==xn||S==ve;return!$e&&N&&"boolean"==typeof _e&&($e=_e?As.has(me):dr.has(me)),!gt&&J&&"boolean"==typeof ve&&(gt=ve?As.has(S):dr.has(S)),$e&&gt}}const Vr=new RegExp("s*:selfs*,?","g");function Qr(me,S,N,J){return new Ci(me).build(S,N,J)}class Ci{constructor(S){this._driver=S}build(S,N,J){const _e=new or(N);return this._resetContextStyleTimingState(_e),vt(this,rs(S),_e)}_resetContextStyleTimingState(S){S.currentQuerySelector="",S.collectedStyles=new Map,S.collectedStyles.set("",new Map),S.currentTime=0}visitTrigger(S,N){let J=N.queryCount=0,_e=N.depCount=0;const ve=[],$e=[];return"@"==S.name.charAt(0)&&N.errors.push(function bt(){return new re.vHH(3006,!1)}()),S.definitions.forEach(gt=>{if(this._resetContextStyleTimingState(N),0==gt.type){const at=gt,Ke=at.name;Ke.toString().split(/\s*,\s*/).forEach(k=>{at.name=k,ve.push(this.visitState(at,N))}),at.name=Ke}else if(1==gt.type){const at=this.visitTransition(gt,N);J+=at.queryCount,_e+=at.depCount,$e.push(at)}else N.errors.push(function Ft(){return new re.vHH(3007,!1)}())}),{type:7,name:S.name,states:ve,transitions:$e,queryCount:J,depCount:_e,options:null}}visitState(S,N){const J=this.visitStyle(S.styles,N),_e=S.options&&S.options.params||null;if(J.containsDynamicStyles){const ve=new Set,$e=_e||{};J.styles.forEach(gt=>{gt instanceof Map&&gt.forEach(at=>{Dr(at).forEach(Ke=>{$e.hasOwnProperty(Ke)||ve.add(Ke)})})}),ve.size&&(Ar(ve.values()),N.errors.push(function gn(me,S){return new re.vHH(3008,!1)}()))}return{type:0,name:S.name,style:J,options:_e?{params:_e}:null}}visitTransition(S,N){N.queryCount=0,N.depCount=0;const J=vt(this,rs(S.animation),N);return{type:1,matchers:_r(S.expr,N.errors),animation:J,queryCount:N.queryCount,depCount:N.depCount,options:Xn(S.options)}}visitSequence(S,N){return{type:2,steps:S.steps.map(J=>vt(this,J,N)),options:Xn(S.options)}}visitGroup(S,N){const J=N.currentTime;let _e=0;const ve=S.steps.map($e=>{N.currentTime=J;const gt=vt(this,$e,N);return _e=Math.max(_e,N.currentTime),gt});return N.currentTime=_e,{type:3,steps:ve,options:Xn(S.options)}}visitAnimate(S,N){const J=function wi(me,S){if(me.hasOwnProperty("duration"))return me;if("number"==typeof me)return cr(un(me,S).duration,0,"");const N=me;if(N.split(/\s+/).some(ve=>"{"==ve.charAt(0)&&"{"==ve.charAt(1))){const ve=cr(0,0,"");return ve.dynamic=!0,ve.strValue=N,ve}const _e=un(N,S);return cr(_e.duration,_e.delay,_e.easing)}(S.timings,N.errors);N.currentAnimateTimings=J;let _e,ve=S.styles?S.styles:(0,Ae.oB)({});if(5==ve.type)_e=this.visitKeyframes(ve,N);else{let $e=S.styles,gt=!1;if(!$e){gt=!0;const Ke={};J.easing&&(Ke.easing=J.easing),$e=(0,Ae.oB)(Ke)}N.currentTime+=J.duration+J.delay;const at=this.visitStyle($e,N);at.isEmptyStep=gt,_e=at}return N.currentAnimateTimings=null,{type:4,timings:J,style:_e,options:null}}visitStyle(S,N){const J=this._makeStyleAst(S,N);return this._validateStyleAst(J,N),J}_makeStyleAst(S,N){const J=[],_e=Array.isArray(S.styles)?S.styles:[S.styles];for(let gt of _e)"string"==typeof gt?gt===Ae.l3?J.push(gt):N.errors.push(new re.vHH(3002,!1)):J.push(yr(gt));let ve=!1,$e=null;return J.forEach(gt=>{if(gt instanceof Map&&(gt.has("easing")&&($e=gt.get("easing"),gt.delete("easing")),!ve))for(let at of gt.values())if(at.toString().indexOf("{{")>=0){ve=!0;break}}),{type:6,styles:J,easing:$e,offset:S.offset,containsDynamicStyles:ve,options:null}}_validateStyleAst(S,N){const J=N.currentAnimateTimings;let _e=N.currentTime,ve=N.currentTime;J&&ve>0&&(ve-=J.duration+J.delay),S.styles.forEach($e=>{"string"!=typeof $e&&$e.forEach((gt,at)=>{const Ke=N.collectedStyles.get(N.currentQuerySelector),k=Ke.get(at);let te=!0;k&&(ve!=_e&&ve>=k.startTime&&_e<=k.endTime&&(N.errors.push(function Ht(me,S,N,J,_e){return new re.vHH(3010,!1)}()),te=!1),ve=k.startTime),te&&Ke.set(at,{startTime:ve,endTime:_e}),N.options&&function Qi(me,S,N){const J=S.params||{},_e=Dr(me);_e.length&&_e.forEach(ve=>{J.hasOwnProperty(ve)||N.push(function kt(me){return new re.vHH(3001,!1)}())})}(gt,N.options,N.errors)})})}visitKeyframes(S,N){const J={type:5,styles:[],options:null};if(!N.currentAnimateTimings)return N.errors.push(function Ot(){return new re.vHH(3011,!1)}()),J;let ve=0;const $e=[];let gt=!1,at=!1,Ke=0;const k=S.steps.map(An=>{const xi=this._makeStyleAst(An,N);let li=null!=xi.offset?xi.offset:function _i(me){if("string"==typeof me)return null;let S=null;if(Array.isArray(me))me.forEach(N=>{if(N instanceof Map&&N.has("offset")){const J=N;S=parseFloat(J.get("offset")),J.delete("offset")}});else if(me instanceof Map&&me.has("offset")){const N=me;S=parseFloat(N.get("offset")),N.delete("offset")}return S}(xi.styles),Ui=0;return null!=li&&(ve++,Ui=xi.offset=li),at=at||Ui<0||Ui>1,gt=gt||Ui<Ke,Ke=Ui,$e.push(Ui),xi});at&&N.errors.push(function jt(){return new re.vHH(3012,!1)}()),gt&&N.errors.push(function Gt(){return new re.vHH(3200,!1)}());const te=S.steps.length;let G=0;ve>0&&ve<te?N.errors.push(function Tt(){return new re.vHH(3202,!1)}()):0==ve&&(G=1/(te-1));const ge=te-1,Ve=N.currentTime,Dt=N.currentAnimateTimings,tn=Dt.duration;return k.forEach((An,xi)=>{const li=G>0?xi==ge?1:G*xi:$e[xi],Ui=li*tn;N.currentTime=Ve+Dt.delay+Ui,Dt.duration=Ui,this._validateStyleAst(An,N),An.offset=li,J.styles.push(An)}),J}visitReference(S,N){return{type:8,animation:vt(this,rs(S.animation),N),options:Xn(S.options)}}visitAnimateChild(S,N){return N.depCount++,{type:9,options:Xn(S.options)}}visitAnimateRef(S,N){return{type:10,animation:this.visitReference(S.animation,N),options:Xn(S.options)}}visitQuery(S,N){const J=N.currentQuerySelector,_e=S.options||{};N.queryCount++,N.currentQuery=S;const[ve,$e]=function Ls(me){const S=!!me.split(/\s*,\s*/).find(N=>":self"==N);return S&&(me=me.replace(Vr,"")),me=me.replace(/@\*/g,Je).replace(/@\w+/g,N=>Je+"-"+N.slice(1)).replace(/:animating/g,Fe),[me,S]}(S.selector);N.currentQuerySelector=J.length?J+" "+ve:ve,Nn(N.collectedStyles,N.currentQuerySelector,new Map);const gt=vt(this,rs(S.animation),N);return N.currentQuery=null,N.currentQuerySelector=J,{type:11,selector:ve,limit:_e.limit||0,optional:!!_e.optional,includeSelf:$e,animation:gt,originalSelector:S.selector,options:Xn(S.options)}}visitStagger(S,N){N.currentQuery||N.errors.push(function Ut(){return new re.vHH(3013,!1)}());const J="full"===S.timings?{duration:0,delay:0,easing:"full"}:un(S.timings,N.errors,!0);return{type:12,animation:vt(this,rs(S.animation),N),timings:J,options:null}}}class or{constructor(S){this.errors=S,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function Xn(me){return me?(me=vi(me)).params&&(me.params=function lr(me){return me?vi(me):null}(me.params)):me={},me}function cr(me,S,N){return{duration:me,delay:S,easing:N}}function xo(me,S,N,J,_e,ve,$e=null,gt=!1){return{type:1,element:me,keyframes:S,preStyleProps:N,postStyleProps:J,duration:_e,delay:ve,totalTime:_e+ve,easing:$e,subTimeline:gt}}class Li{constructor(){this._map=new Map}get(S){return this._map.get(S)||[]}append(S,N){let J=this._map.get(S);J||this._map.set(S,J=[]),J.push(...N)}has(S){return this._map.has(S)}clear(){this._map.clear()}}const Ti=new RegExp(":enter","g"),Or=new RegExp(":leave","g");function Us(me,S,N,J,_e,ve=new Map,$e=new Map,gt,at,Ke=[]){return(new as).buildKeyframes(me,S,N,J,_e,ve,$e,gt,at,Ke)}class as{buildKeyframes(S,N,J,_e,ve,$e,gt,at,Ke,k=[]){Ke=Ke||new Li;const te=new Ms(S,N,Ke,_e,ve,k,[]);te.options=at;const G=at.delay?ht(at.delay):0;te.currentTimeline.delayNextStep(G),te.currentTimeline.setStyles([$e],null,te.errors,at),vt(this,J,te);const ge=te.timelines.filter(Ve=>Ve.containsAnimation());if(ge.length&&gt.size){let Ve;for(let Dt=ge.length-1;Dt>=0;Dt--){const tn=ge[Dt];if(tn.element===N){Ve=tn;break}}Ve&&!Ve.allowOnlyTimelineStyles()&&Ve.setStyles([gt],null,te.errors,at)}return ge.length?ge.map(Ve=>Ve.buildKeyframes()):[xo(N,[],[],[],0,G,"",!1)]}visitTrigger(S,N){}visitState(S,N){}visitTransition(S,N){}visitAnimateChild(S,N){const J=N.subInstructions.get(N.element);if(J){const _e=N.createSubContext(S.options),ve=N.currentTimeline.currentTime,$e=this._visitSubInstructions(J,_e,_e.options);ve!=$e&&N.transformIntoNewTimeline($e)}N.previousNode=S}visitAnimateRef(S,N){const J=N.createSubContext(S.options);J.transformIntoNewTimeline(),this._applyAnimationRefDelays([S.options,S.animation.options],N,J),this.visitReference(S.animation,J),N.transformIntoNewTimeline(J.currentTimeline.currentTime),N.previousNode=S}_applyAnimationRefDelays(S,N,J){for(const _e of S){const ve=_e?.delay;if(ve){const $e="number"==typeof ve?ve:ht(ps(ve,_e?.params??{},N.errors));J.delayNextStep($e)}}}_visitSubInstructions(S,N,J){let ve=N.currentTimeline.currentTime;const $e=null!=J.duration?ht(J.duration):null,gt=null!=J.delay?ht(J.delay):null;return 0!==$e&&S.forEach(at=>{const Ke=N.appendInstructionToTimeline(at,$e,gt);ve=Math.max(ve,Ke.duration+Ke.delay)}),ve}visitReference(S,N){N.updateOptions(S.options,!0),vt(this,S.animation,N),N.previousNode=S}visitSequence(S,N){const J=N.subContextCount;let _e=N;const ve=S.options;if(ve&&(ve.params||ve.delay)&&(_e=N.createSubContext(ve),_e.transformIntoNewTimeline(),null!=ve.delay)){6==_e.previousNode.type&&(_e.currentTimeline.snapshotCurrentStyles(),_e.previousNode=zi);const $e=ht(ve.delay);_e.delayNextStep($e)}S.steps.length&&(S.steps.forEach($e=>vt(this,$e,_e)),_e.currentTimeline.applyStylesToKeyframe(),_e.subContextCount>J&&_e.transformIntoNewTimeline()),N.previousNode=S}visitGroup(S,N){const J=[];let _e=N.currentTimeline.currentTime;const ve=S.options&&S.options.delay?ht(S.options.delay):0;S.steps.forEach($e=>{const gt=N.createSubContext(S.options);ve&&gt.delayNextStep(ve),vt(this,$e,gt),_e=Math.max(_e,gt.currentTimeline.currentTime),J.push(gt.currentTimeline)}),J.forEach($e=>N.currentTimeline.mergeTimelineCollectedStyles($e)),N.transformIntoNewTimeline(_e),N.previousNode=S}_visitTiming(S,N){if(S.dynamic){const J=S.strValue;return un(N.params?ps(J,N.params,N.errors):J,N.errors)}return{duration:S.duration,delay:S.delay,easing:S.easing}}visitAnimate(S,N){const J=N.currentAnimateTimings=this._visitTiming(S.timings,N),_e=N.currentTimeline;J.delay&&(N.incrementTime(J.delay),_e.snapshotCurrentStyles());const ve=S.style;5==ve.type?this.visitKeyframes(ve,N):(N.incrementTime(J.duration),this.visitStyle(ve,N),_e.applyStylesToKeyframe()),N.currentAnimateTimings=null,N.previousNode=S}visitStyle(S,N){const J=N.currentTimeline,_e=N.currentAnimateTimings;!_e&&J.hasCurrentStyleProperties()&&J.forwardFrame();const ve=_e&&_e.easing||S.easing;S.isEmptyStep?J.applyEmptyStep(ve):J.setStyles(S.styles,ve,N.errors,N.options),N.previousNode=S}visitKeyframes(S,N){const J=N.currentAnimateTimings,_e=N.currentTimeline.duration,ve=J.duration,gt=N.createSubContext().currentTimeline;gt.easing=J.easing,S.styles.forEach(at=>{gt.forwardTime((at.offset||0)*ve),gt.setStyles(at.styles,at.easing,N.errors,N.options),gt.applyStylesToKeyframe()}),N.currentTimeline.mergeTimelineCollectedStyles(gt),N.transformIntoNewTimeline(_e+ve),N.previousNode=S}visitQuery(S,N){const J=N.currentTimeline.currentTime,_e=S.options||{},ve=_e.delay?ht(_e.delay):0;ve&&(6===N.previousNode.type||0==J&&N.currentTimeline.hasCurrentStyleProperties())&&(N.currentTimeline.snapshotCurrentStyles(),N.previousNode=zi);let $e=J;const gt=N.invokeQuery(S.selector,S.originalSelector,S.limit,S.includeSelf,!!_e.optional,N.errors);N.currentQueryTotal=gt.length;let at=null;gt.forEach((Ke,k)=>{N.currentQueryIndex=k;const te=N.createSubContext(S.options,Ke);ve&&te.delayNextStep(ve),Ke===N.element&&(at=te.currentTimeline),vt(this,S.animation,te),te.currentTimeline.applyStylesToKeyframe(),$e=Math.max($e,te.currentTimeline.currentTime)}),N.currentQueryIndex=0,N.currentQueryTotal=0,N.transformIntoNewTimeline($e),at&&(N.currentTimeline.mergeTimelineCollectedStyles(at),N.currentTimeline.snapshotCurrentStyles()),N.previousNode=S}visitStagger(S,N){const J=N.parentContext,_e=N.currentTimeline,ve=S.timings,$e=Math.abs(ve.duration),gt=$e*(N.currentQueryTotal-1);let at=$e*N.currentQueryIndex;switch(ve.duration<0?"reverse":ve.easing){case"reverse":at=gt-at;break;case"full":at=J.currentStaggerTime}const k=N.currentTimeline;at&&k.delayNextStep(at);const te=k.currentTime;vt(this,S.animation,N),N.previousNode=S,J.currentStaggerTime=_e.currentTime-te+(_e.startTime-J.currentTimeline.startTime)}}const zi={};class Ms{constructor(S,N,J,_e,ve,$e,gt,at){this._driver=S,this.element=N,this.subInstructions=J,this._enterClassName=_e,this._leaveClassName=ve,this.errors=$e,this.timelines=gt,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=zi,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=at||new Ws(this._driver,N,0),gt.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(S,N){if(!S)return;const J=S;let _e=this.options;null!=J.duration&&(_e.duration=ht(J.duration)),null!=J.delay&&(_e.delay=ht(J.delay));const ve=J.params;if(ve){let $e=_e.params;$e||($e=this.options.params={}),Object.keys(ve).forEach(gt=>{(!N||!$e.hasOwnProperty(gt))&&($e[gt]=ps(ve[gt],$e,this.errors))})}}_copyOptions(){const S={};if(this.options){const N=this.options.params;if(N){const J=S.params={};Object.keys(N).forEach(_e=>{J[_e]=N[_e]})}}return S}createSubContext(S=null,N,J){const _e=N||this.element,ve=new Ms(this._driver,_e,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(_e,J||0));return ve.previousNode=this.previousNode,ve.currentAnimateTimings=this.currentAnimateTimings,ve.options=this._copyOptions(),ve.updateOptions(S),ve.currentQueryIndex=this.currentQueryIndex,ve.currentQueryTotal=this.currentQueryTotal,ve.parentContext=this,this.subContextCount++,ve}transformIntoNewTimeline(S){return this.previousNode=zi,this.currentTimeline=this.currentTimeline.fork(this.element,S),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(S,N,J){const _e={duration:N??S.duration,delay:this.currentTimeline.currentTime+(J??0)+S.delay,easing:""},ve=new Ao(this._driver,S.element,S.keyframes,S.preStyleProps,S.postStyleProps,_e,S.stretchStartingKeyframe);return this.timelines.push(ve),_e}incrementTime(S){this.currentTimeline.forwardTime(this.currentTimeline.duration+S)}delayNextStep(S){S>0&&this.currentTimeline.delayNextStep(S)}invokeQuery(S,N,J,_e,ve,$e){let gt=[];if(_e&&gt.push(this.element),S.length>0){S=(S=S.replace(Ti,"."+this._enterClassName)).replace(Or,"."+this._leaveClassName);let Ke=this._driver.query(this.element,S,1!=J);0!==J&&(Ke=J<0?Ke.slice(Ke.length+J,Ke.length):Ke.slice(0,J)),gt.push(...Ke)}return!ve&&0==gt.length&&$e.push(function Et(me){return new re.vHH(3014,!1)}()),gt}}class Ws{constructor(S,N,J,_e){this._driver=S,this.element=N,this.startTime=J,this._elementTimelineStylesLookup=_e,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(N),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(N,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(S){const N=1===this._keyframes.size&&this._pendingStyles.size;this.duration||N?(this.forwardTime(this.currentTime+S),N&&this.snapshotCurrentStyles()):this.startTime+=S}fork(S,N){return this.applyStylesToKeyframe(),new Ws(this._driver,S,N||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(S){this.applyStylesToKeyframe(),this.duration=S,this._loadKeyframe()}_updateStyle(S,N){this._localTimelineStyles.set(S,N),this._globalTimelineStyles.set(S,N),this._styleSummary.set(S,{time:this.currentTime,value:N})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(S){S&&this._previousKeyframe.set("easing",S);for(let[N,J]of this._globalTimelineStyles)this._backFill.set(N,J||Ae.l3),this._currentKeyframe.set(N,Ae.l3);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(S,N,J,_e){N&&this._previousKeyframe.set("easing",N);const ve=_e&&_e.params||{},$e=function qo(me,S){const N=new Map;let J;return me.forEach(_e=>{if("*"===_e){J=J||S.keys();for(let ve of J)N.set(ve,Ae.l3)}else Gr(_e,N)}),N}(S,this._globalTimelineStyles);for(let[gt,at]of $e){const Ke=ps(at,ve,J);this._pendingStyles.set(gt,Ke),this._localTimelineStyles.has(gt)||this._backFill.set(gt,this._globalTimelineStyles.get(gt)??Ae.l3),this._updateStyle(gt,Ke)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((S,N)=>{this._currentKeyframe.set(N,S)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((S,N)=>{this._currentKeyframe.has(N)||this._currentKeyframe.set(N,S)}))}snapshotCurrentStyles(){for(let[S,N]of this._localTimelineStyles)this._pendingStyles.set(S,N),this._updateStyle(S,N)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const S=[];for(let N in this._currentKeyframe)S.push(N);return S}mergeTimelineCollectedStyles(S){S._styleSummary.forEach((N,J)=>{const _e=this._styleSummary.get(J);(!_e||N.time>_e.time)&&this._updateStyle(J,N.value)})}buildKeyframes(){this.applyStylesToKeyframe();const S=new Set,N=new Set,J=1===this._keyframes.size&&0===this.duration;let _e=[];this._keyframes.forEach((gt,at)=>{const Ke=Gr(gt,new Map,this._backFill);Ke.forEach((k,te)=>{k===Ae.k1?S.add(te):k===Ae.l3&&N.add(te)}),J||Ke.set("offset",at/this.duration),_e.push(Ke)});const ve=S.size?Ar(S.values()):[],$e=N.size?Ar(N.values()):[];if(J){const gt=_e[0],at=new Map(gt);gt.set("offset",0),at.set("offset",1),_e=[gt,at]}return xo(this.element,_e,ve,$e,this.duration,this.startTime,this.easing,!1)}}class Ao extends Ws{constructor(S,N,J,_e,ve,$e,gt=!1){super(S,N,$e.delay),this.keyframes=J,this.preStyleProps=_e,this.postStyleProps=ve,this._stretchStartingKeyframe=gt,this.timings={duration:$e.duration,delay:$e.delay,easing:$e.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let S=this.keyframes,{delay:N,duration:J,easing:_e}=this.timings;if(this._stretchStartingKeyframe&&N){const ve=[],$e=J+N,gt=N/$e,at=Gr(S[0]);at.set("offset",0),ve.push(at);const Ke=Gr(S[0]);Ke.set("offset",bo(gt)),ve.push(Ke);const k=S.length-1;for(let te=1;te<=k;te++){let G=Gr(S[te]);const ge=G.get("offset");G.set("offset",bo((N+ge*J)/$e)),ve.push(G)}J=$e,N=0,_e="",S=ve}return xo(this.element,S,this.preStyleProps,this.postStyleProps,J,N,_e,!0)}}function bo(me,S=3){const N=Math.pow(10,S-1);return Math.round(me*N)/N}class Vs{}const Xr=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class Di extends Vs{normalizePropertyName(S,N){return Vt(S)}normalizeStyleValue(S,N,J,_e){let ve="";const $e=J.toString().trim();if(Xr.has(N)&&0!==J&&"0"!==J)if("number"==typeof J)ve="px";else{const gt=J.match(/^[+-]?[\d\.]+([a-z]*)$/);gt&&0==gt[1].length&&_e.push(function ct(me,S){return new re.vHH(3005,!1)}())}return $e+ve}}function Xs(me,S,N,J,_e,ve,$e,gt,at,Ke,k,te,G){return{type:0,element:me,triggerName:S,isRemovalTransition:_e,fromState:N,fromStyles:ve,toState:J,toStyles:$e,timelines:gt,queriedElements:at,preStyleProps:Ke,postStyleProps:k,totalTime:te,errors:G}}const us={};class kr{constructor(S,N,J){this._triggerName=S,this.ast=N,this._stateStyles=J}match(S,N,J,_e){return function Rs(me,S,N,J,_e){return me.some(ve=>ve(S,N,J,_e))}(this.ast.matchers,S,N,J,_e)}buildStyles(S,N,J){let _e=this._stateStyles.get("*");return void 0!==S&&(_e=this._stateStyles.get(S?.toString())||_e),_e?_e.buildStyles(N,J):new Map}build(S,N,J,_e,ve,$e,gt,at,Ke,k){const te=[],G=this.ast.options&&this.ast.options.params||us,Ve=this.buildStyles(J,gt&&gt.params||us,te),Dt=at&&at.params||us,tn=this.buildStyles(_e,Dt,te),An=new Set,xi=new Map,li=new Map,Ui="void"===_e,yi={params:gs(Dt,G),delay:this.ast.options?.delay},Nr=k?[]:Us(S,N,this.ast.animation,ve,$e,Ve,tn,yi,Ke,te);let Rn=0;if(Nr.forEach(fr=>{Rn=Math.max(fr.duration+fr.delay,Rn)}),te.length)return Xs(N,this._triggerName,J,_e,Ui,Ve,tn,[],[],xi,li,Rn,te);Nr.forEach(fr=>{const ni=fr.element,qn=Nn(xi,ni,new Set);fr.preStyleProps.forEach(Ki=>qn.add(Ki));const hs=Nn(li,ni,new Set);fr.postStyleProps.forEach(Ki=>hs.add(Ki)),ni!==N&&An.add(ni)});const hr=Ar(An.values());return Xs(N,this._triggerName,J,_e,Ui,Ve,tn,Nr,hr,xi,li,Rn)}}function gs(me,S){const N=vi(S);for(const J in me)me.hasOwnProperty(J)&&null!=me[J]&&(N[J]=me[J]);return N}class Js{constructor(S,N,J){this.styles=S,this.defaultParams=N,this.normalizer=J}buildStyles(S,N){const J=new Map,_e=vi(this.defaultParams);return Object.keys(S).forEach(ve=>{const $e=S[ve];null!==$e&&(_e[ve]=$e)}),this.styles.styles.forEach(ve=>{"string"!=typeof ve&&ve.forEach(($e,gt)=>{$e&&($e=ps($e,_e,N));const at=this.normalizer.normalizePropertyName(gt,N);$e=this.normalizer.normalizeStyleValue(gt,at,$e,N),J.set(gt,$e)})}),J}}class Hs{constructor(S,N,J){this.name=S,this.ast=N,this._normalizer=J,this.transitionFactories=[],this.states=new Map,N.states.forEach(_e=>{this.states.set(_e.name,new Js(_e.style,_e.options&&_e.options.params||{},J))}),lo(this.states,"true","1"),lo(this.states,"false","0"),N.transitions.forEach(_e=>{this.transitionFactories.push(new kr(S,_e,this.states))}),this.fallbackTransition=function Ks(me,S,N){return new kr(me,{type:1,animation:{type:2,steps:[],options:null},matchers:[($e,gt)=>!0],options:null,queryCount:0,depCount:0},S)}(S,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(S,N,J,_e){return this.transitionFactories.find($e=>$e.match(S,N,J,_e))||null}matchStyles(S,N,J){return this.fallbackTransition.buildStyles(S,N,J)}}function lo(me,S,N){me.has(S)?me.has(N)||me.set(N,me.get(S)):me.has(N)&&me.set(S,me.get(N))}const Zr=new Li;class eo{constructor(S,N,J){this.bodyNode=S,this._driver=N,this._normalizer=J,this._animations=new Map,this._playersById=new Map,this.players=[]}register(S,N){const J=[],_e=[],ve=Qr(this._driver,N,J,_e);if(J.length)throw function ui(me){return new re.vHH(3503,!1)}();this._animations.set(S,ve)}_buildPlayer(S,N,J){const _e=S.element,ve=Pr(0,this._normalizer,0,S.keyframes,N,J);return this._driver.animate(_e,ve,S.duration,S.delay,S.easing,[],!0)}create(S,N,J={}){const _e=[],ve=this._animations.get(S);let $e;const gt=new Map;if(ve?($e=Us(this._driver,N,ve,qt,St,new Map,new Map,J,Zr,_e),$e.forEach(k=>{const te=Nn(gt,k.element,new Map);k.postStyleProps.forEach(G=>te.set(G,null))})):(_e.push(function Bn(){return new re.vHH(3300,!1)}()),$e=[]),_e.length)throw function Qn(me){return new re.vHH(3504,!1)}();gt.forEach((k,te)=>{k.forEach((G,ge)=>{k.set(ge,this._driver.computeStyle(te,ge,Ae.l3))})});const Ke=Yi($e.map(k=>{const te=gt.get(k.element);return this._buildPlayer(k,new Map,te)}));return this._playersById.set(S,Ke),Ke.onDestroy(()=>this.destroy(S)),this.players.push(Ke),Ke}destroy(S){const N=this._getPlayer(S);N.destroy(),this._playersById.delete(S);const J=this.players.indexOf(N);J>=0&&this.players.splice(J,1)}_getPlayer(S){const N=this._playersById.get(S);if(!N)throw function oi(me){return new re.vHH(3301,!1)}();return N}listen(S,N,J,_e){const ve=On(N,"","","");return Hn(this._getPlayer(S),J,ve,_e),()=>{}}command(S,N,J,_e){if("register"==J)return void this.register(S,_e[0]);if("create"==J)return void this.create(S,N,_e[0]||{});const ve=this._getPlayer(S);switch(J){case"play":ve.play();break;case"pause":ve.pause();break;case"reset":ve.reset();break;case"restart":ve.restart();break;case"finish":ve.finish();break;case"init":ve.init();break;case"setPosition":ve.setPosition(parseFloat(_e[0]));break;case"destroy":this.destroy(S)}}}const co="ng-animate-queued",Vo="ng-animate-disabled",Xi=[],ho={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Kr={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},rr="__ng_removed";class _o{get params(){return this.options.params}constructor(S,N=""){this.namespaceId=N;const J=S&&S.hasOwnProperty("value");if(this.value=function qs(me){return me??null}(J?S.value:S),J){const ve=vi(S);delete ve.value,this.options=ve}else this.options={};this.options.params||(this.options.params={})}absorbOptions(S){const N=S.params;if(N){const J=this.options.params;Object.keys(N).forEach(_e=>{null==J[_e]&&(J[_e]=N[_e])})}}}const Ts="void",Bi=new _o(Ts);class Bo{constructor(S,N,J){this.id=S,this.hostElement=N,this._engine=J,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+S,si(N,this._hostClassName)}listen(S,N,J,_e){if(!this._triggers.has(N))throw function Pi(me,S){return new re.vHH(3302,!1)}();if(null==J||0==J.length)throw function Cr(me){return new re.vHH(3303,!1)}();if(!function Io(me){return"start"==me||"done"==me}(J))throw function ii(me,S){return new re.vHH(3400,!1)}();const ve=Nn(this._elementListeners,S,[]),$e={name:N,phase:J,callback:_e};ve.push($e);const gt=Nn(this._engine.statesByElement,S,new Map);return gt.has(N)||(si(S,Mn),si(S,Mn+"-"+N),gt.set(N,Bi)),()=>{this._engine.afterFlush(()=>{const at=ve.indexOf($e);at>=0&&ve.splice(at,1),this._triggers.has(N)||gt.delete(N)})}}register(S,N){return!this._triggers.has(S)&&(this._triggers.set(S,N),!0)}_getTrigger(S){const N=this._triggers.get(S);if(!N)throw function Ai(me){return new re.vHH(3401,!1)}();return N}trigger(S,N,J,_e=!0){const ve=this._getTrigger(N),$e=new Es(this.id,N,S);let gt=this._engine.statesByElement.get(S);gt||(si(S,Mn),si(S,Mn+"-"+N),this._engine.statesByElement.set(S,gt=new Map));let at=gt.get(N);const Ke=new _o(J,this.id);if(!(J&&J.hasOwnProperty("value"))&&at&&Ke.absorbOptions(at.options),gt.set(N,Ke),at||(at=Bi),Ke.value!==Ts&&at.value===Ke.value){if(!function en(me,S){const N=Object.keys(me),J=Object.keys(S);if(N.length!=J.length)return!1;for(let _e=0;_e<N.length;_e++){const ve=N[_e];if(!S.hasOwnProperty(ve)||me[ve]!==S[ve])return!1}return!0}(at.params,Ke.params)){const Dt=[],tn=ve.matchStyles(at.value,at.params,Dt),An=ve.matchStyles(Ke.value,Ke.params,Dt);Dt.length?this._engine.reportError(Dt):this._engine.afterFlush(()=>{Cs(S,tn),ji(S,An)})}return}const G=Nn(this._engine.playersByElement,S,[]);G.forEach(Dt=>{Dt.namespaceId==this.id&&Dt.triggerName==N&&Dt.queued&&Dt.destroy()});let ge=ve.matchTransition(at.value,Ke.value,S,Ke.params),Ve=!1;if(!ge){if(!_e)return;ge=ve.fallbackTransition,Ve=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:S,triggerName:N,transition:ge,fromState:at,toState:Ke,player:$e,isFallbackTransition:Ve}),Ve||(si(S,co),$e.onStart(()=>{ie(S,co)})),$e.onDone(()=>{let Dt=this.players.indexOf($e);Dt>=0&&this.players.splice(Dt,1);const tn=this._engine.playersByElement.get(S);if(tn){let An=tn.indexOf($e);An>=0&&tn.splice(An,1)}}),this.players.push($e),G.push($e),$e}deregister(S){this._triggers.delete(S),this._engine.statesByElement.forEach(N=>N.delete(S)),this._elementListeners.forEach((N,J)=>{this._elementListeners.set(J,N.filter(_e=>_e.name!=S))})}clearElementCache(S){this._engine.statesByElement.delete(S),this._elementListeners.delete(S);const N=this._engine.playersByElement.get(S);N&&(N.forEach(J=>J.destroy()),this._engine.playersByElement.delete(S))}_signalRemovalForInnerTriggers(S,N){const J=this._engine.driver.query(S,Je,!0);J.forEach(_e=>{if(_e[rr])return;const ve=this._engine.fetchNamespacesByElement(_e);ve.size?ve.forEach($e=>$e.triggerLeaveAnimation(_e,N,!1,!0)):this.clearElementCache(_e)}),this._engine.afterFlushAnimationsDone(()=>J.forEach(_e=>this.clearElementCache(_e)))}triggerLeaveAnimation(S,N,J,_e){const ve=this._engine.statesByElement.get(S),$e=new Map;if(ve){const gt=[];if(ve.forEach((at,Ke)=>{if($e.set(Ke,at.value),this._triggers.has(Ke)){const k=this.trigger(S,Ke,Ts,_e);k&&gt.push(k)}}),gt.length)return this._engine.markElementAsRemoved(this.id,S,!0,N,$e),J&&Yi(gt).onDone(()=>this._engine.processLeaveNode(S)),!0}return!1}prepareLeaveAnimationListeners(S){const N=this._elementListeners.get(S),J=this._engine.statesByElement.get(S);if(N&&J){const _e=new Set;N.forEach(ve=>{const $e=ve.name;if(_e.has($e))return;_e.add($e);const at=this._triggers.get($e).fallbackTransition,Ke=J.get($e)||Bi,k=new _o(Ts),te=new Es(this.id,$e,S);this._engine.totalQueuedPlayers++,this._queue.push({element:S,triggerName:$e,transition:at,fromState:Ke,toState:k,player:te,isFallbackTransition:!0})})}}removeNode(S,N){const J=this._engine;if(S.childElementCount&&this._signalRemovalForInnerTriggers(S,N),this.triggerLeaveAnimation(S,N,!0))return;let _e=!1;if(J.totalAnimations){const ve=J.players.length?J.playersByQueriedElement.get(S):[];if(ve&&ve.length)_e=!0;else{let $e=S;for(;$e=$e.parentNode;)if(J.statesByElement.get($e)){_e=!0;break}}}if(this.prepareLeaveAnimationListeners(S),_e)J.markElementAsRemoved(this.id,S,!1,N);else{const ve=S[rr];(!ve||ve===ho)&&(J.afterFlush(()=>this.clearElementCache(S)),J.destroyInnerAnimations(S),J._onRemovalComplete(S,N))}}insertNode(S,N){si(S,this._hostClassName)}drainQueuedTransitions(S){const N=[];return this._queue.forEach(J=>{const _e=J.player;if(_e.destroyed)return;const ve=J.element,$e=this._elementListeners.get(ve);$e&&$e.forEach(gt=>{if(gt.name==J.triggerName){const at=On(ve,J.triggerName,J.fromState.value,J.toState.value);at._data=S,Hn(J.player,gt.phase,at,gt.callback)}}),_e.markedForDestroy?this._engine.afterFlush(()=>{_e.destroy()}):N.push(J)}),this._queue=[],N.sort((J,_e)=>{const ve=J.transition.ast.depCount,$e=_e.transition.ast.depCount;return 0==ve||0==$e?ve-$e:this._engine.driver.containsElement(J.element,_e.element)?1:-1})}destroy(S){this.players.forEach(N=>N.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,S)}elementContainsData(S){let N=!1;return this._elementListeners.has(S)&&(N=!0),N=!!this._queue.find(J=>J.element===S)||N,N}}class Mr{_onRemovalComplete(S,N){this.onRemovalComplete(S,N)}constructor(S,N,J){this.bodyNode=S,this.driver=N,this._normalizer=J,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(_e,ve)=>{}}get queuedPlayers(){const S=[];return this._namespaceList.forEach(N=>{N.players.forEach(J=>{J.queued&&S.push(J)})}),S}createNamespace(S,N){const J=new Bo(S,N,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,N)?this._balanceNamespaceList(J,N):(this.newHostElements.set(N,J),this.collectEnterElement(N)),this._namespaceLookup[S]=J}_balanceNamespaceList(S,N){const J=this._namespaceList,_e=this.namespacesByHostElement;if(J.length-1>=0){let $e=!1,gt=this.driver.getParentElement(N);for(;gt;){const at=_e.get(gt);if(at){const Ke=J.indexOf(at);J.splice(Ke+1,0,S),$e=!0;break}gt=this.driver.getParentElement(gt)}$e||J.unshift(S)}else J.push(S);return _e.set(N,S),S}register(S,N){let J=this._namespaceLookup[S];return J||(J=this.createNamespace(S,N)),J}registerTrigger(S,N,J){let _e=this._namespaceLookup[S];_e&&_e.register(N,J)&&this.totalAnimations++}destroy(S,N){if(!S)return;const J=this._fetchNamespace(S);this.afterFlush(()=>{this.namespacesByHostElement.delete(J.hostElement),delete this._namespaceLookup[S];const _e=this._namespaceList.indexOf(J);_e>=0&&this._namespaceList.splice(_e,1)}),this.afterFlushAnimationsDone(()=>J.destroy(N))}_fetchNamespace(S){return this._namespaceLookup[S]}fetchNamespacesByElement(S){const N=new Set,J=this.statesByElement.get(S);if(J)for(let _e of J.values())if(_e.namespaceId){const ve=this._fetchNamespace(_e.namespaceId);ve&&N.add(ve)}return N}trigger(S,N,J,_e){if(Jr(N)){const ve=this._fetchNamespace(S);if(ve)return ve.trigger(N,J,_e),!0}return!1}insertNode(S,N,J,_e){if(!Jr(N))return;const ve=N[rr];if(ve&&ve.setForRemoval){ve.setForRemoval=!1,ve.setForMove=!0;const $e=this.collectedLeaveElements.indexOf(N);$e>=0&&this.collectedLeaveElements.splice($e,1)}if(S){const $e=this._fetchNamespace(S);$e&&$e.insertNode(N,J)}_e&&this.collectEnterElement(N)}collectEnterElement(S){this.collectedEnterElements.push(S)}markElementAsDisabled(S,N){N?this.disabledNodes.has(S)||(this.disabledNodes.add(S),si(S,Vo)):this.disabledNodes.has(S)&&(this.disabledNodes.delete(S),ie(S,Vo))}removeNode(S,N,J,_e){if(Jr(N)){const ve=S?this._fetchNamespace(S):null;if(ve?ve.removeNode(N,_e):this.markElementAsRemoved(S,N,!1,_e),J){const $e=this.namespacesByHostElement.get(N);$e&&$e.id!==S&&$e.removeNode(N,_e)}}else this._onRemovalComplete(N,_e)}markElementAsRemoved(S,N,J,_e,ve){this.collectedLeaveElements.push(N),N[rr]={namespaceId:S,setForRemoval:_e,hasAnimation:J,removedBeforeQueried:!1,previousTriggersValues:ve}}listen(S,N,J,_e,ve){return Jr(N)?this._fetchNamespace(S).listen(N,J,_e,ve):()=>{}}_buildInstruction(S,N,J,_e,ve){return S.transition.build(this.driver,S.element,S.fromState.value,S.toState.value,J,_e,S.fromState.options,S.toState.options,N,ve)}destroyInnerAnimations(S){let N=this.driver.query(S,Je,!0);N.forEach(J=>this.destroyActiveAnimationsForElement(J)),0!=this.playersByQueriedElement.size&&(N=this.driver.query(S,Fe,!0),N.forEach(J=>this.finishActiveQueriedAnimationOnElement(J)))}destroyActiveAnimationsForElement(S){const N=this.playersByElement.get(S);N&&N.forEach(J=>{J.queued?J.markedForDestroy=!0:J.destroy()})}finishActiveQueriedAnimationOnElement(S){const N=this.playersByQueriedElement.get(S);N&&N.forEach(J=>J.finish())}whenRenderingDone(){return new Promise(S=>{if(this.players.length)return Yi(this.players).onDone(()=>S());S()})}processLeaveNode(S){const N=S[rr];if(N&&N.setForRemoval){if(S[rr]=ho,N.namespaceId){this.destroyInnerAnimations(S);const J=this._fetchNamespace(N.namespaceId);J&&J.clearElementCache(S)}this._onRemovalComplete(S,N.setForRemoval)}S.classList?.contains(Vo)&&this.markElementAsDisabled(S,!1),this.driver.query(S,".ng-animate-disabled",!0).forEach(J=>{this.markElementAsDisabled(J,!1)})}flush(S=-1){let N=[];if(this.newHostElements.size&&(this.newHostElements.forEach((J,_e)=>this._balanceNamespaceList(J,_e)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let J=0;J<this.collectedEnterElements.length;J++)si(this.collectedEnterElements[J],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const J=[];try{N=this._flushAnimations(J,S)}finally{for(let _e=0;_e<J.length;_e++)J[_e]()}}else for(let J=0;J<this.collectedLeaveElements.length;J++)this.processLeaveNode(this.collectedLeaveElements[J]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(J=>J()),this._flushFns=[],this._whenQuietFns.length){const J=this._whenQuietFns;this._whenQuietFns=[],N.length?Yi(N).onDone(()=>{J.forEach(_e=>_e())}):J.forEach(_e=>_e())}}reportError(S){throw function zn(me){return new re.vHH(3402,!1)}()}_flushAnimations(S,N){const J=new Li,_e=[],ve=new Map,$e=[],gt=new Map,at=new Map,Ke=new Map,k=new Set;this.disabledNodes.forEach(Jt=>{k.add(Jt);const pi=this.driver.query(Jt,".ng-animate-queued",!0);for(let ci=0;ci<pi.length;ci++)k.add(pi[ci])});const te=this.bodyNode,G=Array.from(this.statesByElement.keys()),ge=_s(G,this.collectedEnterElements),Ve=new Map;let Dt=0;ge.forEach((Jt,pi)=>{const ci=qt+Dt++;Ve.set(pi,ci),Jt.forEach(pr=>si(pr,ci))});const tn=[],An=new Set,xi=new Set;for(let Jt=0;Jt<this.collectedLeaveElements.length;Jt++){const pi=this.collectedLeaveElements[Jt],ci=pi[rr];ci&&ci.setForRemoval&&(tn.push(pi),An.add(pi),ci.hasAnimation?this.driver.query(pi,".ng-star-inserted",!0).forEach(pr=>An.add(pr)):xi.add(pi))}const li=new Map,Ui=_s(G,Array.from(An));Ui.forEach((Jt,pi)=>{const ci=St+Dt++;li.set(pi,ci),Jt.forEach(pr=>si(pr,ci))}),S.push(()=>{ge.forEach((Jt,pi)=>{const ci=Ve.get(pi);Jt.forEach(pr=>ie(pr,ci))}),Ui.forEach((Jt,pi)=>{const ci=li.get(pi);Jt.forEach(pr=>ie(pr,ci))}),tn.forEach(Jt=>{this.processLeaveNode(Jt)})});const yi=[],Nr=[];for(let Jt=this._namespaceList.length-1;Jt>=0;Jt--)this._namespaceList[Jt].drainQueuedTransitions(N).forEach(ci=>{const pr=ci.player,fs=ci.element;if(yi.push(pr),this.collectedEnterElements.length){const mr=fs[rr];if(mr&&mr.setForMove){if(mr.previousTriggersValues&&mr.previousTriggersValues.has(ci.triggerName)){const po=mr.previousTriggersValues.get(ci.triggerName),io=this.statesByElement.get(ci.element);if(io&&io.has(ci.triggerName)){const ua=io.get(ci.triggerName);ua.value=po,io.set(ci.triggerName,ua)}}return void pr.destroy()}}const ks=!te||!this.driver.containsElement(te,fs),Ns=li.get(fs),ys=Ve.get(fs),Fr=this._buildInstruction(ci,J,ys,Ns,ks);if(Fr.errors&&Fr.errors.length)return void Nr.push(Fr);if(ks)return pr.onStart(()=>Cs(fs,Fr.fromStyles)),pr.onDestroy(()=>ji(fs,Fr.toStyles)),void _e.push(pr);if(ci.isFallbackTransition)return pr.onStart(()=>Cs(fs,Fr.fromStyles)),pr.onDestroy(()=>ji(fs,Fr.toStyles)),void _e.push(pr);const Jo=[];Fr.timelines.forEach(mr=>{mr.stretchStartingKeyframe=!0,this.disabledNodes.has(mr.element)||Jo.push(mr)}),Fr.timelines=Jo,J.append(fs,Fr.timelines),$e.push({instruction:Fr,player:pr,element:fs}),Fr.queriedElements.forEach(mr=>Nn(gt,mr,[]).push(pr)),Fr.preStyleProps.forEach((mr,po)=>{if(mr.size){let io=at.get(po);io||at.set(po,io=new Set),mr.forEach((ua,Fo)=>io.add(Fo))}}),Fr.postStyleProps.forEach((mr,po)=>{let io=Ke.get(po);io||Ke.set(po,io=new Set),mr.forEach((ua,Fo)=>io.add(Fo))})});if(Nr.length){const Jt=[];Nr.forEach(pi=>{Jt.push(function Tn(me,S){return new re.vHH(3505,!1)}())}),yi.forEach(pi=>pi.destroy()),this.reportError(Jt)}const Rn=new Map,hr=new Map;$e.forEach(Jt=>{const pi=Jt.element;J.has(pi)&&(hr.set(pi,pi),this._beforeAnimationBuild(Jt.player.namespaceId,Jt.instruction,Rn))}),_e.forEach(Jt=>{const pi=Jt.element;this._getPreviousPlayers(pi,!1,Jt.namespaceId,Jt.triggerName,null).forEach(pr=>{Nn(Rn,pi,[]).push(pr),pr.destroy()})});const fr=tn.filter(Jt=>ti(Jt,at,Ke)),ni=new Map;fo(ni,this.driver,xi,Ke,Ae.l3).forEach(Jt=>{ti(Jt,at,Ke)&&fr.push(Jt)});const hs=new Map;ge.forEach((Jt,pi)=>{fo(hs,this.driver,new Set(Jt),at,Ae.k1)}),fr.forEach(Jt=>{const pi=ni.get(Jt),ci=hs.get(Jt);ni.set(Jt,new Map([...Array.from(pi?.entries()??[]),...Array.from(ci?.entries()??[])]))});const Ki=[],Po=[],ts={};$e.forEach(Jt=>{const{element:pi,player:ci,instruction:pr}=Jt;if(J.has(pi)){if(k.has(pi))return ci.onDestroy(()=>ji(pi,pr.toStyles)),ci.disabled=!0,ci.overrideTotalTime(pr.totalTime),void _e.push(ci);let fs=ts;if(hr.size>1){let Ns=pi;const ys=[];for(;Ns=Ns.parentNode;){const Fr=hr.get(Ns);if(Fr){fs=Fr;break}ys.push(Ns)}ys.forEach(Fr=>hr.set(Fr,fs))}const ks=this._buildAnimation(ci.namespaceId,pr,Rn,ve,hs,ni);if(ci.setRealPlayer(ks),fs===ts)Ki.push(ci);else{const Ns=this.playersByElement.get(fs);Ns&&Ns.length&&(ci.parentPlayer=Yi(Ns)),_e.push(ci)}}else Cs(pi,pr.fromStyles),ci.onDestroy(()=>ji(pi,pr.toStyles)),Po.push(ci),k.has(pi)&&_e.push(ci)}),Po.forEach(Jt=>{const pi=ve.get(Jt.element);if(pi&&pi.length){const ci=Yi(pi);Jt.setRealPlayer(ci)}}),_e.forEach(Jt=>{Jt.parentPlayer?Jt.syncPlayerEvents(Jt.parentPlayer):Jt.destroy()});for(let Jt=0;Jt<tn.length;Jt++){const pi=tn[Jt],ci=pi[rr];if(ie(pi,St),ci&&ci.hasAnimation)continue;let pr=[];if(gt.size){let ks=gt.get(pi);ks&&ks.length&&pr.push(...ks);let Ns=this.driver.query(pi,Fe,!0);for(let ys=0;ys<Ns.length;ys++){let Fr=gt.get(Ns[ys]);Fr&&Fr.length&&pr.push(...Fr)}}const fs=pr.filter(ks=>!ks.destroyed);fs.length?ee(this,pi,fs):this.processLeaveNode(pi)}return tn.length=0,Ki.forEach(Jt=>{this.players.push(Jt),Jt.onDone(()=>{Jt.destroy();const pi=this.players.indexOf(Jt);this.players.splice(pi,1)}),Jt.play()}),Ki}elementContainsData(S,N){let J=!1;const _e=N[rr];return _e&&_e.setForRemoval&&(J=!0),this.playersByElement.has(N)&&(J=!0),this.playersByQueriedElement.has(N)&&(J=!0),this.statesByElement.has(N)&&(J=!0),this._fetchNamespace(S).elementContainsData(N)||J}afterFlush(S){this._flushFns.push(S)}afterFlushAnimationsDone(S){this._whenQuietFns.push(S)}_getPreviousPlayers(S,N,J,_e,ve){let $e=[];if(N){const gt=this.playersByQueriedElement.get(S);gt&&($e=gt)}else{const gt=this.playersByElement.get(S);if(gt){const at=!ve||ve==Ts;gt.forEach(Ke=>{Ke.queued||!at&&Ke.triggerName!=_e||$e.push(Ke)})}}return(J||_e)&&($e=$e.filter(gt=>!(J&&J!=gt.namespaceId||_e&&_e!=gt.triggerName))),$e}_beforeAnimationBuild(S,N,J){const ve=N.element,$e=N.isRemovalTransition?void 0:S,gt=N.isRemovalTransition?void 0:N.triggerName;for(const at of N.timelines){const Ke=at.element,k=Ke!==ve,te=Nn(J,Ke,[]);this._getPreviousPlayers(Ke,k,$e,gt,N.toState).forEach(ge=>{const Ve=ge.getRealPlayer();Ve.beforeDestroy&&Ve.beforeDestroy(),ge.destroy(),te.push(ge)})}Cs(ve,N.fromStyles)}_buildAnimation(S,N,J,_e,ve,$e){const gt=N.triggerName,at=N.element,Ke=[],k=new Set,te=new Set,G=N.timelines.map(Ve=>{const Dt=Ve.element;k.add(Dt);const tn=Dt[rr];if(tn&&tn.removedBeforeQueried)return new Ae.ZN(Ve.duration,Ve.delay);const An=Dt!==at,xi=function Q(me){const S=[];return De(me,S),S}((J.get(Dt)||Xi).map(Rn=>Rn.getRealPlayer())).filter(Rn=>!!Rn.element&&Rn.element===Dt),li=ve.get(Dt),Ui=$e.get(Dt),yi=Pr(0,this._normalizer,0,Ve.keyframes,li,Ui),Nr=this._buildPlayer(Ve,yi,xi);if(Ve.subTimeline&&_e&&te.add(Dt),An){const Rn=new Es(S,gt,Dt);Rn.setRealPlayer(Nr),Ke.push(Rn)}return Nr});Ke.forEach(Ve=>{Nn(this.playersByQueriedElement,Ve.element,[]).push(Ve),Ve.onDone(()=>function Yr(me,S,N){let J=me.get(S);if(J){if(J.length){const _e=J.indexOf(N);J.splice(_e,1)}0==J.length&&me.delete(S)}return J}(this.playersByQueriedElement,Ve.element,Ve))}),k.forEach(Ve=>si(Ve,ot));const ge=Yi(G);return ge.onDestroy(()=>{k.forEach(Ve=>ie(Ve,ot)),ji(at,N.toStyles)}),te.forEach(Ve=>{Nn(_e,Ve,[]).push(ge)}),ge}_buildPlayer(S,N,J){return N.length>0?this.driver.animate(S.element,N,S.duration,S.delay,S.easing,J):new Ae.ZN(S.duration,S.delay)}}class Es{constructor(S,N,J){this.namespaceId=S,this.triggerName=N,this.element=J,this._player=new Ae.ZN,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(S){this._containsRealPlayer||(this._player=S,this._queuedCallbacks.forEach((N,J)=>{N.forEach(_e=>Hn(S,J,void 0,_e))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(S.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(S){this.totalTime=S}syncPlayerEvents(S){const N=this._player;N.triggerCallback&&S.onStart(()=>N.triggerCallback("start")),S.onDone(()=>this.finish()),S.onDestroy(()=>this.destroy())}_queueEvent(S,N){Nn(this._queuedCallbacks,S,[]).push(N)}onDone(S){this.queued&&this._queueEvent("done",S),this._player.onDone(S)}onStart(S){this.queued&&this._queueEvent("start",S),this._player.onStart(S)}onDestroy(S){this.queued&&this._queueEvent("destroy",S),this._player.onDestroy(S)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(S){this.queued||this._player.setPosition(S)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(S){const N=this._player;N.triggerCallback&&N.triggerCallback(S)}}function Jr(me){return me&&1===me.nodeType}function ai(me,S){const N=me.style.display;return me.style.display=S??"none",N}function fo(me,S,N,J,_e){const ve=[];N.forEach(at=>ve.push(ai(at)));const $e=[];J.forEach((at,Ke)=>{const k=new Map;at.forEach(te=>{const G=S.computeStyle(Ke,te,_e);k.set(te,G),(!G||0==G.length)&&(Ke[rr]=Kr,$e.push(Ke))}),me.set(Ke,k)});let gt=0;return N.forEach(at=>ai(at,ve[gt++])),$e}function _s(me,S){const N=new Map;if(me.forEach(gt=>N.set(gt,[])),0==S.length)return N;const J=1,_e=new Set(S),ve=new Map;function $e(gt){if(!gt)return J;let at=ve.get(gt);if(at)return at;const Ke=gt.parentNode;return at=N.has(Ke)?Ke:_e.has(Ke)?J:$e(Ke),ve.set(gt,at),at}return S.forEach(gt=>{const at=$e(gt);at!==J&&N.get(at).push(gt)}),N}function si(me,S){me.classList?.add(S)}function ie(me,S){me.classList?.remove(S)}function ee(me,S,N){Yi(N).onDone(()=>me.processLeaveNode(S))}function De(me,S){for(let N=0;N<me.length;N++){const J=me[N];J instanceof Ae.ZE?De(J.players,S):S.push(J)}}function ti(me,S,N){const J=N.get(me);if(!J)return!1;let _e=S.get(me);return _e?J.forEach(ve=>_e.add(ve)):S.set(me,J),N.delete(me),!0}class Br{constructor(S,N,J){this.bodyNode=S,this._driver=N,this._normalizer=J,this._triggerCache={},this.onRemovalComplete=(_e,ve)=>{},this._transitionEngine=new Mr(S,N,J),this._timelineEngine=new eo(S,N,J),this._transitionEngine.onRemovalComplete=(_e,ve)=>this.onRemovalComplete(_e,ve)}registerTrigger(S,N,J,_e,ve){const $e=S+"-"+_e;let gt=this._triggerCache[$e];if(!gt){const at=[],Ke=[],k=Qr(this._driver,ve,at,Ke);if(at.length)throw function bn(me,S){return new re.vHH(3404,!1)}();gt=function Bs(me,S,N){return new Hs(me,S,N)}(_e,k,this._normalizer),this._triggerCache[$e]=gt}this._transitionEngine.registerTrigger(N,_e,gt)}register(S,N){this._transitionEngine.register(S,N)}destroy(S,N){this._transitionEngine.destroy(S,N)}onInsert(S,N,J,_e){this._transitionEngine.insertNode(S,N,J,_e)}onRemove(S,N,J,_e){this._transitionEngine.removeNode(S,N,_e||!1,J)}disableAnimations(S,N){this._transitionEngine.markElementAsDisabled(S,N)}process(S,N,J,_e){if("@"==J.charAt(0)){const[ve,$e]=Ni(J);this._timelineEngine.command(ve,N,$e,_e)}else this._transitionEngine.trigger(S,N,J,_e)}listen(S,N,J,_e,ve){if("@"==J.charAt(0)){const[$e,gt]=Ni(J);return this._timelineEngine.listen($e,N,gt,ve)}return this._transitionEngine.listen(S,N,J,_e,ve)}flush(S=-1){this._transitionEngine.flush(S)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let pn=(()=>{class me{constructor(N,J,_e){this._element=N,this._startStyles=J,this._endStyles=_e,this._state=0;let ve=me.initialStylesByElement.get(N);ve||me.initialStylesByElement.set(N,ve=new Map),this._initialStyles=ve}start(){this._state<1&&(this._startStyles&&ji(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(ji(this._element,this._initialStyles),this._endStyles&&(ji(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(me.initialStylesByElement.delete(this._element),this._startStyles&&(Cs(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Cs(this._element,this._endStyles),this._endStyles=null),ji(this._element,this._initialStyles),this._state=3)}}return me.initialStylesByElement=new WeakMap,me})();function Si(me){let S=null;return me.forEach((N,J)=>{(function Zo(me){return"display"===me||"position"===me})(J)&&(S=S||new Map,S.set(J,N))}),S}class ma{constructor(S,N,J,_e){this.element=S,this.keyframes=N,this.options=J,this._specialStyles=_e,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=J.duration,this._delay=J.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(S=>S()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const S=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,S,this.options),this._finalKeyframe=S.length?S[S.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(S){const N=[];return S.forEach(J=>{N.push(Object.fromEntries(J))}),N}_triggerWebAnimation(S,N,J){return S.animate(this._convertKeyframesToObject(N),J)}onStart(S){this._originalOnStartFns.push(S),this._onStartFns.push(S)}onDone(S){this._originalOnDoneFns.push(S),this._onDoneFns.push(S)}onDestroy(S){this._onDestroyFns.push(S)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(S=>S()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(S=>S()),this._onDestroyFns=[])}setPosition(S){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=S*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const S=new Map;this.hasStarted()&&this._finalKeyframe.forEach((J,_e)=>{"offset"!==_e&&S.set(_e,this._finished?J:Kt(this.element,_e))}),this.currentSnapshot=S}triggerCallback(S){const N="start"===S?this._onStartFns:this._onDoneFns;N.forEach(J=>J()),N.length=0}}class es{validateStyleProperty(S){return!0}validateAnimatableStyleProperty(S){return!0}matchesElement(S,N){return!1}containsElement(S,N){return ne(S,N)}getParentElement(S){return er(S)}query(S,N,J){return de(S,N,J)}computeStyle(S,N,J){return window.getComputedStyle(S)[N]}animate(S,N,J,_e,ve,$e=[]){const at={duration:J,delay:_e,fill:0==_e?"both":"forwards"};ve&&(at.easing=ve);const Ke=new Map,k=$e.filter(ge=>ge instanceof ma);(function Pe(me,S){return 0===me||0===S})(J,_e)&&k.forEach(ge=>{ge.currentSnapshot.forEach((Ve,Dt)=>Ke.set(Dt,Ve))});let te=function vs(me){return me.length?me[0]instanceof Map?me:me.map(S=>yr(S)):[]}(N).map(ge=>Gr(ge));te=function Ge(me,S,N){if(N.size&&S.length){let J=S[0],_e=[];if(N.forEach((ve,$e)=>{J.has($e)||_e.push($e),J.set($e,ve)}),_e.length)for(let ve=1;ve<S.length;ve++){let $e=S[ve];_e.forEach(gt=>$e.set(gt,Kt(me,gt)))}}return S}(S,te,Ke);const G=function tr(me,S){let N=null,J=null;return Array.isArray(S)&&S.length?(N=Si(S[0]),S.length>1&&(J=Si(S[S.length-1]))):S instanceof Map&&(N=Si(S)),N||J?new pn(me,N,J):null}(S,te);return new ma(S,te,at,G)}}var ga=L(6895);let aa=(()=>{class me extends Ae._j{constructor(N,J){super(),this._nextAnimationId=0,this._renderer=N.createRenderer(J.body,{id:"0",encapsulation:re.ifc.None,styles:[],data:{animation:[]}})}build(N){const J=this._nextAnimationId.toString();this._nextAnimationId++;const _e=Array.isArray(N)?(0,Ae.vP)(N):N;return Yo(this._renderer,null,J,"register",[_e]),new to(J,this._renderer)}}return me.\u0275fac=function(N){return new(N||me)(re.LFG(re.FYo),re.LFG(ga.K0))},me.\u0275prov=re.Yz7({token:me,factory:me.\u0275fac}),me})();class to extends Ae.LC{constructor(S,N){super(),this._id=S,this._renderer=N}create(S,N){return new _a(this._id,S,N||{},this._renderer)}}class _a{constructor(S,N,J,_e){this.id=S,this.element=N,this._renderer=_e,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",J)}_listen(S,N){return this._renderer.listen(this.element,`@@${this.id}:${S}`,N)}_command(S,...N){return Yo(this._renderer,this.element,this.id,S,N)}onDone(S){this._listen("done",S)}onStart(S){this._listen("start",S)}onDestroy(S){this._listen("destroy",S)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(S){this._command("setPosition",S)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function Yo(me,S,N,J,_e){return me.setProperty(S,`@@${N}:${J}`,_e)}const la="@.disabled";let ca=(()=>{class me{constructor(N,J,_e){this.delegate=N,this.engine=J,this._zone=_e,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),J.onRemovalComplete=(ve,$e)=>{const gt=$e?.parentNode(ve);gt&&$e.removeChild(gt,ve)}}createRenderer(N,J){const ve=this.delegate.createRenderer(N,J);if(!(N&&J&&J.data&&J.data.animation)){let k=this._rendererCache.get(ve);return k||(k=new Rr("",ve,this.engine,()=>this._rendererCache.delete(ve)),this._rendererCache.set(ve,k)),k}const $e=J.id,gt=J.id+"-"+this._currentId;this._currentId++,this.engine.register(gt,N);const at=k=>{Array.isArray(k)?k.forEach(at):this.engine.registerTrigger($e,gt,N,k.name,k)};return J.data.animation.forEach(at),new Os(this,gt,ve,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(N,J,_e){N>=0&&N<this._microtaskId?this._zone.run(()=>J(_e)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(ve=>{const[$e,gt]=ve;$e(gt)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([J,_e]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return me.\u0275fac=function(N){return new(N||me)(re.LFG(re.FYo),re.LFG(Br),re.LFG(re.R0b))},me.\u0275prov=re.Yz7({token:me,factory:me.\u0275fac}),me})();class Rr{constructor(S,N,J,_e){this.namespaceId=S,this.delegate=N,this.engine=J,this._onDestroy=_e,this.destroyNode=this.delegate.destroyNode?ve=>N.destroyNode(ve):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy(),this._onDestroy?.()}createElement(S,N){return this.delegate.createElement(S,N)}createComment(S){return this.delegate.createComment(S)}createText(S){return this.delegate.createText(S)}appendChild(S,N){this.delegate.appendChild(S,N),this.engine.onInsert(this.namespaceId,N,S,!1)}insertBefore(S,N,J,_e=!0){this.delegate.insertBefore(S,N,J),this.engine.onInsert(this.namespaceId,N,S,_e)}removeChild(S,N,J){this.engine.onRemove(this.namespaceId,N,this.delegate,J)}selectRootElement(S,N){return this.delegate.selectRootElement(S,N)}parentNode(S){return this.delegate.parentNode(S)}nextSibling(S){return this.delegate.nextSibling(S)}setAttribute(S,N,J,_e){this.delegate.setAttribute(S,N,J,_e)}removeAttribute(S,N,J){this.delegate.removeAttribute(S,N,J)}addClass(S,N){this.delegate.addClass(S,N)}removeClass(S,N){this.delegate.removeClass(S,N)}setStyle(S,N,J,_e){this.delegate.setStyle(S,N,J,_e)}removeStyle(S,N,J){this.delegate.removeStyle(S,N,J)}setProperty(S,N,J){"@"==N.charAt(0)&&N==la?this.disableAnimations(S,!!J):this.delegate.setProperty(S,N,J)}setValue(S,N){this.delegate.setValue(S,N)}listen(S,N,J){return this.delegate.listen(S,N,J)}disableAnimations(S,N){this.engine.disableAnimations(S,N)}}class Os extends Rr{constructor(S,N,J,_e,ve){super(N,J,_e,ve),this.factory=S,this.namespaceId=N}setProperty(S,N,J){"@"==N.charAt(0)?"."==N.charAt(1)&&N==la?this.disableAnimations(S,J=void 0===J||!!J):this.engine.process(this.namespaceId,S,N.slice(1),J):this.delegate.setProperty(S,N,J)}listen(S,N,J){if("@"==N.charAt(0)){const _e=function No(me){switch(me){case"body":return document.body;case"document":return document;case"window":return window;default:return me}}(S);let ve=N.slice(1),$e="";return"@"!=ve.charAt(0)&&([ve,$e]=function Ho(me){const S=me.indexOf(".");return[me.substring(0,S),me.slice(S+1)]}(ve)),this.engine.listen(this.namespaceId,_e,ve,$e,gt=>{this.factory.scheduleListenerCallback(gt._data||-1,J,gt)})}return this.delegate.listen(S,N,J)}}const ya=[{provide:Ae._j,useClass:aa},{provide:Vs,useFactory:function Co(){return new Di}},{provide:Br,useClass:(()=>{class me extends Br{constructor(N,J,_e,ve){super(N.body,J,_e)}ngOnDestroy(){this.flush()}}return me.\u0275fac=function(N){return new(N||me)(re.LFG(ga.K0),re.LFG(Nt),re.LFG(Vs),re.LFG(re.z2F))},me.\u0275prov=re.Yz7({token:me,factory:me.\u0275fac}),me})()},{provide:re.FYo,useFactory:function Zs(me,S,N){return new ca(me,S,N)},deps:[f.se,Br,re.R0b]}],jo=[{provide:Nt,useFactory:()=>new es},{provide:re.QbO,useValue:"BrowserAnimations"},...ya],To=[{provide:Nt,useClass:rt},{provide:re.QbO,useValue:"NoopAnimations"},...ya];let Qo=(()=>{class me{static withConfig(N){return{ngModule:me,providers:N.disableAnimations?To:jo}}}return me.\u0275fac=function(N){return new(N||me)},me.\u0275mod=re.oAB({type:me}),me.\u0275inj=re.cJS({providers:jo,imports:[f.b2]}),me})();var ds=L(926),Ua=L(9598),za=L(3659),$a=L(2289),Xo=L(9998),il=L(1205),ls=L(4995),$o=L(1584);const Do=[{path:"",redirectTo:"auth/phone",pathMatch:"full"},{path:"chat",loadChildren:()=>Promise.resolve().then(L.bind(L,3862)).then(me=>me.MessengerModule)},{path:"auth",loadChildren:()=>Promise.resolve().then(L.bind(L,1648)).then(me=>me.AuthModule)}];let no=(()=>{class me{}return me.\u0275fac=function(N){return new(N||me)},me.\u0275mod=re.oAB({type:me,bootstrap:[ke]}),me.\u0275inj=re.cJS({providers:[It.M,Mt.I,ds.C,Ua.Q,za.O,Xo.w,ls.J,$o.e],imports:[Te.Bz.forRoot(Do),f.b2,(0,Me.Cm)(()=>(0,Me.ad)()),Ne.hO.initializeApp(pe_firebase),yt.JS,il.ww,(0,He.hX)(()=>(0,He.ZF)(pe_firebase)),pt.AuthModule,_.u5,_.UX,Lt.Ps,an.MessengerModule,Qo,$a.xu]}),me})();f.q6().bootstrapModule(no).catch(me=>console.error(me))},1135:(wn,dt,L)=>{L.d(dt,{X:()=>_});var f=L(7579);class _ extends f.x{constructor(Te){super(),this._value=Te}get value(){return this.getValue()}_subscribe(Te){const ke=super._subscribe(Te);return!ke.closed&&Te.next(this._value),ke}getValue(){const{hasError:Te,thrownError:ke,_value:He}=this;if(Te)throw ke;return this._throwIfClosed(),He}next(Te){super.next(this._value=Te)}}},9751:(wn,dt,L)=>{L.d(dt,{y:()=>xe});var f=L(930),_=L(727),re=L(8822),Te=L(9635),ke=L(2416),He=L(576),Ze=L(2806);let xe=(()=>{class Ne{constructor(pt){pt&&(this._subscribe=pt)}lift(pt){const Lt=new Ne;return Lt.source=this,Lt.operator=pt,Lt}subscribe(pt,Lt,an){const It=function Me(Ne){return Ne&&Ne instanceof f.Lv||function pe(Ne){return Ne&&(0,He.m)(Ne.next)&&(0,He.m)(Ne.error)&&(0,He.m)(Ne.complete)}(Ne)&&(0,_.Nn)(Ne)}(pt)?pt:new f.Hp(pt,Lt,an);return(0,Ze.x)(()=>{const{operator:Mt,source:Ae}=this;It.add(Mt?Mt.call(It,Ae):Ae?this._subscribe(It):this._trySubscribe(It))}),It}_trySubscribe(pt){try{return this._subscribe(pt)}catch(Lt){pt.error(Lt)}}forEach(pt,Lt){return new(Lt=ze(Lt))((an,It)=>{const Mt=new f.Hp({next:Ae=>{try{pt(Ae)}catch(_t){It(_t),Mt.unsubscribe()}},error:It,complete:an});this.subscribe(Mt)})}_subscribe(pt){var Lt;return null===(Lt=this.source)||void 0===Lt?void 0:Lt.subscribe(pt)}[re.L](){return this}pipe(...pt){return(0,Te.U)(pt)(this)}toPromise(pt){return new(pt=ze(pt))((Lt,an)=>{let It;this.subscribe(Mt=>It=Mt,Mt=>an(Mt),()=>Lt(It))})}}return Ne.create=yt=>new Ne(yt),Ne})();function ze(Ne){var yt;return null!==(yt=Ne??ke.v.Promise)&&void 0!==yt?yt:Promise}},7579:(wn,dt,L)=>{L.d(dt,{x:()=>Ze});var f=L(9751),_=L(727);const Te=(0,L(3888).d)(ze=>function(){ze(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ke=L(8737),He=L(2806);let Ze=(()=>{class ze extends f.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(Me){const Ne=new xe(this,this);return Ne.operator=Me,Ne}_throwIfClosed(){if(this.closed)throw new Te}next(Me){(0,He.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Ne of this.currentObservers)Ne.next(Me)}})}error(Me){(0,He.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=Me;const{observers:Ne}=this;for(;Ne.length;)Ne.shift().error(Me)}})}complete(){(0,He.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:Me}=this;for(;Me.length;)Me.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var Me;return(null===(Me=this.observers)||void 0===Me?void 0:Me.length)>0}_trySubscribe(Me){return this._throwIfClosed(),super._trySubscribe(Me)}_subscribe(Me){return this._throwIfClosed(),this._checkFinalizedStatuses(Me),this._innerSubscribe(Me)}_innerSubscribe(Me){const{hasError:Ne,isStopped:yt,observers:pt}=this;return Ne||yt?_.Lc:(this.currentObservers=null,pt.push(Me),new _.w0(()=>{this.currentObservers=null,(0,ke.P)(pt,Me)}))}_checkFinalizedStatuses(Me){const{hasError:Ne,thrownError:yt,isStopped:pt}=this;Ne?Me.error(yt):pt&&Me.complete()}asObservable(){const Me=new f.y;return Me.source=this,Me}}return ze.create=(pe,Me)=>new xe(pe,Me),ze})();class xe extends Ze{constructor(pe,Me){super(),this.destination=pe,this.source=Me}next(pe){var Me,Ne;null===(Ne=null===(Me=this.destination)||void 0===Me?void 0:Me.next)||void 0===Ne||Ne.call(Me,pe)}error(pe){var Me,Ne;null===(Ne=null===(Me=this.destination)||void 0===Me?void 0:Me.error)||void 0===Ne||Ne.call(Me,pe)}complete(){var pe,Me;null===(Me=null===(pe=this.destination)||void 0===pe?void 0:pe.complete)||void 0===Me||Me.call(pe)}_subscribe(pe){var Me,Ne;return null!==(Ne=null===(Me=this.source)||void 0===Me?void 0:Me.subscribe(pe))&&void 0!==Ne?Ne:_.Lc}}},930:(wn,dt,L)=>{L.d(dt,{Hp:()=>an,Lv:()=>Ne});var f=L(576),_=L(727),re=L(2416),Te=L(7849),ke=L(5032);const He=ze("C",void 0,void 0);function ze(Qe,Ue,lt){return{kind:Qe,value:Ue,error:lt}}var pe=L(3410),Me=L(2806);class Ne extends _.w0{constructor(Ue){super(),this.isStopped=!1,Ue?(this.destination=Ue,(0,_.Nn)(Ue)&&Ue.add(this)):this.destination=_t}static create(Ue,lt,kt){return new an(Ue,lt,kt)}next(Ue){this.isStopped?Ae(function xe(Qe){return ze("N",Qe,void 0)}(Ue),this):this._next(Ue)}error(Ue){this.isStopped?Ae(function Ze(Qe){return ze("E",void 0,Qe)}(Ue),this):(this.isStopped=!0,this._error(Ue))}complete(){this.isStopped?Ae(He,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ue){this.destination.next(Ue)}_error(Ue){try{this.destination.error(Ue)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const yt=Function.prototype.bind;function pt(Qe,Ue){return yt.call(Qe,Ue)}class Lt{constructor(Ue){this.partialObserver=Ue}next(Ue){const{partialObserver:lt}=this;if(lt.next)try{lt.next(Ue)}catch(kt){It(kt)}}error(Ue){const{partialObserver:lt}=this;if(lt.error)try{lt.error(Ue)}catch(kt){It(kt)}else It(Ue)}complete(){const{partialObserver:Ue}=this;if(Ue.complete)try{Ue.complete()}catch(lt){It(lt)}}}class an extends Ne{constructor(Ue,lt,kt){let Ye;if(super(),(0,f.m)(Ue)||!Ue)Ye={next:Ue??void 0,error:lt??void 0,complete:kt??void 0};else{let z;this&&re.v.useDeprecatedNextContext?(z=Object.create(Ue),z.unsubscribe=()=>this.unsubscribe(),Ye={next:Ue.next&&pt(Ue.next,z),error:Ue.error&&pt(Ue.error,z),complete:Ue.complete&&pt(Ue.complete,z)}):Ye=Ue}this.destination=new Lt(Ye)}}function It(Qe){re.v.useDeprecatedSynchronousErrorHandling?(0,Me.O)(Qe):(0,Te.h)(Qe)}function Ae(Qe,Ue){const{onStoppedNotification:lt}=re.v;lt&&pe.z.setTimeout(()=>lt(Qe,Ue))}const _t={closed:!0,next:ke.Z,error:function Mt(Qe){throw Qe},complete:ke.Z}},727:(wn,dt,L)=>{L.d(dt,{Lc:()=>He,w0:()=>ke,Nn:()=>Ze});var f=L(576);const re=(0,L(3888).d)(ze=>function(Me){ze(this),this.message=Me?`${Me.length} errors occurred during unsubscription:\n${Me.map((Ne,yt)=>`${yt+1}) ${Ne.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=Me});var Te=L(8737);class ke{constructor(pe){this.initialTeardown=pe,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let pe;if(!this.closed){this.closed=!0;const{_parentage:Me}=this;if(Me)if(this._parentage=null,Array.isArray(Me))for(const pt of Me)pt.remove(this);else Me.remove(this);const{initialTeardown:Ne}=this;if((0,f.m)(Ne))try{Ne()}catch(pt){pe=pt instanceof re?pt.errors:[pt]}const{_finalizers:yt}=this;if(yt){this._finalizers=null;for(const pt of yt)try{xe(pt)}catch(Lt){pe=pe??[],Lt instanceof re?pe=[...pe,...Lt.errors]:pe.push(Lt)}}if(pe)throw new re(pe)}}add(pe){var Me;if(pe&&pe!==this)if(this.closed)xe(pe);else{if(pe instanceof ke){if(pe.closed||pe._hasParent(this))return;pe._addParent(this)}(this._finalizers=null!==(Me=this._finalizers)&&void 0!==Me?Me:[]).push(pe)}}_hasParent(pe){const{_parentage:Me}=this;return Me===pe||Array.isArray(Me)&&Me.includes(pe)}_addParent(pe){const{_parentage:Me}=this;this._parentage=Array.isArray(Me)?(Me.push(pe),Me):Me?[Me,pe]:pe}_removeParent(pe){const{_parentage:Me}=this;Me===pe?this._parentage=null:Array.isArray(Me)&&(0,Te.P)(Me,pe)}remove(pe){const{_finalizers:Me}=this;Me&&(0,Te.P)(Me,pe),pe instanceof ke&&pe._removeParent(this)}}ke.EMPTY=(()=>{const ze=new ke;return ze.closed=!0,ze})();const He=ke.EMPTY;function Ze(ze){return ze instanceof ke||ze&&"closed"in ze&&(0,f.m)(ze.remove)&&(0,f.m)(ze.add)&&(0,f.m)(ze.unsubscribe)}function xe(ze){(0,f.m)(ze)?ze():ze.unsubscribe()}},2416:(wn,dt,L)=>{L.d(dt,{v:()=>f});const f={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},9841:(wn,dt,L)=>{L.d(dt,{a:()=>pe});var f=L(9751),_=L(4742),re=L(8996),Te=L(4671),ke=L(3268),He=L(3269),Ze=L(1810),xe=L(5403),ze=L(9672);function pe(...yt){const pt=(0,He.yG)(yt),Lt=(0,He.jO)(yt),{args:an,keys:It}=(0,_.D)(yt);if(0===an.length)return(0,re.D)([],pt);const Mt=new f.y(function Me(yt,pt,Lt=Te.y){return an=>{Ne(pt,()=>{const{length:It}=yt,Mt=new Array(It);let Ae=It,_t=It;for(let Qe=0;Qe<It;Qe++)Ne(pt,()=>{const Ue=(0,re.D)(yt[Qe],pt);let lt=!1;Ue.subscribe((0,xe.x)(an,kt=>{Mt[Qe]=kt,lt||(lt=!0,_t--),_t||an.next(Lt(Mt.slice()))},()=>{--Ae||an.complete()}))},an)},an)}}(an,pt,It?Ae=>(0,Ze.n)(It,Ae):Te.y));return Lt?Mt.pipe((0,ke.Z)(Lt)):Mt}function Ne(yt,pt,Lt){yt?(0,ze.f)(Lt,yt,pt):pt()}},7272:(wn,dt,L)=>{L.d(dt,{z:()=>ke});var f=L(8189),re=L(3269),Te=L(8996);function ke(...He){return function _(){return(0,f.J)(1)}()((0,Te.D)(He,(0,re.yG)(He)))}},9770:(wn,dt,L)=>{L.d(dt,{P:()=>re});var f=L(9751),_=L(8421);function re(Te){return new f.y(ke=>{(0,_.Xf)(Te()).subscribe(ke)})}},515:(wn,dt,L)=>{L.d(dt,{E:()=>_});const _=new(L(9751).y)(ke=>ke.complete())},4128:(wn,dt,L)=>{L.d(dt,{D:()=>xe});var f=L(9751),_=L(4742),re=L(8421),Te=L(3269),ke=L(5403),He=L(3268),Ze=L(1810);function xe(...ze){const pe=(0,Te.jO)(ze),{args:Me,keys:Ne}=(0,_.D)(ze),yt=new f.y(pt=>{const{length:Lt}=Me;if(!Lt)return void pt.complete();const an=new Array(Lt);let It=Lt,Mt=Lt;for(let Ae=0;Ae<Lt;Ae++){let _t=!1;(0,re.Xf)(Me[Ae]).subscribe((0,ke.x)(pt,Qe=>{_t||(_t=!0,Mt--),an[Ae]=Qe},()=>It--,void 0,()=>{(!It||!_t)&&(Mt||pt.next(Ne?(0,Ze.n)(Ne,an):an),pt.complete())}))}});return pe?yt.pipe((0,He.Z)(pe)):yt}},8996:(wn,dt,L)=>{L.d(dt,{D:()=>Ue});var f=L(8421),_=L(5363),re=L(9468),He=L(9751),xe=L(2202),ze=L(576),pe=L(9672);function Ne(lt,kt){if(!lt)throw new Error("Iterable cannot be null");return new He.y(Ye=>{(0,pe.f)(Ye,kt,()=>{const z=lt[Symbol.asyncIterator]();(0,pe.f)(Ye,kt,()=>{z.next().then(ct=>{ct.done?Ye.complete():Ye.next(ct.value)})},0,!0)})})}var yt=L(3670),pt=L(8239),Lt=L(1144),an=L(6495),It=L(2206),Mt=L(4532),Ae=L(3260);function Ue(lt,kt){return kt?function Qe(lt,kt){if(null!=lt){if((0,yt.c)(lt))return function Te(lt,kt){return(0,f.Xf)(lt).pipe((0,re.R)(kt),(0,_.Q)(kt))}(lt,kt);if((0,Lt.z)(lt))return function Ze(lt,kt){return new He.y(Ye=>{let z=0;return kt.schedule(function(){z===lt.length?Ye.complete():(Ye.next(lt[z++]),Ye.closed||this.schedule())})})}(lt,kt);if((0,pt.t)(lt))return function ke(lt,kt){return(0,f.Xf)(lt).pipe((0,re.R)(kt),(0,_.Q)(kt))}(lt,kt);if((0,It.D)(lt))return Ne(lt,kt);if((0,an.T)(lt))return function Me(lt,kt){return new He.y(Ye=>{let z;return(0,pe.f)(Ye,kt,()=>{z=lt[xe.h](),(0,pe.f)(Ye,kt,()=>{let ct,bt;try{({value:ct,done:bt}=z.next())}catch(Ft){return void Ye.error(Ft)}bt?Ye.complete():Ye.next(ct)},0,!0)}),()=>(0,ze.m)(z?.return)&&z.return()})}(lt,kt);if((0,Ae.L)(lt))return function _t(lt,kt){return Ne((0,Ae.Q)(lt),kt)}(lt,kt)}throw(0,Mt.z)(lt)}(lt,kt):(0,f.Xf)(lt)}},8421:(wn,dt,L)=>{L.d(dt,{Xf:()=>yt});var f=L(655),_=L(1144),re=L(8239),Te=L(9751),ke=L(3670),He=L(2206),Ze=L(4532),xe=L(6495),ze=L(3260),pe=L(576),Me=L(7849),Ne=L(8822);function yt(Qe){if(Qe instanceof Te.y)return Qe;if(null!=Qe){if((0,ke.c)(Qe))return function pt(Qe){return new Te.y(Ue=>{const lt=Qe[Ne.L]();if((0,pe.m)(lt.subscribe))return lt.subscribe(Ue);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Qe);if((0,_.z)(Qe))return function Lt(Qe){return new Te.y(Ue=>{for(let lt=0;lt<Qe.length&&!Ue.closed;lt++)Ue.next(Qe[lt]);Ue.complete()})}(Qe);if((0,re.t)(Qe))return function an(Qe){return new Te.y(Ue=>{Qe.then(lt=>{Ue.closed||(Ue.next(lt),Ue.complete())},lt=>Ue.error(lt)).then(null,Me.h)})}(Qe);if((0,He.D)(Qe))return Mt(Qe);if((0,xe.T)(Qe))return function It(Qe){return new Te.y(Ue=>{for(const lt of Qe)if(Ue.next(lt),Ue.closed)return;Ue.complete()})}(Qe);if((0,ze.L)(Qe))return function Ae(Qe){return Mt((0,ze.Q)(Qe))}(Qe)}throw(0,Ze.z)(Qe)}function Mt(Qe){return new Te.y(Ue=>{(function _t(Qe,Ue){var lt,kt,Ye,z;return(0,f.mG)(this,void 0,void 0,function*(){try{for(lt=(0,f.KL)(Qe);!(kt=yield lt.next()).done;)if(Ue.next(kt.value),Ue.closed)return}catch(ct){Ye={error:ct}}finally{try{kt&&!kt.done&&(z=lt.return)&&(yield z.call(lt))}finally{if(Ye)throw Ye.error}}Ue.complete()})})(Qe,Ue).catch(lt=>Ue.error(lt))})}},6451:(wn,dt,L)=>{L.d(dt,{T:()=>He});var f=L(8189),_=L(8421),re=L(515),Te=L(3269),ke=L(8996);function He(...Ze){const xe=(0,Te.yG)(Ze),ze=(0,Te._6)(Ze,1/0),pe=Ze;return pe.length?1===pe.length?(0,_.Xf)(pe[0]):(0,f.J)(ze)((0,ke.D)(pe,xe)):re.E}},9646:(wn,dt,L)=>{L.d(dt,{of:()=>re});var f=L(3269),_=L(8996);function re(...Te){const ke=(0,f.yG)(Te);return(0,_.D)(Te,ke)}},2843:(wn,dt,L)=>{L.d(dt,{_:()=>re});var f=L(9751),_=L(576);function re(Te,ke){const He=(0,_.m)(Te)?Te:()=>Te,Ze=xe=>xe.error(He());return new f.y(ke?xe=>ke.schedule(Ze,0,xe):Ze)}},5403:(wn,dt,L)=>{L.d(dt,{x:()=>_});var f=L(930);function _(Te,ke,He,Ze,xe){return new re(Te,ke,He,Ze,xe)}class re extends f.Lv{constructor(ke,He,Ze,xe,ze,pe){super(ke),this.onFinalize=ze,this.shouldUnsubscribe=pe,this._next=He?function(Me){try{He(Me)}catch(Ne){ke.error(Ne)}}:super._next,this._error=xe?function(Me){try{xe(Me)}catch(Ne){ke.error(Ne)}finally{this.unsubscribe()}}:super._error,this._complete=Ze?function(){try{Ze()}catch(Me){ke.error(Me)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ke;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:He}=this;super.unsubscribe(),!He&&(null===(ke=this.onFinalize)||void 0===ke||ke.call(this))}}}},262:(wn,dt,L)=>{L.d(dt,{K:()=>Te});var f=L(8421),_=L(5403),re=L(4482);function Te(ke){return(0,re.e)((He,Ze)=>{let pe,xe=null,ze=!1;xe=He.subscribe((0,_.x)(Ze,void 0,void 0,Me=>{pe=(0,f.Xf)(ke(Me,Te(ke)(He))),xe?(xe.unsubscribe(),xe=null,pe.subscribe(Ze)):ze=!0})),ze&&(xe.unsubscribe(),xe=null,pe.subscribe(Ze))})}},4351:(wn,dt,L)=>{L.d(dt,{b:()=>re});var f=L(5577),_=L(576);function re(Te,ke){return(0,_.m)(ke)?(0,f.z)(Te,ke,1):(0,f.z)(Te,1)}},8372:(wn,dt,L)=>{L.d(dt,{b:()=>Te});var f=L(4986),_=L(4482),re=L(5403);function Te(ke,He=f.z){return(0,_.e)((Ze,xe)=>{let ze=null,pe=null,Me=null;const Ne=()=>{if(ze){ze.unsubscribe(),ze=null;const pt=pe;pe=null,xe.next(pt)}};function yt(){const pt=Me+ke,Lt=He.now();if(Lt<pt)return ze=this.schedule(void 0,pt-Lt),void xe.add(ze);Ne()}Ze.subscribe((0,re.x)(xe,pt=>{pe=pt,Me=He.now(),ze||(ze=He.schedule(yt,ke),xe.add(ze))},()=>{Ne(),xe.complete()},void 0,()=>{pe=ze=null}))})}},6590:(wn,dt,L)=>{L.d(dt,{d:()=>re});var f=L(4482),_=L(5403);function re(Te){return(0,f.e)((ke,He)=>{let Ze=!1;ke.subscribe((0,_.x)(He,xe=>{Ze=!0,He.next(xe)},()=>{Ze||He.next(Te),He.complete()}))})}},1884:(wn,dt,L)=>{L.d(dt,{x:()=>Te});var f=L(4671),_=L(4482),re=L(5403);function Te(He,Ze=f.y){return He=He??ke,(0,_.e)((xe,ze)=>{let pe,Me=!0;xe.subscribe((0,re.x)(ze,Ne=>{const yt=Ze(Ne);(Me||!He(pe,yt))&&(Me=!1,pe=yt,ze.next(Ne))}))})}function ke(He,Ze){return He===Ze}},9300:(wn,dt,L)=>{L.d(dt,{h:()=>re});var f=L(4482),_=L(5403);function re(Te,ke){return(0,f.e)((He,Ze)=>{let xe=0;He.subscribe((0,_.x)(Ze,ze=>Te.call(ke,ze,xe++)&&Ze.next(ze)))})}},8746:(wn,dt,L)=>{L.d(dt,{x:()=>_});var f=L(4482);function _(re){return(0,f.e)((Te,ke)=>{try{Te.subscribe(ke)}finally{ke.add(re)}})}},590:(wn,dt,L)=>{L.d(dt,{P:()=>Ze});var f=L(6805),_=L(9300),re=L(5698),Te=L(6590),ke=L(8068),He=L(4671);function Ze(xe,ze){const pe=arguments.length>=2;return Me=>Me.pipe(xe?(0,_.h)((Ne,yt)=>xe(Ne,yt,Me)):He.y,(0,re.q)(1),pe?(0,Te.d)(ze):(0,ke.T)(()=>new f.K))}},4004:(wn,dt,L)=>{L.d(dt,{U:()=>re});var f=L(4482),_=L(5403);function re(Te,ke){return(0,f.e)((He,Ze)=>{let xe=0;He.subscribe((0,_.x)(Ze,ze=>{Ze.next(Te.call(ke,ze,xe++))}))})}},9718:(wn,dt,L)=>{L.d(dt,{h:()=>_});var f=L(4004);function _(re){return(0,f.U)(()=>re)}},8189:(wn,dt,L)=>{L.d(dt,{J:()=>re});var f=L(5577),_=L(4671);function re(Te=1/0){return(0,f.z)(_.y,Te)}},5577:(wn,dt,L)=>{L.d(dt,{z:()=>xe});var f=L(4004),_=L(8421),re=L(4482),Te=L(9672),ke=L(5403),Ze=L(576);function xe(ze,pe,Me=1/0){return(0,Ze.m)(pe)?xe((Ne,yt)=>(0,f.U)((pt,Lt)=>pe(Ne,pt,yt,Lt))((0,_.Xf)(ze(Ne,yt))),Me):("number"==typeof pe&&(Me=pe),(0,re.e)((Ne,yt)=>function He(ze,pe,Me,Ne,yt,pt,Lt,an){const It=[];let Mt=0,Ae=0,_t=!1;const Qe=()=>{_t&&!It.length&&!Mt&&pe.complete()},Ue=kt=>Mt<Ne?lt(kt):It.push(kt),lt=kt=>{pt&&pe.next(kt),Mt++;let Ye=!1;(0,_.Xf)(Me(kt,Ae++)).subscribe((0,ke.x)(pe,z=>{yt?.(z),pt?Ue(z):pe.next(z)},()=>{Ye=!0},void 0,()=>{if(Ye)try{for(Mt--;It.length&&Mt<Ne;){const z=It.shift();Lt?(0,Te.f)(pe,Lt,()=>lt(z)):lt(z)}Qe()}catch(z){pe.error(z)}}))};return ze.subscribe((0,ke.x)(pe,Ue,()=>{_t=!0,Qe()})),()=>{an?.()}}(Ne,yt,ze,Me)))}},5363:(wn,dt,L)=>{L.d(dt,{Q:()=>Te});var f=L(9672),_=L(4482),re=L(5403);function Te(ke,He=0){return(0,_.e)((Ze,xe)=>{Ze.subscribe((0,re.x)(xe,ze=>(0,f.f)(xe,ke,()=>xe.next(ze),He),()=>(0,f.f)(xe,ke,()=>xe.complete(),He),ze=>(0,f.f)(xe,ke,()=>xe.error(ze),He)))})}},5026:(wn,dt,L)=>{L.d(dt,{R:()=>Te});var f=L(4482),_=L(5403);function Te(ke,He){return(0,f.e)(function re(ke,He,Ze,xe,ze){return(pe,Me)=>{let Ne=Ze,yt=He,pt=0;pe.subscribe((0,_.x)(Me,Lt=>{const an=pt++;yt=Ne?ke(yt,Lt,an):(Ne=!0,Lt),xe&&Me.next(yt)},ze&&(()=>{Ne&&Me.next(yt),Me.complete()})))}}(ke,He,arguments.length>=2,!0))}},3099:(wn,dt,L)=>{L.d(dt,{B:()=>ke});var f=L(8421),_=L(7579),re=L(930),Te=L(4482);function ke(Ze={}){const{connector:xe=(()=>new _.x),resetOnError:ze=!0,resetOnComplete:pe=!0,resetOnRefCountZero:Me=!0}=Ze;return Ne=>{let yt,pt,Lt,an=0,It=!1,Mt=!1;const Ae=()=>{pt?.unsubscribe(),pt=void 0},_t=()=>{Ae(),yt=Lt=void 0,It=Mt=!1},Qe=()=>{const Ue=yt;_t(),Ue?.unsubscribe()};return(0,Te.e)((Ue,lt)=>{an++,!Mt&&!It&&Ae();const kt=Lt=Lt??xe();lt.add(()=>{an--,0===an&&!Mt&&!It&&(pt=He(Qe,Me))}),kt.subscribe(lt),!yt&&an>0&&(yt=new re.Hp({next:Ye=>kt.next(Ye),error:Ye=>{Mt=!0,Ae(),pt=He(_t,ze,Ye),kt.error(Ye)},complete:()=>{It=!0,Ae(),pt=He(_t,pe),kt.complete()}}),(0,f.Xf)(Ue).subscribe(yt))})(Ne)}}function He(Ze,xe,...ze){if(!0===xe)return void Ze();if(!1===xe)return;const pe=new re.Hp({next:()=>{pe.unsubscribe(),Ze()}});return(0,f.Xf)(xe(...ze)).subscribe(pe)}},5684:(wn,dt,L)=>{L.d(dt,{T:()=>_});var f=L(9300);function _(re){return(0,f.h)((Te,ke)=>re<=ke)}},8675:(wn,dt,L)=>{L.d(dt,{O:()=>Te});var f=L(7272),_=L(3269),re=L(4482);function Te(...ke){const He=(0,_.yG)(ke);return(0,re.e)((Ze,xe)=>{(He?(0,f.z)(ke,Ze,He):(0,f.z)(ke,Ze)).subscribe(xe)})}},9468:(wn,dt,L)=>{L.d(dt,{R:()=>_});var f=L(4482);function _(re,Te=0){return(0,f.e)((ke,He)=>{He.add(re.schedule(()=>ke.subscribe(He),Te))})}},3900:(wn,dt,L)=>{L.d(dt,{w:()=>Te});var f=L(8421),_=L(4482),re=L(5403);function Te(ke,He){return(0,_.e)((Ze,xe)=>{let ze=null,pe=0,Me=!1;const Ne=()=>Me&&!ze&&xe.complete();Ze.subscribe((0,re.x)(xe,yt=>{ze?.unsubscribe();let pt=0;const Lt=pe++;(0,f.Xf)(ke(yt,Lt)).subscribe(ze=(0,re.x)(xe,an=>xe.next(He?He(yt,an,Lt,pt++):an),()=>{ze=null,Ne()}))},()=>{Me=!0,Ne()}))})}},5698:(wn,dt,L)=>{L.d(dt,{q:()=>Te});var f=L(515),_=L(4482),re=L(5403);function Te(ke){return ke<=0?()=>f.E:(0,_.e)((He,Ze)=>{let xe=0;He.subscribe((0,re.x)(Ze,ze=>{++xe<=ke&&(Ze.next(ze),ke<=xe&&Ze.complete())}))})}},2722:(wn,dt,L)=>{L.d(dt,{R:()=>ke});var f=L(4482),_=L(5403),re=L(8421),Te=L(5032);function ke(He){return(0,f.e)((Ze,xe)=>{(0,re.Xf)(He).subscribe((0,_.x)(xe,()=>xe.complete(),Te.Z)),!xe.closed&&Ze.subscribe(xe)})}},8505:(wn,dt,L)=>{L.d(dt,{b:()=>ke});var f=L(576),_=L(4482),re=L(5403),Te=L(4671);function ke(He,Ze,xe){const ze=(0,f.m)(He)||Ze||xe?{next:He,error:Ze,complete:xe}:He;return ze?(0,_.e)((pe,Me)=>{var Ne;null===(Ne=ze.subscribe)||void 0===Ne||Ne.call(ze);let yt=!0;pe.subscribe((0,re.x)(Me,pt=>{var Lt;null===(Lt=ze.next)||void 0===Lt||Lt.call(ze,pt),Me.next(pt)},()=>{var pt;yt=!1,null===(pt=ze.complete)||void 0===pt||pt.call(ze),Me.complete()},pt=>{var Lt;yt=!1,null===(Lt=ze.error)||void 0===Lt||Lt.call(ze,pt),Me.error(pt)},()=>{var pt,Lt;yt&&(null===(pt=ze.unsubscribe)||void 0===pt||pt.call(ze)),null===(Lt=ze.finalize)||void 0===Lt||Lt.call(ze)}))}):Te.y}},8068:(wn,dt,L)=>{L.d(dt,{T:()=>Te});var f=L(6805),_=L(4482),re=L(5403);function Te(He=ke){return(0,_.e)((Ze,xe)=>{let ze=!1;Ze.subscribe((0,re.x)(xe,pe=>{ze=!0,xe.next(pe)},()=>ze?xe.complete():xe.error(He())))})}function ke(){return new f.K}},4408:(wn,dt,L)=>{L.d(dt,{o:()=>ke});var f=L(727);class _ extends f.w0{constructor(Ze,xe){super()}schedule(Ze,xe=0){return this}}const re={setInterval(He,Ze,...xe){const{delegate:ze}=re;return ze?.setInterval?ze.setInterval(He,Ze,...xe):setInterval(He,Ze,...xe)},clearInterval(He){const{delegate:Ze}=re;return(Ze?.clearInterval||clearInterval)(He)},delegate:void 0};var Te=L(8737);class ke extends _{constructor(Ze,xe){super(Ze,xe),this.scheduler=Ze,this.work=xe,this.pending=!1}schedule(Ze,xe=0){var ze;if(this.closed)return this;this.state=Ze;const pe=this.id,Me=this.scheduler;return null!=pe&&(this.id=this.recycleAsyncId(Me,pe,xe)),this.pending=!0,this.delay=xe,this.id=null!==(ze=this.id)&&void 0!==ze?ze:this.requestAsyncId(Me,this.id,xe),this}requestAsyncId(Ze,xe,ze=0){return re.setInterval(Ze.flush.bind(Ze,this),ze)}recycleAsyncId(Ze,xe,ze=0){if(null!=ze&&this.delay===ze&&!1===this.pending)return xe;null!=xe&&re.clearInterval(xe)}execute(Ze,xe){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ze=this._execute(Ze,xe);if(ze)return ze;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(Ze,xe){let pe,ze=!1;try{this.work(Ze)}catch(Me){ze=!0,pe=Me||new Error("Scheduled action threw falsy error")}if(ze)return this.unsubscribe(),pe}unsubscribe(){if(!this.closed){const{id:Ze,scheduler:xe}=this,{actions:ze}=xe;this.work=this.state=this.scheduler=null,this.pending=!1,(0,Te.P)(ze,this),null!=Ze&&(this.id=this.recycleAsyncId(xe,Ze,null)),this.delay=null,super.unsubscribe()}}}},7565:(wn,dt,L)=>{L.d(dt,{v:()=>re});var f=L(6063);class _{constructor(ke,He=_.now){this.schedulerActionCtor=ke,this.now=He}schedule(ke,He=0,Ze){return new this.schedulerActionCtor(this,ke).schedule(Ze,He)}}_.now=f.l.now;class re extends _{constructor(ke,He=_.now){super(ke,He),this.actions=[],this._active=!1}flush(ke){const{actions:He}=this;if(this._active)return void He.push(ke);let Ze;this._active=!0;do{if(Ze=ke.execute(ke.state,ke.delay))break}while(ke=He.shift());if(this._active=!1,Ze){for(;ke=He.shift();)ke.unsubscribe();throw Ze}}}},4986:(wn,dt,L)=>{L.d(dt,{P:()=>Te,z:()=>re});var f=L(4408);const re=new(L(7565).v)(f.o),Te=re},6063:(wn,dt,L)=>{L.d(dt,{l:()=>f});const f={now:()=>(f.delegate||Date).now(),delegate:void 0}},3410:(wn,dt,L)=>{L.d(dt,{z:()=>f});const f={setTimeout(_,re,...Te){const{delegate:ke}=f;return ke?.setTimeout?ke.setTimeout(_,re,...Te):setTimeout(_,re,...Te)},clearTimeout(_){const{delegate:re}=f;return(re?.clearTimeout||clearTimeout)(_)},delegate:void 0}},2202:(wn,dt,L)=>{L.d(dt,{h:()=>_});const _=function f(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(wn,dt,L)=>{L.d(dt,{L:()=>f});const f="function"==typeof Symbol&&Symbol.observable||"@@observable"},6805:(wn,dt,L)=>{L.d(dt,{K:()=>_});const _=(0,L(3888).d)(re=>function(){re(this),this.name="EmptyError",this.message="no elements in sequence"})},3269:(wn,dt,L)=>{L.d(dt,{_6:()=>He,jO:()=>Te,yG:()=>ke});var f=L(576),_=L(3532);function re(Ze){return Ze[Ze.length-1]}function Te(Ze){return(0,f.m)(re(Ze))?Ze.pop():void 0}function ke(Ze){return(0,_.K)(re(Ze))?Ze.pop():void 0}function He(Ze,xe){return"number"==typeof re(Ze)?Ze.pop():xe}},4742:(wn,dt,L)=>{L.d(dt,{D:()=>ke});const{isArray:f}=Array,{getPrototypeOf:_,prototype:re,keys:Te}=Object;function ke(Ze){if(1===Ze.length){const xe=Ze[0];if(f(xe))return{args:xe,keys:null};if(function He(Ze){return Ze&&"object"==typeof Ze&&_(Ze)===re}(xe)){const ze=Te(xe);return{args:ze.map(pe=>xe[pe]),keys:ze}}}return{args:Ze,keys:null}}},8737:(wn,dt,L)=>{function f(_,re){if(_){const Te=_.indexOf(re);0<=Te&&_.splice(Te,1)}}L.d(dt,{P:()=>f})},3888:(wn,dt,L)=>{function f(_){const Te=_(ke=>{Error.call(ke),ke.stack=(new Error).stack});return Te.prototype=Object.create(Error.prototype),Te.prototype.constructor=Te,Te}L.d(dt,{d:()=>f})},1810:(wn,dt,L)=>{function f(_,re){return _.reduce((Te,ke,He)=>(Te[ke]=re[He],Te),{})}L.d(dt,{n:()=>f})},2806:(wn,dt,L)=>{L.d(dt,{O:()=>Te,x:()=>re});var f=L(2416);let _=null;function re(ke){if(f.v.useDeprecatedSynchronousErrorHandling){const He=!_;if(He&&(_={errorThrown:!1,error:null}),ke(),He){const{errorThrown:Ze,error:xe}=_;if(_=null,Ze)throw xe}}else ke()}function Te(ke){f.v.useDeprecatedSynchronousErrorHandling&&_&&(_.errorThrown=!0,_.error=ke)}},9672:(wn,dt,L)=>{function f(_,re,Te,ke=0,He=!1){const Ze=re.schedule(function(){Te(),He?_.add(this.schedule(null,ke)):this.unsubscribe()},ke);if(_.add(Ze),!He)return Ze}L.d(dt,{f:()=>f})},4671:(wn,dt,L)=>{function f(_){return _}L.d(dt,{y:()=>f})},1144:(wn,dt,L)=>{L.d(dt,{z:()=>f});const f=_=>_&&"number"==typeof _.length&&"function"!=typeof _},2206:(wn,dt,L)=>{L.d(dt,{D:()=>_});var f=L(576);function _(re){return Symbol.asyncIterator&&(0,f.m)(re?.[Symbol.asyncIterator])}},576:(wn,dt,L)=>{function f(_){return"function"==typeof _}L.d(dt,{m:()=>f})},3670:(wn,dt,L)=>{L.d(dt,{c:()=>re});var f=L(8822),_=L(576);function re(Te){return(0,_.m)(Te[f.L])}},6495:(wn,dt,L)=>{L.d(dt,{T:()=>re});var f=L(2202),_=L(576);function re(Te){return(0,_.m)(Te?.[f.h])}},8239:(wn,dt,L)=>{L.d(dt,{t:()=>_});var f=L(576);function _(re){return(0,f.m)(re?.then)}},3260:(wn,dt,L)=>{L.d(dt,{L:()=>Te,Q:()=>re});var f=L(655),_=L(576);function re(ke){return(0,f.FC)(this,arguments,function*(){const Ze=ke.getReader();try{for(;;){const{value:xe,done:ze}=yield(0,f.qq)(Ze.read());if(ze)return yield(0,f.qq)(void 0);yield yield(0,f.qq)(xe)}}finally{Ze.releaseLock()}})}function Te(ke){return(0,_.m)(ke?.getReader)}},3532:(wn,dt,L)=>{L.d(dt,{K:()=>_});var f=L(576);function _(re){return re&&(0,f.m)(re.schedule)}},4482:(wn,dt,L)=>{L.d(dt,{A:()=>_,e:()=>re});var f=L(576);function _(Te){return(0,f.m)(Te?.lift)}function re(Te){return ke=>{if(_(ke))return ke.lift(function(He){try{return Te(He,this)}catch(Ze){this.error(Ze)}});throw new TypeError("Unable to lift unknown Observable type")}}},3268:(wn,dt,L)=>{L.d(dt,{Z:()=>Te});var f=L(4004);const{isArray:_}=Array;function Te(ke){return(0,f.U)(He=>function re(ke,He){return _(He)?ke(...He):ke(He)}(ke,He))}},5032:(wn,dt,L)=>{function f(){}L.d(dt,{Z:()=>f})},9635:(wn,dt,L)=>{L.d(dt,{U:()=>re,z:()=>_});var f=L(4671);function _(...Te){return re(Te)}function re(Te){return 0===Te.length?f.y:1===Te.length?Te[0]:function(He){return Te.reduce((Ze,xe)=>xe(Ze),He)}}},7849:(wn,dt,L)=>{L.d(dt,{h:()=>re});var f=L(2416),_=L(3410);function re(Te){_.z.setTimeout(()=>{const{onUnhandledError:ke}=f.v;if(!ke)throw Te;ke(Te)})}},4532:(wn,dt,L)=>{function f(_){return new TypeError(`You provided ${null!==_&&"object"==typeof _?"an invalid object":`'${_}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}L.d(dt,{z:()=>f})},655:(wn,dt,L)=>{function Te(Pt,Ht){var Ot={};for(var jt in Pt)Object.prototype.hasOwnProperty.call(Pt,jt)&&Ht.indexOf(jt)<0&&(Ot[jt]=Pt[jt]);if(null!=Pt&&"function"==typeof Object.getOwnPropertySymbols){var Gt=0;for(jt=Object.getOwnPropertySymbols(Pt);Gt<jt.length;Gt++)Ht.indexOf(jt[Gt])<0&&Object.prototype.propertyIsEnumerable.call(Pt,jt[Gt])&&(Ot[jt[Gt]]=Pt[jt[Gt]])}return Ot}function Ne(Pt,Ht,Ot,jt){return new(Ot||(Ot=Promise))(function(Tt,Ut){function Et(_n){try{Zt(jt.next(_n))}catch(sn){Ut(sn)}}function rn(_n){try{Zt(jt.throw(_n))}catch(sn){Ut(sn)}}function Zt(_n){_n.done?Tt(_n.value):function Gt(Tt){return Tt instanceof Ot?Tt:new Ot(function(Ut){Ut(Tt)})}(_n.value).then(Et,rn)}Zt((jt=jt.apply(Pt,Ht||[])).next())})}function Qe(Pt){return this instanceof Qe?(this.v=Pt,this):new Qe(Pt)}function Ue(Pt,Ht,Ot){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Gt,jt=Ot.apply(Pt,Ht||[]),Tt=[];return Gt={},Ut("next"),Ut("throw"),Ut("return"),Gt[Symbol.asyncIterator]=function(){return this},Gt;function Ut(bn){jt[bn]&&(Gt[bn]=function(fi){return new Promise(function(ui,Bn){Tt.push([bn,fi,ui,Bn])>1||Et(bn,fi)})})}function Et(bn,fi){try{!function rn(bn){bn.value instanceof Qe?Promise.resolve(bn.value.v).then(Zt,_n):sn(Tt[0][2],bn)}(jt[bn](fi))}catch(ui){sn(Tt[0][3],ui)}}function Zt(bn){Et("next",bn)}function _n(bn){Et("throw",bn)}function sn(bn,fi){bn(fi),Tt.shift(),Tt.length&&Et(Tt[0][0],Tt[0][1])}}function kt(Pt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ot,Ht=Pt[Symbol.asyncIterator];return Ht?Ht.call(Pt):(Pt=function an(Pt){var Ht="function"==typeof Symbol&&Symbol.iterator,Ot=Ht&&Pt[Ht],jt=0;if(Ot)return Ot.call(Pt);if(Pt&&"number"==typeof Pt.length)return{next:function(){return Pt&&jt>=Pt.length&&(Pt=void 0),{value:Pt&&Pt[jt++],done:!Pt}}};throw new TypeError(Ht?"Object is not iterable.":"Symbol.iterator is not defined.")}(Pt),Ot={},jt("next"),jt("throw"),jt("return"),Ot[Symbol.asyncIterator]=function(){return this},Ot);function jt(Tt){Ot[Tt]=Pt[Tt]&&function(Ut){return new Promise(function(Et,rn){!function Gt(Tt,Ut,Et,rn){Promise.resolve(rn).then(function(Zt){Tt({value:Zt,done:Et})},Ut)}(Et,rn,(Ut=Pt[Tt](Ut)).done,Ut.value)})}}}L.d(dt,{FC:()=>Ue,KL:()=>kt,_T:()=>Te,mG:()=>Ne,qq:()=>Qe})},7340:(wn,dt,L)=>{L.d(dt,{IO:()=>Lt,LC:()=>_,SB:()=>ze,X$:()=>Te,ZE:()=>Ae,ZN:()=>Mt,_j:()=>f,eR:()=>Me,jt:()=>ke,k1:()=>_t,l3:()=>re,oB:()=>xe,pV:()=>yt,ru:()=>He,vP:()=>Ze});class f{}class _{}const re="*";function Te(Qe,Ue){return{type:7,name:Qe,definitions:Ue,options:{}}}function ke(Qe,Ue=null){return{type:4,styles:Ue,timings:Qe}}function He(Qe,Ue=null){return{type:3,steps:Qe,options:Ue}}function Ze(Qe,Ue=null){return{type:2,steps:Qe,options:Ue}}function xe(Qe){return{type:6,styles:Qe,offset:null}}function ze(Qe,Ue,lt){return{type:0,name:Qe,styles:Ue,options:lt}}function Me(Qe,Ue,lt=null){return{type:1,expr:Qe,animation:Ue,options:lt}}function yt(Qe=null){return{type:9,options:Qe}}function Lt(Qe,Ue,lt=null){return{type:11,selector:Qe,animation:Ue,options:lt}}function It(Qe){Promise.resolve().then(Qe)}class Mt{constructor(Ue=0,lt=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=Ue+lt}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(Ue=>Ue()),this._onDoneFns=[])}onStart(Ue){this._originalOnStartFns.push(Ue),this._onStartFns.push(Ue)}onDone(Ue){this._originalOnDoneFns.push(Ue),this._onDoneFns.push(Ue)}onDestroy(Ue){this._onDestroyFns.push(Ue)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){It(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(Ue=>Ue()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(Ue=>Ue()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(Ue){this._position=this.totalTime?Ue*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(Ue){const lt="start"==Ue?this._onStartFns:this._onDoneFns;lt.forEach(kt=>kt()),lt.length=0}}class Ae{constructor(Ue){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=Ue;let lt=0,kt=0,Ye=0;const z=this.players.length;0==z?It(()=>this._onFinish()):this.players.forEach(ct=>{ct.onDone(()=>{++lt==z&&this._onFinish()}),ct.onDestroy(()=>{++kt==z&&this._onDestroy()}),ct.onStart(()=>{++Ye==z&&this._onStart()})}),this.totalTime=this.players.reduce((ct,bt)=>Math.max(ct,bt.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(Ue=>Ue()),this._onDoneFns=[])}init(){this.players.forEach(Ue=>Ue.init())}onStart(Ue){this._onStartFns.push(Ue)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(Ue=>Ue()),this._onStartFns=[])}onDone(Ue){this._onDoneFns.push(Ue)}onDestroy(Ue){this._onDestroyFns.push(Ue)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(Ue=>Ue.play())}pause(){this.players.forEach(Ue=>Ue.pause())}restart(){this.players.forEach(Ue=>Ue.restart())}finish(){this._onFinish(),this.players.forEach(Ue=>Ue.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(Ue=>Ue.destroy()),this._onDestroyFns.forEach(Ue=>Ue()),this._onDestroyFns=[])}reset(){this.players.forEach(Ue=>Ue.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(Ue){const lt=Ue*this.totalTime;this.players.forEach(kt=>{const Ye=kt.totalTime?Math.min(1,lt/kt.totalTime):1;kt.setPosition(Ye)})}getPosition(){const Ue=this.players.reduce((lt,kt)=>null===lt||kt.totalTime>lt.totalTime?kt:lt,null);return null!=Ue?Ue.getPosition():0}beforeDestroy(){this.players.forEach(Ue=>{Ue.beforeDestroy&&Ue.beforeDestroy()})}triggerCallback(Ue){const lt="start"==Ue?this._onStartFns:this._onDoneFns;lt.forEach(kt=>kt()),lt.length=0}}const _t="!"},2687:(wn,dt,L)=>{L.d(dt,{Em:()=>Ht,X6:()=>Tn,ic:()=>jt,qV:()=>oi,qm:()=>be,rt:()=>$,tE:()=>Fi,yG:()=>Ji});var f=L(6895),_=L(4650),re=L(3353),Te=L(7579),ke=L(727),He=L(1135),Ze=L(9646),xe=L(9521),ze=L(8505),pe=L(8372),Me=L(9300),Ne=L(4004),yt=L(5698),pt=L(5684),Lt=L(1884),an=L(2722),It=L(1281),Mt=L(9643),Ae=L(2289);class vn{constructor(de){this._items=de,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new Te.x,this._typeaheadSubscription=ke.w0.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._pageUpAndDown={enabled:!1,delta:10},this._skipPredicateFn=ye=>ye.disabled,this._pressedLetters=[],this.tabOut=new Te.x,this.change=new Te.x,de instanceof _.n_E&&(this._itemChangesSubscription=de.changes.subscribe(ye=>{if(this._activeItem){const Nt=ye.toArray().indexOf(this._activeItem);Nt>-1&&Nt!==this._activeItemIndex&&(this._activeItemIndex=Nt)}}))}skipPredicate(de){return this._skipPredicateFn=de,this}withWrap(de=!0){return this._wrap=de,this}withVerticalOrientation(de=!0){return this._vertical=de,this}withHorizontalOrientation(de){return this._horizontal=de,this}withAllowedModifierKeys(de){return this._allowedModifierKeys=de,this}withTypeAhead(de=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe((0,ze.b)(ye=>this._pressedLetters.push(ye)),(0,pe.b)(de),(0,Me.h)(()=>this._pressedLetters.length>0),(0,Ne.U)(()=>this._pressedLetters.join(""))).subscribe(ye=>{const rt=this._getItemsArray();for(let Nt=1;Nt<rt.length+1;Nt++){const Le=(this._activeItemIndex+Nt)%rt.length,Be=rt[Le];if(!this._skipPredicateFn(Be)&&0===Be.getLabel().toUpperCase().trim().indexOf(ye)){this.setActiveItem(Le);break}}this._pressedLetters=[]}),this}cancelTypeahead(){return this._pressedLetters=[],this}withHomeAndEnd(de=!0){return this._homeAndEnd=de,this}withPageUpDown(de=!0,ye=10){return this._pageUpAndDown={enabled:de,delta:ye},this}setActiveItem(de){const ye=this._activeItem;this.updateActiveItem(de),this._activeItem!==ye&&this.change.next(this._activeItemIndex)}onKeydown(de){const ye=de.keyCode,Nt=["altKey","ctrlKey","metaKey","shiftKey"].every(Le=>!de[Le]||this._allowedModifierKeys.indexOf(Le)>-1);switch(ye){case xe.Mf:return void this.tabOut.next();case xe.JH:if(this._vertical&&Nt){this.setNextItemActive();break}return;case xe.LH:if(this._vertical&&Nt){this.setPreviousItemActive();break}return;case xe.SV:if(this._horizontal&&Nt){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case xe.oh:if(this._horizontal&&Nt){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case xe.Sd:if(this._homeAndEnd&&Nt){this.setFirstItemActive();break}return;case xe.uR:if(this._homeAndEnd&&Nt){this.setLastItemActive();break}return;case xe.Ku:if(this._pageUpAndDown.enabled&&Nt){const Le=this._activeItemIndex-this._pageUpAndDown.delta;this._setActiveItemByIndex(Le>0?Le:0,1);break}return;case xe.VM:if(this._pageUpAndDown.enabled&&Nt){const Le=this._activeItemIndex+this._pageUpAndDown.delta,Be=this._getItemsArray().length;this._setActiveItemByIndex(Le<Be?Le:Be-1,-1);break}return;default:return void((Nt||(0,xe.Vb)(de,"shiftKey"))&&(de.key&&1===de.key.length?this._letterKeyStream.next(de.key.toLocaleUpperCase()):(ye>=xe.A&&ye<=xe.Z||ye>=xe.xE&&ye<=xe.aO)&&this._letterKeyStream.next(String.fromCharCode(ye))))}this._pressedLetters=[],de.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(de){const ye=this._getItemsArray(),rt="number"==typeof de?de:ye.indexOf(de);this._activeItem=ye[rt]??null,this._activeItemIndex=rt}destroy(){this._typeaheadSubscription.unsubscribe(),this._itemChangesSubscription?.unsubscribe(),this._letterKeyStream.complete(),this.tabOut.complete(),this.change.complete(),this._pressedLetters=[]}_setActiveItemByDelta(de){this._wrap?this._setActiveInWrapMode(de):this._setActiveInDefaultMode(de)}_setActiveInWrapMode(de){const ye=this._getItemsArray();for(let rt=1;rt<=ye.length;rt++){const Nt=(this._activeItemIndex+de*rt+ye.length)%ye.length;if(!this._skipPredicateFn(ye[Nt]))return void this.setActiveItem(Nt)}}_setActiveInDefaultMode(de){this._setActiveItemByIndex(this._activeItemIndex+de,de)}_setActiveItemByIndex(de,ye){const rt=this._getItemsArray();if(rt[de]){for(;this._skipPredicateFn(rt[de]);)if(!rt[de+=ye])return;this.setActiveItem(de)}}_getItemsArray(){return this._items instanceof _.n_E?this._items.toArray():this._items}}class Ht extends vn{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(de){return this._origin=de,this}setActiveItem(de){super.setActiveItem(de),this.activeItem&&this.activeItem.focus(this._origin)}}let jt=(()=>{class ne{constructor(ye){this._platform=ye}isDisabled(ye){return ye.hasAttribute("disabled")}isVisible(ye){return function Tt(ne){return!!(ne.offsetWidth||ne.offsetHeight||"function"==typeof ne.getClientRects&&ne.getClientRects().length)}(ye)&&"visible"===getComputedStyle(ye).visibility}isTabbable(ye){if(!this._platform.isBrowser)return!1;const rt=function Gt(ne){try{return ne.frameElement}catch{return null}}(function Bn(ne){return ne.ownerDocument&&ne.ownerDocument.defaultView||window}(ye));if(rt&&(-1===bn(rt)||!this.isVisible(rt)))return!1;let Nt=ye.nodeName.toLowerCase(),Le=bn(ye);return ye.hasAttribute("contenteditable")?-1!==Le:!("iframe"===Nt||"object"===Nt||this._platform.WEBKIT&&this._platform.IOS&&!function fi(ne){let de=ne.nodeName.toLowerCase(),ye="input"===de&&ne.type;return"text"===ye||"password"===ye||"select"===de||"textarea"===de}(ye))&&("audio"===Nt?!!ye.hasAttribute("controls")&&-1!==Le:"video"===Nt?-1!==Le&&(null!==Le||this._platform.FIREFOX||ye.hasAttribute("controls")):ye.tabIndex>=0)}isFocusable(ye,rt){return function ui(ne){return!function Et(ne){return function Zt(ne){return"input"==ne.nodeName.toLowerCase()}(ne)&&"hidden"==ne.type}(ne)&&(function Ut(ne){let de=ne.nodeName.toLowerCase();return"input"===de||"select"===de||"button"===de||"textarea"===de}(ne)||function rn(ne){return function _n(ne){return"a"==ne.nodeName.toLowerCase()}(ne)&&ne.hasAttribute("href")}(ne)||ne.hasAttribute("contenteditable")||sn(ne))}(ye)&&!this.isDisabled(ye)&&(rt?.ignoreVisibility||this.isVisible(ye))}}return ne.\u0275fac=function(ye){return new(ye||ne)(_.LFG(re.t4))},ne.\u0275prov=_.Yz7({token:ne,factory:ne.\u0275fac,providedIn:"root"}),ne})();function sn(ne){if(!ne.hasAttribute("tabindex")||void 0===ne.tabIndex)return!1;let de=ne.getAttribute("tabindex");return!(!de||isNaN(parseInt(de,10)))}function bn(ne){if(!sn(ne))return null;const de=parseInt(ne.getAttribute("tabindex")||"",10);return isNaN(de)?-1:de}class Qn{get enabled(){return this._enabled}set enabled(de){this._enabled=de,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(de,this._startAnchor),this._toggleAnchorTabIndex(de,this._endAnchor))}constructor(de,ye,rt,Nt,Le=!1){this._element=de,this._checker=ye,this._ngZone=rt,this._document=Nt,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,Le||this.attachAnchors()}destroy(){const de=this._startAnchor,ye=this._endAnchor;de&&(de.removeEventListener("focus",this.startAnchorListener),de.remove()),ye&&(ye.removeEventListener("focus",this.endAnchorListener),ye.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(de){return new Promise(ye=>{this._executeOnStable(()=>ye(this.focusInitialElement(de)))})}focusFirstTabbableElementWhenReady(de){return new Promise(ye=>{this._executeOnStable(()=>ye(this.focusFirstTabbableElement(de)))})}focusLastTabbableElementWhenReady(de){return new Promise(ye=>{this._executeOnStable(()=>ye(this.focusLastTabbableElement(de)))})}_getRegionBoundary(de){const ye=this._element.querySelectorAll(`[cdk-focus-region-${de}], [cdkFocusRegion${de}], [cdk-focus-${de}]`);return"start"==de?ye.length?ye[0]:this._getFirstTabbableElement(this._element):ye.length?ye[ye.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(de){const ye=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(ye){if(!this._checker.isFocusable(ye)){const rt=this._getFirstTabbableElement(ye);return rt?.focus(de),!!rt}return ye.focus(de),!0}return this.focusFirstTabbableElement(de)}focusFirstTabbableElement(de){const ye=this._getRegionBoundary("start");return ye&&ye.focus(de),!!ye}focusLastTabbableElement(de){const ye=this._getRegionBoundary("end");return ye&&ye.focus(de),!!ye}hasAttached(){return this._hasAttached}_getFirstTabbableElement(de){if(this._checker.isFocusable(de)&&this._checker.isTabbable(de))return de;const ye=de.children;for(let rt=0;rt<ye.length;rt++){const Nt=ye[rt].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(ye[rt]):null;if(Nt)return Nt}return null}_getLastTabbableElement(de){if(this._checker.isFocusable(de)&&this._checker.isTabbable(de))return de;const ye=de.children;for(let rt=ye.length-1;rt>=0;rt--){const Nt=ye[rt].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(ye[rt]):null;if(Nt)return Nt}return null}_createAnchor(){const de=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,de),de.classList.add("cdk-visually-hidden"),de.classList.add("cdk-focus-trap-anchor"),de.setAttribute("aria-hidden","true"),de}_toggleAnchorTabIndex(de,ye){de?ye.setAttribute("tabindex","0"):ye.removeAttribute("tabindex")}toggleAnchors(de){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(de,this._startAnchor),this._toggleAnchorTabIndex(de,this._endAnchor))}_executeOnStable(de){this._ngZone.isStable?de():this._ngZone.onStable.pipe((0,yt.q)(1)).subscribe(de)}}let oi=(()=>{class ne{constructor(ye,rt,Nt){this._checker=ye,this._ngZone=rt,this._document=Nt}create(ye,rt=!1){return new Qn(ye,this._checker,this._ngZone,this._document,rt)}}return ne.\u0275fac=function(ye){return new(ye||ne)(_.LFG(jt),_.LFG(_.R0b),_.LFG(f.K0))},ne.\u0275prov=_.Yz7({token:ne,factory:ne.\u0275fac,providedIn:"root"}),ne})();function Tn(ne){return 0===ne.buttons||0===ne.offsetX&&0===ne.offsetY}function Ji(ne){const de=ne.touches&&ne.touches[0]||ne.changedTouches&&ne.changedTouches[0];return!(!de||-1!==de.identifier||null!=de.radiusX&&1!==de.radiusX||null!=de.radiusY&&1!==de.radiusY)}const ri=new _.OlP("cdk-input-modality-detector-options"),Gn={ignoreKeys:[xe.zL,xe.jx,xe.b2,xe.MW,xe.JU]},Pr=(0,re.i$)({passive:!0,capture:!0});let Hn=(()=>{class ne{get mostRecentModality(){return this._modality.value}constructor(ye,rt,Nt,Le){this._platform=ye,this._mostRecentTarget=null,this._modality=new He.X(null),this._lastTouchMs=0,this._onKeydown=Be=>{this._options?.ignoreKeys?.some(it=>it===Be.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=(0,re.sA)(Be))},this._onMousedown=Be=>{Date.now()-this._lastTouchMs<650||(this._modality.next(Tn(Be)?"keyboard":"mouse"),this._mostRecentTarget=(0,re.sA)(Be))},this._onTouchstart=Be=>{Ji(Be)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=(0,re.sA)(Be))},this._options={...Gn,...Le},this.modalityDetected=this._modality.pipe((0,pt.T)(1)),this.modalityChanged=this.modalityDetected.pipe((0,Lt.x)()),ye.isBrowser&&rt.runOutsideAngular(()=>{Nt.addEventListener("keydown",this._onKeydown,Pr),Nt.addEventListener("mousedown",this._onMousedown,Pr),Nt.addEventListener("touchstart",this._onTouchstart,Pr)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,Pr),document.removeEventListener("mousedown",this._onMousedown,Pr),document.removeEventListener("touchstart",this._onTouchstart,Pr))}}return ne.\u0275fac=function(ye){return new(ye||ne)(_.LFG(re.t4),_.LFG(_.R0b),_.LFG(f.K0),_.LFG(ri,8))},ne.\u0275prov=_.Yz7({token:ne,factory:ne.\u0275fac,providedIn:"root"}),ne})();const gr=new _.OlP("cdk-focus-monitor-default-options"),er=(0,re.i$)({passive:!0,capture:!0});let Fi=(()=>{class ne{constructor(ye,rt,Nt,Le,Be){this._ngZone=ye,this._platform=rt,this._inputModalityDetector=Nt,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new Te.x,this._rootNodeFocusAndBlurListener=it=>{for(let St=(0,re.sA)(it);St;St=St.parentElement)"focus"===it.type?this._onFocus(it,St):this._onBlur(it,St)},this._document=Le,this._detectionMode=Be?.detectionMode||0}monitor(ye,rt=!1){const Nt=(0,It.fI)(ye);if(!this._platform.isBrowser||1!==Nt.nodeType)return(0,Ze.of)(null);const Le=(0,re.kV)(Nt)||this._getDocument(),Be=this._elementInfo.get(Nt);if(Be)return rt&&(Be.checkChildren=!0),Be.subject;const it={checkChildren:rt,subject:new Te.x,rootNode:Le};return this._elementInfo.set(Nt,it),this._registerGlobalListeners(it),it.subject}stopMonitoring(ye){const rt=(0,It.fI)(ye),Nt=this._elementInfo.get(rt);Nt&&(Nt.subject.complete(),this._setClasses(rt),this._elementInfo.delete(rt),this._removeGlobalListeners(Nt))}focusVia(ye,rt,Nt){const Le=(0,It.fI)(ye);Le===this._getDocument().activeElement?this._getClosestElementsInfo(Le).forEach(([it,qt])=>this._originChanged(it,rt,qt)):(this._setOrigin(rt),"function"==typeof Le.focus&&Le.focus(Nt))}ngOnDestroy(){this._elementInfo.forEach((ye,rt)=>this.stopMonitoring(rt))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(ye){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(ye)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:ye&&this._isLastInteractionFromInputLabel(ye)?"mouse":"program"}_shouldBeAttributedToTouch(ye){return 1===this._detectionMode||!!ye?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(ye,rt){ye.classList.toggle("cdk-focused",!!rt),ye.classList.toggle("cdk-touch-focused","touch"===rt),ye.classList.toggle("cdk-keyboard-focused","keyboard"===rt),ye.classList.toggle("cdk-mouse-focused","mouse"===rt),ye.classList.toggle("cdk-program-focused","program"===rt)}_setOrigin(ye,rt=!1){this._ngZone.runOutsideAngular(()=>{this._origin=ye,this._originFromTouchInteraction="touch"===ye&&rt,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(ye,rt){const Nt=this._elementInfo.get(rt),Le=(0,re.sA)(ye);!Nt||!Nt.checkChildren&&rt!==Le||this._originChanged(rt,this._getFocusOrigin(Le),Nt)}_onBlur(ye,rt){const Nt=this._elementInfo.get(rt);!Nt||Nt.checkChildren&&ye.relatedTarget instanceof Node&&rt.contains(ye.relatedTarget)||(this._setClasses(rt),this._emitOrigin(Nt,null))}_emitOrigin(ye,rt){ye.subject.observers.length&&this._ngZone.run(()=>ye.subject.next(rt))}_registerGlobalListeners(ye){if(!this._platform.isBrowser)return;const rt=ye.rootNode,Nt=this._rootNodeFocusListenerCount.get(rt)||0;Nt||this._ngZone.runOutsideAngular(()=>{rt.addEventListener("focus",this._rootNodeFocusAndBlurListener,er),rt.addEventListener("blur",this._rootNodeFocusAndBlurListener,er)}),this._rootNodeFocusListenerCount.set(rt,Nt+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe((0,an.R)(this._stopInputModalityDetector)).subscribe(Le=>{this._setOrigin(Le,!0)}))}_removeGlobalListeners(ye){const rt=ye.rootNode;if(this._rootNodeFocusListenerCount.has(rt)){const Nt=this._rootNodeFocusListenerCount.get(rt);Nt>1?this._rootNodeFocusListenerCount.set(rt,Nt-1):(rt.removeEventListener("focus",this._rootNodeFocusAndBlurListener,er),rt.removeEventListener("blur",this._rootNodeFocusAndBlurListener,er),this._rootNodeFocusListenerCount.delete(rt))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(ye,rt,Nt){this._setClasses(ye,rt),this._emitOrigin(Nt,rt),this._lastFocusOrigin=rt}_getClosestElementsInfo(ye){const rt=[];return this._elementInfo.forEach((Nt,Le)=>{(Le===ye||Nt.checkChildren&&Le.contains(ye))&&rt.push([Le,Nt])}),rt}_isLastInteractionFromInputLabel(ye){const{_mostRecentTarget:rt,mostRecentModality:Nt}=this._inputModalityDetector;if("mouse"!==Nt||!rt||rt===ye||"INPUT"!==ye.nodeName&&"TEXTAREA"!==ye.nodeName||ye.disabled)return!1;const Le=ye.labels;if(Le)for(let Be=0;Be<Le.length;Be++)if(Le[Be].contains(rt))return!0;return!1}}return ne.\u0275fac=function(ye){return new(ye||ne)(_.LFG(_.R0b),_.LFG(re.t4),_.LFG(Hn),_.LFG(f.K0,8),_.LFG(gr,8))},ne.\u0275prov=_.Yz7({token:ne,factory:ne.\u0275fac,providedIn:"root"}),ne})();const $n="cdk-high-contrast-black-on-white",Oi="cdk-high-contrast-white-on-black",dn="cdk-high-contrast-active";let be=(()=>{class ne{constructor(ye,rt){this._platform=ye,this._document=rt,this._breakpointSubscription=(0,_.f3M)(Ae.Yg).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const ye=this._document.createElement("div");ye.style.backgroundColor="rgb(1,2,3)",ye.style.position="absolute",this._document.body.appendChild(ye);const rt=this._document.defaultView||window,Nt=rt&&rt.getComputedStyle?rt.getComputedStyle(ye):null,Le=(Nt&&Nt.backgroundColor||"").replace(/ /g,"");switch(ye.remove(),Le){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return 2;case"rgb(255,255,255)":case"rgb(255,250,239)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const ye=this._document.body.classList;ye.remove(dn,$n,Oi),this._hasCheckedHighContrastMode=!0;const rt=this.getHighContrastMode();1===rt?ye.add(dn,$n):2===rt&&ye.add(dn,Oi)}}}return ne.\u0275fac=function(ye){return new(ye||ne)(_.LFG(re.t4),_.LFG(f.K0))},ne.\u0275prov=_.Yz7({token:ne,factory:ne.\u0275fac,providedIn:"root"}),ne})(),$=(()=>{class ne{constructor(ye){ye._applyBodyHighContrastModeCssClasses()}}return ne.\u0275fac=function(ye){return new(ye||ne)(_.LFG(be))},ne.\u0275mod=_.oAB({type:ne}),ne.\u0275inj=_.cJS({imports:[Mt.Q8]}),ne})()},445:(wn,dt,L)=>{L.d(dt,{Is:()=>Ze,vT:()=>ze});var f=L(4650),_=L(6895);const re=new f.OlP("cdk-dir-doc",{providedIn:"root",factory:function Te(){return(0,f.f3M)(_.K0)}}),ke=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let Ze=(()=>{class pe{constructor(Ne){this.value="ltr",this.change=new f.vpe,Ne&&(this.value=function He(pe){const Me=pe?.toLowerCase()||"";return"auto"===Me&&typeof navigator<"u"&&navigator?.language?ke.test(navigator.language)?"rtl":"ltr":"rtl"===Me?"rtl":"ltr"}((Ne.body?Ne.body.dir:null)||(Ne.documentElement?Ne.documentElement.dir:null)||"ltr"))}ngOnDestroy(){this.change.complete()}}return pe.\u0275fac=function(Ne){return new(Ne||pe)(f.LFG(re,8))},pe.\u0275prov=f.Yz7({token:pe,factory:pe.\u0275fac,providedIn:"root"}),pe})(),ze=(()=>{class pe{}return pe.\u0275fac=function(Ne){return new(Ne||pe)},pe.\u0275mod=f.oAB({type:pe}),pe.\u0275inj=f.cJS({}),pe})()},1281:(wn,dt,L)=>{L.d(dt,{Eq:()=>ke,HM:()=>He,Ig:()=>_,fI:()=>Ze,su:()=>re});var f=L(4650);function _(ze){return null!=ze&&"false"!=`${ze}`}function re(ze,pe=0){return function Te(ze){return!isNaN(parseFloat(ze))&&!isNaN(Number(ze))}(ze)?Number(ze):pe}function ke(ze){return Array.isArray(ze)?ze:[ze]}function He(ze){return null==ze?"":"string"==typeof ze?ze:`${ze}px`}function Ze(ze){return ze instanceof f.SBq?ze.nativeElement:ze}},9521:(wn,dt,L)=>{L.d(dt,{A:()=>Et,JH:()=>_t,JU:()=>He,K5:()=>ke,Ku:()=>yt,LH:()=>Mt,L_:()=>Ne,MW:()=>Nn,Mf:()=>re,SV:()=>Ae,Sd:()=>an,VM:()=>pt,Vb:()=>nt,Z:()=>On,aO:()=>Ot,b2:()=>st,hY:()=>Me,jx:()=>Ze,oh:()=>It,uR:()=>Lt,xE:()=>Ye,zL:()=>xe});const re=9,ke=13,He=16,Ze=17,xe=18,Me=27,Ne=32,yt=33,pt=34,Lt=35,an=36,It=37,Mt=38,Ae=39,_t=40,Ye=48,Ot=57,Et=65,On=90,Nn=91,st=224;function nt(wt,...Bt){return Bt.length?Bt.some(mn=>wt[mn]):wt.altKey||wt.shiftKey||wt.ctrlKey||wt.metaKey}},2289:(wn,dt,L)=>{L.d(dt,{Yg:()=>_t,xu:()=>pt});var f=L(4650),_=L(1281),re=L(7579),Te=L(9841),ke=L(7272),He=L(9751),Ze=L(5698),xe=L(5684),ze=L(8372),pe=L(4004),Me=L(8675),Ne=L(2722),yt=L(3353);let pt=(()=>{class lt{}return lt.\u0275fac=function(Ye){return new(Ye||lt)},lt.\u0275mod=f.oAB({type:lt}),lt.\u0275inj=f.cJS({}),lt})();const Lt=new Set;let an,It=(()=>{class lt{constructor(Ye){this._platform=Ye,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):Ae}matchMedia(Ye){return(this._platform.WEBKIT||this._platform.BLINK)&&function Mt(lt){if(!Lt.has(lt))try{an||(an=document.createElement("style"),an.setAttribute("type","text/css"),document.head.appendChild(an)),an.sheet&&(an.sheet.insertRule(`@media ${lt} {body{ }}`,0),Lt.add(lt))}catch(kt){console.error(kt)}}(Ye),this._matchMedia(Ye)}}return lt.\u0275fac=function(Ye){return new(Ye||lt)(f.LFG(yt.t4))},lt.\u0275prov=f.Yz7({token:lt,factory:lt.\u0275fac,providedIn:"root"}),lt})();function Ae(lt){return{matches:"all"===lt||""===lt,media:lt,addListener:()=>{},removeListener:()=>{}}}let _t=(()=>{class lt{constructor(Ye,z){this._mediaMatcher=Ye,this._zone=z,this._queries=new Map,this._destroySubject=new re.x}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(Ye){return Qe((0,_.Eq)(Ye)).some(ct=>this._registerQuery(ct).mql.matches)}observe(Ye){const ct=Qe((0,_.Eq)(Ye)).map(Ft=>this._registerQuery(Ft).observable);let bt=(0,Te.a)(ct);return bt=(0,ke.z)(bt.pipe((0,Ze.q)(1)),bt.pipe((0,xe.T)(1),(0,ze.b)(0))),bt.pipe((0,pe.U)(Ft=>{const gn={matches:!1,breakpoints:{}};return Ft.forEach(({matches:vn,query:Pt})=>{gn.matches=gn.matches||vn,gn.breakpoints[Pt]=vn}),gn}))}_registerQuery(Ye){if(this._queries.has(Ye))return this._queries.get(Ye);const z=this._mediaMatcher.matchMedia(Ye),bt={observable:new He.y(Ft=>{const gn=vn=>this._zone.run(()=>Ft.next(vn));return z.addListener(gn),()=>{z.removeListener(gn)}}).pipe((0,Me.O)(z),(0,pe.U)(({matches:Ft})=>({query:Ye,matches:Ft})),(0,Ne.R)(this._destroySubject)),mql:z};return this._queries.set(Ye,bt),bt}}return lt.\u0275fac=function(Ye){return new(Ye||lt)(f.LFG(It),f.LFG(f.R0b))},lt.\u0275prov=f.Yz7({token:lt,factory:lt.\u0275fac,providedIn:"root"}),lt})();function Qe(lt){return lt.map(kt=>kt.split(",")).reduce((kt,Ye)=>kt.concat(Ye)).map(kt=>kt.trim())}},9643:(wn,dt,L)=>{L.d(dt,{Q8:()=>ze,wD:()=>xe});var f=L(1281),_=L(4650),re=L(9751),Te=L(7579),ke=L(8372);let He=(()=>{class pe{create(Ne){return typeof MutationObserver>"u"?null:new MutationObserver(Ne)}}return pe.\u0275fac=function(Ne){return new(Ne||pe)},pe.\u0275prov=_.Yz7({token:pe,factory:pe.\u0275fac,providedIn:"root"}),pe})(),Ze=(()=>{class pe{constructor(Ne){this._mutationObserverFactory=Ne,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((Ne,yt)=>this._cleanupObserver(yt))}observe(Ne){const yt=(0,f.fI)(Ne);return new re.y(pt=>{const an=this._observeElement(yt).subscribe(pt);return()=>{an.unsubscribe(),this._unobserveElement(yt)}})}_observeElement(Ne){if(this._observedElements.has(Ne))this._observedElements.get(Ne).count++;else{const yt=new Te.x,pt=this._mutationObserverFactory.create(Lt=>yt.next(Lt));pt&&pt.observe(Ne,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(Ne,{observer:pt,stream:yt,count:1})}return this._observedElements.get(Ne).stream}_unobserveElement(Ne){this._observedElements.has(Ne)&&(this._observedElements.get(Ne).count--,this._observedElements.get(Ne).count||this._cleanupObserver(Ne))}_cleanupObserver(Ne){if(this._observedElements.has(Ne)){const{observer:yt,stream:pt}=this._observedElements.get(Ne);yt&&yt.disconnect(),pt.complete(),this._observedElements.delete(Ne)}}}return pe.\u0275fac=function(Ne){return new(Ne||pe)(_.LFG(He))},pe.\u0275prov=_.Yz7({token:pe,factory:pe.\u0275fac,providedIn:"root"}),pe})(),xe=(()=>{class pe{get disabled(){return this._disabled}set disabled(Ne){this._disabled=(0,f.Ig)(Ne),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(Ne){this._debounce=(0,f.su)(Ne),this._subscribe()}constructor(Ne,yt,pt){this._contentObserver=Ne,this._elementRef=yt,this._ngZone=pt,this.event=new _.vpe,this._disabled=!1,this._currentSubscription=null}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const Ne=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?Ne.pipe((0,ke.b)(this.debounce)):Ne).subscribe(this.event)})}_unsubscribe(){this._currentSubscription?.unsubscribe()}}return pe.\u0275fac=function(Ne){return new(Ne||pe)(_.Y36(Ze),_.Y36(_.SBq),_.Y36(_.R0b))},pe.\u0275dir=_.lG2({type:pe,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),pe})(),ze=(()=>{class pe{}return pe.\u0275fac=function(Ne){return new(Ne||pe)},pe.\u0275mod=_.oAB({type:pe}),pe.\u0275inj=_.cJS({providers:[He]}),pe})()},3353:(wn,dt,L)=>{L.d(dt,{Mq:()=>pt,Oy:()=>Qe,_i:()=>Lt,ht:()=>Ae,i$:()=>Me,kV:()=>Mt,qK:()=>xe,sA:()=>_t,t4:()=>Te});var f=L(4650),_=L(6895);let re;try{re=typeof Intl<"u"&&Intl.v8BreakIterator}catch{re=!1}let He,Te=(()=>{class Ue{constructor(kt){this._platformId=kt,this.isBrowser=this._platformId?(0,_.NF)(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!re)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return Ue.\u0275fac=function(kt){return new(kt||Ue)(f.LFG(f.Lbi))},Ue.\u0275prov=f.Yz7({token:Ue,factory:Ue.\u0275fac,providedIn:"root"}),Ue})();const Ze=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function xe(){if(He)return He;if("object"!=typeof document||!document)return He=new Set(Ze),He;let Ue=document.createElement("input");return He=new Set(Ze.filter(lt=>(Ue.setAttribute("type",lt),Ue.type===lt))),He}let ze,Ne,yt,an;function Me(Ue){return function pe(){if(null==ze&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>ze=!0}))}finally{ze=ze||!1}return ze}()?Ue:!!Ue.capture}function pt(){if(null==yt){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return yt=!1,yt;if("scrollBehavior"in document.documentElement.style)yt=!0;else{const Ue=Element.prototype.scrollTo;yt=!!Ue&&!/\{\s*\[native code\]\s*\}/.test(Ue.toString())}}return yt}function Lt(){if("object"!=typeof document||!document)return 0;if(null==Ne){const Ue=document.createElement("div"),lt=Ue.style;Ue.dir="rtl",lt.width="1px",lt.overflow="auto",lt.visibility="hidden",lt.pointerEvents="none",lt.position="absolute";const kt=document.createElement("div"),Ye=kt.style;Ye.width="2px",Ye.height="1px",Ue.appendChild(kt),document.body.appendChild(Ue),Ne=0,0===Ue.scrollLeft&&(Ue.scrollLeft=1,Ne=0===Ue.scrollLeft?1:2),Ue.remove()}return Ne}function Mt(Ue){if(function It(){if(null==an){const Ue=typeof document<"u"?document.head:null;an=!(!Ue||!Ue.createShadowRoot&&!Ue.attachShadow)}return an}()){const lt=Ue.getRootNode?Ue.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&lt instanceof ShadowRoot)return lt}return null}function Ae(){let Ue=typeof document<"u"&&document?document.activeElement:null;for(;Ue&&Ue.shadowRoot;){const lt=Ue.shadowRoot.activeElement;if(lt===Ue)break;Ue=lt}return Ue}function _t(Ue){return Ue.composedPath?Ue.composedPath()[0]:Ue.target}function Qe(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}},6895:(wn,dt,L)=>{L.d(dt,{Do:()=>Ae,EM:()=>lo,HT:()=>Te,JF:()=>Vo,K0:()=>He,Mx:()=>Vt,NF:()=>gs,O5:()=>mn,Ov:()=>wi,PM:()=>Js,RF:()=>Ii,S$:()=>an,V_:()=>ze,Ye:()=>_t,b0:()=>Mt,bD:()=>us,ez:()=>Xs,mk:()=>Ge,n9:()=>ms,q:()=>re,sg:()=>nt,tP:()=>Qr,uU:()=>nr,w_:()=>ke});var f=L(4650);let _=null;function re(){return _}function Te(k){_||(_=k)}class ke{}const He=new f.OlP("DocumentToken");let Ze=(()=>{class k{historyGo(G){throw new Error("Not implemented")}}return k.\u0275fac=function(G){return new(G||k)},k.\u0275prov=f.Yz7({token:k,factory:function(){return function xe(){return(0,f.LFG)(pe)}()},providedIn:"platform"}),k})();const ze=new f.OlP("Location Initialized");let pe=(()=>{class k extends Ze{constructor(G){super(),this._doc=G,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return re().getBaseHref(this._doc)}onPopState(G){const ge=re().getGlobalEventTarget(this._doc,"window");return ge.addEventListener("popstate",G,!1),()=>ge.removeEventListener("popstate",G)}onHashChange(G){const ge=re().getGlobalEventTarget(this._doc,"window");return ge.addEventListener("hashchange",G,!1),()=>ge.removeEventListener("hashchange",G)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(G){this._location.pathname=G}pushState(G,ge,Ve){Me()?this._history.pushState(G,ge,Ve):this._location.hash=Ve}replaceState(G,ge,Ve){Me()?this._history.replaceState(G,ge,Ve):this._location.hash=Ve}forward(){this._history.forward()}back(){this._history.back()}historyGo(G=0){this._history.go(G)}getState(){return this._history.state}}return k.\u0275fac=function(G){return new(G||k)(f.LFG(He))},k.\u0275prov=f.Yz7({token:k,factory:function(){return function Ne(){return new pe((0,f.LFG)(He))}()},providedIn:"platform"}),k})();function Me(){return!!window.history.pushState}function yt(k,te){if(0==k.length)return te;if(0==te.length)return k;let G=0;return k.endsWith("/")&&G++,te.startsWith("/")&&G++,2==G?k+te.substring(1):1==G?k+te:k+"/"+te}function pt(k){const te=k.match(/#|\?|$/),G=te&&te.index||k.length;return k.slice(0,G-("/"===k[G-1]?1:0))+k.slice(G)}function Lt(k){return k&&"?"!==k[0]?"?"+k:k}let an=(()=>{class k{historyGo(G){throw new Error("Not implemented")}}return k.\u0275fac=function(G){return new(G||k)},k.\u0275prov=f.Yz7({token:k,factory:function(){return(0,f.f3M)(Mt)},providedIn:"root"}),k})();const It=new f.OlP("appBaseHref");let Mt=(()=>{class k extends an{constructor(G,ge){super(),this._platformLocation=G,this._removeListenerFns=[],this._baseHref=ge??this._platformLocation.getBaseHrefFromDOM()??(0,f.f3M)(He).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(G){this._removeListenerFns.push(this._platformLocation.onPopState(G),this._platformLocation.onHashChange(G))}getBaseHref(){return this._baseHref}prepareExternalUrl(G){return yt(this._baseHref,G)}path(G=!1){const ge=this._platformLocation.pathname+Lt(this._platformLocation.search),Ve=this._platformLocation.hash;return Ve&&G?`${ge}${Ve}`:ge}pushState(G,ge,Ve,Dt){const tn=this.prepareExternalUrl(Ve+Lt(Dt));this._platformLocation.pushState(G,ge,tn)}replaceState(G,ge,Ve,Dt){const tn=this.prepareExternalUrl(Ve+Lt(Dt));this._platformLocation.replaceState(G,ge,tn)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(G=0){this._platformLocation.historyGo?.(G)}}return k.\u0275fac=function(G){return new(G||k)(f.LFG(Ze),f.LFG(It,8))},k.\u0275prov=f.Yz7({token:k,factory:k.\u0275fac,providedIn:"root"}),k})(),Ae=(()=>{class k extends an{constructor(G,ge){super(),this._platformLocation=G,this._baseHref="",this._removeListenerFns=[],null!=ge&&(this._baseHref=ge)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(G){this._removeListenerFns.push(this._platformLocation.onPopState(G),this._platformLocation.onHashChange(G))}getBaseHref(){return this._baseHref}path(G=!1){let ge=this._platformLocation.hash;return null==ge&&(ge="#"),ge.length>0?ge.substring(1):ge}prepareExternalUrl(G){const ge=yt(this._baseHref,G);return ge.length>0?"#"+ge:ge}pushState(G,ge,Ve,Dt){let tn=this.prepareExternalUrl(Ve+Lt(Dt));0==tn.length&&(tn=this._platformLocation.pathname),this._platformLocation.pushState(G,ge,tn)}replaceState(G,ge,Ve,Dt){let tn=this.prepareExternalUrl(Ve+Lt(Dt));0==tn.length&&(tn=this._platformLocation.pathname),this._platformLocation.replaceState(G,ge,tn)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(G=0){this._platformLocation.historyGo?.(G)}}return k.\u0275fac=function(G){return new(G||k)(f.LFG(Ze),f.LFG(It,8))},k.\u0275prov=f.Yz7({token:k,factory:k.\u0275fac}),k})(),_t=(()=>{class k{constructor(G){this._subject=new f.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=G;const ge=this._locationStrategy.getBaseHref();this._basePath=function kt(k){if(new RegExp("^(https?:)?//").test(k)){const[,G]=k.split(/\/\/[^\/]+/);return G}return k}(pt(lt(ge))),this._locationStrategy.onPopState(Ve=>{this._subject.emit({url:this.path(!0),pop:!0,state:Ve.state,type:Ve.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(G=!1){return this.normalize(this._locationStrategy.path(G))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(G,ge=""){return this.path()==this.normalize(G+Lt(ge))}normalize(G){return k.stripTrailingSlash(function Ue(k,te){if(!k||!te.startsWith(k))return te;const G=te.substring(k.length);return""===G||["/",";","?","#"].includes(G[0])?G:te}(this._basePath,lt(G)))}prepareExternalUrl(G){return G&&"/"!==G[0]&&(G="/"+G),this._locationStrategy.prepareExternalUrl(G)}go(G,ge="",Ve=null){this._locationStrategy.pushState(Ve,"",G,ge),this._notifyUrlChangeListeners(this.prepareExternalUrl(G+Lt(ge)),Ve)}replaceState(G,ge="",Ve=null){this._locationStrategy.replaceState(Ve,"",G,ge),this._notifyUrlChangeListeners(this.prepareExternalUrl(G+Lt(ge)),Ve)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(G=0){this._locationStrategy.historyGo?.(G)}onUrlChange(G){return this._urlChangeListeners.push(G),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(ge=>{this._notifyUrlChangeListeners(ge.url,ge.state)})),()=>{const ge=this._urlChangeListeners.indexOf(G);this._urlChangeListeners.splice(ge,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(G="",ge){this._urlChangeListeners.forEach(Ve=>Ve(G,ge))}subscribe(G,ge,Ve){return this._subject.subscribe({next:G,error:ge,complete:Ve})}}return k.normalizeQueryParams=Lt,k.joinWithSlash=yt,k.stripTrailingSlash=pt,k.\u0275fac=function(G){return new(G||k)(f.LFG(an))},k.\u0275prov=f.Yz7({token:k,factory:function(){return function Qe(){return new _t((0,f.LFG)(an))}()},providedIn:"root"}),k})();function lt(k){return k.replace(/\/index.html$/,"")}var bt=(()=>((bt=bt||{})[bt.Format=0]="Format",bt[bt.Standalone=1]="Standalone",bt))(),Ft=(()=>((Ft=Ft||{})[Ft.Narrow=0]="Narrow",Ft[Ft.Abbreviated=1]="Abbreviated",Ft[Ft.Wide=2]="Wide",Ft[Ft.Short=3]="Short",Ft))(),gn=(()=>((gn=gn||{})[gn.Short=0]="Short",gn[gn.Medium=1]="Medium",gn[gn.Long=2]="Long",gn[gn.Full=3]="Full",gn))(),vn=(()=>((vn=vn||{})[vn.Decimal=0]="Decimal",vn[vn.Group=1]="Group",vn[vn.List=2]="List",vn[vn.PercentSign=3]="PercentSign",vn[vn.PlusSign=4]="PlusSign",vn[vn.MinusSign=5]="MinusSign",vn[vn.Exponential=6]="Exponential",vn[vn.SuperscriptingExponent=7]="SuperscriptingExponent",vn[vn.PerMille=8]="PerMille",vn[vn.Infinity=9]="Infinity",vn[vn.NaN=10]="NaN",vn[vn.TimeSeparator=11]="TimeSeparator",vn[vn.CurrencyDecimal=12]="CurrencyDecimal",vn[vn.CurrencyGroup=13]="CurrencyGroup",vn))();function rn(k,te){return zn((0,f.cg1)(k)[f.wAp.DateFormat],te)}function Zt(k,te){return zn((0,f.cg1)(k)[f.wAp.TimeFormat],te)}function _n(k,te){return zn((0,f.cg1)(k)[f.wAp.DateTimeFormat],te)}function sn(k,te){const G=(0,f.cg1)(k),ge=G[f.wAp.NumberSymbols][te];if(typeof ge>"u"){if(te===vn.CurrencyDecimal)return G[f.wAp.NumberSymbols][vn.Decimal];if(te===vn.CurrencyGroup)return G[f.wAp.NumberSymbols][vn.Group]}return ge}function Pi(k){if(!k[f.wAp.ExtraData])throw new Error(`Missing extra locale data for the locale "${k[f.wAp.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function zn(k,te){for(let G=te;G>-1;G--)if(typeof k[G]<"u")return k[G];throw new Error("Locale data API: locale data undefined")}function Mi(k){const[te,G]=k.split(":");return{hours:+te,minutes:+G}}const Gn=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Yi={},Pr=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var Hn=(()=>((Hn=Hn||{})[Hn.Short=0]="Short",Hn[Hn.ShortGMT=1]="ShortGMT",Hn[Hn.Long=2]="Long",Hn[Hn.Extended=3]="Extended",Hn))(),Pn=(()=>((Pn=Pn||{})[Pn.FullYear=0]="FullYear",Pn[Pn.Month=1]="Month",Pn[Pn.Date=2]="Date",Pn[Pn.Hours=3]="Hours",Pn[Pn.Minutes=4]="Minutes",Pn[Pn.Seconds=5]="Seconds",Pn[Pn.FractionalSeconds=6]="FractionalSeconds",Pn[Pn.Day=7]="Day",Pn))(),On=(()=>((On=On||{})[On.DayPeriods=0]="DayPeriods",On[On.Days=1]="Days",On[On.Months=2]="Months",On[On.Eras=3]="Eras",On))();function Nn(k,te,G,ge){let Ve=function St(k){if(Je(k))return k;if("number"==typeof k&&!isNaN(k))return new Date(k);if("string"==typeof k){if(k=k.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(k)){const[Ve,Dt=1,tn=1]=k.split("-").map(An=>+An);return Ni(Ve,Dt-1,tn)}const G=parseFloat(k);if(!isNaN(k-G))return new Date(G);let ge;if(ge=k.match(Gn))return function Mn(k){const te=new Date(0);let G=0,ge=0;const Ve=k[8]?te.setUTCFullYear:te.setFullYear,Dt=k[8]?te.setUTCHours:te.setHours;k[9]&&(G=Number(k[9]+k[10]),ge=Number(k[9]+k[11])),Ve.call(te,Number(k[1]),Number(k[2])-1,Number(k[3]));const tn=Number(k[4]||0)-G,An=Number(k[5]||0)-ge,xi=Number(k[6]||0),li=Math.floor(1e3*parseFloat("0."+(k[7]||0)));return Dt.call(te,tn,An,xi,li),te}(ge)}const te=new Date(k);if(!Je(te))throw new Error(`Unable to convert "${k}" into a date`);return te}(k);te=Hi(G,te)||te;let An,tn=[];for(;te;){if(An=Pr.exec(te),!An){tn.push(te);break}{tn=tn.concat(An.slice(1));const Ui=tn.pop();if(!Ui)break;te=Ui}}let xi=Ve.getTimezoneOffset();ge&&(xi=Be(ge,xi),Ve=function qt(k,te,G){const ge=G?-1:1,Ve=k.getTimezoneOffset();return function it(k,te){return(k=new Date(k.getTime())).setMinutes(k.getMinutes()+te),k}(k,ge*(Be(te,Ve)-Ve))}(Ve,ge,!0));let li="";return tn.forEach(Ui=>{const yi=function Le(k){if(Nt[k])return Nt[k];let te;switch(k){case"G":case"GG":case"GGG":te=$n(On.Eras,Ft.Abbreviated);break;case"GGGG":te=$n(On.Eras,Ft.Wide);break;case"GGGGG":te=$n(On.Eras,Ft.Narrow);break;case"y":te=Fi(Pn.FullYear,1,0,!1,!0);break;case"yy":te=Fi(Pn.FullYear,2,0,!0,!0);break;case"yyy":te=Fi(Pn.FullYear,3,0,!1,!0);break;case"yyyy":te=Fi(Pn.FullYear,4,0,!1,!0);break;case"Y":te=rt(1);break;case"YY":te=rt(2,!0);break;case"YYY":te=rt(3);break;case"YYYY":te=rt(4);break;case"M":case"L":te=Fi(Pn.Month,1,1);break;case"MM":case"LL":te=Fi(Pn.Month,2,1);break;case"MMM":te=$n(On.Months,Ft.Abbreviated);break;case"MMMM":te=$n(On.Months,Ft.Wide);break;case"MMMMM":te=$n(On.Months,Ft.Narrow);break;case"LLL":te=$n(On.Months,Ft.Abbreviated,bt.Standalone);break;case"LLLL":te=$n(On.Months,Ft.Wide,bt.Standalone);break;case"LLLLL":te=$n(On.Months,Ft.Narrow,bt.Standalone);break;case"w":te=ye(1);break;case"ww":te=ye(2);break;case"W":te=ye(1,!0);break;case"d":te=Fi(Pn.Date,1);break;case"dd":te=Fi(Pn.Date,2);break;case"c":case"cc":te=Fi(Pn.Day,1);break;case"ccc":te=$n(On.Days,Ft.Abbreviated,bt.Standalone);break;case"cccc":te=$n(On.Days,Ft.Wide,bt.Standalone);break;case"ccccc":te=$n(On.Days,Ft.Narrow,bt.Standalone);break;case"cccccc":te=$n(On.Days,Ft.Short,bt.Standalone);break;case"E":case"EE":case"EEE":te=$n(On.Days,Ft.Abbreviated);break;case"EEEE":te=$n(On.Days,Ft.Wide);break;case"EEEEE":te=$n(On.Days,Ft.Narrow);break;case"EEEEEE":te=$n(On.Days,Ft.Short);break;case"a":case"aa":case"aaa":te=$n(On.DayPeriods,Ft.Abbreviated);break;case"aaaa":te=$n(On.DayPeriods,Ft.Wide);break;case"aaaaa":te=$n(On.DayPeriods,Ft.Narrow);break;case"b":case"bb":case"bbb":te=$n(On.DayPeriods,Ft.Abbreviated,bt.Standalone,!0);break;case"bbbb":te=$n(On.DayPeriods,Ft.Wide,bt.Standalone,!0);break;case"bbbbb":te=$n(On.DayPeriods,Ft.Narrow,bt.Standalone,!0);break;case"B":case"BB":case"BBB":te=$n(On.DayPeriods,Ft.Abbreviated,bt.Format,!0);break;case"BBBB":te=$n(On.DayPeriods,Ft.Wide,bt.Format,!0);break;case"BBBBB":te=$n(On.DayPeriods,Ft.Narrow,bt.Format,!0);break;case"h":te=Fi(Pn.Hours,1,-12);break;case"hh":te=Fi(Pn.Hours,2,-12);break;case"H":te=Fi(Pn.Hours,1);break;case"HH":te=Fi(Pn.Hours,2);break;case"m":te=Fi(Pn.Minutes,1);break;case"mm":te=Fi(Pn.Minutes,2);break;case"s":te=Fi(Pn.Seconds,1);break;case"ss":te=Fi(Pn.Seconds,2);break;case"S":te=Fi(Pn.FractionalSeconds,1);break;case"SS":te=Fi(Pn.FractionalSeconds,2);break;case"SSS":te=Fi(Pn.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":te=dn(Hn.Short);break;case"ZZZZZ":te=dn(Hn.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":te=dn(Hn.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":te=dn(Hn.Long);break;default:return null}return Nt[k]=te,te}(Ui);li+=yi?yi(Ve,G,xi):"''"===Ui?"'":Ui.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),li}function Ni(k,te,G){const ge=new Date(0);return ge.setFullYear(k,te,G),ge.setHours(0,0,0),ge}function Hi(k,te){const G=function Ht(k){return(0,f.cg1)(k)[f.wAp.LocaleId]}(k);if(Yi[G]=Yi[G]||{},Yi[G][te])return Yi[G][te];let ge="";switch(te){case"shortDate":ge=rn(k,gn.Short);break;case"mediumDate":ge=rn(k,gn.Medium);break;case"longDate":ge=rn(k,gn.Long);break;case"fullDate":ge=rn(k,gn.Full);break;case"shortTime":ge=Zt(k,gn.Short);break;case"mediumTime":ge=Zt(k,gn.Medium);break;case"longTime":ge=Zt(k,gn.Long);break;case"fullTime":ge=Zt(k,gn.Full);break;case"short":const Ve=Hi(k,"shortTime"),Dt=Hi(k,"shortDate");ge=Vi(_n(k,gn.Short),[Ve,Dt]);break;case"medium":const tn=Hi(k,"mediumTime"),An=Hi(k,"mediumDate");ge=Vi(_n(k,gn.Medium),[tn,An]);break;case"long":const xi=Hi(k,"longTime"),li=Hi(k,"longDate");ge=Vi(_n(k,gn.Long),[xi,li]);break;case"full":const Ui=Hi(k,"fullTime"),yi=Hi(k,"fullDate");ge=Vi(_n(k,gn.Full),[Ui,yi])}return ge&&(Yi[G][te]=ge),ge}function Vi(k,te){return te&&(k=k.replace(/\{([^}]+)}/g,function(G,ge){return null!=te&&ge in te?te[ge]:G})),k}function gr(k,te,G="-",ge,Ve){let Dt="";(k<0||Ve&&k<=0)&&(Ve?k=1-k:(k=-k,Dt=G));let tn=String(k);for(;tn.length<te;)tn="0"+tn;return ge&&(tn=tn.slice(tn.length-te)),Dt+tn}function Fi(k,te,G=0,ge=!1,Ve=!1){return function(Dt,tn){let An=function $r(k,te){switch(k){case Pn.FullYear:return te.getFullYear();case Pn.Month:return te.getMonth();case Pn.Date:return te.getDate();case Pn.Hours:return te.getHours();case Pn.Minutes:return te.getMinutes();case Pn.Seconds:return te.getSeconds();case Pn.FractionalSeconds:return te.getMilliseconds();case Pn.Day:return te.getDay();default:throw new Error(`Unknown DateType value "${k}".`)}}(k,Dt);if((G>0||An>-G)&&(An+=G),k===Pn.Hours)0===An&&-12===G&&(An=12);else if(k===Pn.FractionalSeconds)return function er(k,te){return gr(k,3).substring(0,te)}(An,te);const xi=sn(tn,vn.MinusSign);return gr(An,te,xi,ge,Ve)}}function $n(k,te,G=bt.Format,ge=!1){return function(Ve,Dt){return function Oi(k,te,G,ge,Ve,Dt){switch(G){case On.Months:return function Gt(k,te,G){const ge=(0,f.cg1)(k),Dt=zn([ge[f.wAp.MonthsFormat],ge[f.wAp.MonthsStandalone]],te);return zn(Dt,G)}(te,Ve,ge)[k.getMonth()];case On.Days:return function jt(k,te,G){const ge=(0,f.cg1)(k),Dt=zn([ge[f.wAp.DaysFormat],ge[f.wAp.DaysStandalone]],te);return zn(Dt,G)}(te,Ve,ge)[k.getDay()];case On.DayPeriods:const tn=k.getHours(),An=k.getMinutes();if(Dt){const li=function Cr(k){const te=(0,f.cg1)(k);return Pi(te),(te[f.wAp.ExtraData][2]||[]).map(ge=>"string"==typeof ge?Mi(ge):[Mi(ge[0]),Mi(ge[1])])}(te),Ui=function ii(k,te,G){const ge=(0,f.cg1)(k);Pi(ge);const Dt=zn([ge[f.wAp.ExtraData][0],ge[f.wAp.ExtraData][1]],te)||[];return zn(Dt,G)||[]}(te,Ve,ge),yi=li.findIndex(Nr=>{if(Array.isArray(Nr)){const[Rn,hr]=Nr,fr=tn>=Rn.hours&&An>=Rn.minutes,ni=tn<hr.hours||tn===hr.hours&&An<hr.minutes;if(Rn.hours<hr.hours){if(fr&&ni)return!0}else if(fr||ni)return!0}else if(Nr.hours===tn&&Nr.minutes===An)return!0;return!1});if(-1!==yi)return Ui[yi]}return function Ot(k,te,G){const ge=(0,f.cg1)(k),Dt=zn([ge[f.wAp.DayPeriodsFormat],ge[f.wAp.DayPeriodsStandalone]],te);return zn(Dt,G)}(te,Ve,ge)[tn<12?0:1];case On.Eras:return function Tt(k,te){return zn((0,f.cg1)(k)[f.wAp.Eras],te)}(te,ge)[k.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${G}`)}}(Ve,Dt,k,te,G,ge)}}function dn(k){return function(te,G,ge){const Ve=-1*ge,Dt=sn(G,vn.MinusSign),tn=Ve>0?Math.floor(Ve/60):Math.ceil(Ve/60);switch(k){case Hn.Short:return(Ve>=0?"+":"")+gr(tn,2,Dt)+gr(Math.abs(Ve%60),2,Dt);case Hn.ShortGMT:return"GMT"+(Ve>=0?"+":"")+gr(tn,1,Dt);case Hn.Long:return"GMT"+(Ve>=0?"+":"")+gr(tn,2,Dt)+":"+gr(Math.abs(Ve%60),2,Dt);case Hn.Extended:return 0===ge?"Z":(Ve>=0?"+":"")+gr(tn,2,Dt)+":"+gr(Math.abs(Ve%60),2,Dt);default:throw new Error(`Unknown zone width "${k}"`)}}}const be=0,$=4;function de(k){return Ni(k.getFullYear(),k.getMonth(),k.getDate()+($-k.getDay()))}function ye(k,te=!1){return function(G,ge){let Ve;if(te){const Dt=new Date(G.getFullYear(),G.getMonth(),1).getDay()-1,tn=G.getDate();Ve=1+Math.floor((tn+Dt)/7)}else{const Dt=de(G),tn=function ne(k){const te=Ni(k,be,1).getDay();return Ni(k,0,1+(te<=$?$:$+7)-te)}(Dt.getFullYear()),An=Dt.getTime()-tn.getTime();Ve=1+Math.round(An/6048e5)}return gr(Ve,k,sn(ge,vn.MinusSign))}}function rt(k,te=!1){return function(G,ge){return gr(de(G).getFullYear(),k,sn(ge,vn.MinusSign),te)}}const Nt={};function Be(k,te){k=k.replace(/:/g,"");const G=Date.parse("Jan 01, 1970 00:00:00 "+k)/6e4;return isNaN(G)?te:G}function Je(k){return k instanceof Date&&!isNaN(k.valueOf())}function Vt(k,te){te=encodeURIComponent(te);for(const G of k.split(";")){const ge=G.indexOf("="),[Ve,Dt]=-1==ge?[G,""]:[G.slice(0,ge),G.slice(ge+1)];if(Ve.trim()===te)return decodeURIComponent(Dt)}return null}const et=/\s+/,Pe=[];let Ge=(()=>{class k{constructor(G,ge,Ve,Dt){this._iterableDiffers=G,this._keyValueDiffers=ge,this._ngEl=Ve,this._renderer=Dt,this.initialClasses=Pe,this.stateMap=new Map}set klass(G){this.initialClasses=null!=G?G.trim().split(et):Pe}set ngClass(G){this.rawClass="string"==typeof G?G.trim().split(et):G}ngDoCheck(){for(const ge of this.initialClasses)this._updateState(ge,!0);const G=this.rawClass;if(Array.isArray(G)||G instanceof Set)for(const ge of G)this._updateState(ge,!0);else if(null!=G)for(const ge of Object.keys(G))this._updateState(ge,Boolean(G[ge]));this._applyStateDiff()}_updateState(G,ge){const Ve=this.stateMap.get(G);void 0!==Ve?(Ve.enabled!==ge&&(Ve.changed=!0,Ve.enabled=ge),Ve.touched=!0):this.stateMap.set(G,{enabled:ge,changed:!0,touched:!0})}_applyStateDiff(){for(const G of this.stateMap){const ge=G[0],Ve=G[1];Ve.changed?(this._toggleClass(ge,Ve.enabled),Ve.changed=!1):Ve.touched||(Ve.enabled&&this._toggleClass(ge,!1),this.stateMap.delete(ge)),Ve.touched=!1}}_toggleClass(G,ge){(G=G.trim()).length>0&&G.split(et).forEach(Ve=>{ge?this._renderer.addClass(this._ngEl.nativeElement,Ve):this._renderer.removeClass(this._ngEl.nativeElement,Ve)})}}return k.\u0275fac=function(G){return new(G||k)(f.Y36(f.ZZ4),f.Y36(f.aQg),f.Y36(f.SBq),f.Y36(f.Qsj))},k.\u0275dir=f.lG2({type:k,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),k})();class st{constructor(te,G,ge,Ve){this.$implicit=te,this.ngForOf=G,this.index=ge,this.count=Ve}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let nt=(()=>{class k{set ngForOf(G){this._ngForOf=G,this._ngForOfDirty=!0}set ngForTrackBy(G){this._trackByFn=G}get ngForTrackBy(){return this._trackByFn}constructor(G,ge,Ve){this._viewContainer=G,this._template=ge,this._differs=Ve,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(G){G&&(this._template=G)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const G=this._ngForOf;!this._differ&&G&&(this._differ=this._differs.find(G).create(this.ngForTrackBy))}if(this._differ){const G=this._differ.diff(this._ngForOf);G&&this._applyChanges(G)}}_applyChanges(G){const ge=this._viewContainer;G.forEachOperation((Ve,Dt,tn)=>{if(null==Ve.previousIndex)ge.createEmbeddedView(this._template,new st(Ve.item,this._ngForOf,-1,-1),null===tn?void 0:tn);else if(null==tn)ge.remove(null===Dt?void 0:Dt);else if(null!==Dt){const An=ge.get(Dt);ge.move(An,tn),wt(An,Ve)}});for(let Ve=0,Dt=ge.length;Ve<Dt;Ve++){const An=ge.get(Ve).context;An.index=Ve,An.count=Dt,An.ngForOf=this._ngForOf}G.forEachIdentityChange(Ve=>{wt(ge.get(Ve.currentIndex),Ve)})}static ngTemplateContextGuard(G,ge){return!0}}return k.\u0275fac=function(G){return new(G||k)(f.Y36(f.s_b),f.Y36(f.Rgc),f.Y36(f.ZZ4))},k.\u0275dir=f.lG2({type:k,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),k})();function wt(k,te){k.context.$implicit=te.item}let mn=(()=>{class k{constructor(G,ge){this._viewContainer=G,this._context=new Wn,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=ge}set ngIf(G){this._context.$implicit=this._context.ngIf=G,this._updateView()}set ngIfThen(G){xn("ngIfThen",G),this._thenTemplateRef=G,this._thenViewRef=null,this._updateView()}set ngIfElse(G){xn("ngIfElse",G),this._elseTemplateRef=G,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(G,ge){return!0}}return k.\u0275fac=function(G){return new(G||k)(f.Y36(f.s_b),f.Y36(f.Rgc))},k.\u0275dir=f.lG2({type:k,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),k})();class Wn{constructor(){this.$implicit=null,this.ngIf=null}}function xn(k,te){if(te&&!te.createEmbeddedView)throw new Error(`${k} must be a TemplateRef, but received '${(0,f.AaK)(te)}'.`)}class _r{constructor(te,G){this._viewContainerRef=te,this._templateRef=G,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(te){te&&!this._created?this.create():!te&&this._created&&this.destroy()}}let Ii=(()=>{class k{constructor(){this._defaultViews=[],this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(G){this._ngSwitch=G,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(G){this._defaultViews.push(G)}_matchCase(G){const ge=G==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||ge,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),ge}_updateDefaultCases(G){if(this._defaultViews.length>0&&G!==this._defaultUsed){this._defaultUsed=G;for(const ge of this._defaultViews)ge.enforceState(G)}}}return k.\u0275fac=function(G){return new(G||k)},k.\u0275dir=f.lG2({type:k,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"},standalone:!0}),k})(),ms=(()=>{class k{constructor(G,ge,Ve){this.ngSwitch=Ve,Ve._addCase(),this._view=new _r(G,ge)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return k.\u0275fac=function(G){return new(G||k)(f.Y36(f.s_b),f.Y36(f.Rgc),f.Y36(Ii,9))},k.\u0275dir=f.lG2({type:k,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"},standalone:!0}),k})(),Qr=(()=>{class k{constructor(G){this._viewContainerRef=G,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(G){if(G.ngTemplateOutlet||G.ngTemplateOutletInjector){const ge=this._viewContainerRef;if(this._viewRef&&ge.remove(ge.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:Ve,ngTemplateOutletContext:Dt,ngTemplateOutletInjector:tn}=this;this._viewRef=ge.createEmbeddedView(Ve,Dt,tn?{injector:tn}:void 0)}else this._viewRef=null}else this._viewRef&&G.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return k.\u0275fac=function(G){return new(G||k)(f.Y36(f.s_b))},k.\u0275dir=f.lG2({type:k,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[f.TTD]}),k})();function Ci(k,te){return new f.vHH(2100,!1)}class Ls{createSubscription(te,G){return te.subscribe({next:G,error:ge=>{throw ge}})}dispose(te){te.unsubscribe()}}class lr{createSubscription(te,G){return te.then(G,ge=>{throw ge})}dispose(te){}}const or=new lr,_i=new Ls;let wi=(()=>{class k{constructor(G){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=G}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(G){return this._obj?G!==this._obj?(this._dispose(),this.transform(G)):this._latestValue:(G&&this._subscribe(G),this._latestValue)}_subscribe(G){this._obj=G,this._strategy=this._selectStrategy(G),this._subscription=this._strategy.createSubscription(G,ge=>this._updateLatestValue(G,ge))}_selectStrategy(G){if((0,f.QGY)(G))return or;if((0,f.F4k)(G))return _i;throw Ci()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(G,ge){G===this._obj&&(this._latestValue=ge,this._ref.markForCheck())}}return k.\u0275fac=function(G){return new(G||k)(f.Y36(f.sBO,16))},k.\u0275pipe=f.Yjl({name:"async",type:k,pure:!1,standalone:!0}),k})();const vr=new f.OlP("DATE_PIPE_DEFAULT_TIMEZONE"),Ti=new f.OlP("DATE_PIPE_DEFAULT_OPTIONS");let nr=(()=>{class k{constructor(G,ge,Ve){this.locale=G,this.defaultTimezone=ge,this.defaultOptions=Ve}transform(G,ge,Ve,Dt){if(null==G||""===G||G!=G)return null;try{return Nn(G,ge??this.defaultOptions?.dateFormat??"mediumDate",Dt||this.locale,Ve??this.defaultOptions?.timezone??this.defaultTimezone??void 0)}catch(tn){throw Ci()}}}return k.\u0275fac=function(G){return new(G||k)(f.Y36(f.soG,16),f.Y36(vr,24),f.Y36(Ti,24))},k.\u0275pipe=f.Yjl({name:"date",type:k,pure:!0,standalone:!0}),k})(),Xs=(()=>{class k{}return k.\u0275fac=function(G){return new(G||k)},k.\u0275mod=f.oAB({type:k}),k.\u0275inj=f.cJS({}),k})();const us="browser",kr="server";function gs(k){return k===us}function Js(k){return k===kr}let lo=(()=>{class k{}return k.\u0275prov=(0,f.Yz7)({token:k,providedIn:"root",factory:()=>new Zr((0,f.LFG)(He),window)}),k})();class Zr{constructor(te,G){this.document=te,this.window=G,this.offset=()=>[0,0]}setOffset(te){this.offset=Array.isArray(te)?()=>te:te}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(te){this.supportsScrolling()&&this.window.scrollTo(te[0],te[1])}scrollToAnchor(te){if(!this.supportsScrolling())return;const G=function co(k,te){const G=k.getElementById(te)||k.getElementsByName(te)[0];if(G)return G;if("function"==typeof k.createTreeWalker&&k.body&&(k.body.createShadowRoot||k.body.attachShadow)){const ge=k.createTreeWalker(k.body,NodeFilter.SHOW_ELEMENT);let Ve=ge.currentNode;for(;Ve;){const Dt=Ve.shadowRoot;if(Dt){const tn=Dt.getElementById(te)||Dt.querySelector(`[name="${te}"]`);if(tn)return tn}Ve=ge.nextNode()}}return null}(this.document,te);G&&(this.scrollToElement(G),G.focus())}setHistoryScrollRestoration(te){if(this.supportScrollRestoration()){const G=this.window.history;G&&G.scrollRestoration&&(G.scrollRestoration=te)}}scrollToElement(te){const G=te.getBoundingClientRect(),ge=G.left+this.window.pageXOffset,Ve=G.top+this.window.pageYOffset,Dt=this.offset();this.window.scrollTo(ge-Dt[0],Ve-Dt[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const te=eo(this.window.history)||eo(Object.getPrototypeOf(this.window.history));return!(!te||!te.writable&&!te.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function eo(k){return Object.getOwnPropertyDescriptor(k,"scrollRestoration")}class Vo{}},4650:(wn,dt,L)=>{L.d(dt,{$8M:()=>Ja,$WT:()=>ps,$Z:()=>Ff,AFp:()=>Ob,ALo:()=>Jv,AaK:()=>xe,CHM:()=>Zo,CRH:()=>ub,CZH:()=>m_,CqO:()=>Pg,D6c:()=>SI,EJc:()=>zE,EiD:()=>Nu,EpF:()=>Rg,F$t:()=>mm,F4k:()=>fm,FYo:()=>wc,FiY:()=>pl,Gf:()=>lb,GfV:()=>gp,Gpc:()=>Me,Hsn:()=>gm,Ikx:()=>t_,JOm:()=>Ra,JVY:()=>Sh,JZr:()=>an,KtG:()=>ma,L6k:()=>A,LAX:()=>E,LFG:()=>be,LSH:()=>eu,Lbi:()=>VE,Lck:()=>L0,MAs:()=>Zf,MMx:()=>Hy,NdJ:()=>Yf,O4$:()=>N,OlP:()=>cs,Oqu:()=>yh,P3R:()=>td,PXZ:()=>rI,Q6J:()=>uh,QGY:()=>hm,QbO:()=>BE,Qsj:()=>Ll,R0b:()=>Au,RDi:()=>ws,Rgc:()=>Vm,SBq:()=>qr,Sil:()=>GE,Suo:()=>cb,TTD:()=>lo,TgZ:()=>Rd,Udp:()=>mh,W1O:()=>pb,X6Q:()=>cI,XFs:()=>Tn,Xpm:()=>yr,Xts:()=>$d,Y36:()=>Xd,YKP:()=>Uv,YNc:()=>um,Yjl:()=>rs,Yz7:()=>sn,Z0I:()=>Bn,ZZ4:()=>hv,_Bn:()=>Lv,_UZ:()=>sf,_Vd:()=>En,_c5:()=>TI,_uU:()=>df,aQg:()=>fv,c2e:()=>HE,cJS:()=>fi,cg1:()=>Nm,dDg:()=>eI,dqk:()=>Hn,eBb:()=>y,eFA:()=>Wb,eJc:()=>Yy,ekj:()=>wm,eoX:()=>jb,evT:()=>vp,f3M:()=>ne,g9A:()=>Nb,h0i:()=>cp,hGG:()=>DI,hij:()=>hf,iGM:()=>ab,ifc:()=>St,ip1:()=>Pb,jDz:()=>Bv,kEZ:()=>Kv,kL8:()=>Yu,lG2:()=>Cs,lcZ:()=>eb,lqb:()=>Iu,lri:()=>Bb,mCW:()=>di,n5z:()=>Xa,n_E:()=>u_,oAB:()=>os,oxw:()=>Qf,pB0:()=>F,q3G:()=>ka,q4F:()=>ju,qLn:()=>Ph,qOj:()=>Xh,qZA:()=>dh,qzn:()=>vu,rWj:()=>Hb,s9C:()=>hh,sBO:()=>uI,s_b:()=>h_,soG:()=>g_,tBr:()=>ia,tb:()=>$b,tp0:()=>Ca,uIk:()=>om,vHH:()=>It,vpe:()=>_d,wAp:()=>xr,xi3:()=>tb,xp6:()=>Cp,z2F:()=>__,z3N:()=>Ec,zSh:()=>Rh,zs3:()=>sd});var f=L(7579),_=L(727),re=L(9751),Te=L(6451),ke=L(3099);function He(n){for(let i in n)if(n[i]===He)return i;throw Error("Could not find renamed property on target object.")}function Ze(n,i){for(const s in i)i.hasOwnProperty(s)&&!n.hasOwnProperty(s)&&(n[s]=i[s])}function xe(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(xe).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const i=n.toString();if(null==i)return""+i;const s=i.indexOf("\n");return-1===s?i:i.substring(0,s)}function ze(n,i){return null==n||""===n?null===i?"":i:null==i||""===i?n:n+" "+i}const pe=He({__forward_ref__:He});function Me(n){return n.__forward_ref__=Me,n.toString=function(){return xe(this())},n}function Ne(n){return yt(n)?n():n}function yt(n){return"function"==typeof n&&n.hasOwnProperty(pe)&&n.__forward_ref__===Me}function pt(n){return n&&!!n.\u0275providers}const an="https://g.co/ng/security#xss";class It extends Error{constructor(i,s){super(Mt(i,s)),this.code=i}}function Mt(n,i){return`NG0${Math.abs(n)}${i?": "+i.trim():""}`}function Ae(n){return"string"==typeof n?n:null==n?"":String(n)}function kt(n,i){throw new It(-201,!1)}function Ut(n,i){null==n&&function Et(n,i,s,l){throw new Error(`ASSERTION ERROR: ${n}`+(null==l?"":` [Expected=> ${s} ${l} ${i} <=Actual]`))}(i,n,null,"!=")}function sn(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function fi(n){return{providers:n.providers||[],imports:n.imports||[]}}function ui(n){return Qn(n,ii)||Qn(n,zn)}function Bn(n){return null!==ui(n)}function Qn(n,i){return n.hasOwnProperty(i)?n[i]:null}function Cr(n){return n&&(n.hasOwnProperty(Ai)||n.hasOwnProperty(Mi))?n[Ai]:null}const ii=He({\u0275prov:He}),Ai=He({\u0275inj:He}),zn=He({ngInjectableDef:He}),Mi=He({ngInjectorDef:He});var Tn=(()=>((Tn=Tn||{})[Tn.Default=0]="Default",Tn[Tn.Host=1]="Host",Tn[Tn.Self=2]="Self",Tn[Tn.SkipSelf=4]="SkipSelf",Tn[Tn.Optional=8]="Optional",Tn))();let Ji;function Gn(n){const i=Ji;return Ji=n,i}function Yi(n,i,s){const l=ui(n);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:s&Tn.Optional?null:void 0!==i?i:void kt(xe(n))}const Hn=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Ni={},Hi="__NG_DI_FLAG__",Vi="ngTempTokenPath",gr="ngTokenPath",er=/\n/gm,Fi="\u0275",$r="__source";let $n;function Oi(n){const i=$n;return $n=n,i}function dn(n,i=Tn.Default){if(void 0===$n)throw new It(-203,!1);return null===$n?Yi(n,void 0,i):$n.get(n,i&Tn.Optional?null:void 0,i)}function be(n,i=Tn.Default){return(function ri(){return Ji}()||dn)(Ne(n),i)}function ne(n,i=Tn.Default){return be(n,de(i))}function de(n){return typeof n>"u"||"number"==typeof n?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function ye(n){const i=[];for(let s=0;s<n.length;s++){const l=Ne(n[s]);if(Array.isArray(l)){if(0===l.length)throw new It(900,!1);let g,C=Tn.Default;for(let R=0;R<l.length;R++){const j=l[R],q=Nt(j);"number"==typeof q?-1===q?g=j.token:C|=q:g=j}i.push(be(g,C))}else i.push(be(l))}return i}function rt(n,i){return n[Hi]=i,n.prototype[Hi]=i,n}function Nt(n){return n[Hi]}function it(n){return{toString:n}.toString()}var qt=(()=>((qt=qt||{})[qt.OnPush=0]="OnPush",qt[qt.Default=1]="Default",qt))(),St=(()=>{return(n=St||(St={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",St;var n})();const Mn={},Je=[],ot=He({\u0275cmp:He}),Fe=He({\u0275dir:He}),ht=He({\u0275pipe:He}),Yt=He({\u0275mod:He}),un=He({\u0275fac:He}),Kn=He({__NG_ELEMENT_ID__:He});let vi=0;function yr(n){return it(()=>{const i=wr(n),s={...i,decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===qt.OnPush,directiveDefs:null,pipeDefs:null,dependencies:i.standalone&&n.dependencies||null,getStandaloneInjector:null,data:n.data||{},encapsulation:n.encapsulation||St.Emulated,id:"c"+vi++,styles:n.styles||Je,_:null,schemas:n.schemas||null,tView:null};Vt(s);const l=n.dependencies;return s.directiveDefs=et(l,!1),s.pipeDefs=et(l,!0),s})}function is(n){return Qi(n)||Sr(n)}function Gr(n){return null!==n}function os(n){return it(()=>({type:n.type,bootstrap:n.bootstrap||Je,declarations:n.declarations||Je,imports:n.imports||Je,exports:n.exports||Je,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function ji(n,i){if(null==n)return Mn;const s={};for(const l in n)if(n.hasOwnProperty(l)){let g=n[l],C=g;Array.isArray(g)&&(C=g[1],g=g[0]),s[g]=l,i&&(i[g]=C)}return s}function Cs(n){return it(()=>{const i=wr(n);return Vt(i),i})}function rs(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function Qi(n){return n[ot]||null}function Sr(n){return n[Fe]||null}function Dr(n){return n[ht]||null}function ps(n){const i=Qi(n)||Sr(n)||Dr(n);return null!==i&&i.standalone}function Ar(n,i){const s=n[Yt]||null;if(!s&&!0===i)throw new Error(`Type ${xe(n)} does not have '\u0275mod' property.`);return s}function wr(n){const i={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:i,exportAs:n.exportAs||null,standalone:!0===n.standalone,selectors:n.selectors||Je,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:ji(n.inputs,i),outputs:ji(n.outputs)}}function Vt(n){n.features?.forEach(i=>i(n))}function et(n,i){if(!n)return null;const s=i?Dr:is;return()=>("function"==typeof n?n():n).map(l=>s(l)).filter(Gr)}const Pe=0,Ge=1,vt=2,Kt=3,Dn=4,st=5,nt=6,wt=7,Bt=8,mn=9,Wn=10,xn=11,_r=12,Ii=13,ms=14,As=15,dr=16,Qs=17,bs=18,Vr=19,Qr=20,ao=21,Ci=22,lr=1,or=2,_i=7,wi=8,Xn=9,cr=10;function Li(n){return Array.isArray(n)&&"object"==typeof n[lr]}function ar(n){return Array.isArray(n)&&!0===n[lr]}function vr(n){return 0!=(4&n.flags)}function Ti(n){return n.componentOffset>-1}function nr(n){return 1==(1&n.flags)}function Or(n){return!!n.template}function Us(n){return 0!=(256&n[vt])}function Hs(n,i){return n.hasOwnProperty(un)?n[un]:null}class Ks{constructor(i,s,l){this.previousValue=i,this.currentValue=s,this.firstChange=l}isFirstChange(){return this.firstChange}}function lo(){return Zr}function Zr(n){return n.type.prototype.ngOnChanges&&(n.setInput=co),eo}function eo(){const n=Vo(this),i=n?.current;if(i){const s=n.previous;if(s===Mn)n.previous=i;else for(let l in i)s[l]=i[l];n.current=null,this.ngOnChanges(i)}}function co(n,i,s,l){const g=this.declaredInputs[s],C=Vo(n)||function go(n,i){return n[Eo]=i}(n,{previous:Mn,current:null}),R=C.current||(C.current={}),j=C.previous,q=j[g];R[g]=new Ks(q&&q.currentValue,i,j===Mn),n[l]=i}lo.ngInherit=!0;const Eo="__ngSimpleChanges__";function Vo(n){return n[Eo]||null}const Xi=function(n,i,s){},ho="svg";function rr(n){for(;Array.isArray(n);)n=n[Pe];return n}function Ts(n,i){return rr(i[n])}function Bi(n,i){return rr(i[n.index])}function Mr(n,i){return n.data[i]}function Es(n,i){return n[i]}function Yr(n,i){const s=i[n];return Li(s)?s:s[Pe]}function Jr(n){return 64==(64&n[vt])}function ai(n,i){return null==i?null:n[i]}function fo(n){n[bs]=0}function _s(n,i){n[st]+=i;let s=n,l=n[Kt];for(;null!==l&&(1===i&&1===s[st]||-1===i&&0===s[st]);)l[st]+=i,s=l,l=l[Kt]}const si={lFrame:$a(null),bindingsEnabled:!0};function ti(){return si.bindingsEnabled}function pn(){return si.lFrame.lView}function Si(){return si.lFrame.tView}function Zo(n){return si.lFrame.contextLView=n,n[Bt]}function ma(n){return si.lFrame.contextLView=null,n}function es(){let n=ga();for(;null!==n&&64===n.type;)n=n.parent;return n}function ga(){return si.lFrame.currentTNode}function to(n,i){const s=si.lFrame;s.currentTNode=n,s.isParent=i}function _a(){return si.lFrame.isParent}function Yo(){si.lFrame.isParent=!1}function Rr(){const n=si.lFrame;let i=n.bindingRootIndex;return-1===i&&(i=n.bindingRootIndex=n.tView.bindingStartIndex),i}function Ho(){return si.lFrame.bindingIndex++}function ya(n,i){const s=si.lFrame;s.bindingIndex=s.bindingRootIndex=n,To(i)}function To(n){si.lFrame.currentDirectiveIndex=n}function La(){return si.lFrame.currentQueryIndex}function zo(n){si.lFrame.currentQueryIndex=n}function El(n){const i=n[Ge];return 2===i.type?i.declTNode:1===i.type?n[nt]:null}function ds(n,i,s){if(s&Tn.SkipSelf){let g=i,C=n;for(;!(g=g.parent,null!==g||s&Tn.Host||(g=El(C),null===g||(C=C[As],10&g.type))););if(null===g)return!1;i=g,n=C}const l=si.lFrame=za();return l.currentTNode=i,l.lView=n,!0}function Ua(n){const i=za(),s=n[Ge];si.lFrame=i,i.currentTNode=s.firstChild,i.lView=n,i.tView=s,i.contextLView=n,i.bindingIndex=s.bindingStartIndex,i.inI18n=!1}function za(){const n=si.lFrame,i=null===n?null:n.child;return null===i?$a(n):i}function $a(n){const i={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=i),i}function Xo(){const n=si.lFrame;return si.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const il=Xo;function ls(){const n=Xo();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function no(){return si.lFrame.selectedIndex}function me(n){si.lFrame.selectedIndex=n}function S(){const n=si.lFrame;return Mr(n.tView,n.selectedIndex)}function N(){si.lFrame.currentNamespace=ho}function at(n,i){for(let s=i.directiveStart,l=i.directiveEnd;s<l;s++){const C=n.data[s].type.prototype,{ngAfterContentInit:R,ngAfterContentChecked:j,ngAfterViewInit:q,ngAfterViewChecked:ue,ngOnDestroy:Ce}=C;R&&(n.contentHooks||(n.contentHooks=[])).push(-s,R),j&&((n.contentHooks||(n.contentHooks=[])).push(s,j),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(s,j)),q&&(n.viewHooks||(n.viewHooks=[])).push(-s,q),ue&&((n.viewHooks||(n.viewHooks=[])).push(s,ue),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(s,ue)),null!=Ce&&(n.destroyHooks||(n.destroyHooks=[])).push(s,Ce)}}function Ke(n,i,s){G(n,i,3,s)}function k(n,i,s,l){(3&n[vt])===s&&G(n,i,s,l)}function te(n,i){let s=n[vt];(3&s)===i&&(s&=2047,s+=1,n[vt]=s)}function G(n,i,s,l){const C=l??-1,R=i.length-1;let j=0;for(let q=void 0!==l?65535&n[bs]:0;q<R;q++)if("number"==typeof i[q+1]){if(j=i[q],null!=l&&j>=l)break}else i[q]<0&&(n[bs]+=65536),(j<C||-1==C)&&(ge(n,s,i,q),n[bs]=(4294901760&n[bs])+q+2),q++}function ge(n,i,s,l){const g=s[l]<0,C=s[l+1],j=n[g?-s[l]:s[l]];if(g){if(n[vt]>>11<n[bs]>>16&&(3&n[vt])===i){n[vt]+=2048,Xi(4,j,C);try{C.call(j)}finally{Xi(5,j,C)}}}else{Xi(4,j,C);try{C.call(j)}finally{Xi(5,j,C)}}}const Ve=-1;class Dt{constructor(i,s,l){this.factory=i,this.resolving=!1,this.canSeeViewProviders=s,this.injectImpl=l}}function hr(n,i,s){let l=0;for(;l<s.length;){const g=s[l];if("number"==typeof g){if(0!==g)break;l++;const C=s[l++],R=s[l++],j=s[l++];n.setAttribute(i,R,j,C)}else{const C=g,R=s[++l];ni(C)?n.setProperty(i,C,R):n.setAttribute(i,C,R),l++}}return l}function fr(n){return 3===n||4===n||6===n}function ni(n){return 64===n.charCodeAt(0)}function qn(n,i){if(null!==i&&0!==i.length)if(null===n||0===n.length)n=i.slice();else{let s=-1;for(let l=0;l<i.length;l++){const g=i[l];"number"==typeof g?s=g:0===s||hs(n,s,g,null,-1===s||2===s?i[++l]:null)}}return n}function hs(n,i,s,l,g){let C=0,R=n.length;if(-1===i)R=-1;else for(;C<n.length;){const j=n[C++];if("number"==typeof j){if(j===i){R=-1;break}if(j>i){R=C-1;break}}}for(;C<n.length;){const j=n[C];if("number"==typeof j)break;if(j===s){if(null===l)return void(null!==g&&(n[C+1]=g));if(l===n[C+1])return void(n[C+2]=g)}C++,null!==l&&C++,null!==g&&C++}-1!==R&&(n.splice(R,0,i),C=R+1),n.splice(C++,0,s),null!==l&&n.splice(C++,0,l),null!==g&&n.splice(C++,0,g)}function Ki(n){return n!==Ve}function Po(n){return 32767&n}function Jt(n,i){let s=function ts(n){return n>>16}(n),l=i;for(;s>0;)l=l[As],s--;return l}let pi=!0;function ci(n){const i=pi;return pi=n,i}const fs=255,ks=5;let Ns=0;const ys={};function Jo(n,i){const s=mr(n,i);if(-1!==s)return s;const l=i[Ge];l.firstCreatePass&&(n.injectorIndex=i.length,Lr(l.data,n),Lr(i,null),Lr(l.blueprint,null));const g=po(n,i),C=n.injectorIndex;if(Ki(g)){const R=Po(g),j=Jt(g,i),q=j[Ge].data;for(let ue=0;ue<8;ue++)i[C+ue]=j[R+ue]|q[R+ue]}return i[C+8]=g,C}function Lr(n,i){n.push(0,0,0,0,0,0,0,0,i)}function mr(n,i){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===i[n.injectorIndex+8]?-1:n.injectorIndex}function po(n,i){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let s=0,l=null,g=i;for(;null!==g;){if(l=dl(g),null===l)return Ve;if(s++,g=g[As],-1!==l.injectorIndex)return l.injectorIndex|s<<16}return Ve}function io(n,i,s){!function Fr(n,i,s){let l;"string"==typeof s?l=s.charCodeAt(0)||0:s.hasOwnProperty(Kn)&&(l=s[Kn]),null==l&&(l=s[Kn]=Ns++);const g=l&fs;i.data[n+(g>>ks)]|=1<<g}(n,i,s)}function Fo(n,i,s){if(s&Tn.Optional||void 0!==n)return n;kt()}function nn(n,i,s,l){if(s&Tn.Optional&&void 0===l&&(l=null),!(s&(Tn.Self|Tn.Host))){const g=n[mn],C=Gn(void 0);try{return g?g.get(i,l,s&Tn.Optional):Yi(i,l,s&Tn.Optional)}finally{Gn(C)}}return Fo(l,0,s)}function va(n,i,s,l=Tn.Default,g){if(null!==n){if(1024&i[vt]){const R=function Va(n,i,s,l,g){let C=n,R=i;for(;null!==C&&null!==R&&1024&R[vt]&&!(256&R[vt]);){const j=Lo(C,R,s,l|Tn.Self,ys);if(j!==ys)return j;let q=C.parent;if(!q){const ue=R[ao];if(ue){const Ce=ue.get(s,ys,l);if(Ce!==ys)return Ce}q=dl(R),R=R[As]}C=q}return g}(n,i,s,l,ys);if(R!==ys)return R}const C=Lo(n,i,s,l,ys);if(C!==ys)return C}return nn(i,s,l,g)}function Lo(n,i,s,l,g){const C=function ba(n){if("string"==typeof n)return n.charCodeAt(0)||0;const i=n.hasOwnProperty(Kn)?n[Kn]:void 0;return"number"==typeof i?i>=0?i&fs:ta:i}(s);if("function"==typeof C){if(!ds(i,n,l))return l&Tn.Host?Fo(g,0,l):nn(i,s,l,g);try{const R=C(l);if(null!=R||l&Tn.Optional)return R;kt()}finally{il()}}else if("number"==typeof C){let R=null,j=mr(n,i),q=Ve,ue=l&Tn.Host?i[dr][nt]:null;for((-1===j||l&Tn.SkipSelf)&&(q=-1===j?po(n,i):i[j+8],q!==Ve&&Ga(l,!1)?(R=i[Ge],j=Po(q),i=Jt(q,i)):j=-1);-1!==j;){const Ce=i[Ge];if(ro(C,j,Ce.data)){const tt=da(j,i,s,R,l,ue);if(tt!==ys)return tt}q=i[j+8],q!==Ve&&Ga(l,i[Ge].data[j+8]===ue)&&ro(C,j,i)?(R=Ce,j=Po(q),i=Jt(q,i)):j=-1}}return g}function da(n,i,s,l,g,C){const R=i[Ge],j=R.data[n+8],Ce=ea(j,R,s,null==l?Ti(j)&&pi:l!=R&&0!=(3&j.type),g&Tn.Host&&C===j);return null!==Ce?Hr(i,R,Ce,j):ys}function ea(n,i,s,l,g){const C=n.providerIndexes,R=i.data,j=1048575&C,q=n.directiveStart,Ce=C>>20,Rt=g?j+Ce:n.directiveEnd;for(let Xt=l?j:j+Ce;Xt<Rt;Xt++){const In=R[Xt];if(Xt<q&&s===In||Xt>=q&&In.type===s)return Xt}if(g){const Xt=R[q];if(Xt&&Or(Xt)&&Xt.type===s)return q}return null}function Hr(n,i,s,l){let g=n[s];const C=i.data;if(function tn(n){return n instanceof Dt}(g)){const R=g;R.resolving&&function Qe(n,i){const s=i?`. Dependency path: ${i.join(" > ")} > ${n}`:"";throw new It(-200,`Circular dependency in DI detected for ${n}${s}`)}(function _t(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():Ae(n)}(C[s]));const j=ci(R.canSeeViewProviders);R.resolving=!0;const q=R.injectImpl?Gn(R.injectImpl):null;ds(n,l,Tn.Default);try{g=n[s]=R.factory(void 0,C,n,l),i.firstCreatePass&&s>=l.directiveStart&&function gt(n,i,s){const{ngOnChanges:l,ngOnInit:g,ngDoCheck:C}=i.type.prototype;if(l){const R=Zr(i);(s.preOrderHooks||(s.preOrderHooks=[])).push(n,R),(s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(n,R)}g&&(s.preOrderHooks||(s.preOrderHooks=[])).push(0-n,g),C&&((s.preOrderHooks||(s.preOrderHooks=[])).push(n,C),(s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(n,C))}(s,C[s],i)}finally{null!==q&&Gn(q),ci(j),R.resolving=!1,il()}}return g}function ro(n,i,s){return!!(s[i+(n>>ks)]&1<<n)}function Ga(n,i){return!(n&Tn.Self||n&Tn.Host&&i)}class js{constructor(i,s){this._tNode=i,this._lView=s}get(i,s,l){return va(this._tNode,this._lView,i,de(l),s)}}function ta(){return new js(es(),pn())}function Xa(n){return it(()=>{const i=n.prototype.constructor,s=i[un]||mo(i),l=Object.prototype;let g=Object.getPrototypeOf(n.prototype).constructor;for(;g&&g!==l;){const C=g[un]||mo(g);if(C&&C!==s)return C;g=Object.getPrototypeOf(g)}return C=>new C})}function mo(n){return yt(n)?()=>{const i=mo(Ne(n));return i&&i()}:Hs(n)}function dl(n){const i=n[Ge],s=i.type;return 2===s?i.declTNode:1===s?n[nt]:null}function Ja(n){return function ua(n,i){if("class"===i)return n.classes;if("style"===i)return n.styles;const s=n.attrs;if(s){const l=s.length;let g=0;for(;g<l;){const C=s[g];if(fr(C))break;if(0===C)g+=2;else if("number"==typeof C)for(g++;g<l&&"string"==typeof s[g];)g++;else{if(C===i)return s[g+1];g+=2}}}return null}(es(),n)}const Ba="__parameters__";function Ea(n,i,s){return it(()=>{const l=function Al(n){return function(...s){if(n){const l=n(...s);for(const g in l)this[g]=l[g]}}}(i);function g(...C){if(this instanceof g)return l.apply(this,C),this;const R=new g(...C);return j.annotation=R,j;function j(q,ue,Ce){const tt=q.hasOwnProperty(Ba)?q[Ba]:Object.defineProperty(q,Ba,{value:[]})[Ba];for(;tt.length<=Ce;)tt.push(null);return(tt[Ce]=tt[Ce]||[]).push(R),q}}return s&&(g.prototype=Object.create(s.prototype)),g.prototype.ngMetadataName=n,g.annotationCls=g,g})}class cs{constructor(i,s){this._desc=i,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof s?this.__NG_ELEMENT_ID__=s:void 0!==s&&(this.\u0275prov=sn({token:this,providedIn:s.providedIn||"root",factory:s.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function p(n,i){n.forEach(s=>Array.isArray(s)?p(s,i):i(s))}function a(n,i,s){i>=n.length?n.push(s):n.splice(i,0,s)}function h(n,i){return i>=n.length-1?n.pop():n.splice(i,1)[0]}function T(n,i){const s=[];for(let l=0;l<n;l++)s.push(i);return s}function mt(n,i,s){let l=ln(n,i);return l>=0?n[1|l]=s:(l=~l,function ce(n,i,s,l){let g=n.length;if(g==i)n.push(s,l);else if(1===g)n.push(l,n[0]),n[0]=s;else{for(g--,n.push(n[g-1],n[g]);g>i;)n[g]=n[g-2],g--;n[i]=s,n[i+1]=l}}(n,l,i,s)),l}function on(n,i){const s=ln(n,i);if(s>=0)return n[1|s]}function ln(n,i){return function sr(n,i,s){let l=0,g=n.length>>s;for(;g!==l;){const C=l+(g-l>>1),R=n[C<<s];if(i===R)return C<<s;R>i?g=C:l=C+1}return~(g<<s)}(n,i,1)}const ia=rt(Ea("Inject",n=>({token:n})),-1),pl=rt(Ea("Optional"),8),Ca=rt(Ea("SkipSelf"),4);var Ra=(()=>((Ra=Ra||{})[Ra.Important=1]="Important",Ra[Ra.DashCase=2]="DashCase",Ra))();const jc=new Map;let pu=0;const $c="__ngContext__";function sa(n,i){Li(i)?(n[$c]=i[Qr],function zc(n){jc.set(n[Qr],n)}(i)):n[$c]=i}let Ql;function B(n,i){return Ql(n,i)}function M(n){const i=n[Kt];return ar(i)?i[Kt]:i}function je(n){return Sn(n[Ii])}function $t(n){return Sn(n[Dn])}function Sn(n){for(;null!==n&&!ar(n);)n=n[Dn];return n}function Zn(n,i,s,l,g){if(null!=l){let C,R=!1;ar(l)?C=l:Li(l)&&(R=!0,l=l[Pe]);const j=rr(l);0===n&&null!==s?null==g?U(i,s,j):yl(i,s,j,g||null,!0):1===n&&null!==s?yl(i,s,j,g||null,!0):2===n?function Jl(n,i,s){const l=he(n,i);l&&function D(n,i,s,l){n.removeChild(i,s,l)}(n,l,i,s)}(i,j,R):3===n&&i.destroyNode(j),null!=C&&function Xc(n,i,s,l,g){const C=s[_i];C!==rr(s)&&Zn(i,n,l,C,g);for(let j=cr;j<s.length;j++){const q=s[j];vc(q[Ge],q,n,i,l,C)}}(i,n,C,s,g)}}function Gs(n,i,s){return n.createElement(i,s)}function ll(n,i){const s=n[Xn],l=s.indexOf(i),g=i[Kt];512&i[vt]&&(i[vt]&=-513,_s(g,-1)),s.splice(l,1)}function yc(n,i){if(n.length<=cr)return;const s=cr+i,l=n[s];if(l){const g=l[Qs];null!==g&&g!==n&&ll(g,l),i>0&&(n[s-1][Dn]=l[Dn]);const C=h(n,cr+i);!function Ol(n,i){vc(n,i,i[xn],2,null,null),i[Pe]=null,i[nt]=null}(l[Ge],l);const R=C[Vr];null!==R&&R.detachView(C[Ge]),l[Kt]=null,l[Dn]=null,l[vt]&=-65}return l}function Rc(n,i){if(!(128&i[vt])){const s=i[xn];s.destroyNode&&vc(n,i,s,3,null,null),function Yc(n){let i=n[Ii];if(!i)return _l(n[Ge],n);for(;i;){let s=null;if(Li(i))s=i[Ii];else{const l=i[cr];l&&(s=l)}if(!s){for(;i&&!i[Dn]&&i!==n;)Li(i)&&_l(i[Ge],i),i=i[Kt];null===i&&(i=n),Li(i)&&_l(i[Ge],i),s=i&&i[Dn]}i=s}}(i)}}function _l(n,i){if(!(128&i[vt])){i[vt]&=-65,i[vt]|=128,function mu(n,i){let s;if(null!=n&&null!=(s=n.destroyHooks))for(let l=0;l<s.length;l+=2){const g=i[s[l]];if(!(g instanceof Dt)){const C=s[l+1];if(Array.isArray(C))for(let R=0;R<C.length;R+=2){const j=g[C[R]],q=C[R+1];Xi(4,j,q);try{q.call(j)}finally{Xi(5,j,q)}}else{Xi(4,g,C);try{C.call(g)}finally{Xi(5,g,C)}}}}}(n,i),function Dl(n,i){const s=n.cleanup,l=i[wt];let g=-1;if(null!==s)for(let C=0;C<s.length-1;C+=2)if("string"==typeof s[C]){const R=s[C+3];R>=0?l[g=R]():l[g=-R].unsubscribe(),C+=2}else{const R=l[g=s[C+1]];s[C].call(R)}if(null!==l){for(let C=g+1;C<l.length;C++)(0,l[C])();i[wt]=null}}(n,i),1===i[Ge].type&&i[xn].destroy();const s=i[Qs];if(null!==s&&ar(i[Kt])){s!==i[Kt]&&ll(s,i);const l=i[Vr];null!==l&&l.detachView(n)}!function Mc(n){jc.delete(n[Qr])}(i)}}function Qc(n,i,s){return function cc(n,i,s){let l=i;for(;null!==l&&40&l.type;)l=(i=l).parent;if(null===l)return s[Pe];{const{componentOffset:g}=l;if(g>-1){const{encapsulation:C}=n.data[l.directiveStart+g];if(C===St.None||C===St.Emulated)return null}return Bi(l,s)}}(n,i.parent,s)}function yl(n,i,s,l,g){n.insertBefore(i,s,l,g)}function U(n,i,s){n.appendChild(i,s)}function b(n,i,s,l,g){null!==l?yl(n,i,s,l,g):U(n,i,s)}function he(n,i){return n.parentNode(i)}function Ct(n,i,s){return Ln(n,i,s)}let ei,Nl,pa,gu,Ln=function Qt(n,i,s){return 40&n.type?Bi(n,s):null};function zr(n,i,s,l){const g=Qc(n,l,i),C=i[xn],j=Ct(l.parent||i[nt],l,i);if(null!=g)if(Array.isArray(s))for(let q=0;q<s.length;q++)b(C,g,s[q],j,!1);else b(C,g,s,j,!1);void 0!==ei&&ei(C,l,i,s,g)}function fa(n,i){if(null!==i){const s=i.type;if(3&s)return Bi(i,n);if(4&s)return uc(-1,n[i.index]);if(8&s){const l=i.child;if(null!==l)return fa(n,l);{const g=n[i.index];return ar(g)?uc(-1,g):rr(g)}}if(32&s)return B(i,n)()||rr(n[i.index]);{const l=Xl(n,i);return null!==l?Array.isArray(l)?l[0]:fa(M(n[dr]),l):fa(n,i.next)}}return null}function Xl(n,i){return null!==i?n[dr][nt].projection[i.projection]:null}function uc(n,i){const s=cr+n+1;if(s<i.length){const l=i[s],g=l[Ge].firstChild;if(null!==g)return fa(l,g)}return i[_i]}function Pc(n,i,s,l,g,C,R){for(;null!=s;){const j=l[s.index],q=s.type;if(R&&0===i&&(j&&sa(rr(j),l),s.flags|=2),32!=(32&s.flags))if(8&q)Pc(n,i,s.child,l,g,C,!1),Zn(i,n,g,j,C);else if(32&q){const ue=B(s,l);let Ce;for(;Ce=ue();)Zn(i,n,g,Ce,C);Zn(i,n,g,j,C)}else 16&q?Oa(n,i,l,s,g,C):Zn(i,n,g,j,C);s=R?s.projectionNext:s.next}}function vc(n,i,s,l,g,C){Pc(s,l,n.firstChild,i,g,C,!1)}function Oa(n,i,s,l,g,C){const R=s[dr],q=R[nt].projection[l.projection];if(Array.isArray(q))for(let ue=0;ue<q.length;ue++)Zn(i,n,g,q[ue],C);else Pc(n,i,q,R[Kt],g,C,!0)}function tc(n,i,s){""===s?n.removeAttribute(i,"class"):n.setAttribute(i,"class",s)}function ru(n,i,s){const{mergedAttrs:l,classes:g,styles:C}=s;null!==l&&hr(n,i,l),null!==g&&tc(n,i,g),null!==C&&function ec(n,i,s){n.setAttribute(i,"style",s)}(n,i,C)}function kc(n){return function bc(){if(void 0===Nl&&(Nl=null,Hn.trustedTypes))try{Nl=Hn.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Nl}()?.createHTML(n)||n}function ws(n){pa=n}function _u(n){return function qa(){if(void 0===gu&&(gu=null,Hn.trustedTypes))try{gu=Hn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return gu}()?.createScriptURL(n)||n}class Za{constructor(i){this.changingThisBreaksApplicationSecurity=i}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${an})`}}class yu extends Za{getTypeName(){return"HTML"}}class vd extends Za{getTypeName(){return"Style"}}class bd extends Za{getTypeName(){return"Script"}}class Th extends Za{getTypeName(){return"URL"}}class ed extends Za{getTypeName(){return"ResourceURL"}}function Ec(n){return n instanceof Za?n.changingThisBreaksApplicationSecurity:n}function vu(n,i){const s=function Dh(n){return n instanceof Za&&n.getTypeName()||null}(n);if(null!=s&&s!==i){if("ResourceURL"===s&&"URL"===i)return!0;throw new Error(`Required a safe ${i}, got a ${s} (see ${an})`)}return s===i}function Sh(n){return new yu(n)}function A(n){return new vd(n)}function y(n){return new bd(n)}function E(n){return new Th(n)}function F(n){return new ed(n)}class Se{constructor(i){this.inertDocumentHelper=i}getInertBodyElement(i){i="<body><remove></remove>"+i;try{const s=(new window.DOMParser).parseFromString(kc(i),"text/html").body;return null===s?this.inertDocumentHelper.getInertBodyElement(i):(s.removeChild(s.firstChild),s)}catch{return null}}}class At{constructor(i){this.defaultDoc=i,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(i){const s=this.inertDocument.createElement("template");return s.innerHTML=kc(i),s}}const Fn=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;function di(n){return(n=String(n)).match(Fn)?n:"unsafe:"+n}function Wi(n){const i={};for(const s of n.split(","))i[s]=!0;return i}function ki(...n){const i={};for(const s of n)for(const l in s)s.hasOwnProperty(l)&&(i[l]=!0);return i}const Da=Wi("area,br,col,hr,img,wbr"),Fl=Wi("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Ru=Wi("rp,rt"),bu=ki(Da,ki(Fl,Wi("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),ki(Ru,Wi("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),ki(Ru,Fl)),Ou=Wi("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),ku=ki(Ou,Wi("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Wi("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Hd=Wi("script,style,template");class jd{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(i){let s=i.firstChild,l=!0;for(;s;)if(s.nodeType===Node.ELEMENT_NODE?l=this.startElement(s):s.nodeType===Node.TEXT_NODE?this.chars(s.nodeValue):this.sanitizedSomething=!0,l&&s.firstChild)s=s.firstChild;else for(;s;){s.nodeType===Node.ELEMENT_NODE&&this.endElement(s);let g=this.checkClobberedElement(s,s.nextSibling);if(g){s=g;break}s=this.checkClobberedElement(s,s.parentNode)}return this.buf.join("")}startElement(i){const s=i.nodeName.toLowerCase();if(!bu.hasOwnProperty(s))return this.sanitizedSomething=!0,!Hd.hasOwnProperty(s);this.buf.push("<"),this.buf.push(s);const l=i.attributes;for(let g=0;g<l.length;g++){const C=l.item(g),R=C.name,j=R.toLowerCase();if(!ku.hasOwnProperty(j)){this.sanitizedSomething=!0;continue}let q=C.value;Ou[j]&&(q=di(q)),this.buf.push(" ",R,'="',Ef(q),'"')}return this.buf.push(">"),!0}endElement(i){const s=i.nodeName.toLowerCase();bu.hasOwnProperty(s)&&!Da.hasOwnProperty(s)&&(this.buf.push("</"),this.buf.push(s),this.buf.push(">"))}chars(i){this.buf.push(Ef(i))}checkClobberedElement(i,s){if(s&&(i.compareDocumentPosition(s)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${i.outerHTML}`);return s}}const zd=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,bf=/([^\#-~ |!])/g;function Ef(n){return n.replace(/&/g,"&amp;").replace(zd,function(i){return"&#"+(1024*(i.charCodeAt(0)-55296)+(i.charCodeAt(1)-56320)+65536)+";"}).replace(bf,function(i){return"&#"+i.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Nc;function Nu(n,i){let s=null;try{Nc=Nc||function le(n){const i=new At(n);return function hn(){try{return!!(new window.DOMParser).parseFromString(kc(""),"text/html")}catch{return!1}}()?new Se(i):i}(n);let l=i?String(i):"";s=Nc.getInertBodyElement(l);let g=5,C=l;do{if(0===g)throw new Error("Failed to sanitize html because the input is unstable");g--,l=C,C=s.innerHTML,s=Nc.getInertBodyElement(l)}while(l!==C);return kc((new jd).sanitizeChildren(Id(s)||s))}finally{if(s){const l=Id(s)||s;for(;l.firstChild;)l.removeChild(l.firstChild)}}}function Id(n){return"content"in n&&function hp(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var ka=(()=>((ka=ka||{})[ka.NONE=0]="NONE",ka[ka.HTML=1]="HTML",ka[ka.STYLE=2]="STYLE",ka[ka.SCRIPT=3]="SCRIPT",ka[ka.URL=4]="URL",ka[ka.RESOURCE_URL=5]="RESOURCE_URL",ka))();function eu(n){const i=Uu();return i?i.sanitize(ka.URL,n)||"":vu(n,"URL")?Ec(n):di(Ae(n))}function tl(n){const i=Uu();if(i)return _u(i.sanitize(ka.RESOURCE_URL,n)||"");if(vu(n,"ResourceURL"))return _u(Ec(n));throw new It(904,!1)}function td(n,i,s){return function Lu(n,i){return"src"===i&&("embed"===n||"frame"===n||"iframe"===n||"media"===n||"script"===n)||"href"===i&&("base"===n||"link"===n)?tl:eu}(i,s)(n)}function Uu(){const n=pn();return n&&n[_r]}const $d=new cs("ENVIRONMENT_INITIALIZER"),xh=new cs("INJECTOR",-1),wf=new cs("INJECTOR_DEF_TYPES");class Gd{get(i,s=Ni){if(s===Ni){const l=new Error(`NullInjectorError: No provider for ${xe(i)}!`);throw l.name="NullInjectorError",l}return s}}function wd(...n){return{\u0275providers:Vu(0,n),\u0275fromNgModule:!0}}function Vu(n,...i){const s=[],l=new Set;let g;return p(i,C=>{const R=C;Ah(R,s,[],l)&&(g||(g=[]),g.push(R))}),void 0!==g&&Ic(g,s),s}function Ic(n,i){for(let s=0;s<n.length;s++){const{providers:g}=n[s];Mh(g,C=>{i.push(C)})}}function Ah(n,i,s,l){if(!(n=Ne(n)))return!1;let g=null,C=Cr(n);const R=!C&&Qi(n);if(C||R){if(R&&!R.standalone)return!1;g=n}else{const q=n.ngModule;if(C=Cr(q),!C)return!1;g=q}const j=l.has(g);if(R){if(j)return!1;if(l.add(g),R.dependencies){const q="function"==typeof R.dependencies?R.dependencies():R.dependencies;for(const ue of q)Ah(ue,i,s,l)}}else{if(!C)return!1;{if(null!=C.imports&&!j){let ue;l.add(g);try{p(C.imports,Ce=>{Ah(Ce,i,s,l)&&(ue||(ue=[]),ue.push(Ce))})}finally{}void 0!==ue&&Ic(ue,i)}if(!j){const ue=Hs(g)||(()=>new g);i.push({provide:g,useFactory:ue,deps:Je},{provide:wf,useValue:g,multi:!0},{provide:$d,useValue:()=>be(g),multi:!0})}const q=C.providers;null==q||j||Mh(q,Ce=>{i.push(Ce)})}}return g!==n&&void 0!==n.providers}function Mh(n,i){for(let s of n)pt(s)&&(s=s.\u0275providers),Array.isArray(s)?Mh(s,i):i(s)}const pp=He({provide:String,useValue:He});function Wd(n){return null!==n&&"object"==typeof n&&pp in n}function ic(n){return"function"==typeof n}const Rh=new cs("Set Injector scope."),nd={},mp={};let Cd;function Hu(){return void 0===Cd&&(Cd=new Gd),Cd}class Iu{}class Kd extends Iu{get destroyed(){return this._destroyed}constructor(i,s,l,g){super(),this.parent=s,this.source=l,this.scopes=g,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,W(i,R=>this.processProvider(R)),this.records.set(xh,c(void 0,this)),g.has("environment")&&this.records.set(Iu,c(void 0,this));const C=this.records.get(Rh);null!=C&&"string"==typeof C.value&&this.scopes.add(C.value),this.injectorDefTypes=new Set(this.get(wf.multi,Je,Tn.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const i of this._ngOnDestroyHooks)i.ngOnDestroy();for(const i of this._onDestroyHooks)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(i){this._onDestroyHooks.push(i)}runInContext(i){this.assertNotDestroyed();const s=Oi(this),l=Gn(void 0);try{return i()}finally{Oi(s),Gn(l)}}get(i,s=Ni,l=Tn.Default){this.assertNotDestroyed(),l=de(l);const g=Oi(this),C=Gn(void 0);try{if(!(l&Tn.SkipSelf)){let j=this.records.get(i);if(void 0===j){const q=function O(n){return"function"==typeof n||"object"==typeof n&&n instanceof cs}(i)&&ui(i);j=q&&this.injectableDefInScope(q)?c(Td(i),nd):null,this.records.set(i,j)}if(null!=j)return this.hydrate(i,j)}return(l&Tn.Self?Hu():this.parent).get(i,s=l&Tn.Optional&&s===Ni?null:s)}catch(R){if("NullInjectorError"===R.name){if((R[Vi]=R[Vi]||[]).unshift(xe(i)),g)throw R;return function Le(n,i,s,l){const g=n[Vi];throw i[$r]&&g.unshift(i[$r]),n.message=function Be(n,i,s,l=null){n=n&&"\n"===n.charAt(0)&&n.charAt(1)==Fi?n.slice(2):n;let g=xe(i);if(Array.isArray(i))g=i.map(xe).join(" -> ");else if("object"==typeof i){let C=[];for(let R in i)if(i.hasOwnProperty(R)){let j=i[R];C.push(R+":"+("string"==typeof j?JSON.stringify(j):xe(j)))}g=`{${C.join(", ")}}`}return`${s}${l?"("+l+")":""}[${g}]: ${n.replace(er,"\n  ")}`}("\n"+n.message,g,s,l),n[gr]=g,n[Vi]=null,n}(R,i,"R3InjectorError",this.source)}throw R}finally{Gn(C),Oi(g)}}resolveInjectorInitializers(){const i=Oi(this),s=Gn(void 0);try{const l=this.get($d.multi,Je,Tn.Self);for(const g of l)g()}finally{Oi(i),Gn(s)}}toString(){const i=[],s=this.records;for(const l of s.keys())i.push(xe(l));return`R3Injector[${i.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new It(205,!1)}processProvider(i){let s=ic(i=Ne(i))?i:Ne(i&&i.provide);const l=function qd(n){return Wd(n)?c(void 0,n.useValue):c(m(n),nd)}(i);if(ic(i)||!0!==i.multi)this.records.get(s);else{let g=this.records.get(s);g||(g=c(void 0,nd,!0),g.factory=()=>ye(g.multi),this.records.set(s,g)),s=i,g.multi.push(i)}this.records.set(s,l)}hydrate(i,s){return s.value===nd&&(s.value=mp,s.value=s.factory()),"object"==typeof s.value&&s.value&&function I(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(s.value)&&this._ngOnDestroyHooks.add(s.value),s.value}injectableDefInScope(i){if(!i.providedIn)return!1;const s=Ne(i.providedIn);return"string"==typeof s?"any"===s||this.scopes.has(s):this.injectorDefTypes.has(s)}}function Td(n){const i=ui(n),s=null!==i?i.factory:Hs(n);if(null!==s)return s;if(n instanceof cs)throw new It(204,!1);if(n instanceof Function)return function Sf(n){const i=n.length;if(i>0)throw T(i,"?"),new It(204,!1);const s=function oi(n){const i=n&&(n[ii]||n[zn]);return i?(function Pi(n){if(n.hasOwnProperty("name"))return n.name;(""+n).match(/^function\s*([^\s(]+)/)}(n),i):null}(n);return null!==s?()=>s.factory(n):()=>new n}(n);throw new It(204,!1)}function m(n,i,s){let l;if(ic(n)){const g=Ne(n);return Hs(g)||Td(g)}if(Wd(n))l=()=>Ne(n.useValue);else if(function lu(n){return!(!n||!n.useFactory)}(n))l=()=>n.useFactory(...ye(n.deps||[]));else if(function Bu(n){return!(!n||!n.useExisting)}(n))l=()=>be(Ne(n.useExisting));else{const g=Ne(n&&(n.useClass||n.provide));if(!function u(n){return!!n.deps}(n))return Hs(g)||Td(g);l=()=>new g(...ye(n.deps))}return l}function c(n,i,s=!1){return{factory:n,value:i,multi:s?[]:void 0}}function W(n,i){for(const s of n)Array.isArray(s)?W(s,i):s&&pt(s)?W(s.\u0275providers,i):i(s)}class ae{}class Ie{}class fn{resolveComponentFactory(i){throw function qe(n){const i=Error(`No component factory found for ${xe(n)}. Did you add it to @NgModule.entryComponents?`);return i.ngComponent=n,i}(i)}}let En=(()=>{class n{}return n.NULL=new fn,n})();function hi(){return $i(es(),pn())}function $i(n,i){return new qr(Bi(n,i))}let qr=(()=>{class n{constructor(s){this.nativeElement=s}}return n.__NG_ELEMENT_ID__=hi,n})();function Sa(n){return n instanceof qr?n.nativeElement:n}class wc{}let Ll=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function id(){const n=pn(),s=Yr(es().index,n);return(Li(s)?s:n)[xn]}(),n})(),rd=(()=>{class n{}return n.\u0275prov=sn({token:n,providedIn:"root",factory:()=>null}),n})();class gp{constructor(i){this.full=i,this.major=i.split(".")[0],this.minor=i.split(".")[1],this.patch=i.split(".").slice(2).join(".")}}const ju=new gp("15.2.5"),xf={},_p="ngOriginalError";function yp(n){return n[_p]}class Ph{constructor(){this._console=console}handleError(i){const s=this._findOriginalError(i);this._console.error("ERROR",i),s&&this._console.error("ORIGINAL ERROR",s)}_findOriginalError(i){let s=i&&yp(i);for(;s&&yp(s);)s=yp(s);return s||null}}function vp(n){return n.ownerDocument}function Cu(n){return n instanceof Function?n():n}function vl(n,i,s){let l=n.length;for(;;){const g=n.indexOf(i,s);if(-1===g)return g;if(0===g||n.charCodeAt(g-1)<=32){const C=i.length;if(g+C===l||n.charCodeAt(g+C)<=32)return g}s=g+1}}const Wm="ng-template";function D_(n,i,s){let l=0,g=!0;for(;l<n.length;){let C=n[l++];if("string"==typeof C&&g){const R=n[l++];if(s&&"class"===C&&-1!==vl(R.toLowerCase(),i,0))return!0}else{if(1===C){for(;l<n.length&&"string"==typeof(C=n[l++]);)if(C.toLowerCase()===i)return!0;return!1}"number"==typeof C&&(g=!1)}}return!1}function Km(n){return 4===n.type&&n.value!==Wm}function S_(n,i,s){return i===(4!==n.type||s?n.value:Wm)}function qm(n,i,s){let l=4;const g=n.attrs||[],C=function bp(n){for(let i=0;i<n.length;i++)if(fr(n[i]))return i;return n.length}(g);let R=!1;for(let j=0;j<i.length;j++){const q=i[j];if("number"!=typeof q){if(!R)if(4&l){if(l=2|1&l,""!==q&&!S_(n,q,s)||""===q&&1===i.length){if(cu(l))return!1;R=!0}}else{const ue=8&l?q:i[++j];if(8&l&&null!==n.attrs){if(!D_(n.attrs,ue,s)){if(cu(l))return!1;R=!0}continue}const tt=Mf(8&l?"class":q,g,Km(n),s);if(-1===tt){if(cu(l))return!1;R=!0;continue}if(""!==ue){let Rt;Rt=tt>C?"":g[tt+1].toLowerCase();const Xt=8&l?Rt:null;if(Xt&&-1!==vl(Xt,ue,0)||2&l&&ue!==Rt){if(cu(l))return!1;R=!0}}}}else{if(!R&&!cu(l)&&!cu(q))return!1;if(R&&cu(q))continue;R=!1,l=q|1&l}}return cu(l)||R}function cu(n){return 0==(1&n)}function Mf(n,i,s,l){if(null===i)return-1;let g=0;if(l||!s){let C=!1;for(;g<i.length;){const R=i[g];if(R===n)return g;if(3===R||6===R)C=!0;else{if(1===R||2===R){let j=i[++g];for(;"string"==typeof j;)j=i[++g];continue}if(4===R)break;if(0===R){g+=4;continue}}g+=C?1:2}return-1}return function Ep(n,i){let s=n.indexOf(4);if(s>-1)for(s++;s<n.length;){const l=n[s];if("number"==typeof l)return-1;if(l===i)return s;s++}return-1}(i,n)}function Zm(n,i,s=!1){for(let l=0;l<i.length;l++)if(qm(n,i[l],s))return!0;return!1}function Oh(n,i){e:for(let s=0;s<i.length;s++){const l=i[s];if(n.length===l.length){for(let g=0;g<n.length;g++)if(n[g]!==l[g])continue e;return!0}}return!1}function kh(n,i){return n?":not("+i.trim()+")":i}function Ip(n){let i=n[0],s=1,l=2,g="",C=!1;for(;s<n.length;){let R=n[s];if("string"==typeof R)if(2&l){const j=n[++s];g+="["+R+(j.length>0?'="'+j+'"':"")+"]"}else 8&l?g+="."+R:4&l&&(g+=" "+R);else""!==g&&!cu(R)&&(i+=kh(C,g),g=""),l=R,C=C||!cu(l);s++}return""!==g&&(i+=kh(C,g)),i}const ns={};function Cp(n){Tp(Si(),pn(),no()+n,!1)}function Tp(n,i,s,l){if(!l)if(3==(3&i[vt])){const C=n.preOrderCheckHooks;null!==C&&Ke(i,C,s)}else{const C=n.preOrderHooks;null!==C&&k(i,C,0,s)}me(s)}function Nh(n,i=null,s=null,l){const g=Dp(n,i,s,l);return g.resolveInjectorInitializers(),g}function Dp(n,i=null,s=null,l,g=new Set){const C=[s||Je,wd(n)];return l=l||("object"==typeof n?void 0:xe(n)),new Kd(C,i||Hu(),l||null,g)}let sd=(()=>{class n{static create(s,l){if(Array.isArray(s))return Nh({name:""},l,s,"");{const g=s.name??"";return Nh({name:g},s.parent,s.providers,g)}}}return n.THROW_IF_NOT_FOUND=Ni,n.NULL=new Gd,n.\u0275prov=sn({token:n,providedIn:"any",factory:()=>be(xh)}),n.__NG_ELEMENT_ID__=-1,n})();function Xd(n,i=Tn.Default){const s=pn();return null===s?be(n,i):va(es(),s,Ne(n),i)}function Ff(){throw new Error("invalid")}function ag(n,i){const s=n.contentQueries;if(null!==s)for(let l=0;l<s.length;l+=2){const C=s[l+1];if(-1!==C){const R=n.data[C];zo(s[l]),R.contentQueries(2,i[C],C)}}}function zu(n,i,s,l,g,C,R,j,q,ue,Ce){const tt=i.blueprint.slice();return tt[Pe]=g,tt[vt]=76|l,(null!==Ce||n&&1024&n[vt])&&(tt[vt]|=1024),fo(tt),tt[Kt]=tt[As]=n,tt[Bt]=s,tt[Wn]=R||n&&n[Wn],tt[xn]=j||n&&n[xn],tt[_r]=q||n&&n[_r]||null,tt[mn]=ue||n&&n[mn]||null,tt[nt]=C,tt[Qr]=function Ac(){return pu++}(),tt[ao]=Ce,tt[dr]=2==i.type?n[dr]:tt,tt}function ad(n,i,s,l,g){let C=n.data[i];if(null===C)C=function Jd(n,i,s,l,g){const C=ga(),R=_a(),q=n.data[i]=function Np(n,i,s,l,g,C){return{type:s,index:l,insertBeforeIndex:null,injectorIndex:i?i.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:g,attrs:C,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:i,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,R?C:C&&C.parent,s,i,l,g);return null===n.firstChild&&(n.firstChild=q),null!==C&&(R?null==C.child&&null!==q.parent&&(C.child=q):null===C.next&&(C.next=q,q.prev=C)),q}(n,i,s,l,g),function Co(){return si.lFrame.inI18n}()&&(C.flags|=32);else if(64&C.type){C.type=s,C.value=l,C.attrs=g;const R=function aa(){const n=si.lFrame,i=n.currentTNode;return n.isParent?i:i.parent}();C.injectorIndex=null===R?-1:R.injectorIndex}return to(C,!0),C}function $u(n,i,s,l){if(0===s)return-1;const g=i.length;for(let C=0;C<s;C++)i.push(l),n.blueprint.push(l),n.data.push(null);return g}function jh(n,i,s){Ua(i);try{const l=n.viewQuery;null!==l&&Yh(1,l,s);const g=n.template;null!==g&&Lf(n,i,g,1,s),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&ag(n,i),n.staticViewQueries&&Yh(2,n.viewQuery,s);const C=n.components;null!==C&&function Op(n,i){for(let s=0;s<i.length;s++)zp(n,i[s])}(i,C)}catch(l){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),l}finally{i[vt]&=-5,ls()}}function zh(n,i,s,l){const g=i[vt];if(128!=(128&g)){Ua(i);try{fo(i),function No(n){return si.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==s&&Lf(n,i,s,2,l);const R=3==(3&g);if(R){const ue=n.preOrderCheckHooks;null!==ue&&Ke(i,ue,null)}else{const ue=n.preOrderHooks;null!==ue&&k(i,ue,0,null),te(i,0)}if(function z_(n){for(let i=je(n);null!==i;i=$t(i)){if(!i[or])continue;const s=i[Xn];for(let l=0;l<s.length;l++){const g=s[l];512&g[vt]||_s(g[Kt],1),g[vt]|=512}}}(i),function rh(n){for(let i=je(n);null!==i;i=$t(i))for(let s=cr;s<i.length;s++){const l=i[s],g=l[Ge];Jr(l)&&zh(g,l,g.template,l[Bt])}}(i),null!==n.contentQueries&&ag(n,i),R){const ue=n.contentCheckHooks;null!==ue&&Ke(i,ue)}else{const ue=n.contentHooks;null!==ue&&k(i,ue,1),te(i,1)}!function L_(n,i){const s=n.hostBindingOpCodes;if(null!==s)try{for(let l=0;l<s.length;l++){const g=s[l];if(g<0)me(~g);else{const C=g,R=s[++l],j=s[++l];ya(R,C),j(2,i[C])}}}finally{me(-1)}}(n,i);const j=n.components;null!==j&&function Hh(n,i){for(let s=0;s<i.length;s++)$_(n,i[s])}(i,j);const q=n.viewQuery;if(null!==q&&Yh(2,q,l),R){const ue=n.viewCheckHooks;null!==ue&&Ke(i,ue)}else{const ue=n.viewHooks;null!==ue&&k(i,ue,2),te(i,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),i[vt]&=-41,512&i[vt]&&(i[vt]&=-513,_s(i[Kt],-1))}finally{ls()}}}function Lf(n,i,s,l,g){const C=no(),R=2&l;try{me(-1),R&&i.length>Ci&&Tp(n,i,Ci,!1),Xi(R?2:0,g),s(l,g)}finally{me(C),Xi(R?3:1,g)}}function $h(n,i,s){if(vr(i)){const g=i.directiveEnd;for(let C=i.directiveStart;C<g;C++){const R=n.data[C];R.contentQueries&&R.contentQueries(1,s[C],C)}}}function uu(n,i,s){ti()&&(function Lp(n,i,s,l){const g=s.directiveStart,C=s.directiveEnd;Ti(s)&&function th(n,i,s){const l=Bi(i,n),g=lg(s),C=n[Wn],R=sh(n,zu(n,g,null,s.onPush?32:16,l,i,C,C.createRenderer(l,s),null,null,null));n[i.index]=R}(i,s,n.data[g+s.componentOffset]),n.firstCreatePass||Jo(s,i),sa(l,i);const R=s.initialInputs;for(let j=g;j<C;j++){const q=n.data[j],ue=Hr(i,n,j,s);sa(ue,i),null!==R&&nh(0,j-g,ue,q,0,R),Or(q)&&(Yr(s.index,i)[Bt]=Hr(i,n,j,s))}}(n,i,s,Bi(s,i)),64==(64&s.flags)&&fg(n,i,s))}function Uf(n,i,s=Bi){const l=i.localNames;if(null!==l){let g=i.index+1;for(let C=0;C<l.length;C+=2){const R=l[C+1],j=-1===R?s(i,n):n[R];n[g++]=j}}}function lg(n){const i=n.tView;return null===i||i.incompleteFirstPass?n.tView=Gh(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):i}function Gh(n,i,s,l,g,C,R,j,q,ue){const Ce=Ci+l,tt=Ce+g,Rt=function U_(n,i){const s=[];for(let l=0;l<i;l++)s.push(l<n?null:ns);return s}(Ce,tt),Xt="function"==typeof ue?ue():ue;return Rt[Ge]={type:n,blueprint:Rt,template:s,queries:null,viewQuery:j,declTNode:i,data:Rt.slice().fill(null,Ce),bindingStartIndex:Ce,expandoStartIndex:tt,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof C?C():C,pipeRegistry:"function"==typeof R?R():R,firstChild:null,schemas:q,consts:Xt,incompleteFirstPass:!1}}function cg(n,i,s,l){const g=Wp(i);null===s?g.push(l):(g.push(s),n.firstCreatePass&&gg(n).push(l,g.length-1))}function Wh(n,i,s,l){for(let g in n)if(n.hasOwnProperty(g)){s=null===s?{}:s;const C=n[g];null===l?Vf(s,i,g,C):l.hasOwnProperty(g)&&Vf(s,i,l[g],C)}return s}function Vf(n,i,s,l){n.hasOwnProperty(s)?n[s].push(i,l):n[s]=[i,l]}function dc(n,i,s,l,g,C,R,j){const q=Bi(i,s);let Ce,ue=i.inputs;!j&&null!=ue&&(Ce=ue[l])?(jf(n,s,Ce,l,g),Ti(i)&&dg(s,i.index)):3&i.type&&(l=function eh(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(l),g=null!=R?R(g,i.value||"",l):g,C.setProperty(q,l,g))}function dg(n,i){const s=Yr(i,n);16&s[vt]||(s[vt]|=32)}function Bf(n,i,s,l){if(ti()){const g=null===l?null:{"":-1},C=function j_(n,i){const s=n.directiveRegistry;let l=null,g=null;if(s)for(let C=0;C<s.length;C++){const R=s[C];if(Zm(i,R.selectors,!1))if(l||(l=[]),Or(R))if(null!==R.findHostDirectiveDefs){const j=[];g=g||new Map,R.findHostDirectiveDefs(R,j,g),l.unshift(...j,R),Kh(n,i,j.length)}else l.unshift(R),Kh(n,i,0);else g=g||new Map,R.findHostDirectiveDefs?.(R,l,g),l.push(R)}return null===l?null:[l,g]}(n,s);let R,j;null===C?R=j=null:[R,j]=C,null!==R&&hg(n,i,s,R,g,j),g&&function pg(n,i,s){if(i){const l=n.localNames=[];for(let g=0;g<i.length;g+=2){const C=s[i[g+1]];if(null==C)throw new It(-301,!1);l.push(i[g],C)}}}(s,l,g)}s.mergedAttrs=qn(s.mergedAttrs,s.attrs)}function hg(n,i,s,l,g,C){for(let ue=0;ue<l.length;ue++)io(Jo(s,i),n,l[ue].type);!function Bp(n,i,s){n.flags|=1,n.directiveStart=i,n.directiveEnd=i+s,n.providerIndexes=i}(s,n.data.length,l.length);for(let ue=0;ue<l.length;ue++){const Ce=l[ue];Ce.providersResolver&&Ce.providersResolver(Ce)}let R=!1,j=!1,q=$u(n,i,l.length,null);for(let ue=0;ue<l.length;ue++){const Ce=l[ue];s.mergedAttrs=qn(s.mergedAttrs,Ce.hostAttrs),Hp(n,s,i,q,Ce),Vp(q,Ce,g),null!==Ce.contentQueries&&(s.flags|=4),(null!==Ce.hostBindings||null!==Ce.hostAttrs||0!==Ce.hostVars)&&(s.flags|=64);const tt=Ce.type.prototype;!R&&(tt.ngOnChanges||tt.ngOnInit||tt.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(s.index),R=!0),!j&&(tt.ngOnChanges||tt.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(s.index),j=!0),q++}!function ug(n,i,s){const g=i.directiveEnd,C=n.data,R=i.attrs,j=[];let q=null,ue=null;for(let Ce=i.directiveStart;Ce<g;Ce++){const tt=C[Ce],Rt=s?s.get(tt):null,In=Rt?Rt.outputs:null;q=Wh(tt.inputs,Ce,q,Rt?Rt.inputs:null),ue=Wh(tt.outputs,Ce,ue,In);const Yn=null===q||null===R||Km(i)?null:ih(q,Ce,R);j.push(Yn)}null!==q&&(q.hasOwnProperty("class")&&(i.flags|=8),q.hasOwnProperty("style")&&(i.flags|=16)),i.initialInputs=j,i.inputs=q,i.outputs=ue}(n,s,C)}function fg(n,i,s){const l=s.directiveStart,g=s.directiveEnd,C=s.index,R=function jo(){return si.lFrame.currentDirectiveIndex}();try{me(C);for(let j=l;j<g;j++){const q=n.data[j],ue=i[j];To(j),(null!==q.hostBindings||0!==q.hostVars||null!==q.hostAttrs)&&Up(q,ue)}}finally{me(-1),To(R)}}function Up(n,i){null!==n.hostBindings&&n.hostBindings(1,i)}function Kh(n,i,s){i.componentOffset=s,(n.components||(n.components=[])).push(i.index)}function Vp(n,i,s){if(s){if(i.exportAs)for(let l=0;l<i.exportAs.length;l++)s[i.exportAs[l]]=n;Or(i)&&(s[""]=n)}}function Hp(n,i,s,l,g){n.data[l]=g;const C=g.factory||(g.factory=Hs(g.type)),R=new Dt(C,Or(g),Xd);n.blueprint[l]=R,s[l]=R,function Fp(n,i,s,l,g){const C=g.hostBindings;if(C){let R=n.hostBindingOpCodes;null===R&&(R=n.hostBindingOpCodes=[]);const j=~i.index;(function H_(n){let i=n.length;for(;i>0;){const s=n[--i];if("number"==typeof s&&s<0)return s}return 0})(R)!=j&&R.push(j),R.push(s,l,C)}}(n,i,l,$u(n,s,g.hostVars,ns),g)}function Ul(n,i,s,l,g,C){const R=Bi(n,i);!function qh(n,i,s,l,g,C,R){if(null==C)n.removeAttribute(i,g,s);else{const j=null==R?Ae(C):R(C,l||"",g);n.setAttribute(i,g,j,s)}}(i[xn],R,C,n.value,s,l,g)}function nh(n,i,s,l,g,C){const R=C[i];if(null!==R){const j=l.setInput;for(let q=0;q<R.length;){const ue=R[q++],Ce=R[q++],tt=R[q++];null!==j?l.setInput(s,tt,ue,Ce):s[Ce]=tt}}}function ih(n,i,s){let l=null,g=0;for(;g<s.length;){const C=s[g];if(0!==C)if(5!==C){if("number"==typeof C)break;if(n.hasOwnProperty(C)){null===l&&(l=[]);const R=n[C];for(let j=0;j<R.length;j+=2)if(R[j]===i){l.push(C,R[j+1],s[g+1]);break}}g+=2}else g+=2;else g+=4}return l}function jp(n,i,s,l){return[n,!0,!1,i,null,0,l,s,null,null]}function $_(n,i){const s=Yr(i,n);if(Jr(s)){const l=s[Ge];48&s[vt]?zh(l,s,l.template,s[Bt]):s[st]>0&&Zh(s)}}function Zh(n){for(let l=je(n);null!==l;l=$t(l))for(let g=cr;g<l.length;g++){const C=l[g];if(Jr(C))if(512&C[vt]){const R=C[Ge];zh(R,C,R.template,C[Bt])}else C[st]>0&&Zh(C)}const s=n[Ge].components;if(null!==s)for(let l=0;l<s.length;l++){const g=Yr(s[l],n);Jr(g)&&g[st]>0&&Zh(g)}}function zp(n,i){const s=Yr(i,n),l=s[Ge];(function $p(n,i){for(let s=i.length;s<n.blueprint.length;s++)i.push(n.blueprint[s])})(l,s),jh(l,s,s[Bt])}function sh(n,i){return n[Ii]?n[ms][Dn]=i:n[Ii]=i,n[ms]=i,i}function Gp(n){for(;n;){n[vt]|=32;const i=M(n);if(Us(n)&&!i)return n;n=i}return null}function Hf(n,i,s,l=!0){const g=i[Wn];g.begin&&g.begin();try{zh(n,i,n.template,s)}catch(R){throw l&&qp(i,R),R}finally{g.end&&g.end()}}function Yh(n,i,s){zo(0),i(n,s)}function Wp(n){return n[wt]||(n[wt]=[])}function gg(n){return n.cleanup||(n.cleanup=[])}function qp(n,i){const s=n[mn],l=s?s.get(Ph,null):null;l&&l.handleError(i)}function jf(n,i,s,l,g){for(let C=0;C<s.length;){const R=s[C++],j=s[C++],q=i[R],ue=n.data[R];null!==ue.setInput?ue.setInput(q,g,l,j):q[j]=g}}function zf(n,i,s){let l=s?n.styles:null,g=s?n.classes:null,C=0;if(null!==i)for(let R=0;R<i.length;R++){const j=i[R];"number"==typeof j?C=j:1==C?g=ze(g,j):2==C&&(l=ze(l,j+": "+i[++R]+";"))}s?n.styles=l:n.stylesWithoutHost=l,s?n.classes=g:n.classesWithoutHost=g}function $f(n,i,s,l,g=!1){for(;null!==s;){const C=i[s.index];if(null!==C&&l.push(rr(C)),ar(C))for(let j=cr;j<C.length;j++){const q=C[j],ue=q[Ge].firstChild;null!==ue&&$f(q[Ge],q,ue,l)}const R=s.type;if(8&R)$f(n,i,s.child,l);else if(32&R){const j=B(s,i);let q;for(;q=j();)l.push(q)}else if(16&R){const j=Xl(i,s);if(Array.isArray(j))l.push(...j);else{const q=M(i[dr]);$f(q[Ge],q,j,l,!0)}}s=g?s.projectionNext:s.next}return l}class Qh{get rootNodes(){const i=this._lView,s=i[Ge];return $f(s,i,s.firstChild,[])}constructor(i,s){this._lView=i,this._cdRefInjectingView=s,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Bt]}set context(i){this._lView[Bt]=i}get destroyed(){return 128==(128&this._lView[vt])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const i=this._lView[Kt];if(ar(i)){const s=i[wi],l=s?s.indexOf(this):-1;l>-1&&(yc(i,l),h(s,l))}this._attachedToViewContainer=!1}Rc(this._lView[Ge],this._lView)}onDestroy(i){cg(this._lView[Ge],this._lView,null,i)}markForCheck(){Gp(this._cdRefInjectingView||this._lView)}detach(){this._lView[vt]&=-65}reattach(){this._lView[vt]|=64}detectChanges(){Hf(this._lView[Ge],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new It(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Zc(n,i){vc(n,i,i[xn],2,null,null)}(this._lView[Ge],this._lView)}attachToAppRef(i){if(this._attachedToViewContainer)throw new It(902,!1);this._appRef=i}}class G_ extends Qh{constructor(i){super(i),this._view=i}detectChanges(){const i=this._view;Hf(i[Ge],i,i[Bt],!1)}checkNoChanges(){}get context(){return null}}class Gf extends En{constructor(i){super(),this.ngModule=i}resolveComponentFactory(i){const s=Qi(i);return new Sd(s,this.ngModule)}}function Wf(n){const i=[];for(let s in n)n.hasOwnProperty(s)&&i.push({propName:n[s],templateName:s});return i}class W_{constructor(i,s){this.injector=i,this.parentInjector=s}get(i,s,l){l=de(l);const g=this.injector.get(i,xf,l);return g!==xf||s===xf?g:this.parentInjector.get(i,s,l)}}class Sd extends Ie{get inputs(){return Wf(this.componentDef.inputs)}get outputs(){return Wf(this.componentDef.outputs)}constructor(i,s){super(),this.componentDef=i,this.ngModule=s,this.componentType=i.type,this.selector=function wp(n){return n.map(Ip).join(",")}(i.selectors),this.ngContentSelectors=i.ngContentSelectors?i.ngContentSelectors:[],this.isBoundToModule=!!s}create(i,s,l,g){let C=(g=g||this.ngModule)instanceof Iu?g:g?.injector;C&&null!==this.componentDef.getStandaloneInjector&&(C=this.componentDef.getStandaloneInjector(C)||C);const R=C?new W_(i,C):i,j=R.get(wc,null);if(null===j)throw new It(407,!1);const q=R.get(rd,null),ue=j.createRenderer(null,this.componentDef),Ce=this.componentDef.selectors[0][0]||"div",tt=l?function kp(n,i,s){return n.selectRootElement(i,s===St.ShadowDom)}(ue,l,this.componentDef.encapsulation):Gs(ue,Ce,function Zp(n){const i=n.toLowerCase();return"svg"===i?ho:"math"===i?"math":null}(Ce)),Rt=this.componentDef.onPush?288:272,Xt=Gh(0,null,null,1,0,null,null,null,null,null),In=zu(null,Xt,null,Rt,null,null,j,ue,q,R,null);let Yn,gi;Ua(In);try{const Zi=this.componentDef;let Ur,kn=null;Zi.findHostDirectiveDefs?(Ur=[],kn=new Map,Zi.findHostDirectiveDefs(Zi,Ur,kn),Ur.push(Zi)):Ur=[Zi];const ss=function yg(n,i){const s=n[Ge],l=Ci;return n[l]=i,ad(s,l,2,"#host",null)}(In,tt),Qa=function Yp(n,i,s,l,g,C,R,j){const q=g[Ge];!function vg(n,i,s,l){for(const g of n)i.mergedAttrs=qn(i.mergedAttrs,g.hostAttrs);null!==i.mergedAttrs&&(zf(i,i.mergedAttrs,!0),null!==s&&ru(l,s,i))}(l,n,i,R);const ue=C.createRenderer(i,s),Ce=zu(g,lg(s),null,s.onPush?32:16,g[n.index],n,C,ue,j||null,null,null);return q.firstCreatePass&&Kh(q,n,l.length-1),sh(g,Ce),g[n.index]=Ce}(ss,tt,Zi,Ur,In,j,ue);gi=Mr(Xt,Ci),tt&&function Qp(n,i,s,l){if(l)hr(n,s,["ng-version",ju.full]);else{const{attrs:g,classes:C}=function Qm(n){const i=[],s=[];let l=1,g=2;for(;l<n.length;){let C=n[l];if("string"==typeof C)2===g?""!==C&&i.push(C,n[++l]):8===g&&s.push(C);else{if(!cu(g))break;g=C}l++}return{attrs:i,classes:s}}(i.selectors[0]);g&&hr(n,s,g),C&&C.length>0&&tc(n,s,C.join(" "))}}(ue,Zi,tt,l),void 0!==s&&function Z_(n,i,s){const l=n.projection=[];for(let g=0;g<i.length;g++){const C=s[g];l.push(null!=C?Array.from(C):null)}}(gi,this.ngContentSelectors,s),Yn=function q_(n,i,s,l,g,C){const R=es(),j=g[Ge],q=Bi(R,g);hg(j,g,R,s,null,l);for(let Ce=0;Ce<s.length;Ce++)sa(Hr(g,j,R.directiveStart+Ce,R),g);fg(j,g,R),q&&sa(q,g);const ue=Hr(g,j,R.directiveStart+R.componentOffset,R);if(n[Bt]=g[Bt]=ue,null!==C)for(const Ce of C)Ce(ue,i);return $h(j,R,n),ue}(Qa,Zi,Ur,kn,In,[Xp]),jh(Xt,In,null)}finally{ls()}return new K_(this.componentType,Yn,$i(gi,In),In,gi)}}class K_ extends ae{constructor(i,s,l,g,C){super(),this.location=l,this._rootLView=g,this._tNode=C,this.instance=s,this.hostView=this.changeDetectorRef=new G_(g),this.componentType=i}setInput(i,s){const l=this._tNode.inputs;let g;if(null!==l&&(g=l[i])){const C=this._rootLView;jf(C[Ge],C,g,i,s),dg(C,this._tNode.index)}}get injector(){return new js(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(i){this.hostView.onDestroy(i)}}function Xp(){const n=es();at(pn()[Ge],n)}function Xh(n){let i=function bg(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),s=!0;const l=[n];for(;i;){let g;if(Or(n))g=i.\u0275cmp||i.\u0275dir;else{if(i.\u0275cmp)throw new It(903,!1);g=i.\u0275dir}if(g){if(s){l.push(g);const R=n;R.inputs=Jh(n.inputs),R.declaredInputs=Jh(n.declaredInputs),R.outputs=Jh(n.outputs);const j=g.hostBindings;j&&oh(n,j);const q=g.viewQuery,ue=g.contentQueries;if(q&&Jp(n,q),ue&&em(n,ue),Ze(n.inputs,g.inputs),Ze(n.declaredInputs,g.declaredInputs),Ze(n.outputs,g.outputs),Or(g)&&g.data.animation){const Ce=n.data;Ce.animation=(Ce.animation||[]).concat(g.data.animation)}}const C=g.features;if(C)for(let R=0;R<C.length;R++){const j=C[R];j&&j.ngInherit&&j(n),j===Xh&&(s=!1)}}i=Object.getPrototypeOf(i)}!function Y_(n){let i=0,s=null;for(let l=n.length-1;l>=0;l--){const g=n[l];g.hostVars=i+=g.hostVars,g.hostAttrs=qn(g.hostAttrs,s=qn(s,g.hostAttrs))}}(l)}function Jh(n){return n===Mn?{}:n===Je?[]:n}function Jp(n,i){const s=n.viewQuery;n.viewQuery=s?(l,g)=>{i(l,g),s(l,g)}:i}function em(n,i){const s=n.contentQueries;n.contentQueries=s?(l,g,C)=>{i(l,g,C),s(l,g,C)}:i}function oh(n,i){const s=n.hostBindings;n.hostBindings=s?(l,g)=>{i(l,g),s(l,g)}:i}function ah(n){return!!rm(n)&&(Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n)}function rm(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function Su(n,i,s){return n[i]=s}function Vl(n,i,s){return!Object.is(n[i],s)&&(n[i]=s,!0)}function Gu(n,i,s,l){const g=Vl(n,i,s);return Vl(n,i+1,l)||g}function om(n,i,s,l){const g=pn();return Vl(g,Ho(),i)&&(Si(),Ul(S(),g,n,i,s,l)),om}function lh(n,i,s,l){return Vl(n,Ho(),s)?i+Ae(s)+l:ns}function um(n,i,s,l,g,C,R,j){const q=pn(),ue=Si(),Ce=n+Ci,tt=ue.firstCreatePass?function cm(n,i,s,l,g,C,R,j,q){const ue=i.consts,Ce=ad(i,n,4,R||null,ai(ue,j));Bf(i,s,Ce,ai(ue,q)),at(i,Ce);const tt=Ce.tView=Gh(2,Ce,l,g,C,i.directiveRegistry,i.pipeRegistry,null,i.schemas,ue);return null!==i.queries&&(i.queries.template(i,Ce),tt.queries=i.queries.embeddedTView(Ce)),Ce}(Ce,ue,q,i,s,l,g,C,R):ue.data[Ce];to(tt,!1);const Rt=q[xn].createComment("");zr(ue,q,Rt,tt),sa(Rt,q),sh(q,q[Ce]=jp(Rt,q,Rt,tt)),nr(tt)&&uu(ue,q,tt),null!=R&&Uf(q,tt,j)}function Zf(n){return Es(function Ro(){return si.lFrame.contextLView}(),Ci+n)}function uh(n,i,s){const l=pn();return Vl(l,Ho(),i)&&dc(Si(),S(),l,n,i,l[xn],s,!1),uh}function rf(n,i,s,l,g){const R=g?"class":"style";jf(n,s,i.inputs[R],R,l)}function Rd(n,i,s,l){const g=pn(),C=Si(),R=Ci+n,j=g[xn],q=C.firstCreatePass?function xg(n,i,s,l,g,C){const R=i.consts,q=ad(i,n,2,l,ai(R,g));return Bf(i,s,q,ai(R,C)),null!==q.attrs&&zf(q,q.attrs,!1),null!==q.mergedAttrs&&zf(q,q.mergedAttrs,!0),null!==i.queries&&i.queries.elementStart(i,q),q}(R,C,g,i,s,l):C.data[R],ue=g[R]=Gs(j,i,function $e(){return si.lFrame.currentNamespace}()),Ce=nr(q);return to(q,!0),ru(j,ue,q),32!=(32&q.flags)&&zr(C,g,ue,q),0===function Q(){return si.lFrame.elementDepthCount}()&&sa(ue,g),function De(){si.lFrame.elementDepthCount++}(),Ce&&(uu(C,g,q),$h(C,q,g)),null!==l&&Uf(g,q),Rd}function dh(){let n=es();_a()?Yo():(n=n.parent,to(n,!1));const i=n;!function en(){si.lFrame.elementDepthCount--}();const s=Si();return s.firstCreatePass&&(at(s,n),vr(n)&&s.queries.elementEnd(n)),null!=i.classesWithoutHost&&function Ui(n){return 0!=(8&n.flags)}(i)&&rf(s,i,pn(),i.classesWithoutHost,!0),null!=i.stylesWithoutHost&&function yi(n){return 0!=(16&n.flags)}(i)&&rf(s,i,pn(),i.stylesWithoutHost,!1),dh}function sf(n,i,s,l){return Rd(n,i,s,l),dh(),sf}function Rg(){return pn()}function hm(n){return!!n&&"function"==typeof n.then}function fm(n){return!!n&&"function"==typeof n.subscribe}const Pg=fm;function Yf(n,i,s,l){const g=pn(),C=Si(),R=es();return function kg(n,i,s,l,g,C,R){const j=nr(l),ue=n.firstCreatePass&&gg(n),Ce=i[Bt],tt=Wp(i);let Rt=!0;if(3&l.type||R){const Yn=Bi(l,i),gi=R?R(Yn):Yn,Zi=tt.length,Ur=R?ss=>R(rr(ss[l.index])):l.index;let kn=null;if(!R&&j&&(kn=function ey(n,i,s,l){const g=n.cleanup;if(null!=g)for(let C=0;C<g.length-1;C+=2){const R=g[C];if(R===s&&g[C+1]===l){const j=i[wt],q=g[C+2];return j.length>q?j[q]:null}"string"==typeof R&&(C+=2)}return null}(n,i,g,l.index)),null!==kn)(kn.__ngLastListenerFn__||kn).__ngNextListenerFn__=C,kn.__ngLastListenerFn__=C,Rt=!1;else{C=pm(l,i,Ce,C,!1);const ss=s.listen(gi,g,C);tt.push(C,ss),ue&&ue.push(g,Ur,Zi,Zi+1)}}else C=pm(l,i,Ce,C,!1);const Xt=l.outputs;let In;if(Rt&&null!==Xt&&(In=Xt[g])){const Yn=In.length;if(Yn)for(let gi=0;gi<Yn;gi+=2){const Qa=i[In[gi]][In[gi+1]].subscribe(C),bl=tt.length;tt.push(C,Qa),ue&&ue.push(g,l.index,bl,-(bl+1))}}}(C,g,g[xn],R,n,i,l),Yf}function Ng(n,i,s,l){try{return Xi(6,i,s),!1!==s(l)}catch(g){return qp(n,g),!1}finally{Xi(7,i,s)}}function pm(n,i,s,l,g){return function C(R){if(R===Function)return l;Gp(n.componentOffset>-1?Yr(n.index,i):i);let q=Ng(i,s,l,R),ue=C.__ngNextListenerFn__;for(;ue;)q=Ng(i,s,ue,R)&&q,ue=ue.__ngNextListenerFn__;return g&&!1===q&&(R.preventDefault(),R.returnValue=!1),q}}function Qf(n=1){return function $o(n){return(si.lFrame.contextLView=function Do(n,i){for(;n>0;)i=i[As],n--;return i}(n,si.lFrame.contextLView))[Bt]}(n)}function Fg(n,i){let s=null;const l=function Ym(n){const i=n.attrs;if(null!=i){const s=i.indexOf(5);if(!(1&s))return i[s+1]}return null}(n);for(let g=0;g<i.length;g++){const C=i[g];if("*"!==C){if(null===l?Zm(n,C,!0):Oh(l,C))return g}else s=g}return s}function mm(n){const i=pn()[dr][nt];if(!i.projection){const l=i.projection=T(n?n.length:1,null),g=l.slice();let C=i.child;for(;null!==C;){const R=n?Fg(C,n):0;null!==R&&(g[R]?g[R].projectionNext=C:l[R]=C,g[R]=C),C=C.next}}}function gm(n,i=0,s){const l=pn(),g=Si(),C=ad(g,Ci+n,16,null,s||null);null===C.projection&&(C.projection=i),Yo(),32!=(32&C.flags)&&function Oc(n,i,s){Oa(i[xn],0,i,s,Qc(n,s,i),Ct(s.parent||i[nt],s,i))}(g,l,C)}function hh(n,i,s){return xs(n,"",i,"",s),hh}function xs(n,i,s,l,g){const C=pn(),R=lh(C,i,s,l);return R!==ns&&dc(Si(),S(),C,n,R,C[xn],g,!1),xs}function Xf(n,i){return n<<17|i<<2}function Ku(n){return n>>17&32767}function Em(n){return 2|n}function qu(n){return(131068&n)>>2}function Im(n,i){return-131069&n|i<<2}function oa(n){return 1|n}function Vg(n,i,s,l,g){const C=n[s+1],R=null===i;let j=l?Ku(C):qu(C),q=!1;for(;0!==j&&(!1===q||R);){const Ce=n[j+1];iy(n[j],i)&&(q=!0,n[j+1]=l?oa(Ce):Em(Ce)),j=l?Ku(Ce):qu(Ce)}q&&(n[s+1]=l?Em(C):oa(C))}function iy(n,i){return null===n||null==i||(Array.isArray(n)?n[1]:n)===i||!(!Array.isArray(n)||"string"!=typeof i)&&ln(n,i)>=0}function mh(n,i,s){return hu(n,i,s,!1),mh}function wm(n,i){return hu(n,i,null,!0),wm}function hu(n,i,s,l){const g=pn(),C=Si(),R=function wo(n){const i=si.lFrame,s=i.bindingIndex;return i.bindingIndex=i.bindingIndex+n,s}(2);C.firstUpdatePass&&function gh(n,i,s,l){const g=n.data;if(null===g[s+1]){const C=g[no()],R=function cf(n,i){return i>=n.expandoStartIndex}(n,s);(function Kg(n,i){return 0!=(n.flags&(i?8:16))})(C,l)&&null===i&&!R&&(i=!1),i=function Wg(n,i,s,l){const g=function Qo(n){const i=si.lFrame.currentDirectiveIndex;return-1===i?null:n[i]}(n);let C=l?i.residualClasses:i.residualStyles;if(null===g)0===(l?i.classBindings:i.styleBindings)&&(s=Od(s=Tm(null,n,i,s,l),i.attrs,l),C=null);else{const R=i.directiveStylingLast;if(-1===R||n[R]!==g)if(s=Tm(g,n,i,s,l),null===C){let q=function Cm(n,i,s){const l=s?i.classBindings:i.styleBindings;if(0!==qu(l))return n[Ku(l)]}(n,i,l);void 0!==q&&Array.isArray(q)&&(q=Tm(null,n,i,q[1],l),q=Od(q,i.attrs,l),function ly(n,i,s,l){n[Ku(s?i.classBindings:i.styleBindings)]=l}(n,i,l,q))}else C=function cy(n,i,s){let l;const g=i.directiveEnd;for(let C=1+i.directiveStylingLast;C<g;C++)l=Od(l,n[C].hostAttrs,s);return Od(l,i.attrs,s)}(n,i,l)}return void 0!==C&&(l?i.residualClasses=C:i.residualStyles=C),s}(g,C,i,l),function nl(n,i,s,l,g,C){let R=C?i.classBindings:i.styleBindings,j=Ku(R),q=qu(R);n[l]=s;let Ce,ue=!1;if(Array.isArray(s)?(Ce=s[1],(null===Ce||ln(s,Ce)>0)&&(ue=!0)):Ce=s,g)if(0!==q){const Rt=Ku(n[j+1]);n[l+1]=Xf(Rt,j),0!==Rt&&(n[Rt+1]=Im(n[Rt+1],l)),n[j+1]=function bm(n,i){return 131071&n|i<<17}(n[j+1],l)}else n[l+1]=Xf(j,0),0!==j&&(n[j+1]=Im(n[j+1],l)),j=l;else n[l+1]=Xf(q,0),0===j?j=l:n[q+1]=Im(n[q+1],l),q=l;ue&&(n[l+1]=Em(n[l+1])),Vg(n,Ce,l,!0),Vg(n,Ce,l,!1),function Ug(n,i,s,l,g){const C=g?n.residualClasses:n.residualStyles;null!=C&&"string"==typeof i&&ln(C,i)>=0&&(s[l+1]=oa(s[l+1]))}(i,Ce,n,l,C),R=Xf(j,q),C?i.classBindings=R:i.styleBindings=R}(g,C,i,s,R,l)}}(C,n,R,l),i!==ns&&Vl(g,R,i)&&function xm(n,i,s,l,g,C,R,j){if(!(3&i.type))return;const q=n.data,ue=q[j+1],Ce=function ny(n){return 1==(1&n)}(ue)?Am(q,i,s,g,qu(ue),R):void 0;_h(Ce)||(_h(C)||function ty(n){return 2==(2&n)}(ue)&&(C=Am(q,null,s,g,j,R)),function Ta(n,i,s,l,g){if(i)g?n.addClass(s,l):n.removeClass(s,l);else{let C=-1===l.indexOf("-")?void 0:Ra.DashCase;null==g?n.removeStyle(s,l,C):("string"==typeof g&&g.endsWith("!important")&&(g=g.slice(0,-10),C|=Ra.Important),n.setStyle(s,l,g,C))}}(l,R,Ts(no(),s),g,C))}(C,C.data[no()],g,g[xn],n,g[R+1]=function uf(n,i){return null==n||""===n||("string"==typeof i?n+=i:"object"==typeof n&&(n=xe(Ec(n)))),n}(i,s),l,R)}function Tm(n,i,s,l,g){let C=null;const R=s.directiveEnd;let j=s.directiveStylingLast;for(-1===j?j=s.directiveStart:j++;j<R&&(C=i[j],l=Od(l,C.hostAttrs,g),C!==n);)j++;return null!==n&&(s.directiveStylingLast=j),l}function Od(n,i,s){const l=s?1:2;let g=-1;if(null!==i)for(let C=0;C<i.length;C++){const R=i[C];"number"==typeof R?g=R:g===l&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),mt(n,R,!!s||i[++C]))}return void 0===n?null:n}function Am(n,i,s,l,g,C){const R=null===i;let j;for(;g>0;){const q=n[g],ue=Array.isArray(q),Ce=ue?q[1]:q,tt=null===Ce;let Rt=s[g+1];Rt===ns&&(Rt=tt?Je:void 0);let Xt=tt?on(Rt,l):Ce===l?Rt:void 0;if(ue&&!_h(Xt)&&(Xt=on(q,l)),_h(Xt)&&(j=Xt,R))return j;const In=n[g+1];g=R?Ku(In):qu(In)}if(null!==i){let q=C?i.residualClasses:i.residualStyles;null!=q&&(j=on(q,l))}return j}function _h(n){return void 0!==n}function df(n,i=""){const s=pn(),l=Si(),g=n+Ci,C=l.firstCreatePass?ad(l,g,1,i,null):l.data[g],R=s[g]=function Ri(n,i){return n.createText(i)}(s[xn],i);zr(l,s,R,C),to(C,!1)}function yh(n){return hf("",n,""),yh}function hf(n,i,s){const l=pn(),g=lh(l,n,i,s);return g!==ns&&function Tu(n,i,s){const l=Ts(i,n);!function Er(n,i,s){n.setValue(i,s)}(n[xn],l,s)}(l,no(),g),hf}function t_(n,i,s){const l=pn();return Vl(l,Ho(),i)&&dc(Si(),S(),l,n,i,l[xn],s,!0),t_}const Uc=void 0;var mf=["en",[["a","p"],["AM","PM"],Uc],[["AM","PM"],Uc,Uc],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Uc,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Uc,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Uc,"{1} 'at' {0}",Uc],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Nd(n){const s=Math.floor(Math.abs(n)),l=n.toString().replace(/^[^.]*\.?/,"").length;return 1===s&&0===l?1:5}];let nu={};function Nm(n){const i=function Ey(n){return n.toLowerCase().replace(/_/g,"-")}(n);let s=n_(i);if(s)return s;const l=i.split("-")[0];if(s=n_(l),s)return s;if("en"===l)return mf;throw new It(701,!1)}function Yu(n){return Nm(n)[xr.PluralCase]}function n_(n){return n in nu||(nu[n]=Hn.ng&&Hn.ng.common&&Hn.ng.common.locales&&Hn.ng.common.locales[n]),nu[n]}var xr=(()=>((xr=xr||{})[xr.LocaleId=0]="LocaleId",xr[xr.DayPeriodsFormat=1]="DayPeriodsFormat",xr[xr.DayPeriodsStandalone=2]="DayPeriodsStandalone",xr[xr.DaysFormat=3]="DaysFormat",xr[xr.DaysStandalone=4]="DaysStandalone",xr[xr.MonthsFormat=5]="MonthsFormat",xr[xr.MonthsStandalone=6]="MonthsStandalone",xr[xr.Eras=7]="Eras",xr[xr.FirstDayOfWeek=8]="FirstDayOfWeek",xr[xr.WeekendRange=9]="WeekendRange",xr[xr.DateFormat=10]="DateFormat",xr[xr.TimeFormat=11]="TimeFormat",xr[xr.DateTimeFormat=12]="DateTimeFormat",xr[xr.NumberSymbols=13]="NumberSymbols",xr[xr.NumberFormats=14]="NumberFormats",xr[xr.CurrencyCode=15]="CurrencyCode",xr[xr.CurrencySymbol=16]="CurrencySymbol",xr[xr.CurrencyName=17]="CurrencyName",xr[xr.Currencies=18]="Currencies",xr[xr.Directionality=19]="Directionality",xr[xr.PluralCase=20]="PluralCase",xr[xr.ExtraData=21]="ExtraData",xr))();const wh="en-US";let op=wh;function Fy(n,i,s,l,g){if(n=Ne(n),Array.isArray(n))for(let C=0;C<n.length;C++)Fy(n[C],i,s,l,g);else{const C=Si(),R=pn();let j=ic(n)?n:Ne(n.provide),q=m(n);const ue=es(),Ce=1048575&ue.providerIndexes,tt=ue.directiveStart,Rt=ue.providerIndexes>>20;if(ic(n)||!n.multi){const Xt=new Dt(q,g,Xd),In=Uy(j,i,g?Ce:Ce+Rt,tt);-1===In?(io(Jo(ue,R),C,j),Ly(C,n,i.length),i.push(j),ue.directiveStart++,ue.directiveEnd++,g&&(ue.providerIndexes+=1048576),s.push(Xt),R.push(Xt)):(s[In]=Xt,R[In]=Xt)}else{const Xt=Uy(j,i,Ce+Rt,tt),In=Uy(j,i,Ce,Ce+Rt),gi=In>=0&&s[In];if(g&&!gi||!g&&!(Xt>=0&&s[Xt])){io(Jo(ue,R),C,j);const Zi=function F0(n,i,s,l,g){const C=new Dt(n,s,Xd);return C.multi=[],C.index=i,C.componentProviders=0,Fv(C,g,l&&!s),C}(g?N0:k0,s.length,g,l,q);!g&&gi&&(s[In].providerFactory=Zi),Ly(C,n,i.length,0),i.push(j),ue.directiveStart++,ue.directiveEnd++,g&&(ue.providerIndexes+=1048576),s.push(Zi),R.push(Zi)}else Ly(C,n,Xt>-1?Xt:In,Fv(s[g?In:Xt],q,!g&&l));!g&&l&&gi&&s[In].componentProviders++}}}function Ly(n,i,s,l){const g=ic(i),C=function Df(n){return!!n.useClass}(i);if(g||C){const q=(C?Ne(i.useClass):i).prototype.ngOnDestroy;if(q){const ue=n.destroyHooks||(n.destroyHooks=[]);if(!g&&i.multi){const Ce=ue.indexOf(s);-1===Ce?ue.push(s,[l,q]):ue[Ce+1].push(l,q)}else ue.push(s,q)}}}function Fv(n,i,s){return s&&n.componentProviders++,n.multi.push(i)-1}function Uy(n,i,s,l){for(let g=s;g<l;g++)if(i[g]===n)return g;return-1}function k0(n,i,s,l){return Vy(this.multi,[])}function N0(n,i,s,l){const g=this.multi;let C;if(this.providerFactory){const R=this.providerFactory.componentProviders,j=Hr(s,s[Ge],this.providerFactory.index,l);C=j.slice(0,R),Vy(g,C);for(let q=R;q<j.length;q++)C.push(j[q])}else C=[],Vy(g,C);return C}function Vy(n,i){for(let s=0;s<n.length;s++)i.push((0,n[s])());return i}function Lv(n,i=[]){return s=>{s.providersResolver=(l,g)=>function O0(n,i,s){const l=Si();if(l.firstCreatePass){const g=Or(n);Fy(s,l.data,l.blueprint,g,!0),Fy(i,l.data,l.blueprint,g,!1)}}(l,g?g(n):n,i)}}class cp{}class Uv{}function L0(n,i){return new Vv(n,i??null)}class Vv extends cp{constructor(i,s){super(),this._parent=s,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Gf(this);const l=Ar(i);this._bootstrapComponents=Cu(l.bootstrap),this._r3Injector=Dp(i,s,[{provide:cp,useValue:this},{provide:En,useValue:this.componentFactoryResolver}],xe(i),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(i)}get injector(){return this._r3Injector}destroy(){const i=this._r3Injector;!i.destroyed&&i.destroy(),this.destroyCbs.forEach(s=>s()),this.destroyCbs=null}onDestroy(i){this.destroyCbs.push(i)}}class By extends Uv{constructor(i){super(),this.moduleType=i}create(i){return new Vv(this.moduleType,i)}}class U0 extends cp{constructor(i,s,l){super(),this.componentFactoryResolver=new Gf(this),this.instance=null;const g=new Kd([...i,{provide:cp,useValue:this},{provide:En,useValue:this.componentFactoryResolver}],s||Hu(),l,new Set(["environment"]));this.injector=g,g.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(i){this.injector.onDestroy(i)}}function Hy(n,i,s=null){return new U0(n,i,s).injector}let V0=(()=>{class n{constructor(s){this._injector=s,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(s){if(!s.standalone)return null;if(!this.cachedInjectors.has(s.id)){const l=Vu(0,s.type),g=l.length>0?Hy([l],this._injector,`Standalone[${s.type.name}]`):null;this.cachedInjectors.set(s.id,g)}return this.cachedInjectors.get(s.id)}ngOnDestroy(){try{for(const s of this.cachedInjectors.values())null!==s&&s.destroy()}finally{this.cachedInjectors.clear()}}}return n.\u0275prov=sn({token:n,providedIn:"environment",factory:()=>new n(be(Iu))}),n})();function Bv(n){n.getStandaloneInjector=i=>i.get(V0).getOrCreateStandaloneInjector(n)}function Kv(n,i,s,l,g,C){return function Yv(n,i,s,l,g,C,R,j){const q=i+s;return function ef(n,i,s,l,g){const C=Gu(n,i,s,l);return Vl(n,i+2,g)||C}(n,q,g,C,R)?Su(n,q+3,j?l.call(j,g,C,R):l(g,C,R)):Lm(n,q+3)}(pn(),Rr(),n,i,s,l,g,C)}function Lm(n,i){const s=n[i];return s===ns?void 0:s}function Jv(n,i){const s=Si();let l;const g=n+Ci;s.firstCreatePass?(l=function iE(n,i){if(i)for(let s=i.length-1;s>=0;s--){const l=i[s];if(n===l.name)return l}}(i,s.pipeRegistry),s.data[g]=l,l.onDestroy&&(s.destroyHooks||(s.destroyHooks=[])).push(g,l.onDestroy)):l=s.data[g];const C=l.factory||(l.factory=Hs(l.type)),R=Gn(Xd);try{const j=ci(!1),q=C();return ci(j),function dm(n,i,s,l){s>=n.data.length&&(n.data[s]=null,n.blueprint[s]=null),i[s]=l}(s,pn(),g,q),q}finally{Gn(R)}}function eb(n,i,s){const l=n+Ci,g=pn(),C=Es(g,l);return Um(g,l)?function qv(n,i,s,l,g,C){const R=i+s;return Vl(n,R,g)?Su(n,R+1,C?l.call(C,g):l(g)):Lm(n,R+1)}(g,Rr(),i,C.transform,s,C):C.transform(s)}function tb(n,i,s,l){const g=n+Ci,C=pn(),R=Es(C,g);return Um(C,g)?function Zv(n,i,s,l,g,C,R){const j=i+s;return Gu(n,j,g,C)?Su(n,j+2,R?l.call(R,g,C):l(g,C)):Lm(n,j+2)}(C,Rr(),i,R.transform,s,l,R):R.transform(s,l)}function Um(n,i){return n[Ge].data[i].pure}function zy(n){return i=>{setTimeout(n,void 0,i)}}const _d=class aE extends f.x{constructor(i=!1){super(),this.__isAsync=i}emit(i){super.next(i)}subscribe(i,s,l){let g=i,C=s||(()=>null),R=l;if(i&&"object"==typeof i){const q=i;g=q.next?.bind(q),C=q.error?.bind(q),R=q.complete?.bind(q)}this.__isAsync&&(C=zy(C),g&&(g=zy(g)),R&&(R=zy(R)));const j=super.subscribe({next:g,error:C,complete:R});return i instanceof _.w0&&i.add(j),j}};function lE(){return this._results[Symbol.iterator]()}class u_{get changes(){return this._changes||(this._changes=new _d)}constructor(i=!1){this._emitDistinctChangesOnly=i,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const s=u_.prototype;s[Symbol.iterator]||(s[Symbol.iterator]=lE)}get(i){return this._results[i]}map(i){return this._results.map(i)}filter(i){return this._results.filter(i)}find(i){return this._results.find(i)}reduce(i,s){return this._results.reduce(i,s)}forEach(i){this._results.forEach(i)}some(i){return this._results.some(i)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(i,s){const l=this;l.dirty=!1;const g=function Y(n){return n.flat(Number.POSITIVE_INFINITY)}(i);(this._changesDetected=!function Go(n,i,s){if(n.length!==i.length)return!1;for(let l=0;l<n.length;l++){let g=n[l],C=i[l];if(s&&(g=s(g),C=s(C)),C!==g)return!1}return!0}(l._results,g,s))&&(l._results=g,l.length=g.length,l.last=g[this.length-1],l.first=g[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Vm=(()=>{class n{}return n.__NG_ELEMENT_ID__=dE,n})();const cE=Vm,uE=class extends cE{constructor(i,s,l){super(),this._declarationLView=i,this._declarationTContainer=s,this.elementRef=l}createEmbeddedView(i,s){const l=this._declarationTContainer.tView,g=zu(this._declarationLView,l,i,16,null,l.declTNode,null,null,null,null,s||null);g[Qs]=this._declarationLView[this._declarationTContainer.index];const R=this._declarationLView[Vr];return null!==R&&(g[Vr]=R.createEmbeddedView(l)),jh(l,g,i),new Qh(g)}};function dE(){return d_(es(),pn())}function d_(n,i){return 4&n.type?new uE(i,n,$i(n,i)):null}let h_=(()=>{class n{}return n.__NG_ELEMENT_ID__=hE,n})();function hE(){return rb(es(),pn())}const fE=h_,nb=class extends fE{constructor(i,s,l){super(),this._lContainer=i,this._hostTNode=s,this._hostLView=l}get element(){return $i(this._hostTNode,this._hostLView)}get injector(){return new js(this._hostTNode,this._hostLView)}get parentInjector(){const i=po(this._hostTNode,this._hostLView);if(Ki(i)){const s=Jt(i,this._hostLView),l=Po(i);return new js(s[Ge].data[l+8],s)}return new js(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(i){const s=ib(this._lContainer);return null!==s&&s[i]||null}get length(){return this._lContainer.length-cr}createEmbeddedView(i,s,l){let g,C;"number"==typeof l?g=l:null!=l&&(g=l.index,C=l.injector);const R=i.createEmbeddedView(s||{},C);return this.insert(R,g),R}createComponent(i,s,l,g,C){const R=i&&!function Ds(n){return"function"==typeof n}(i);let j;if(R)j=s;else{const tt=s||{};j=tt.index,l=tt.injector,g=tt.projectableNodes,C=tt.environmentInjector||tt.ngModuleRef}const q=R?i:new Sd(Qi(i)),ue=l||this.parentInjector;if(!C&&null==q.ngModule){const Rt=(R?ue:this.parentInjector).get(Iu,null);Rt&&(C=Rt)}const Ce=q.create(ue,g,void 0,C);return this.insert(Ce.hostView,j),Ce}insert(i,s){const l=i._lView,g=l[Ge];if(function Io(n){return ar(n[Kt])}(l)){const Ce=this.indexOf(i);if(-1!==Ce)this.detach(Ce);else{const tt=l[Kt],Rt=new nb(tt,tt[nt],tt[Kt]);Rt.detach(Rt.indexOf(i))}}const C=this._adjustIndex(s),R=this._lContainer;!function Ir(n,i,s,l){const g=cr+l,C=s.length;l>0&&(s[g-1][Dn]=i),l<C-cr?(i[Dn]=s[g],a(s,cr+l,i)):(s.push(i),i[Dn]=null),i[Kt]=s;const R=i[Qs];null!==R&&s!==R&&function _c(n,i){const s=n[Xn];i[dr]!==i[Kt][Kt][dr]&&(n[or]=!0),null===s?n[Xn]=[i]:s.push(i)}(R,i);const j=i[Vr];null!==j&&j.insertView(n),i[vt]|=64}(g,l,R,C);const j=uc(C,R),q=l[xn],ue=he(q,R[_i]);return null!==ue&&function kl(n,i,s,l,g,C){l[Pe]=g,l[nt]=i,vc(n,l,s,1,g,C)}(g,R[nt],q,l,ue,j),i.attachToViewContainerRef(),a($y(R),C,i),i}move(i,s){return this.insert(i,s)}indexOf(i){const s=ib(this._lContainer);return null!==s?s.indexOf(i):-1}remove(i){const s=this._adjustIndex(i,-1),l=yc(this._lContainer,s);l&&(h($y(this._lContainer),s),Rc(l[Ge],l))}detach(i){const s=this._adjustIndex(i,-1),l=yc(this._lContainer,s);return l&&null!=h($y(this._lContainer),s)?new Qh(l):null}_adjustIndex(i,s=0){return i??this.length+s}};function ib(n){return n[wi]}function $y(n){return n[wi]||(n[wi]=[])}function rb(n,i){let s;const l=i[n.index];if(ar(l))s=l;else{let g;if(8&n.type)g=rr(l);else{const C=i[xn];g=C.createComment("");const R=Bi(n,i);yl(C,he(C,R),g,function Re(n,i){return n.nextSibling(i)}(C,R),!1)}i[n.index]=s=jp(l,i,g,n),sh(i,s)}return new nb(s,n,i)}class Gy{constructor(i){this.queryList=i,this.matches=null}clone(){return new Gy(this.queryList)}setDirty(){this.queryList.setDirty()}}class Wy{constructor(i=[]){this.queries=i}createEmbeddedView(i){const s=i.queries;if(null!==s){const l=null!==i.contentQueries?i.contentQueries[0]:s.length,g=[];for(let C=0;C<l;C++){const R=s.getByIndex(C);g.push(this.queries[R.indexInDeclarationView].clone())}return new Wy(g)}return null}insertView(i){this.dirtyQueriesWithMatches(i)}detachView(i){this.dirtyQueriesWithMatches(i)}dirtyQueriesWithMatches(i){for(let s=0;s<this.queries.length;s++)null!==fb(i,s).matches&&this.queries[s].setDirty()}}class sb{constructor(i,s,l=null){this.predicate=i,this.flags=s,this.read=l}}class Ky{constructor(i=[]){this.queries=i}elementStart(i,s){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(i,s)}elementEnd(i){for(let s=0;s<this.queries.length;s++)this.queries[s].elementEnd(i)}embeddedTView(i){let s=null;for(let l=0;l<this.length;l++){const g=null!==s?s.length:0,C=this.getByIndex(l).embeddedTView(i,g);C&&(C.indexInDeclarationView=l,null!==s?s.push(C):s=[C])}return null!==s?new Ky(s):null}template(i,s){for(let l=0;l<this.queries.length;l++)this.queries[l].template(i,s)}getByIndex(i){return this.queries[i]}get length(){return this.queries.length}track(i){this.queries.push(i)}}class qy{constructor(i,s=-1){this.metadata=i,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=s}elementStart(i,s){this.isApplyingToNode(s)&&this.matchTNode(i,s)}elementEnd(i){this._declarationNodeIndex===i.index&&(this._appliesToNextNode=!1)}template(i,s){this.elementStart(i,s)}embeddedTView(i,s){return this.isApplyingToNode(i)?(this.crossesNgTemplate=!0,this.addMatch(-i.index,s),new qy(this.metadata)):null}isApplyingToNode(i){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const s=this._declarationNodeIndex;let l=i.parent;for(;null!==l&&8&l.type&&l.index!==s;)l=l.parent;return s===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(i,s){const l=this.metadata.predicate;if(Array.isArray(l))for(let g=0;g<l.length;g++){const C=l[g];this.matchTNodeWithReadOption(i,s,pE(s,C)),this.matchTNodeWithReadOption(i,s,ea(s,i,C,!1,!1))}else l===Vm?4&s.type&&this.matchTNodeWithReadOption(i,s,-1):this.matchTNodeWithReadOption(i,s,ea(s,i,l,!1,!1))}matchTNodeWithReadOption(i,s,l){if(null!==l){const g=this.metadata.read;if(null!==g)if(g===qr||g===h_||g===Vm&&4&s.type)this.addMatch(s.index,-2);else{const C=ea(s,i,g,!1,!1);null!==C&&this.addMatch(s.index,C)}else this.addMatch(s.index,l)}}addMatch(i,s){null===this.matches?this.matches=[i,s]:this.matches.push(i,s)}}function pE(n,i){const s=n.localNames;if(null!==s)for(let l=0;l<s.length;l+=2)if(s[l]===i)return s[l+1];return null}function gE(n,i,s,l){return-1===s?function mE(n,i){return 11&n.type?$i(n,i):4&n.type?d_(n,i):null}(i,n):-2===s?function _E(n,i,s){return s===qr?$i(i,n):s===Vm?d_(i,n):s===h_?rb(i,n):void 0}(n,i,l):Hr(n,n[Ge],s,i)}function ob(n,i,s,l){const g=i[Vr].queries[l];if(null===g.matches){const C=n.data,R=s.matches,j=[];for(let q=0;q<R.length;q+=2){const ue=R[q];j.push(ue<0?null:gE(i,C[ue],R[q+1],s.metadata.read))}g.matches=j}return g.matches}function Zy(n,i,s,l){const g=n.queries.getByIndex(s),C=g.matches;if(null!==C){const R=ob(n,i,g,s);for(let j=0;j<C.length;j+=2){const q=C[j];if(q>0)l.push(R[j/2]);else{const ue=C[j+1],Ce=i[-q];for(let tt=cr;tt<Ce.length;tt++){const Rt=Ce[tt];Rt[Qs]===Rt[Kt]&&Zy(Rt[Ge],Rt,ue,l)}if(null!==Ce[Xn]){const tt=Ce[Xn];for(let Rt=0;Rt<tt.length;Rt++){const Xt=tt[Rt];Zy(Xt[Ge],Xt,ue,l)}}}}}return l}function ab(n){const i=pn(),s=Si(),l=La();zo(l+1);const g=fb(s,l);if(n.dirty&&function qs(n){return 4==(4&n[vt])}(i)===(2==(2&g.metadata.flags))){if(null===g.matches)n.reset([]);else{const C=g.crossesNgTemplate?Zy(s,i,l,[]):ob(s,i,g,l);n.reset(C,Sa),n.notifyOnChanges()}return!0}return!1}function lb(n,i,s){const l=Si();l.firstCreatePass&&(hb(l,new sb(n,i,s),-1),2==(2&i)&&(l.staticViewQueries=!0)),db(l,pn(),i)}function cb(n,i,s,l){const g=Si();if(g.firstCreatePass){const C=es();hb(g,new sb(i,s,l),C.index),function vE(n,i){const s=n.contentQueries||(n.contentQueries=[]);i!==(s.length?s[s.length-1]:-1)&&s.push(n.queries.length-1,i)}(g,n),2==(2&s)&&(g.staticContentQueries=!0)}db(g,pn(),s)}function ub(){return function yE(n,i){return n[Vr].queries[i].queryList}(pn(),La())}function db(n,i,s){const l=new u_(4==(4&s));cg(n,i,l,l.destroy),null===i[Vr]&&(i[Vr]=new Wy),i[Vr].queries.push(new Gy(l))}function hb(n,i,s){null===n.queries&&(n.queries=new Ky),n.queries.track(new qy(i,s))}function fb(n,i){return n.queries.getByIndex(i)}function pb(n,i){return d_(n,i)}function Yy(n){return!!Ar(n)}function p_(...n){}const Pb=new cs("Application Initializer");let m_=(()=>{class n{constructor(s){this.appInits=s,this.resolve=p_,this.reject=p_,this.initialized=!1,this.done=!1,this.donePromise=new Promise((l,g)=>{this.resolve=l,this.reject=g})}runInitializers(){if(this.initialized)return;const s=[],l=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let g=0;g<this.appInits.length;g++){const C=this.appInits[g]();if(hm(C))s.push(C);else if(Pg(C)){const R=new Promise((j,q)=>{C.subscribe({complete:j,error:q})});s.push(R)}}Promise.all(s).then(()=>{l()}).catch(g=>{this.reject(g)}),0===s.length&&l(),this.initialized=!0}}return n.\u0275fac=function(s){return new(s||n)(be(Pb,8))},n.\u0275prov=sn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Ob=new cs("AppId",{providedIn:"root",factory:function kb(){return`${tv()}${tv()}${tv()}`}});function tv(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Nb=new cs("Platform Initializer"),VE=new cs("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),BE=new cs("AnimationModuleType");let HE=(()=>{class n{log(s){console.log(s)}warn(s){console.warn(s)}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=sn({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const g_=new cs("LocaleId",{providedIn:"root",factory:()=>ne(g_,Tn.Optional|Tn.SkipSelf)||function jE(){return typeof $localize<"u"&&$localize.locale||wh}()}),zE=new cs("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class $E{constructor(i,s){this.ngModuleFactory=i,this.componentFactories=s}}let GE=(()=>{class n{compileModuleSync(s){return new By(s)}compileModuleAsync(s){return Promise.resolve(this.compileModuleSync(s))}compileModuleAndAllComponentsSync(s){const l=this.compileModuleSync(s),C=Cu(Ar(s).declarations).reduce((R,j)=>{const q=Qi(j);return q&&R.push(new Sd(q)),R},[]);return new $E(l,C)}compileModuleAndAllComponentsAsync(s){return Promise.resolve(this.compileModuleAndAllComponentsSync(s))}clearCache(){}clearCacheFor(s){}getModuleId(s){}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=sn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const qE=(()=>Promise.resolve(0))();function nv(n){typeof Zone>"u"?qE.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class Au{constructor({enableLongStackTrace:i=!1,shouldCoalesceEventChangeDetection:s=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new _d(!1),this.onMicrotaskEmpty=new _d(!1),this.onStable=new _d(!1),this.onError=new _d(!1),typeof Zone>"u")throw new It(908,!1);Zone.assertZonePatched();const g=this;g._nesting=0,g._outer=g._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(g._inner=g._inner.fork(new Zone.TaskTrackingZoneSpec)),i&&Zone.longStackTraceZoneSpec&&(g._inner=g._inner.fork(Zone.longStackTraceZoneSpec)),g.shouldCoalesceEventChangeDetection=!l&&s,g.shouldCoalesceRunChangeDetection=l,g.lastRequestAnimationFrameId=-1,g.nativeRequestAnimationFrame=function ZE(){let n=Hn.requestAnimationFrame,i=Hn.cancelAnimationFrame;if(typeof Zone<"u"&&n&&i){const s=n[Zone.__symbol__("OriginalDelegate")];s&&(n=s);const l=i[Zone.__symbol__("OriginalDelegate")];l&&(i=l)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:i}}().nativeRequestAnimationFrame,function XE(n){const i=()=>{!function QE(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Hn,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,rv(n),n.isCheckStableRunning=!0,iv(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),rv(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(s,l,g,C,R,j)=>{try{return Ub(n),s.invokeTask(g,C,R,j)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===C.type||n.shouldCoalesceRunChangeDetection)&&i(),Vb(n)}},onInvoke:(s,l,g,C,R,j,q)=>{try{return Ub(n),s.invoke(g,C,R,j,q)}finally{n.shouldCoalesceRunChangeDetection&&i(),Vb(n)}},onHasTask:(s,l,g,C)=>{s.hasTask(g,C),l===g&&("microTask"==C.change?(n._hasPendingMicrotasks=C.microTask,rv(n),iv(n)):"macroTask"==C.change&&(n.hasPendingMacrotasks=C.macroTask))},onHandleError:(s,l,g,C)=>(s.handleError(g,C),n.runOutsideAngular(()=>n.onError.emit(C)),!1)})}(g)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Au.isInAngularZone())throw new It(909,!1)}static assertNotInAngularZone(){if(Au.isInAngularZone())throw new It(909,!1)}run(i,s,l){return this._inner.run(i,s,l)}runTask(i,s,l,g){const C=this._inner,R=C.scheduleEventTask("NgZoneEvent: "+g,i,YE,p_,p_);try{return C.runTask(R,s,l)}finally{C.cancelTask(R)}}runGuarded(i,s,l){return this._inner.runGuarded(i,s,l)}runOutsideAngular(i){return this._outer.run(i)}}const YE={};function iv(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function rv(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function Ub(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function Vb(n){n._nesting--,iv(n)}class JE{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new _d,this.onMicrotaskEmpty=new _d,this.onStable=new _d,this.onError=new _d}run(i,s,l){return i.apply(s,l)}runGuarded(i,s,l){return i.apply(s,l)}runOutsideAngular(i){return i()}runTask(i,s,l,g){return i.apply(s,l)}}const Bb=new cs(""),Hb=new cs("");let sv,eI=(()=>{class n{constructor(s,l,g){this._ngZone=s,this.registry=l,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,sv||(function tI(n){sv=n}(g),g.addToWindow(l)),this._watchAngularEvents(),s.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Au.assertNotInAngularZone(),nv(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())nv(()=>{for(;0!==this._callbacks.length;){let s=this._callbacks.pop();clearTimeout(s.timeoutId),s.doneCb(this._didWork)}this._didWork=!1});else{let s=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(s)||(clearTimeout(l.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(s=>({source:s.source,creationLocation:s.creationLocation,data:s.data})):[]}addCallback(s,l,g){let C=-1;l&&l>0&&(C=setTimeout(()=>{this._callbacks=this._callbacks.filter(R=>R.timeoutId!==C),s(this._didWork,this.getPendingTasks())},l)),this._callbacks.push({doneCb:s,timeoutId:C,updateCb:g})}whenStable(s,l,g){if(g&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(s,l,g),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(s){this.registry.registerApplication(s,this)}unregisterApplication(s){this.registry.unregisterApplication(s)}findProviders(s,l,g){return[]}}return n.\u0275fac=function(s){return new(s||n)(be(Au),be(jb),be(Hb))},n.\u0275prov=sn({token:n,factory:n.\u0275fac}),n})(),jb=(()=>{class n{constructor(){this._applications=new Map}registerApplication(s,l){this._applications.set(s,l)}unregisterApplication(s){this._applications.delete(s)}unregisterAllApplications(){this._applications.clear()}getTestability(s){return this._applications.get(s)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(s,l=!0){return sv?.findTestabilityInTree(this,s,l)??null}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=sn({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const Fd=!1;let Ch=null;const zb=new cs("AllowMultipleToken"),ov=new cs("PlatformDestroyListeners"),$b=new cs("appBootstrapListener");class rI{constructor(i,s){this.name=i,this.token=s}}function Wb(n,i,s=[]){const l=`Platform: ${i}`,g=new cs(l);return(C=[])=>{let R=av();if(!R||R.injector.get(zb,!1)){const j=[...s,...C,{provide:g,useValue:!0}];n?n(j):function sI(n){if(Ch&&!Ch.get(zb,!1))throw new It(400,!1);Ch=n;const i=n.get(qb);(function Gb(n){const i=n.get(Nb,null);i&&i.forEach(s=>s())})(n)}(function Kb(n=[],i){return sd.create({name:i,providers:[{provide:Rh,useValue:"platform"},{provide:ov,useValue:new Set([()=>Ch=null])},...n]})}(j,l))}return function aI(n){const i=av();if(!i)throw new It(401,!1);return i}()}}function av(){return Ch?.get(qb)??null}let qb=(()=>{class n{constructor(s){this._injector=s,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(s,l){const g=function Yb(n,i){let s;return s="noop"===n?new JE:("zone.js"===n?void 0:n)||new Au(i),s}(l?.ngZone,function Zb(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!n||!n.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!n||!n.ngZoneRunCoalescing)||!1}}(l)),C=[{provide:Au,useValue:g}];return g.run(()=>{const R=sd.create({providers:C,parent:this.injector,name:s.moduleType.name}),j=s.create(R),q=j.injector.get(Ph,null);if(!q)throw new It(402,!1);return g.runOutsideAngular(()=>{const ue=g.onError.subscribe({next:Ce=>{q.handleError(Ce)}});j.onDestroy(()=>{y_(this._modules,j),ue.unsubscribe()})}),function Qb(n,i,s){try{const l=s();return hm(l)?l.catch(g=>{throw i.runOutsideAngular(()=>n.handleError(g)),g}):l}catch(l){throw i.runOutsideAngular(()=>n.handleError(l)),l}}(q,g,()=>{const ue=j.injector.get(m_);return ue.runInitializers(),ue.donePromise.then(()=>(function Ty(n){Ut(n,"Expected localeId to be defined"),"string"==typeof n&&(op=n.toLowerCase().replace(/_/g,"-"))}(j.injector.get(g_,wh)||wh),this._moduleDoBootstrap(j),j))})})}bootstrapModule(s,l=[]){const g=Xb({},l);return function nI(n,i,s){const l=new By(s);return Promise.resolve(l)}(0,0,s).then(C=>this.bootstrapModuleFactory(C,g))}_moduleDoBootstrap(s){const l=s.injector.get(__);if(s._bootstrapComponents.length>0)s._bootstrapComponents.forEach(g=>l.bootstrap(g));else{if(!s.instance.ngDoBootstrap)throw new It(-403,!1);s.instance.ngDoBootstrap(l)}this._modules.push(s)}onDestroy(s){this._destroyListeners.push(s)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new It(404,!1);this._modules.slice().forEach(l=>l.destroy()),this._destroyListeners.forEach(l=>l());const s=this._injector.get(ov,null);s&&(s.forEach(l=>l()),s.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(s){return new(s||n)(be(sd))},n.\u0275prov=sn({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();function Xb(n,i){return Array.isArray(i)?i.reduce(Xb,n):{...n,...i}}let __=(()=>{class n{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(s,l,g){this._zone=s,this._injector=l,this._exceptionHandler=g,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const C=new re.y(j=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{j.next(this._stable),j.complete()})}),R=new re.y(j=>{let q;this._zone.runOutsideAngular(()=>{q=this._zone.onStable.subscribe(()=>{Au.assertNotInAngularZone(),nv(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,j.next(!0))})})});const ue=this._zone.onUnstable.subscribe(()=>{Au.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{j.next(!1)}))});return()=>{q.unsubscribe(),ue.unsubscribe()}});this.isStable=(0,Te.T)(C,R.pipe((0,ke.B)()))}bootstrap(s,l){const g=s instanceof Ie;if(!this._injector.get(m_).done){!g&&ps(s);throw new It(405,Fd)}let R;R=g?s:this._injector.get(En).resolveComponentFactory(s),this.componentTypes.push(R.componentType);const j=function iI(n){return n.isBoundToModule}(R)?void 0:this._injector.get(cp),ue=R.create(sd.NULL,[],l||R.selector,j),Ce=ue.location.nativeElement,tt=ue.injector.get(Bb,null);return tt?.registerApplication(Ce),ue.onDestroy(()=>{this.detachView(ue.hostView),y_(this.components,ue),tt?.unregisterApplication(Ce)}),this._loadComponent(ue),ue}tick(){if(this._runningTick)throw new It(101,!1);try{this._runningTick=!0;for(let s of this._views)s.detectChanges()}catch(s){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(s))}finally{this._runningTick=!1}}attachView(s){const l=s;this._views.push(l),l.attachToAppRef(this)}detachView(s){const l=s;y_(this._views,l),l.detachFromAppRef()}_loadComponent(s){this.attachView(s.hostView),this.tick(),this.components.push(s);const l=this._injector.get($b,[]);l.push(...this._bootstrapListeners),l.forEach(g=>g(s))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(s=>s()),this._views.slice().forEach(s=>s.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(s){return this._destroyListeners.push(s),()=>y_(this._destroyListeners,s)}destroy(){if(this._destroyed)throw new It(406,!1);const s=this._injector;s.destroy&&!s.destroyed&&s.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return n.\u0275fac=function(s){return new(s||n)(be(Au),be(Iu),be(Ph))},n.\u0275prov=sn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function y_(n,i){const s=n.indexOf(i);s>-1&&n.splice(s,1)}function cI(){return!1}let uI=(()=>{class n{}return n.__NG_ELEMENT_ID__=dI,n})();function dI(n){return function hI(n,i,s){if(Ti(n)&&!s){const l=Yr(n.index,i);return new Qh(l,l)}return 47&n.type?new Qh(i[dr],i):null}(es(),pn(),16==(16&n))}class r0{constructor(){}supports(i){return ah(i)}create(i){return new yI(i)}}const _I=(n,i)=>i;class yI{constructor(i){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=i||_I}forEachItem(i){let s;for(s=this._itHead;null!==s;s=s._next)i(s)}forEachOperation(i){let s=this._itHead,l=this._removalsHead,g=0,C=null;for(;s||l;){const R=!l||s&&s.currentIndex<o0(l,g,C)?s:l,j=o0(R,g,C),q=R.currentIndex;if(R===l)g--,l=l._nextRemoved;else if(s=s._next,null==R.previousIndex)g++;else{C||(C=[]);const ue=j-g,Ce=q-g;if(ue!=Ce){for(let Rt=0;Rt<ue;Rt++){const Xt=Rt<C.length?C[Rt]:C[Rt]=0,In=Xt+Rt;Ce<=In&&In<ue&&(C[Rt]=Xt+1)}C[R.previousIndex]=Ce-ue}}j!==q&&i(R,j,q)}}forEachPreviousItem(i){let s;for(s=this._previousItHead;null!==s;s=s._nextPrevious)i(s)}forEachAddedItem(i){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)i(s)}forEachMovedItem(i){let s;for(s=this._movesHead;null!==s;s=s._nextMoved)i(s)}forEachRemovedItem(i){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)i(s)}forEachIdentityChange(i){let s;for(s=this._identityChangesHead;null!==s;s=s._nextIdentityChange)i(s)}diff(i){if(null==i&&(i=[]),!ah(i))throw new It(900,!1);return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let g,C,R,s=this._itHead,l=!1;if(Array.isArray(i)){this.length=i.length;for(let j=0;j<this.length;j++)C=i[j],R=this._trackByFn(j,C),null!==s&&Object.is(s.trackById,R)?(l&&(s=this._verifyReinsertion(s,C,R,j)),Object.is(s.item,C)||this._addIdentityChange(s,C)):(s=this._mismatch(s,C,R,j),l=!0),s=s._next}else g=0,function im(n,i){if(Array.isArray(n))for(let s=0;s<n.length;s++)i(n[s]);else{const s=n[Symbol.iterator]();let l;for(;!(l=s.next()).done;)i(l.value)}}(i,j=>{R=this._trackByFn(g,j),null!==s&&Object.is(s.trackById,R)?(l&&(s=this._verifyReinsertion(s,j,R,g)),Object.is(s.item,j)||this._addIdentityChange(s,j)):(s=this._mismatch(s,j,R,g),l=!0),s=s._next,g++}),this.length=g;return this._truncate(s),this.collection=i,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let i;for(i=this._previousItHead=this._itHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._additionsHead;null!==i;i=i._nextAdded)i.previousIndex=i.currentIndex;for(this._additionsHead=this._additionsTail=null,i=this._movesHead;null!==i;i=i._nextMoved)i.previousIndex=i.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(i,s,l,g){let C;return null===i?C=this._itTail:(C=i._prev,this._remove(i)),null!==(i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(i.item,s)||this._addIdentityChange(i,s),this._reinsertAfter(i,C,g)):null!==(i=null===this._linkedRecords?null:this._linkedRecords.get(l,g))?(Object.is(i.item,s)||this._addIdentityChange(i,s),this._moveAfter(i,C,g)):i=this._addAfter(new vI(s,l),C,g),i}_verifyReinsertion(i,s,l,g){let C=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==C?i=this._reinsertAfter(C,i._prev,g):i.currentIndex!=g&&(i.currentIndex=g,this._addToMoves(i,g)),i}_truncate(i){for(;null!==i;){const s=i._next;this._addToRemovals(this._unlink(i)),i=s}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(i,s,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(i);const g=i._prevRemoved,C=i._nextRemoved;return null===g?this._removalsHead=C:g._nextRemoved=C,null===C?this._removalsTail=g:C._prevRemoved=g,this._insertAfter(i,s,l),this._addToMoves(i,l),i}_moveAfter(i,s,l){return this._unlink(i),this._insertAfter(i,s,l),this._addToMoves(i,l),i}_addAfter(i,s,l){return this._insertAfter(i,s,l),this._additionsTail=null===this._additionsTail?this._additionsHead=i:this._additionsTail._nextAdded=i,i}_insertAfter(i,s,l){const g=null===s?this._itHead:s._next;return i._next=g,i._prev=s,null===g?this._itTail=i:g._prev=i,null===s?this._itHead=i:s._next=i,null===this._linkedRecords&&(this._linkedRecords=new s0),this._linkedRecords.put(i),i.currentIndex=l,i}_remove(i){return this._addToRemovals(this._unlink(i))}_unlink(i){null!==this._linkedRecords&&this._linkedRecords.remove(i);const s=i._prev,l=i._next;return null===s?this._itHead=l:s._next=l,null===l?this._itTail=s:l._prev=s,i}_addToMoves(i,s){return i.previousIndex===s||(this._movesTail=null===this._movesTail?this._movesHead=i:this._movesTail._nextMoved=i),i}_addToRemovals(i){return null===this._unlinkedRecords&&(this._unlinkedRecords=new s0),this._unlinkedRecords.put(i),i.currentIndex=null,i._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=i,i._prevRemoved=null):(i._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=i),i}_addIdentityChange(i,s){return i.item=s,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=i:this._identityChangesTail._nextIdentityChange=i,i}}class vI{constructor(i,s){this.item=i,this.trackById=s,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class bI{constructor(){this._head=null,this._tail=null}add(i){null===this._head?(this._head=this._tail=i,i._nextDup=null,i._prevDup=null):(this._tail._nextDup=i,i._prevDup=this._tail,i._nextDup=null,this._tail=i)}get(i,s){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===s||s<=l.currentIndex)&&Object.is(l.trackById,i))return l;return null}remove(i){const s=i._prevDup,l=i._nextDup;return null===s?this._head=l:s._nextDup=l,null===l?this._tail=s:l._prevDup=s,null===this._head}}class s0{constructor(){this.map=new Map}put(i){const s=i.trackById;let l=this.map.get(s);l||(l=new bI,this.map.set(s,l)),l.add(i)}get(i,s){const g=this.map.get(i);return g?g.get(i,s):null}remove(i){const s=i.trackById;return this.map.get(s).remove(i)&&this.map.delete(s),i}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function o0(n,i,s){const l=n.previousIndex;if(null===l)return l;let g=0;return s&&l<s.length&&(g=s[l]),l+i+g}class a0{constructor(){}supports(i){return i instanceof Map||rm(i)}create(){return new EI}}class EI{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(i){let s;for(s=this._mapHead;null!==s;s=s._next)i(s)}forEachPreviousItem(i){let s;for(s=this._previousMapHead;null!==s;s=s._nextPrevious)i(s)}forEachChangedItem(i){let s;for(s=this._changesHead;null!==s;s=s._nextChanged)i(s)}forEachAddedItem(i){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)i(s)}forEachRemovedItem(i){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)i(s)}diff(i){if(i){if(!(i instanceof Map||rm(i)))throw new It(900,!1)}else i=new Map;return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let s=this._mapHead;if(this._appendAfter=null,this._forEach(i,(l,g)=>{if(s&&s.key===g)this._maybeAddToChanges(s,l),this._appendAfter=s,s=s._next;else{const C=this._getOrCreateRecordForKey(g,l);s=this._insertBeforeOrAppend(s,C)}}),s){s._prev&&(s._prev._next=null),this._removalsHead=s;for(let l=s;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(i,s){if(i){const l=i._prev;return s._next=i,s._prev=l,i._prev=s,l&&(l._next=s),i===this._mapHead&&(this._mapHead=s),this._appendAfter=i,i}return this._appendAfter?(this._appendAfter._next=s,s._prev=this._appendAfter):this._mapHead=s,this._appendAfter=s,null}_getOrCreateRecordForKey(i,s){if(this._records.has(i)){const g=this._records.get(i);this._maybeAddToChanges(g,s);const C=g._prev,R=g._next;return C&&(C._next=R),R&&(R._prev=C),g._next=null,g._prev=null,g}const l=new II(i);return this._records.set(i,l),l.currentValue=s,this._addToAdditions(l),l}_reset(){if(this.isDirty){let i;for(this._previousMapHead=this._mapHead,i=this._previousMapHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._changesHead;null!==i;i=i._nextChanged)i.previousValue=i.currentValue;for(i=this._additionsHead;null!=i;i=i._nextAdded)i.previousValue=i.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(i,s){Object.is(s,i.currentValue)||(i.previousValue=i.currentValue,i.currentValue=s,this._addToChanges(i))}_addToAdditions(i){null===this._additionsHead?this._additionsHead=this._additionsTail=i:(this._additionsTail._nextAdded=i,this._additionsTail=i)}_addToChanges(i){null===this._changesHead?this._changesHead=this._changesTail=i:(this._changesTail._nextChanged=i,this._changesTail=i)}_forEach(i,s){i instanceof Map?i.forEach(s):Object.keys(i).forEach(l=>s(i[l],l))}}class II{constructor(i){this.key=i,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function l0(){return new hv([new r0])}let hv=(()=>{class n{constructor(s){this.factories=s}static create(s,l){if(null!=l){const g=l.factories.slice();s=s.concat(g)}return new n(s)}static extend(s){return{provide:n,useFactory:l=>n.create(s,l||l0()),deps:[[n,new Ca,new pl]]}}find(s){const l=this.factories.find(g=>g.supports(s));if(null!=l)return l;throw new It(901,!1)}}return n.\u0275prov=sn({token:n,providedIn:"root",factory:l0}),n})();function c0(){return new fv([new a0])}let fv=(()=>{class n{constructor(s){this.factories=s}static create(s,l){if(l){const g=l.factories.slice();s=s.concat(g)}return new n(s)}static extend(s){return{provide:n,useFactory:l=>n.create(s,l||c0()),deps:[[n,new Ca,new pl]]}}find(s){const l=this.factories.find(g=>g.supports(s));if(l)return l;throw new It(901,!1)}}return n.\u0275prov=sn({token:n,providedIn:"root",factory:c0}),n})();const TI=Wb(null,"core",[]);let DI=(()=>{class n{constructor(s){}}return n.\u0275fac=function(s){return new(s||n)(be(__))},n.\u0275mod=os({type:n}),n.\u0275inj=fi({}),n})();function SI(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}},4006:(wn,dt,L)=>{L.d(dt,{F:()=>st,Fj:()=>pt,JJ:()=>zn,JL:()=>Mi,NI:()=>Bt,UX:()=>si,_Y:()=>ao,a5:()=>Pi,cw:()=>qt,kI:()=>Qe,nD:()=>ho,sg:()=>nr,u:()=>Ao,u5:()=>_s,wO:()=>Ps});var f=L(4650),_=L(6895),re=L(8996),Te=L(4128),ke=L(4004);let He=(()=>{class ie{constructor(Q,De){this._renderer=Q,this._elementRef=De,this.onChange=en=>{},this.onTouched=()=>{}}setProperty(Q,De){this._renderer.setProperty(this._elementRef.nativeElement,Q,De)}registerOnTouched(Q){this.onTouched=Q}registerOnChange(Q){this.onChange=Q}setDisabledState(Q){this.setProperty("disabled",Q)}}return ie.\u0275fac=function(Q){return new(Q||ie)(f.Y36(f.Qsj),f.Y36(f.SBq))},ie.\u0275dir=f.lG2({type:ie}),ie})(),Ze=(()=>{class ie extends He{}return ie.\u0275fac=function(){let ee;return function(De){return(ee||(ee=f.n5z(ie)))(De||ie)}}(),ie.\u0275dir=f.lG2({type:ie,features:[f.qOj]}),ie})();const xe=new f.OlP("NgValueAccessor"),Me={provide:xe,useExisting:(0,f.Gpc)(()=>pt),multi:!0},yt=new f.OlP("CompositionEventMode");let pt=(()=>{class ie extends He{constructor(Q,De,en){super(Q,De),this._compositionMode=en,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Ne(){const ie=(0,_.q)()?(0,_.q)().getUserAgent():"";return/android (\d+)/.test(ie.toLowerCase())}())}writeValue(Q){this.setProperty("value",Q??"")}_handleInput(Q){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(Q)}_compositionStart(){this._composing=!0}_compositionEnd(Q){this._composing=!1,this._compositionMode&&this.onChange(Q)}}return ie.\u0275fac=function(Q){return new(Q||ie)(f.Y36(f.Qsj),f.Y36(f.SBq),f.Y36(yt,8))},ie.\u0275dir=f.lG2({type:ie,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(Q,De){1&Q&&f.NdJ("input",function(ti){return De._handleInput(ti.target.value)})("blur",function(){return De.onTouched()})("compositionstart",function(){return De._compositionStart()})("compositionend",function(ti){return De._compositionEnd(ti.target.value)})},features:[f._Bn([Me]),f.qOj]}),ie})();const Lt=!1;function an(ie){return null==ie||("string"==typeof ie||Array.isArray(ie))&&0===ie.length}function It(ie){return null!=ie&&"number"==typeof ie.length}const Mt=new f.OlP("NgValidators"),Ae=new f.OlP("NgAsyncValidators"),_t=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Qe{static min(ee){return function Ue(ie){return ee=>{if(an(ee.value)||an(ie))return null;const Q=parseFloat(ee.value);return!isNaN(Q)&&Q<ie?{min:{min:ie,actual:ee.value}}:null}}(ee)}static max(ee){return function lt(ie){return ee=>{if(an(ee.value)||an(ie))return null;const Q=parseFloat(ee.value);return!isNaN(Q)&&Q>ie?{max:{max:ie,actual:ee.value}}:null}}(ee)}static required(ee){return function kt(ie){return an(ie.value)?{required:!0}:null}(ee)}static requiredTrue(ee){return function Ye(ie){return!0===ie.value?null:{required:!0}}(ee)}static email(ee){return function z(ie){return an(ie.value)||_t.test(ie.value)?null:{email:!0}}(ee)}static minLength(ee){return ct(ee)}static maxLength(ee){return bt(ee)}static pattern(ee){return function Ft(ie){if(!ie)return gn;let ee,Q;return"string"==typeof ie?(Q="","^"!==ie.charAt(0)&&(Q+="^"),Q+=ie,"$"!==ie.charAt(ie.length-1)&&(Q+="$"),ee=new RegExp(Q)):(Q=ie.toString(),ee=ie),De=>{if(an(De.value))return null;const en=De.value;return ee.test(en)?null:{pattern:{requiredPattern:Q,actualValue:en}}}}(ee)}static nullValidator(ee){return null}static compose(ee){return Tt(ee)}static composeAsync(ee){return Et(ee)}}function ct(ie){return ee=>an(ee.value)||!It(ee.value)?null:ee.value.length<ie?{minlength:{requiredLength:ie,actualLength:ee.value.length}}:null}function bt(ie){return ee=>It(ee.value)&&ee.value.length>ie?{maxlength:{requiredLength:ie,actualLength:ee.value.length}}:null}function gn(ie){return null}function vn(ie){return null!=ie}function Pt(ie){const ee=(0,f.QGY)(ie)?(0,re.D)(ie):ie;if(Lt&&!(0,f.CqO)(ee)){let Q="Expected async validator to return Promise or Observable.";throw"object"==typeof ie&&(Q+=" Are you using a synchronous validator where an async validator is expected?"),new f.vHH(-1101,Q)}return ee}function Ht(ie){let ee={};return ie.forEach(Q=>{ee=null!=Q?{...ee,...Q}:ee}),0===Object.keys(ee).length?null:ee}function Ot(ie,ee){return ee.map(Q=>Q(ie))}function Gt(ie){return ie.map(ee=>function jt(ie){return!ie.validate}(ee)?ee:Q=>ee.validate(Q))}function Tt(ie){if(!ie)return null;const ee=ie.filter(vn);return 0==ee.length?null:function(Q){return Ht(Ot(Q,ee))}}function Ut(ie){return null!=ie?Tt(Gt(ie)):null}function Et(ie){if(!ie)return null;const ee=ie.filter(vn);return 0==ee.length?null:function(Q){const De=Ot(Q,ee).map(Pt);return(0,Te.D)(De).pipe((0,ke.U)(Ht))}}function rn(ie){return null!=ie?Et(Gt(ie)):null}function Zt(ie,ee){return null===ie?[ee]:Array.isArray(ie)?[...ie,ee]:[ie,ee]}function _n(ie){return ie._rawValidators}function sn(ie){return ie._rawAsyncValidators}function bn(ie){return ie?Array.isArray(ie)?ie:[ie]:[]}function fi(ie,ee){return Array.isArray(ie)?ie.includes(ee):ie===ee}function ui(ie,ee){const Q=bn(ee);return bn(ie).forEach(en=>{fi(Q,en)||Q.push(en)}),Q}function Bn(ie,ee){return bn(ee).filter(Q=>!fi(ie,Q))}class Qn{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(ee){this._rawValidators=ee||[],this._composedValidatorFn=Ut(this._rawValidators)}_setAsyncValidators(ee){this._rawAsyncValidators=ee||[],this._composedAsyncValidatorFn=rn(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(ee){this._onDestroyCallbacks.push(ee)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(ee=>ee()),this._onDestroyCallbacks=[]}reset(ee){this.control&&this.control.reset(ee)}hasError(ee,Q){return!!this.control&&this.control.hasError(ee,Q)}getError(ee,Q){return this.control?this.control.getError(ee,Q):null}}class oi extends Qn{get formDirective(){return null}get path(){return null}}class Pi extends Qn{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Cr{constructor(ee){this._cd=ee}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let zn=(()=>{class ie extends Cr{constructor(Q){super(Q)}}return ie.\u0275fac=function(Q){return new(Q||ie)(f.Y36(Pi,2))},ie.\u0275dir=f.lG2({type:ie,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(Q,De){2&Q&&f.ekj("ng-untouched",De.isUntouched)("ng-touched",De.isTouched)("ng-pristine",De.isPristine)("ng-dirty",De.isDirty)("ng-valid",De.isValid)("ng-invalid",De.isInvalid)("ng-pending",De.isPending)},features:[f.qOj]}),ie})(),Mi=(()=>{class ie extends Cr{constructor(Q){super(Q)}}return ie.\u0275fac=function(Q){return new(Q||ie)(f.Y36(oi,10))},ie.\u0275dir=f.lG2({type:ie,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(Q,De){2&Q&&f.ekj("ng-untouched",De.isUntouched)("ng-touched",De.isTouched)("ng-pristine",De.isPristine)("ng-dirty",De.isDirty)("ng-valid",De.isValid)("ng-invalid",De.isInvalid)("ng-pending",De.isPending)("ng-submitted",De.isSubmitted)},features:[f.qOj]}),ie})();function gr(ie,ee){return ie?`with name: '${ee}'`:`at index: ${ee}`}const $n=!1,Oi="VALID",dn="INVALID",be="PENDING",$="DISABLED";function ne(ie){return(Nt(ie)?ie.validators:ie)||null}function ye(ie,ee){return(Nt(ee)?ee.asyncValidators:ie)||null}function Nt(ie){return null!=ie&&!Array.isArray(ie)&&"object"==typeof ie}class it{constructor(ee,Q){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(ee),this._assignAsyncValidators(Q)}get validator(){return this._composedValidatorFn}set validator(ee){this._rawValidators=this._composedValidatorFn=ee}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(ee){this._rawAsyncValidators=this._composedAsyncValidatorFn=ee}get parent(){return this._parent}get valid(){return this.status===Oi}get invalid(){return this.status===dn}get pending(){return this.status==be}get disabled(){return this.status===$}get enabled(){return this.status!==$}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(ee){this._assignValidators(ee)}setAsyncValidators(ee){this._assignAsyncValidators(ee)}addValidators(ee){this.setValidators(ui(ee,this._rawValidators))}addAsyncValidators(ee){this.setAsyncValidators(ui(ee,this._rawAsyncValidators))}removeValidators(ee){this.setValidators(Bn(ee,this._rawValidators))}removeAsyncValidators(ee){this.setAsyncValidators(Bn(ee,this._rawAsyncValidators))}hasValidator(ee){return fi(this._rawValidators,ee)}hasAsyncValidator(ee){return fi(this._rawAsyncValidators,ee)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(ee={}){this.touched=!0,this._parent&&!ee.onlySelf&&this._parent.markAsTouched(ee)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(ee=>ee.markAllAsTouched())}markAsUntouched(ee={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(Q=>{Q.markAsUntouched({onlySelf:!0})}),this._parent&&!ee.onlySelf&&this._parent._updateTouched(ee)}markAsDirty(ee={}){this.pristine=!1,this._parent&&!ee.onlySelf&&this._parent.markAsDirty(ee)}markAsPristine(ee={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(Q=>{Q.markAsPristine({onlySelf:!0})}),this._parent&&!ee.onlySelf&&this._parent._updatePristine(ee)}markAsPending(ee={}){this.status=be,!1!==ee.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!ee.onlySelf&&this._parent.markAsPending(ee)}disable(ee={}){const Q=this._parentMarkedDirty(ee.onlySelf);this.status=$,this.errors=null,this._forEachChild(De=>{De.disable({...ee,onlySelf:!0})}),this._updateValue(),!1!==ee.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...ee,skipPristineCheck:Q}),this._onDisabledChange.forEach(De=>De(!0))}enable(ee={}){const Q=this._parentMarkedDirty(ee.onlySelf);this.status=Oi,this._forEachChild(De=>{De.enable({...ee,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:ee.emitEvent}),this._updateAncestors({...ee,skipPristineCheck:Q}),this._onDisabledChange.forEach(De=>De(!1))}_updateAncestors(ee){this._parent&&!ee.onlySelf&&(this._parent.updateValueAndValidity(ee),ee.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(ee){this._parent=ee}getRawValue(){return this.value}updateValueAndValidity(ee={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Oi||this.status===be)&&this._runAsyncValidator(ee.emitEvent)),!1!==ee.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!ee.onlySelf&&this._parent.updateValueAndValidity(ee)}_updateTreeValidity(ee={emitEvent:!0}){this._forEachChild(Q=>Q._updateTreeValidity(ee)),this.updateValueAndValidity({onlySelf:!0,emitEvent:ee.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?$:Oi}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(ee){if(this.asyncValidator){this.status=be,this._hasOwnPendingAsyncValidator=!0;const Q=Pt(this.asyncValidator(this));this._asyncValidationSubscription=Q.subscribe(De=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(De,{emitEvent:ee})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(ee,Q={}){this.errors=ee,this._updateControlsErrors(!1!==Q.emitEvent)}get(ee){let Q=ee;return null==Q||(Array.isArray(Q)||(Q=Q.split(".")),0===Q.length)?null:Q.reduce((De,en)=>De&&De._find(en),this)}getError(ee,Q){const De=Q?this.get(Q):this;return De&&De.errors?De.errors[ee]:null}hasError(ee,Q){return!!this.getError(ee,Q)}get root(){let ee=this;for(;ee._parent;)ee=ee._parent;return ee}_updateControlsErrors(ee){this.status=this._calculateStatus(),ee&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(ee)}_initObservables(){this.valueChanges=new f.vpe,this.statusChanges=new f.vpe}_calculateStatus(){return this._allControlsDisabled()?$:this.errors?dn:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(be)?be:this._anyControlsHaveStatus(dn)?dn:Oi}_anyControlsHaveStatus(ee){return this._anyControls(Q=>Q.status===ee)}_anyControlsDirty(){return this._anyControls(ee=>ee.dirty)}_anyControlsTouched(){return this._anyControls(ee=>ee.touched)}_updatePristine(ee={}){this.pristine=!this._anyControlsDirty(),this._parent&&!ee.onlySelf&&this._parent._updatePristine(ee)}_updateTouched(ee={}){this.touched=this._anyControlsTouched(),this._parent&&!ee.onlySelf&&this._parent._updateTouched(ee)}_registerOnCollectionChange(ee){this._onCollectionChange=ee}_setUpdateStrategy(ee){Nt(ee)&&null!=ee.updateOn&&(this._updateOn=ee.updateOn)}_parentMarkedDirty(ee){return!ee&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(ee){return null}_assignValidators(ee){this._rawValidators=Array.isArray(ee)?ee.slice():ee,this._composedValidatorFn=function de(ie){return Array.isArray(ie)?Ut(ie):ie||null}(this._rawValidators)}_assignAsyncValidators(ee){this._rawAsyncValidators=Array.isArray(ee)?ee.slice():ee,this._composedAsyncValidatorFn=function rt(ie){return Array.isArray(ie)?rn(ie):ie||null}(this._rawAsyncValidators)}}class qt extends it{constructor(ee,Q,De){super(ne(Q),ye(De,Q)),this.controls=ee,this._initObservables(),this._setUpdateStrategy(Q),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(ee,Q){return this.controls[ee]?this.controls[ee]:(this.controls[ee]=Q,Q.setParent(this),Q._registerOnCollectionChange(this._onCollectionChange),Q)}addControl(ee,Q,De={}){this.registerControl(ee,Q),this.updateValueAndValidity({emitEvent:De.emitEvent}),this._onCollectionChange()}removeControl(ee,Q={}){this.controls[ee]&&this.controls[ee]._registerOnCollectionChange(()=>{}),delete this.controls[ee],this.updateValueAndValidity({emitEvent:Q.emitEvent}),this._onCollectionChange()}setControl(ee,Q,De={}){this.controls[ee]&&this.controls[ee]._registerOnCollectionChange(()=>{}),delete this.controls[ee],Q&&this.registerControl(ee,Q),this.updateValueAndValidity({emitEvent:De.emitEvent}),this._onCollectionChange()}contains(ee){return this.controls.hasOwnProperty(ee)&&this.controls[ee].enabled}setValue(ee,Q={}){(function Be(ie,ee,Q){ie._forEachChild((De,en)=>{if(void 0===Q[en])throw new f.vHH(1002,$n?function $r(ie,ee){return`Must supply a value for form control ${gr(ie,ee)}`}(ee,en):"")})})(this,!0,ee),Object.keys(ee).forEach(De=>{(function Le(ie,ee,Q){const De=ie.controls;if(!(ee?Object.keys(De):De).length)throw new f.vHH(1e3,$n?function er(ie){return`\n    There are no form controls registered with this ${ie?"group":"array"} yet. If you're using ngModel,\n    you may want to check next tick (e.g. use setTimeout).\n  `}(ee):"");if(!De[Q])throw new f.vHH(1001,$n?function Fi(ie,ee){return`Cannot find form control ${gr(ie,ee)}`}(ee,Q):"")})(this,!0,De),this.controls[De].setValue(ee[De],{onlySelf:!0,emitEvent:Q.emitEvent})}),this.updateValueAndValidity(Q)}patchValue(ee,Q={}){null!=ee&&(Object.keys(ee).forEach(De=>{const en=this.controls[De];en&&en.patchValue(ee[De],{onlySelf:!0,emitEvent:Q.emitEvent})}),this.updateValueAndValidity(Q))}reset(ee={},Q={}){this._forEachChild((De,en)=>{De.reset(ee[en],{onlySelf:!0,emitEvent:Q.emitEvent})}),this._updatePristine(Q),this._updateTouched(Q),this.updateValueAndValidity(Q)}getRawValue(){return this._reduceChildren({},(ee,Q,De)=>(ee[De]=Q.getRawValue(),ee))}_syncPendingControls(){let ee=this._reduceChildren(!1,(Q,De)=>!!De._syncPendingControls()||Q);return ee&&this.updateValueAndValidity({onlySelf:!0}),ee}_forEachChild(ee){Object.keys(this.controls).forEach(Q=>{const De=this.controls[Q];De&&ee(De,Q)})}_setUpControls(){this._forEachChild(ee=>{ee.setParent(this),ee._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(ee){for(const[Q,De]of Object.entries(this.controls))if(this.contains(Q)&&ee(De))return!0;return!1}_reduceValue(){return this._reduceChildren({},(Q,De,en)=>((De.enabled||this.disabled)&&(Q[en]=De.value),Q))}_reduceChildren(ee,Q){let De=ee;return this._forEachChild((en,ti)=>{De=Q(De,en,ti)}),De}_allControlsDisabled(){for(const ee of Object.keys(this.controls))if(this.controls[ee].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(ee){return this.controls.hasOwnProperty(ee)?this.controls[ee]:null}}const Fe=new f.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>ht}),ht="always";function un(ie,ee,Q=ht){vs(ie,ee),ee.valueAccessor.writeValue(ie.value),(ie.disabled||"always"===Q)&&ee.valueAccessor.setDisabledState?.(ie.disabled),function Gr(ie,ee){ee.valueAccessor.registerOnChange(Q=>{ie._pendingValue=Q,ie._pendingChange=!0,ie._pendingDirty=!0,"change"===ie.updateOn&&Tr(ie,ee)})}(ie,ee),function ji(ie,ee){const Q=(De,en)=>{ee.valueAccessor.writeValue(De),en&&ee.viewToModelUpdate(De)};ie.registerOnChange(Q),ee._registerOnDestroy(()=>{ie._unregisterOnChange(Q)})}(ie,ee),function os(ie,ee){ee.valueAccessor.registerOnTouched(()=>{ie._pendingTouched=!0,"blur"===ie.updateOn&&ie._pendingChange&&Tr(ie,ee),"submit"!==ie.updateOn&&ie.markAsTouched()})}(ie,ee),function yr(ie,ee){if(ee.valueAccessor.setDisabledState){const Q=De=>{ee.valueAccessor.setDisabledState(De)};ie.registerOnDisabledChange(Q),ee._registerOnDestroy(()=>{ie._unregisterOnDisabledChange(Q)})}}(ie,ee)}function Kn(ie,ee,Q=!0){const De=()=>{};ee.valueAccessor&&(ee.valueAccessor.registerOnChange(De),ee.valueAccessor.registerOnTouched(De)),is(ie,ee),ie&&(ee._invokeOnDestroyCallbacks(),ie._registerOnCollectionChange(()=>{}))}function vi(ie,ee){ie.forEach(Q=>{Q.registerOnValidatorChange&&Q.registerOnValidatorChange(ee)})}function vs(ie,ee){const Q=_n(ie);null!==ee.validator?ie.setValidators(Zt(Q,ee.validator)):"function"==typeof Q&&ie.setValidators([Q]);const De=sn(ie);null!==ee.asyncValidator?ie.setAsyncValidators(Zt(De,ee.asyncValidator)):"function"==typeof De&&ie.setAsyncValidators([De]);const en=()=>ie.updateValueAndValidity();vi(ee._rawValidators,en),vi(ee._rawAsyncValidators,en)}function is(ie,ee){let Q=!1;if(null!==ie){if(null!==ee.validator){const en=_n(ie);if(Array.isArray(en)&&en.length>0){const ti=en.filter(Br=>Br!==ee.validator);ti.length!==en.length&&(Q=!0,ie.setValidators(ti))}}if(null!==ee.asyncValidator){const en=sn(ie);if(Array.isArray(en)&&en.length>0){const ti=en.filter(Br=>Br!==ee.asyncValidator);ti.length!==en.length&&(Q=!0,ie.setAsyncValidators(ti))}}}const De=()=>{};return vi(ee._rawValidators,De),vi(ee._rawAsyncValidators,De),Q}function Tr(ie,ee){ie._pendingDirty&&ie.markAsDirty(),ie.setValue(ie._pendingValue,{emitModelToViewChange:!1}),ee.viewToModelUpdate(ie._pendingValue),ie._pendingChange=!1}function Cs(ie,ee){vs(ie,ee)}function et(ie,ee){ie._syncPendingControls(),ee.forEach(Q=>{const De=Q.control;"submit"===De.updateOn&&De._pendingChange&&(Q.viewToModelUpdate(De._pendingValue),De._pendingChange=!1)})}const Kt={provide:oi,useExisting:(0,f.Gpc)(()=>st)},Dn=(()=>Promise.resolve())();let st=(()=>{class ie extends oi{constructor(Q,De,en){super(),this.callSetDisabledState=en,this.submitted=!1,this._directives=new Set,this.ngSubmit=new f.vpe,this.form=new qt({},Ut(Q),rn(De))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(Q){Dn.then(()=>{const De=this._findContainer(Q.path);Q.control=De.registerControl(Q.name,Q.control),un(Q.control,Q,this.callSetDisabledState),Q.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(Q)})}getControl(Q){return this.form.get(Q.path)}removeControl(Q){Dn.then(()=>{const De=this._findContainer(Q.path);De&&De.removeControl(Q.name),this._directives.delete(Q)})}addFormGroup(Q){Dn.then(()=>{const De=this._findContainer(Q.path),en=new qt({});Cs(en,Q),De.registerControl(Q.name,en),en.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(Q){Dn.then(()=>{const De=this._findContainer(Q.path);De&&De.removeControl(Q.name)})}getFormGroup(Q){return this.form.get(Q.path)}updateModel(Q,De){Dn.then(()=>{this.form.get(Q.path).setValue(De)})}setValue(Q){this.control.setValue(Q)}onSubmit(Q){return this.submitted=!0,et(this.form,this._directives),this.ngSubmit.emit(Q),"dialog"===Q?.target?.method}onReset(){this.resetForm()}resetForm(Q){this.form.reset(Q),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(Q){return Q.pop(),Q.length?this.form.get(Q):this.form}}return ie.\u0275fac=function(Q){return new(Q||ie)(f.Y36(Mt,10),f.Y36(Ae,10),f.Y36(Fe,8))},ie.\u0275dir=f.lG2({type:ie,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(Q,De){1&Q&&f.NdJ("submit",function(ti){return De.onSubmit(ti)})("reset",function(){return De.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[f._Bn([Kt]),f.qOj]}),ie})();function nt(ie,ee){const Q=ie.indexOf(ee);Q>-1&&ie.splice(Q,1)}function wt(ie){return"object"==typeof ie&&null!==ie&&2===Object.keys(ie).length&&"value"in ie&&"disabled"in ie}const Bt=class extends it{constructor(ee=null,Q,De){super(ne(Q),ye(De,Q)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(ee),this._setUpdateStrategy(Q),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Nt(Q)&&(Q.nonNullable||Q.initialValueIsDefault)&&(this.defaultValue=wt(ee)?ee.value:ee)}setValue(ee,Q={}){this.value=this._pendingValue=ee,this._onChange.length&&!1!==Q.emitModelToViewChange&&this._onChange.forEach(De=>De(this.value,!1!==Q.emitViewToModelChange)),this.updateValueAndValidity(Q)}patchValue(ee,Q={}){this.setValue(ee,Q)}reset(ee=this.defaultValue,Q={}){this._applyFormState(ee),this.markAsPristine(Q),this.markAsUntouched(Q),this.setValue(this.value,Q),this._pendingChange=!1}_updateValue(){}_anyControls(ee){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(ee){this._onChange.push(ee)}_unregisterOnChange(ee){nt(this._onChange,ee)}registerOnDisabledChange(ee){this._onDisabledChange.push(ee)}_unregisterOnDisabledChange(ee){nt(this._onDisabledChange,ee)}_forEachChild(ee){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(ee){wt(ee)?(this.value=this._pendingValue=ee.value,ee.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=ee}};let ao=(()=>{class ie{}return ie.\u0275fac=function(Q){return new(Q||ie)},ie.\u0275dir=f.lG2({type:ie,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),ie})(),_i=(()=>{class ie{}return ie.\u0275fac=function(Q){return new(Q||ie)},ie.\u0275mod=f.oAB({type:ie}),ie.\u0275inj=f.cJS({}),ie})();const Li=new f.OlP("NgModelWithFormControlWarning"),Ti={provide:oi,useExisting:(0,f.Gpc)(()=>nr)};let nr=(()=>{class ie extends oi{constructor(Q,De,en){super(),this.callSetDisabledState=en,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new f.vpe,this._setValidators(Q),this._setAsyncValidators(De)}ngOnChanges(Q){this._checkFormPresent(),Q.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(is(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(Q){const De=this.form.get(Q.path);return un(De,Q,this.callSetDisabledState),De.updateValueAndValidity({emitEvent:!1}),this.directives.push(Q),De}getControl(Q){return this.form.get(Q.path)}removeControl(Q){Kn(Q.control||null,Q,!1),function Ge(ie,ee){const Q=ie.indexOf(ee);Q>-1&&ie.splice(Q,1)}(this.directives,Q)}addFormGroup(Q){this._setUpFormContainer(Q)}removeFormGroup(Q){this._cleanUpFormContainer(Q)}getFormGroup(Q){return this.form.get(Q.path)}addFormArray(Q){this._setUpFormContainer(Q)}removeFormArray(Q){this._cleanUpFormContainer(Q)}getFormArray(Q){return this.form.get(Q.path)}updateModel(Q,De){this.form.get(Q.path).setValue(De)}onSubmit(Q){return this.submitted=!0,et(this.form,this.directives),this.ngSubmit.emit(Q),"dialog"===Q?.target?.method}onReset(){this.resetForm()}resetForm(Q){this.form.reset(Q),this.submitted=!1}_updateDomValue(){this.directives.forEach(Q=>{const De=Q.control,en=this.form.get(Q.path);De!==en&&(Kn(De||null,Q),(ie=>ie instanceof Bt)(en)&&(un(en,Q,this.callSetDisabledState),Q.control=en))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(Q){const De=this.form.get(Q.path);Cs(De,Q),De.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(Q){if(this.form){const De=this.form.get(Q.path);De&&function rs(ie,ee){return is(ie,ee)}(De,Q)&&De.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){vs(this.form,this),this._oldForm&&is(this._oldForm,this)}_checkFormPresent(){}}return ie.\u0275fac=function(Q){return new(Q||ie)(f.Y36(Mt,10),f.Y36(Ae,10),f.Y36(Fe,8))},ie.\u0275dir=f.lG2({type:ie,selectors:[["","formGroup",""]],hostBindings:function(Q,De){1&Q&&f.NdJ("submit",function(ti){return De.onSubmit(ti)})("reset",function(){return De.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[f._Bn([Ti]),f.qOj,f.TTD]}),ie})();const Ws={provide:Pi,useExisting:(0,f.Gpc)(()=>Ao)};let Ao=(()=>{class ie extends Pi{set isDisabled(Q){}constructor(Q,De,en,ti,Br){super(),this._ngModelWarningConfig=Br,this._added=!1,this.update=new f.vpe,this._ngModelWarningSent=!1,this._parent=Q,this._setValidators(De),this._setAsyncValidators(en),this.valueAccessor=function Pe(ie,ee){if(!ee)return null;let Q,De,en;return Array.isArray(ee),ee.forEach(ti=>{ti.constructor===pt?Q=ti:function Vt(ie){return Object.getPrototypeOf(ie.constructor)===Ze}(ti)?De=ti:en=ti}),en||De||Q||null}(0,ti)}ngOnChanges(Q){this._added||this._setUpControl(),function wr(ie,ee){if(!ie.hasOwnProperty("model"))return!1;const Q=ie.model;return!!Q.isFirstChange()||!Object.is(ee,Q.currentValue)}(Q,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(Q){this.viewModel=Q,this.update.emit(Q)}get path(){return function Yt(ie,ee){return[...ee.path,ie]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return ie._ngModelWarningSentOnce=!1,ie.\u0275fac=function(Q){return new(Q||ie)(f.Y36(oi,13),f.Y36(Mt,10),f.Y36(Ae,10),f.Y36(xe,10),f.Y36(Li,8))},ie.\u0275dir=f.lG2({type:ie,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[f._Bn([Ws]),f.qOj,f.TTD]}),ie})();function Rs(ie){return"number"==typeof ie?ie:parseInt(ie,10)}let Js=(()=>{class ie{constructor(){this._validator=gn}ngOnChanges(Q){if(this.inputName in Q){const De=this.normalizeInput(Q[this.inputName].currentValue);this._enabled=this.enabled(De),this._validator=this._enabled?this.createValidator(De):gn,this._onChange&&this._onChange()}}validate(Q){return this._validator(Q)}registerOnValidatorChange(Q){this._onChange=Q}enabled(Q){return null!=Q}}return ie.\u0275fac=function(Q){return new(Q||ie)},ie.\u0275dir=f.lG2({type:ie,features:[f.TTD]}),ie})();const uo={provide:Mt,useExisting:(0,f.Gpc)(()=>Ps),multi:!0};let Ps=(()=>{class ie extends Js{constructor(){super(...arguments),this.inputName="minlength",this.normalizeInput=Q=>Rs(Q),this.createValidator=Q=>ct(Q)}}return ie.\u0275fac=function(){let ee;return function(De){return(ee||(ee=f.n5z(ie)))(De||ie)}}(),ie.\u0275dir=f.lG2({type:ie,selectors:[["","minlength","","formControlName",""],["","minlength","","formControl",""],["","minlength","","ngModel",""]],hostVars:1,hostBindings:function(Q,De){2&Q&&f.uIk("minlength",De._enabled?De.minlength:null)},inputs:{minlength:"minlength"},features:[f._Bn([uo]),f.qOj]}),ie})();const Xi={provide:Mt,useExisting:(0,f.Gpc)(()=>ho),multi:!0};let ho=(()=>{class ie extends Js{constructor(){super(...arguments),this.inputName="maxlength",this.normalizeInput=Q=>Rs(Q),this.createValidator=Q=>bt(Q)}}return ie.\u0275fac=function(){let ee;return function(De){return(ee||(ee=f.n5z(ie)))(De||ie)}}(),ie.\u0275dir=f.lG2({type:ie,selectors:[["","maxlength","","formControlName",""],["","maxlength","","formControl",""],["","maxlength","","ngModel",""]],hostVars:1,hostBindings:function(Q,De){2&Q&&f.uIk("maxlength",De._enabled?De.maxlength:null)},inputs:{maxlength:"maxlength"},features:[f._Bn([Xi]),f.qOj]}),ie})(),Bo=(()=>{class ie{}return ie.\u0275fac=function(Q){return new(Q||ie)},ie.\u0275mod=f.oAB({type:ie}),ie.\u0275inj=f.cJS({imports:[_i]}),ie})(),_s=(()=>{class ie{static withConfig(Q){return{ngModule:ie,providers:[{provide:Fe,useValue:Q.callSetDisabledState??ht}]}}}return ie.\u0275fac=function(Q){return new(Q||ie)},ie.\u0275mod=f.oAB({type:ie}),ie.\u0275inj=f.cJS({imports:[Bo]}),ie})(),si=(()=>{class ie{static withConfig(Q){return{ngModule:ie,providers:[{provide:Li,useValue:Q.warnOnNgModelWithFormControl??"always"},{provide:Fe,useValue:Q.callSetDisabledState??ht}]}}}return ie.\u0275fac=function(Q){return new(Q||ie)},ie.\u0275mod=f.oAB({type:ie}),ie.\u0275inj=f.cJS({imports:[Bo]}),ie})()},9101:(wn,dt,L)=>{L.d(dt,{RK:()=>Ot,lW:()=>kt,ot:()=>Gt});var f=L(3353),_=L(4650),re=L(2687),Te=L(3238);const ke=["mat-button",""],He=[[["",8,"material-icons",3,"iconPositionEnd",""],["mat-icon",3,"iconPositionEnd",""],["","matButtonIcon","",3,"iconPositionEnd",""]],"*",[["","iconPositionEnd","",8,"material-icons"],["mat-icon","iconPositionEnd",""],["","matButtonIcon","","iconPositionEnd",""]]],Ze=[".material-icons:not([iconPositionEnd]), mat-icon:not([iconPositionEnd]), [matButtonIcon]:not([iconPositionEnd])","*",".material-icons[iconPositionEnd], mat-icon[iconPositionEnd], [matButtonIcon][iconPositionEnd]"],yt=["mat-icon-button",""],pt=["*"],Mt=[{selector:"mat-button",mdcClasses:["mdc-button","mat-mdc-button"]},{selector:"mat-flat-button",mdcClasses:["mdc-button","mdc-button--unelevated","mat-mdc-unelevated-button"]},{selector:"mat-raised-button",mdcClasses:["mdc-button","mdc-button--raised","mat-mdc-raised-button"]},{selector:"mat-stroked-button",mdcClasses:["mdc-button","mdc-button--outlined","mat-mdc-outlined-button"]},{selector:"mat-fab",mdcClasses:["mdc-fab","mat-mdc-fab"]},{selector:"mat-mini-fab",mdcClasses:["mdc-fab","mdc-fab--mini","mat-mdc-mini-fab"]},{selector:"mat-icon-button",mdcClasses:["mdc-icon-button","mat-mdc-icon-button"]}],Ae=(0,Te.pj)((0,Te.Id)((0,Te.Kr)(class{constructor(Tt){this._elementRef=Tt}})));let _t=(()=>{class Tt extends Ae{constructor(Et,rn,Zt,_n){super(Et),this._platform=rn,this._ngZone=Zt,this._animationMode=_n,this._focusMonitor=(0,_.f3M)(re.tE),this._isFab=!1;const sn=Et.nativeElement.classList;for(const bn of Mt)this._hasHostAttributes(bn.selector)&&bn.mdcClasses.forEach(fi=>{sn.add(fi)})}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(Et="program",rn){Et?this._focusMonitor.focusVia(this._elementRef.nativeElement,Et,rn):this._elementRef.nativeElement.focus(rn)}_hasHostAttributes(...Et){return Et.some(rn=>this._elementRef.nativeElement.hasAttribute(rn))}_isRippleDisabled(){return this.disableRipple||this.disabled}}return Tt.\u0275fac=function(Et){_.$Z()},Tt.\u0275dir=_.lG2({type:Tt,viewQuery:function(Et,rn){if(1&Et&&_.Gf(Te.wG,5),2&Et){let Zt;_.iGM(Zt=_.CRH())&&(rn.ripple=Zt.first)}},features:[_.qOj]}),Tt})(),kt=(()=>{class Tt extends _t{constructor(Et,rn,Zt,_n){super(Et,rn,Zt,_n)}}return Tt.\u0275fac=function(Et){return new(Et||Tt)(_.Y36(_.SBq),_.Y36(f.t4),_.Y36(_.R0b),_.Y36(_.QbO,8))},Tt.\u0275cmp=_.Xpm({type:Tt,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-flat-button",""],["button","mat-stroked-button",""]],hostVars:7,hostBindings:function(Et,rn){2&Et&&(_.uIk("disabled",rn.disabled||null),_.ekj("_mat-animation-noopable","NoopAnimations"===rn._animationMode)("mat-unthemed",!rn.color)("mat-mdc-button-base",!0))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[_.qOj],attrs:ke,ngContentSelectors:Ze,decls:8,vars:6,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-mdc-focus-indicator"],["matRipple","",1,"mat-mdc-button-ripple",3,"matRippleDisabled","matRippleTrigger"],[1,"mat-mdc-button-touch-target"]],template:function(Et,rn){1&Et&&(_.F$t(He),_._UZ(0,"span",0),_.Hsn(1),_.TgZ(2,"span",1),_.Hsn(3,1),_.qZA(),_.Hsn(4,2),_._UZ(5,"span",2)(6,"span",3)(7,"span",4)),2&Et&&(_.ekj("mdc-button__ripple",!rn._isFab)("mdc-fab__ripple",rn._isFab),_.xp6(6),_.Q6J("matRippleDisabled",rn._isRippleDisabled())("matRippleTrigger",rn._elementRef.nativeElement))},dependencies:[Te.wG],styles:['.mdc-touch-target-wrapper{display:inline}.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button{position:relative;display:inline-flex;align-items:center;justify-content:center;box-sizing:border-box;min-width:64px;border:none;outline:none;line-height:inherit;user-select:none;-webkit-appearance:none;overflow:visible;vertical-align:middle;background:rgba(0,0,0,0)}.mdc-button .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}.mdc-button::-moz-focus-inner{padding:0;border:0}.mdc-button:active{outline:none}.mdc-button:hover{cursor:pointer}.mdc-button:disabled{cursor:default;pointer-events:none}.mdc-button[hidden]{display:none}.mdc-button .mdc-button__icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top}[dir=rtl] .mdc-button .mdc-button__icon,.mdc-button .mdc-button__icon[dir=rtl]{margin-left:8px;margin-right:0}.mdc-button .mdc-button__progress-indicator{font-size:0;position:absolute;transform:translate(-50%, -50%);top:50%;left:50%;line-height:initial}.mdc-button .mdc-button__label{position:relative}.mdc-button .mdc-button__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(\n      100% + 4px\n    );width:calc(\n      100% + 4px\n    );display:none}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring{border-color:CanvasText}}.mdc-button .mdc-button__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring::after{border-color:CanvasText}}@media screen and (forced-colors: active){.mdc-button.mdc-ripple-upgraded--background-focused .mdc-button__focus-ring,.mdc-button:not(.mdc-ripple-upgraded):focus .mdc-button__focus-ring{display:block}}.mdc-button .mdc-button__touch{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mdc-button__label+.mdc-button__icon{margin-left:8px;margin-right:0}[dir=rtl] .mdc-button__label+.mdc-button__icon,.mdc-button__label+.mdc-button__icon[dir=rtl]{margin-left:0;margin-right:8px}svg.mdc-button__icon{fill:currentColor}.mdc-button--touch{margin-top:6px;margin-bottom:6px}.mdc-button{padding:0 8px 0 8px}.mdc-button--unelevated{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--unelevated.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--unelevated.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--raised{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--raised.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--raised.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--outlined{border-style:solid;transition:border 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button--outlined .mdc-button__ripple{border-style:solid;border-color:rgba(0,0,0,0)}.mat-mdc-button{height:var(--mdc-text-button-container-height, 36px);border-radius:var(--mdc-text-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-button:not(:disabled){color:var(--mdc-text-button-label-text-color, inherit)}.mat-mdc-button:disabled{color:var(--mdc-text-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-button .mdc-button__ripple{border-radius:var(--mdc-text-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-unelevated-button{height:var(--mdc-filled-button-container-height, 36px);border-radius:var(--mdc-filled-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-unelevated-button:not(:disabled){background-color:var(--mdc-filled-button-container-color, transparent)}.mat-mdc-unelevated-button:disabled{background-color:var(--mdc-filled-button-disabled-container-color, rgba(0, 0, 0, 0.12))}.mat-mdc-unelevated-button:not(:disabled){color:var(--mdc-filled-button-label-text-color, inherit)}.mat-mdc-unelevated-button:disabled{color:var(--mdc-filled-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-unelevated-button .mdc-button__ripple{border-radius:var(--mdc-filled-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-raised-button{height:var(--mdc-protected-button-container-height, 36px);border-radius:var(--mdc-protected-button-container-shape, var(--mdc-shape-small, 4px));box-shadow:var(--mdc-protected-button-container-elevation, 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled){background-color:var(--mdc-protected-button-container-color, transparent)}.mat-mdc-raised-button:disabled{background-color:var(--mdc-protected-button-disabled-container-color, rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled){color:var(--mdc-protected-button-label-text-color, inherit)}.mat-mdc-raised-button:disabled{color:var(--mdc-protected-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-raised-button .mdc-button__ripple{border-radius:var(--mdc-protected-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-raised-button.mdc-ripple-upgraded--background-focused,.mat-mdc-raised-button:not(.mdc-ripple-upgraded):focus{box-shadow:var(--mdc-protected-button-focus-container-elevation, 0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:hover{box-shadow:var(--mdc-protected-button-hover-container-elevation, 0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled):active{box-shadow:var(--mdc-protected-button-pressed-container-elevation, 0px 5px 5px -3px rgba(0, 0, 0, 0.2), 0px 8px 10px 1px rgba(0, 0, 0, 0.14), 0px 3px 14px 2px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:disabled{box-shadow:var(--mdc-protected-button-disabled-container-elevation, 0px 0px 0px 0px rgba(0, 0, 0, 0.2), 0px 0px 0px 0px rgba(0, 0, 0, 0.14), 0px 0px 0px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button{height:var(--mdc-outlined-button-container-height, 36px);border-radius:var(--mdc-outlined-button-container-shape, var(--mdc-shape-small, 4px));padding:0 15px 0 15px;border-width:var(--mdc-outlined-button-outline-width, 1px)}.mat-mdc-outlined-button:not(:disabled){color:var(--mdc-outlined-button-label-text-color, inherit)}.mat-mdc-outlined-button:disabled{color:var(--mdc-outlined-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-outlined-button .mdc-button__ripple{border-radius:var(--mdc-outlined-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-outlined-button:not(:disabled){border-color:var(--mdc-outlined-button-outline-color, rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button:disabled{border-color:var(--mdc-outlined-button-disabled-outline-color, rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button.mdc-button--icon-trailing{padding:0 11px 0 15px}.mat-mdc-outlined-button.mdc-button--icon-leading{padding:0 15px 0 11px}.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:var(--mdc-outlined-button-outline-width, 1px)}.mat-mdc-outlined-button .mdc-button__touch{left:calc(-1 * var(--mdc-outlined-button-outline-width, 1px));width:calc(100% + 2 * var(--mdc-outlined-button-outline-width, 1px))}.mat-mdc-button,.mat-mdc-unelevated-button,.mat-mdc-raised-button,.mat-mdc-outlined-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0;background-color:var(--mat-mdc-button-persistent-ripple-color)}.mat-mdc-button .mat-ripple-element,.mat-mdc-unelevated-button .mat-ripple-element,.mat-mdc-raised-button .mat-ripple-element,.mat-mdc-outlined-button .mat-ripple-element{background-color:var(--mat-mdc-button-ripple-color)}.mat-mdc-button .mdc-button__label,.mat-mdc-unelevated-button .mdc-button__label,.mat-mdc-raised-button .mdc-button__label,.mat-mdc-outlined-button .mdc-button__label{z-index:1}.mat-mdc-button .mat-mdc-focus-indicator,.mat-mdc-unelevated-button .mat-mdc-focus-indicator,.mat-mdc-raised-button .mat-mdc-focus-indicator,.mat-mdc-outlined-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-unelevated-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-raised-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-outlined-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-button[disabled],.mat-mdc-unelevated-button[disabled],.mat-mdc-raised-button[disabled],.mat-mdc-outlined-button[disabled]{cursor:default;pointer-events:none}.mat-mdc-button .mat-mdc-button-touch-target,.mat-mdc-unelevated-button .mat-mdc-button-touch-target,.mat-mdc-raised-button .mat-mdc-button-touch-target,.mat-mdc-outlined-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mat-mdc-button._mat-animation-noopable,.mat-mdc-unelevated-button._mat-animation-noopable,.mat-mdc-raised-button._mat-animation-noopable,.mat-mdc-outlined-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-button>.mat-icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem}[dir=rtl] .mat-mdc-button>.mat-icon,.mat-mdc-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:0}.mat-mdc-button .mdc-button__label+.mat-icon{margin-left:8px;margin-right:0}[dir=rtl] .mat-mdc-button .mdc-button__label+.mat-icon,.mat-mdc-button .mdc-button__label+.mat-icon[dir=rtl]{margin-left:0;margin-right:8px}.mat-mdc-unelevated-button>.mat-icon,.mat-mdc-raised-button>.mat-icon,.mat-mdc-outlined-button>.mat-icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem;margin-left:-4px;margin-right:8px}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon,[dir=rtl] .mat-mdc-raised-button>.mat-icon,[dir=rtl] .mat-mdc-outlined-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon[dir=rtl],.mat-mdc-raised-button>.mat-icon[dir=rtl],.mat-mdc-outlined-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:0}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon,[dir=rtl] .mat-mdc-raised-button>.mat-icon,[dir=rtl] .mat-mdc-outlined-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon[dir=rtl],.mat-mdc-raised-button>.mat-icon[dir=rtl],.mat-mdc-outlined-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:-4px}.mat-mdc-unelevated-button .mdc-button__label+.mat-icon,.mat-mdc-raised-button .mdc-button__label+.mat-icon,.mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-left:8px;margin-right:-4px}[dir=rtl] .mat-mdc-unelevated-button .mdc-button__label+.mat-icon,[dir=rtl] .mat-mdc-raised-button .mdc-button__label+.mat-icon,[dir=rtl] .mat-mdc-outlined-button .mdc-button__label+.mat-icon,.mat-mdc-unelevated-button .mdc-button__label+.mat-icon[dir=rtl],.mat-mdc-raised-button .mdc-button__label+.mat-icon[dir=rtl],.mat-mdc-outlined-button .mdc-button__label+.mat-icon[dir=rtl]{margin-left:-4px;margin-right:8px}.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:-1px}.mat-mdc-unelevated-button .mat-mdc-focus-indicator::before,.mat-mdc-raised-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 2px) * -1)}.mat-mdc-outlined-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 3px) * -1)}',".cdk-high-contrast-active .mat-mdc-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-unelevated-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-raised-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-outlined-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-icon-button{outline:solid 1px}"],encapsulation:2,changeDetection:0}),Tt})(),Ot=(()=>{class Tt extends _t{constructor(Et,rn,Zt,_n){super(Et,rn,Zt,_n)}}return Tt.\u0275fac=function(Et){return new(Et||Tt)(_.Y36(_.SBq),_.Y36(f.t4),_.Y36(_.R0b),_.Y36(_.QbO,8))},Tt.\u0275cmp=_.Xpm({type:Tt,selectors:[["button","mat-icon-button",""]],hostVars:7,hostBindings:function(Et,rn){2&Et&&(_.uIk("disabled",rn.disabled||null),_.ekj("_mat-animation-noopable","NoopAnimations"===rn._animationMode)("mat-unthemed",!rn.color)("mat-mdc-button-base",!0))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[_.qOj],attrs:yt,ngContentSelectors:pt,decls:5,vars:3,consts:[[1,"mat-mdc-button-persistent-ripple","mdc-icon-button__ripple"],[1,"mat-mdc-focus-indicator"],["matRipple","",1,"mat-mdc-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-mdc-button-touch-target"]],template:function(Et,rn){1&Et&&(_.F$t(),_._UZ(0,"span",0),_.Hsn(1),_._UZ(2,"span",1)(3,"span",2)(4,"span",3)),2&Et&&(_.xp6(3),_.Q6J("matRippleDisabled",rn._isRippleDisabled())("matRippleCentered",!0)("matRippleTrigger",rn._elementRef.nativeElement))},dependencies:[Te.wG],styles:['.mdc-icon-button{font-size:24px;width:48px;height:48px;padding:12px}.mdc-icon-button .mdc-icon-button__focus-ring{max-height:48px;max-width:48px}.mdc-icon-button.mdc-icon-button--reduced-size .mdc-icon-button__ripple{width:40px;height:40px;margin-top:4px;margin-bottom:4px;margin-right:4px;margin-left:4px}.mdc-icon-button.mdc-icon-button--reduced-size .mdc-icon-button__focus-ring{max-height:40px;max-width:40px}.mdc-icon-button .mdc-icon-button__touch{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}.mdc-icon-button svg,.mdc-icon-button img{width:24px;height:24px}.mdc-icon-button{display:inline-block;position:relative;box-sizing:border-box;border:none;outline:none;background-color:rgba(0,0,0,0);fill:currentColor;color:inherit;text-decoration:none;cursor:pointer;user-select:none;z-index:0;overflow:visible}.mdc-icon-button .mdc-icon-button__touch{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}@media screen and (forced-colors: active){.mdc-icon-button.mdc-ripple-upgraded--background-focused .mdc-icon-button__focus-ring,.mdc-icon-button:not(.mdc-ripple-upgraded):focus .mdc-icon-button__focus-ring{display:block}}.mdc-icon-button:disabled{cursor:default;pointer-events:none}.mdc-icon-button[hidden]{display:none}.mdc-icon-button--display-flex{align-items:center;display:inline-flex;justify-content:center}.mdc-icon-button__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:100%;width:100%;display:none}@media screen and (forced-colors: active){.mdc-icon-button__focus-ring{border-color:CanvasText}}.mdc-icon-button__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-icon-button__focus-ring::after{border-color:CanvasText}}.mdc-icon-button__icon{display:inline-block}.mdc-icon-button__icon.mdc-icon-button__icon--on{display:none}.mdc-icon-button--on .mdc-icon-button__icon{display:none}.mdc-icon-button--on .mdc-icon-button__icon.mdc-icon-button__icon--on{display:inline-block}.mdc-icon-button__link{height:100%;left:0;outline:none;position:absolute;top:0;width:100%}.mat-mdc-icon-button{height:var(--mdc-icon-button-state-layer-size, 48px);width:var(--mdc-icon-button-state-layer-size, 48px);color:var(--mdc-icon-button-icon-color, inherit);border-radius:50%;flex-shrink:0;text-align:center;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-icon-button .mdc-button__icon{font-size:var(--mdc-icon-button-icon-size, 24px)}.mat-mdc-icon-button svg,.mat-mdc-icon-button img{width:var(--mdc-icon-button-icon-size, 24px);height:var(--mdc-icon-button-icon-size, 24px)}.mat-mdc-icon-button:disabled{opacity:var(--mdc-icon-button-disabled-icon-opacity, 0.38)}.mat-mdc-icon-button:disabled{color:var(--mdc-icon-button-disabled-icon-color, #000)}.mat-mdc-icon-button svg{vertical-align:baseline}.mat-mdc-icon-button[disabled]{cursor:default;pointer-events:none;opacity:1}.mat-mdc-icon-button .mat-mdc-button-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0;background-color:var(--mat-mdc-button-persistent-ripple-color)}.mat-mdc-icon-button .mat-ripple-element{background-color:var(--mat-mdc-button-ripple-color)}.mat-mdc-icon-button .mdc-button__label{z-index:1}.mat-mdc-icon-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-icon-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-icon-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}.mat-mdc-icon-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple{border-radius:50%}.mat-mdc-icon-button.mat-unthemed:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-primary:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-accent:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-warn:not(.mdc-ripple-upgraded):focus::before{background:rgba(0,0,0,0);opacity:1}',".cdk-high-contrast-active .mat-mdc-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-unelevated-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-raised-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-outlined-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-icon-button{outline:solid 1px}"],encapsulation:2,changeDetection:0}),Tt})(),Gt=(()=>{class Tt{}return Tt.\u0275fac=function(Et){return new(Et||Tt)},Tt.\u0275mod=_.oAB({type:Tt}),Tt.\u0275inj=_.cJS({imports:[Te.BQ,Te.si,Te.BQ]}),Tt})()},3238:(wn,dt,L)=>{L.d(dt,{rD:()=>_n,BQ:()=>Qe,wG:()=>ri,si:()=>Gn,pj:()=>z,Kr:()=>ct,Id:()=>Ye,FD:()=>Ft});var f=L(4650),_=L(2687),re=L(445),ke=L(6895),He=L(3353),Ze=L(1281);const _t=new f.OlP("mat-sanity-checks",{providedIn:"root",factory:function Ae(){return!0}});let Qe=(()=>{class dn{constructor($,ne,de){this._sanityChecks=ne,this._document=de,this._hasDoneGlobalChecks=!1,$._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled($){return!(0,He.Oy)()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[$])}}return dn.\u0275fac=function($){return new($||dn)(f.LFG(_.qm),f.LFG(_t,8),f.LFG(ke.K0))},dn.\u0275mod=f.oAB({type:dn}),dn.\u0275inj=f.cJS({imports:[re.vT,re.vT]}),dn})();function Ye(dn){return class extends dn{get disabled(){return this._disabled}set disabled(be){this._disabled=(0,Ze.Ig)(be)}constructor(...be){super(...be),this._disabled=!1}}}function z(dn,be){return class extends dn{get color(){return this._color}set color($){const ne=$||this.defaultColor;ne!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),ne&&this._elementRef.nativeElement.classList.add(`mat-${ne}`),this._color=ne)}constructor(...$){super(...$),this.defaultColor=be,this.color=be}}}function ct(dn){return class extends dn{get disableRipple(){return this._disableRipple}set disableRipple(be){this._disableRipple=(0,Ze.Ig)(be)}constructor(...be){super(...be),this._disableRipple=!1}}}function Ft(dn){return class extends dn{updateErrorState(){const be=this.errorState,ye=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);ye!==be&&(this.errorState=ye,this.stateChanges.next())}constructor(...be){super(...be),this.errorState=!1}}}let _n=(()=>{class dn{isErrorState($,ne){return!!($&&$.invalid&&($.touched||ne&&ne.submitted))}}return dn.\u0275fac=function($){return new($||dn)},dn.\u0275prov=f.Yz7({token:dn,factory:dn.\u0275fac,providedIn:"root"}),dn})();class Bn{constructor(be,$,ne,de=!1){this._renderer=be,this.element=$,this.config=ne,this._animationForciblyDisabledThroughCss=de,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const Qn=(0,He.i$)({passive:!0,capture:!0});class oi{constructor(){this._events=new Map,this._delegateEventHandler=be=>{const $=(0,He.sA)(be);$&&this._events.get(be.type)?.forEach((ne,de)=>{(de===$||de.contains($))&&ne.forEach(ye=>ye.handleEvent(be))})}}addHandler(be,$,ne,de){const ye=this._events.get($);if(ye){const rt=ye.get(ne);rt?rt.add(de):ye.set(ne,new Set([de]))}else this._events.set($,new Map([[ne,new Set([de])]])),be.runOutsideAngular(()=>{document.addEventListener($,this._delegateEventHandler,Qn)})}removeHandler(be,$,ne){const de=this._events.get(be);if(!de)return;const ye=de.get($);ye&&(ye.delete(ne),0===ye.size&&de.delete($),0===de.size&&(this._events.delete(be),document.removeEventListener(be,this._delegateEventHandler,Qn)))}}const Pi={enterDuration:225,exitDuration:150},ii=(0,He.i$)({passive:!0,capture:!0}),Ai=["mousedown","touchstart"],zn=["mouseup","mouseleave","touchend","touchcancel"];class Mi{constructor(be,$,ne,de){this._target=be,this._ngZone=$,this._platform=de,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,de.isBrowser&&(this._containerElement=(0,Ze.fI)(ne))}fadeInRipple(be,$,ne={}){const de=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),ye={...Pi,...ne.animation};ne.centered&&(be=de.left+de.width/2,$=de.top+de.height/2);const rt=ne.radius||function Tn(dn,be,$){const ne=Math.max(Math.abs(dn-$.left),Math.abs(dn-$.right)),de=Math.max(Math.abs(be-$.top),Math.abs(be-$.bottom));return Math.sqrt(ne*ne+de*de)}(be,$,de),Nt=be-de.left,Le=$-de.top,Be=ye.enterDuration,it=document.createElement("div");it.classList.add("mat-ripple-element"),it.style.left=Nt-rt+"px",it.style.top=Le-rt+"px",it.style.height=2*rt+"px",it.style.width=2*rt+"px",null!=ne.color&&(it.style.backgroundColor=ne.color),it.style.transitionDuration=`${Be}ms`,this._containerElement.appendChild(it);const qt=window.getComputedStyle(it),Mn=qt.transitionDuration,Je="none"===qt.transitionProperty||"0s"===Mn||"0s, 0s"===Mn||0===de.width&&0===de.height,ot=new Bn(this,it,ne,Je);it.style.transform="scale3d(1, 1, 1)",ot.state=0,ne.persistent||(this._mostRecentTransientRipple=ot);let Fe=null;return!Je&&(Be||ye.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const ht=()=>this._finishRippleTransition(ot),Yt=()=>this._destroyRipple(ot);it.addEventListener("transitionend",ht),it.addEventListener("transitioncancel",Yt),Fe={onTransitionEnd:ht,onTransitionCancel:Yt}}),this._activeRipples.set(ot,Fe),(Je||!Be)&&this._finishRippleTransition(ot),ot}fadeOutRipple(be){if(2===be.state||3===be.state)return;const $=be.element,ne={...Pi,...be.config.animation};$.style.transitionDuration=`${ne.exitDuration}ms`,$.style.opacity="0",be.state=2,(be._animationForciblyDisabledThroughCss||!ne.exitDuration)&&this._finishRippleTransition(be)}fadeOutAll(){this._getActiveRipples().forEach(be=>be.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(be=>{be.config.persistent||be.fadeOut()})}setupTriggerEvents(be){const $=(0,Ze.fI)(be);!this._platform.isBrowser||!$||$===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=$,Ai.forEach(ne=>{Mi._eventManager.addHandler(this._ngZone,ne,$,this)}))}handleEvent(be){"mousedown"===be.type?this._onMousedown(be):"touchstart"===be.type?this._onTouchStart(be):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{zn.forEach($=>{this._triggerElement.addEventListener($,this,ii)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(be){0===be.state?this._startFadeOutTransition(be):2===be.state&&this._destroyRipple(be)}_startFadeOutTransition(be){const $=be===this._mostRecentTransientRipple,{persistent:ne}=be.config;be.state=1,!ne&&(!$||!this._isPointerDown)&&be.fadeOut()}_destroyRipple(be){const $=this._activeRipples.get(be)??null;this._activeRipples.delete(be),this._activeRipples.size||(this._containerRect=null),be===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),be.state=3,null!==$&&(be.element.removeEventListener("transitionend",$.onTransitionEnd),be.element.removeEventListener("transitioncancel",$.onTransitionCancel)),be.element.remove()}_onMousedown(be){const $=(0,_.X6)(be),ne=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!$&&!ne&&(this._isPointerDown=!0,this.fadeInRipple(be.clientX,be.clientY,this._target.rippleConfig))}_onTouchStart(be){if(!this._target.rippleDisabled&&!(0,_.yG)(be)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const $=be.changedTouches;for(let ne=0;ne<$.length;ne++)this.fadeInRipple($[ne].clientX,$[ne].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(be=>{!be.config.persistent&&(1===be.state||be.config.terminateOnPointerUp&&0===be.state)&&be.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){const be=this._triggerElement;be&&(Ai.forEach($=>Mi._eventManager.removeHandler($,be,this)),this._pointerUpEventsRegistered&&zn.forEach($=>be.removeEventListener($,this,ii)))}}Mi._eventManager=new oi;const Ji=new f.OlP("mat-ripple-global-options");let ri=(()=>{class dn{get disabled(){return this._disabled}set disabled($){$&&this.fadeOutAllNonPersistent(),this._disabled=$,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger($){this._trigger=$,this._setupTriggerEventsIfEnabled()}constructor($,ne,de,ye,rt){this._elementRef=$,this._animationMode=rt,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=ye||{},this._rippleRenderer=new Mi(this,ne,$,de)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:{...this._globalOptions.animation,..."NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{},...this.animation},terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch($,ne=0,de){return"number"==typeof $?this._rippleRenderer.fadeInRipple($,ne,{...this.rippleConfig,...de}):this._rippleRenderer.fadeInRipple(0,0,{...this.rippleConfig,...$})}}return dn.\u0275fac=function($){return new($||dn)(f.Y36(f.SBq),f.Y36(f.R0b),f.Y36(He.t4),f.Y36(Ji,8),f.Y36(f.QbO,8))},dn.\u0275dir=f.lG2({type:dn,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function($,ne){2&$&&f.ekj("mat-ripple-unbounded",ne.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),dn})(),Gn=(()=>{class dn{}return dn.\u0275fac=function($){return new($||dn)},dn.\u0275mod=f.oAB({type:dn}),dn.\u0275inj=f.cJS({imports:[Qe,Qe]}),dn})()},3336:(wn,dt,L)=>{L.d(dt,{Hw:()=>Ar,Ps:()=>wr});var f=L(4650),_=L(3238),re=L(1281),Te=L(6895),ke=L(9646),He=L(2843),Ze=L(4128),xe=L(727),ze=L(8505),pe=L(4004),Me=L(262),Ne=L(8746),yt=L(3099),pt=L(5698),Lt=L(4351),an=L(9300);class It{}class Ae{constructor(et){this.normalizedNames=new Map,this.lazyUpdate=null,et?this.lazyInit="string"==typeof et?()=>{this.headers=new Map,et.split("\n").forEach(Pe=>{const Ge=Pe.indexOf(":");if(Ge>0){const vt=Pe.slice(0,Ge),Kt=vt.toLowerCase(),Dn=Pe.slice(Ge+1).trim();this.maybeSetNormalizedName(vt,Kt),this.headers.has(Kt)?this.headers.get(Kt).push(Dn):this.headers.set(Kt,[Dn])}})}:()=>{this.headers=new Map,Object.keys(et).forEach(Pe=>{let Ge=et[Pe];const vt=Pe.toLowerCase();"string"==typeof Ge&&(Ge=[Ge]),Ge.length>0&&(this.headers.set(vt,Ge),this.maybeSetNormalizedName(Pe,vt))})}:this.headers=new Map}has(et){return this.init(),this.headers.has(et.toLowerCase())}get(et){this.init();const Pe=this.headers.get(et.toLowerCase());return Pe&&Pe.length>0?Pe[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(et){return this.init(),this.headers.get(et.toLowerCase())||null}append(et,Pe){return this.clone({name:et,value:Pe,op:"a"})}set(et,Pe){return this.clone({name:et,value:Pe,op:"s"})}delete(et,Pe){return this.clone({name:et,value:Pe,op:"d"})}maybeSetNormalizedName(et,Pe){this.normalizedNames.has(Pe)||this.normalizedNames.set(Pe,et)}init(){this.lazyInit&&(this.lazyInit instanceof Ae?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(et=>this.applyUpdate(et)),this.lazyUpdate=null))}copyFrom(et){et.init(),Array.from(et.headers.keys()).forEach(Pe=>{this.headers.set(Pe,et.headers.get(Pe)),this.normalizedNames.set(Pe,et.normalizedNames.get(Pe))})}clone(et){const Pe=new Ae;return Pe.lazyInit=this.lazyInit&&this.lazyInit instanceof Ae?this.lazyInit:this,Pe.lazyUpdate=(this.lazyUpdate||[]).concat([et]),Pe}applyUpdate(et){const Pe=et.name.toLowerCase();switch(et.op){case"a":case"s":let Ge=et.value;if("string"==typeof Ge&&(Ge=[Ge]),0===Ge.length)return;this.maybeSetNormalizedName(et.name,Pe);const vt=("a"===et.op?this.headers.get(Pe):void 0)||[];vt.push(...Ge),this.headers.set(Pe,vt);break;case"d":const Kt=et.value;if(Kt){let Dn=this.headers.get(Pe);if(!Dn)return;Dn=Dn.filter(st=>-1===Kt.indexOf(st)),0===Dn.length?(this.headers.delete(Pe),this.normalizedNames.delete(Pe)):this.headers.set(Pe,Dn)}else this.headers.delete(Pe),this.normalizedNames.delete(Pe)}}forEach(et){this.init(),Array.from(this.normalizedNames.keys()).forEach(Pe=>et(this.normalizedNames.get(Pe),this.headers.get(Pe)))}}class Qe{encodeKey(et){return Ye(et)}encodeValue(et){return Ye(et)}decodeKey(et){return decodeURIComponent(et)}decodeValue(et){return decodeURIComponent(et)}}const lt=/%(\d[a-f0-9])/gi,kt={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function Ye(Vt){return encodeURIComponent(Vt).replace(lt,(et,Pe)=>kt[Pe]??et)}function z(Vt){return`${Vt}`}class ct{constructor(et={}){if(this.updates=null,this.cloneFrom=null,this.encoder=et.encoder||new Qe,et.fromString){if(et.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function Ue(Vt,et){const Pe=new Map;return Vt.length>0&&Vt.replace(/^\?/,"").split("&").forEach(vt=>{const Kt=vt.indexOf("="),[Dn,st]=-1==Kt?[et.decodeKey(vt),""]:[et.decodeKey(vt.slice(0,Kt)),et.decodeValue(vt.slice(Kt+1))],nt=Pe.get(Dn)||[];nt.push(st),Pe.set(Dn,nt)}),Pe}(et.fromString,this.encoder)}else et.fromObject?(this.map=new Map,Object.keys(et.fromObject).forEach(Pe=>{const Ge=et.fromObject[Pe],vt=Array.isArray(Ge)?Ge.map(z):[z(Ge)];this.map.set(Pe,vt)})):this.map=null}has(et){return this.init(),this.map.has(et)}get(et){this.init();const Pe=this.map.get(et);return Pe?Pe[0]:null}getAll(et){return this.init(),this.map.get(et)||null}keys(){return this.init(),Array.from(this.map.keys())}append(et,Pe){return this.clone({param:et,value:Pe,op:"a"})}appendAll(et){const Pe=[];return Object.keys(et).forEach(Ge=>{const vt=et[Ge];Array.isArray(vt)?vt.forEach(Kt=>{Pe.push({param:Ge,value:Kt,op:"a"})}):Pe.push({param:Ge,value:vt,op:"a"})}),this.clone(Pe)}set(et,Pe){return this.clone({param:et,value:Pe,op:"s"})}delete(et,Pe){return this.clone({param:et,value:Pe,op:"d"})}toString(){return this.init(),this.keys().map(et=>{const Pe=this.encoder.encodeKey(et);return this.map.get(et).map(Ge=>Pe+"="+this.encoder.encodeValue(Ge)).join("&")}).filter(et=>""!==et).join("&")}clone(et){const Pe=new ct({encoder:this.encoder});return Pe.cloneFrom=this.cloneFrom||this,Pe.updates=(this.updates||[]).concat(et),Pe}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(et=>this.map.set(et,this.cloneFrom.map.get(et))),this.updates.forEach(et=>{switch(et.op){case"a":case"s":const Pe=("a"===et.op?this.map.get(et.param):void 0)||[];Pe.push(z(et.value)),this.map.set(et.param,Pe);break;case"d":if(void 0===et.value){this.map.delete(et.param);break}{let Ge=this.map.get(et.param)||[];const vt=Ge.indexOf(z(et.value));-1!==vt&&Ge.splice(vt,1),Ge.length>0?this.map.set(et.param,Ge):this.map.delete(et.param)}}}),this.cloneFrom=this.updates=null)}}class Ft{constructor(){this.map=new Map}set(et,Pe){return this.map.set(et,Pe),this}get(et){return this.map.has(et)||this.map.set(et,et.defaultValue()),this.map.get(et)}delete(et){return this.map.delete(et),this}has(et){return this.map.has(et)}keys(){return this.map.keys()}}function vn(Vt){return typeof ArrayBuffer<"u"&&Vt instanceof ArrayBuffer}function Pt(Vt){return typeof Blob<"u"&&Vt instanceof Blob}function Ht(Vt){return typeof FormData<"u"&&Vt instanceof FormData}class jt{constructor(et,Pe,Ge,vt){let Kt;if(this.url=Pe,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=et.toUpperCase(),function gn(Vt){switch(Vt){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||vt?(this.body=void 0!==Ge?Ge:null,Kt=vt):Kt=Ge,Kt&&(this.reportProgress=!!Kt.reportProgress,this.withCredentials=!!Kt.withCredentials,Kt.responseType&&(this.responseType=Kt.responseType),Kt.headers&&(this.headers=Kt.headers),Kt.context&&(this.context=Kt.context),Kt.params&&(this.params=Kt.params)),this.headers||(this.headers=new Ae),this.context||(this.context=new Ft),this.params){const Dn=this.params.toString();if(0===Dn.length)this.urlWithParams=Pe;else{const st=Pe.indexOf("?");this.urlWithParams=Pe+(-1===st?"?":st<Pe.length-1?"&":"")+Dn}}else this.params=new ct,this.urlWithParams=Pe}serializeBody(){return null===this.body?null:vn(this.body)||Pt(this.body)||Ht(this.body)||function Ot(Vt){return typeof URLSearchParams<"u"&&Vt instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof ct?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||Ht(this.body)?null:Pt(this.body)?this.body.type||null:vn(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof ct?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(et={}){const Pe=et.method||this.method,Ge=et.url||this.url,vt=et.responseType||this.responseType,Kt=void 0!==et.body?et.body:this.body,Dn=void 0!==et.withCredentials?et.withCredentials:this.withCredentials,st=void 0!==et.reportProgress?et.reportProgress:this.reportProgress;let nt=et.headers||this.headers,wt=et.params||this.params;const Bt=et.context??this.context;return void 0!==et.setHeaders&&(nt=Object.keys(et.setHeaders).reduce((mn,Wn)=>mn.set(Wn,et.setHeaders[Wn]),nt)),et.setParams&&(wt=Object.keys(et.setParams).reduce((mn,Wn)=>mn.set(Wn,et.setParams[Wn]),wt)),new jt(Pe,Ge,Kt,{params:wt,headers:nt,context:Bt,reportProgress:st,responseType:vt,withCredentials:Dn})}}var Gt=(()=>((Gt=Gt||{})[Gt.Sent=0]="Sent",Gt[Gt.UploadProgress=1]="UploadProgress",Gt[Gt.ResponseHeader=2]="ResponseHeader",Gt[Gt.DownloadProgress=3]="DownloadProgress",Gt[Gt.Response=4]="Response",Gt[Gt.User=5]="User",Gt))();class Tt{constructor(et,Pe=200,Ge="OK"){this.headers=et.headers||new Ae,this.status=void 0!==et.status?et.status:Pe,this.statusText=et.statusText||Ge,this.url=et.url||null,this.ok=this.status>=200&&this.status<300}}class Et extends Tt{constructor(et={}){super(et),this.type=Gt.Response,this.body=void 0!==et.body?et.body:null}clone(et={}){return new Et({body:void 0!==et.body?et.body:this.body,headers:et.headers||this.headers,status:void 0!==et.status?et.status:this.status,statusText:et.statusText||this.statusText,url:et.url||this.url||void 0})}}function Zt(Vt,et){return{body:et,headers:Vt.headers,context:Vt.context,observe:Vt.observe,params:Vt.params,reportProgress:Vt.reportProgress,responseType:Vt.responseType,withCredentials:Vt.withCredentials}}let _n=(()=>{class Vt{constructor(Pe){this.handler=Pe}request(Pe,Ge,vt={}){let Kt;if(Pe instanceof jt)Kt=Pe;else{let nt,wt;nt=vt.headers instanceof Ae?vt.headers:new Ae(vt.headers),vt.params&&(wt=vt.params instanceof ct?vt.params:new ct({fromObject:vt.params})),Kt=new jt(Pe,Ge,void 0!==vt.body?vt.body:null,{headers:nt,context:vt.context,params:wt,reportProgress:vt.reportProgress,responseType:vt.responseType||"json",withCredentials:vt.withCredentials})}const Dn=(0,ke.of)(Kt).pipe((0,Lt.b)(nt=>this.handler.handle(nt)));if(Pe instanceof jt||"events"===vt.observe)return Dn;const st=Dn.pipe((0,an.h)(nt=>nt instanceof Et));switch(vt.observe||"body"){case"body":switch(Kt.responseType){case"arraybuffer":return st.pipe((0,pe.U)(nt=>{if(null!==nt.body&&!(nt.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return nt.body}));case"blob":return st.pipe((0,pe.U)(nt=>{if(null!==nt.body&&!(nt.body instanceof Blob))throw new Error("Response is not a Blob.");return nt.body}));case"text":return st.pipe((0,pe.U)(nt=>{if(null!==nt.body&&"string"!=typeof nt.body)throw new Error("Response is not a string.");return nt.body}));default:return st.pipe((0,pe.U)(nt=>nt.body))}case"response":return st;default:throw new Error(`Unreachable: unhandled observe type ${vt.observe}}`)}}delete(Pe,Ge={}){return this.request("DELETE",Pe,Ge)}get(Pe,Ge={}){return this.request("GET",Pe,Ge)}head(Pe,Ge={}){return this.request("HEAD",Pe,Ge)}jsonp(Pe,Ge){return this.request("JSONP",Pe,{params:(new ct).append(Ge,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(Pe,Ge={}){return this.request("OPTIONS",Pe,Ge)}patch(Pe,Ge,vt={}){return this.request("PATCH",Pe,Zt(vt,Ge))}post(Pe,Ge,vt={}){return this.request("POST",Pe,Zt(vt,Ge))}put(Pe,Ge,vt={}){return this.request("PUT",Pe,Zt(vt,Ge))}}return Vt.\u0275fac=function(Pe){return new(Pe||Vt)(f.LFG(It))},Vt.\u0275prov=f.Yz7({token:Vt,factory:Vt.\u0275fac}),Vt})();var St=L(1481);const Mn=["*"];let Je;function Fe(Vt){return function ot(){if(void 0===Je&&(Je=null,typeof window<"u")){const Vt=window;void 0!==Vt.trustedTypes&&(Je=Vt.trustedTypes.createPolicy("angular#components",{createHTML:et=>et}))}return Je}()?.createHTML(Vt)||Vt}function ht(Vt){return Error(`Unable to find icon with the name "${Vt}"`)}function un(Vt){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${Vt}".`)}function Kn(Vt){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${Vt}".`)}class vi{constructor(et,Pe,Ge){this.url=et,this.svgText=Pe,this.options=Ge}}let yr=(()=>{class Vt{constructor(Pe,Ge,vt,Kt){this._httpClient=Pe,this._sanitizer=Ge,this._errorHandler=Kt,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass=["material-icons","mat-ligature-font"],this._document=vt}addSvgIcon(Pe,Ge,vt){return this.addSvgIconInNamespace("",Pe,Ge,vt)}addSvgIconLiteral(Pe,Ge,vt){return this.addSvgIconLiteralInNamespace("",Pe,Ge,vt)}addSvgIconInNamespace(Pe,Ge,vt,Kt){return this._addSvgIconConfig(Pe,Ge,new vi(vt,null,Kt))}addSvgIconResolver(Pe){return this._resolvers.push(Pe),this}addSvgIconLiteralInNamespace(Pe,Ge,vt,Kt){const Dn=this._sanitizer.sanitize(f.q3G.HTML,vt);if(!Dn)throw Kn(vt);const st=Fe(Dn);return this._addSvgIconConfig(Pe,Ge,new vi("",st,Kt))}addSvgIconSet(Pe,Ge){return this.addSvgIconSetInNamespace("",Pe,Ge)}addSvgIconSetLiteral(Pe,Ge){return this.addSvgIconSetLiteralInNamespace("",Pe,Ge)}addSvgIconSetInNamespace(Pe,Ge,vt){return this._addSvgIconSetConfig(Pe,new vi(Ge,null,vt))}addSvgIconSetLiteralInNamespace(Pe,Ge,vt){const Kt=this._sanitizer.sanitize(f.q3G.HTML,Ge);if(!Kt)throw Kn(Ge);const Dn=Fe(Kt);return this._addSvgIconSetConfig(Pe,new vi("",Dn,vt))}registerFontClassAlias(Pe,Ge=Pe){return this._fontCssClassesByAlias.set(Pe,Ge),this}classNameForFontAlias(Pe){return this._fontCssClassesByAlias.get(Pe)||Pe}setDefaultFontSetClass(...Pe){return this._defaultFontSetClass=Pe,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(Pe){const Ge=this._sanitizer.sanitize(f.q3G.RESOURCE_URL,Pe);if(!Ge)throw un(Pe);const vt=this._cachedIconsByUrl.get(Ge);return vt?(0,ke.of)(Gr(vt)):this._loadSvgIconFromConfig(new vi(Pe,null)).pipe((0,ze.b)(Kt=>this._cachedIconsByUrl.set(Ge,Kt)),(0,pe.U)(Kt=>Gr(Kt)))}getNamedSvgIcon(Pe,Ge=""){const vt=os(Ge,Pe);let Kt=this._svgIconConfigs.get(vt);if(Kt)return this._getSvgFromConfig(Kt);if(Kt=this._getIconConfigFromResolvers(Ge,Pe),Kt)return this._svgIconConfigs.set(vt,Kt),this._getSvgFromConfig(Kt);const Dn=this._iconSetConfigs.get(Ge);return Dn?this._getSvgFromIconSetConfigs(Pe,Dn):(0,He._)(ht(vt))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(Pe){return Pe.svgText?(0,ke.of)(Gr(this._svgElementFromConfig(Pe))):this._loadSvgIconFromConfig(Pe).pipe((0,pe.U)(Ge=>Gr(Ge)))}_getSvgFromIconSetConfigs(Pe,Ge){const vt=this._extractIconWithNameFromAnySet(Pe,Ge);if(vt)return(0,ke.of)(vt);const Kt=Ge.filter(Dn=>!Dn.svgText).map(Dn=>this._loadSvgIconSetFromConfig(Dn).pipe((0,Me.K)(st=>{const wt=`Loading icon set URL: ${this._sanitizer.sanitize(f.q3G.RESOURCE_URL,Dn.url)} failed: ${st.message}`;return this._errorHandler.handleError(new Error(wt)),(0,ke.of)(null)})));return(0,Ze.D)(Kt).pipe((0,pe.U)(()=>{const Dn=this._extractIconWithNameFromAnySet(Pe,Ge);if(!Dn)throw ht(Pe);return Dn}))}_extractIconWithNameFromAnySet(Pe,Ge){for(let vt=Ge.length-1;vt>=0;vt--){const Kt=Ge[vt];if(Kt.svgText&&Kt.svgText.toString().indexOf(Pe)>-1){const Dn=this._svgElementFromConfig(Kt),st=this._extractSvgIconFromSet(Dn,Pe,Kt.options);if(st)return st}}return null}_loadSvgIconFromConfig(Pe){return this._fetchIcon(Pe).pipe((0,ze.b)(Ge=>Pe.svgText=Ge),(0,pe.U)(()=>this._svgElementFromConfig(Pe)))}_loadSvgIconSetFromConfig(Pe){return Pe.svgText?(0,ke.of)(null):this._fetchIcon(Pe).pipe((0,ze.b)(Ge=>Pe.svgText=Ge))}_extractSvgIconFromSet(Pe,Ge,vt){const Kt=Pe.querySelector(`[id="${Ge}"]`);if(!Kt)return null;const Dn=Kt.cloneNode(!0);if(Dn.removeAttribute("id"),"svg"===Dn.nodeName.toLowerCase())return this._setSvgAttributes(Dn,vt);if("symbol"===Dn.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(Dn),vt);const st=this._svgElementFromString(Fe("<svg></svg>"));return st.appendChild(Dn),this._setSvgAttributes(st,vt)}_svgElementFromString(Pe){const Ge=this._document.createElement("DIV");Ge.innerHTML=Pe;const vt=Ge.querySelector("svg");if(!vt)throw Error("<svg> tag not found");return vt}_toSvgElement(Pe){const Ge=this._svgElementFromString(Fe("<svg></svg>")),vt=Pe.attributes;for(let Kt=0;Kt<vt.length;Kt++){const{name:Dn,value:st}=vt[Kt];"id"!==Dn&&Ge.setAttribute(Dn,st)}for(let Kt=0;Kt<Pe.childNodes.length;Kt++)Pe.childNodes[Kt].nodeType===this._document.ELEMENT_NODE&&Ge.appendChild(Pe.childNodes[Kt].cloneNode(!0));return Ge}_setSvgAttributes(Pe,Ge){return Pe.setAttribute("fit",""),Pe.setAttribute("height","100%"),Pe.setAttribute("width","100%"),Pe.setAttribute("preserveAspectRatio","xMidYMid meet"),Pe.setAttribute("focusable","false"),Ge&&Ge.viewBox&&Pe.setAttribute("viewBox",Ge.viewBox),Pe}_fetchIcon(Pe){const{url:Ge,options:vt}=Pe,Kt=vt?.withCredentials??!1;if(!this._httpClient)throw function Yt(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}();if(null==Ge)throw Error(`Cannot fetch icon from URL "${Ge}".`);const Dn=this._sanitizer.sanitize(f.q3G.RESOURCE_URL,Ge);if(!Dn)throw un(Ge);const st=this._inProgressUrlFetches.get(Dn);if(st)return st;const nt=this._httpClient.get(Dn,{responseType:"text",withCredentials:Kt}).pipe((0,pe.U)(wt=>Fe(wt)),(0,Ne.x)(()=>this._inProgressUrlFetches.delete(Dn)),(0,yt.B)());return this._inProgressUrlFetches.set(Dn,nt),nt}_addSvgIconConfig(Pe,Ge,vt){return this._svgIconConfigs.set(os(Pe,Ge),vt),this}_addSvgIconSetConfig(Pe,Ge){const vt=this._iconSetConfigs.get(Pe);return vt?vt.push(Ge):this._iconSetConfigs.set(Pe,[Ge]),this}_svgElementFromConfig(Pe){if(!Pe.svgElement){const Ge=this._svgElementFromString(Pe.svgText);this._setSvgAttributes(Ge,Pe.options),Pe.svgElement=Ge}return Pe.svgElement}_getIconConfigFromResolvers(Pe,Ge){for(let vt=0;vt<this._resolvers.length;vt++){const Kt=this._resolvers[vt](Ge,Pe);if(Kt)return Tr(Kt)?new vi(Kt.url,null,Kt.options):new vi(Kt,null)}}}return Vt.\u0275fac=function(Pe){return new(Pe||Vt)(f.LFG(_n,8),f.LFG(St.H7),f.LFG(Te.K0,8),f.LFG(f.qLn))},Vt.\u0275prov=f.Yz7({token:Vt,factory:Vt.\u0275fac,providedIn:"root"}),Vt})();function Gr(Vt){return Vt.cloneNode(!0)}function os(Vt,et){return Vt+":"+et}function Tr(Vt){return!(!Vt.url||!Vt.options)}const ji=(0,_.pj)(class{constructor(Vt){this._elementRef=Vt}}),Cs=new f.OlP("MAT_ICON_DEFAULT_OPTIONS"),rs=new f.OlP("mat-icon-location",{providedIn:"root",factory:function Qi(){const Vt=(0,f.f3M)(Te.K0),et=Vt?Vt.location:null;return{getPathname:()=>et?et.pathname+et.search:""}}}),Sr=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],Dr=Sr.map(Vt=>`[${Vt}]`).join(", "),ps=/^url\(['"]?#(.*?)['"]?\)$/;let Ar=(()=>{class Vt extends ji{get inline(){return this._inline}set inline(Pe){this._inline=(0,re.Ig)(Pe)}get svgIcon(){return this._svgIcon}set svgIcon(Pe){Pe!==this._svgIcon&&(Pe?this._updateSvgIcon(Pe):this._svgIcon&&this._clearSvgElement(),this._svgIcon=Pe)}get fontSet(){return this._fontSet}set fontSet(Pe){const Ge=this._cleanupFontValue(Pe);Ge!==this._fontSet&&(this._fontSet=Ge,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(Pe){const Ge=this._cleanupFontValue(Pe);Ge!==this._fontIcon&&(this._fontIcon=Ge,this._updateFontIconClasses())}constructor(Pe,Ge,vt,Kt,Dn,st){super(Pe),this._iconRegistry=Ge,this._location=Kt,this._errorHandler=Dn,this._inline=!1,this._previousFontSetClass=[],this._currentIconFetch=xe.w0.EMPTY,st&&(st.color&&(this.color=this.defaultColor=st.color),st.fontSet&&(this.fontSet=st.fontSet)),vt||Pe.nativeElement.setAttribute("aria-hidden","true")}_splitIconName(Pe){if(!Pe)return["",""];const Ge=Pe.split(":");switch(Ge.length){case 1:return["",Ge[0]];case 2:return Ge;default:throw Error(`Invalid icon name: "${Pe}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const Pe=this._elementsWithExternalReferences;if(Pe&&Pe.size){const Ge=this._location.getPathname();Ge!==this._previousPath&&(this._previousPath=Ge,this._prependPathToReferences(Ge))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(Pe){this._clearSvgElement();const Ge=this._location.getPathname();this._previousPath=Ge,this._cacheChildrenWithExternalReferences(Pe),this._prependPathToReferences(Ge),this._elementRef.nativeElement.appendChild(Pe)}_clearSvgElement(){const Pe=this._elementRef.nativeElement;let Ge=Pe.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();Ge--;){const vt=Pe.childNodes[Ge];(1!==vt.nodeType||"svg"===vt.nodeName.toLowerCase())&&vt.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const Pe=this._elementRef.nativeElement,Ge=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(vt=>vt.length>0);this._previousFontSetClass.forEach(vt=>Pe.classList.remove(vt)),Ge.forEach(vt=>Pe.classList.add(vt)),this._previousFontSetClass=Ge,this.fontIcon!==this._previousFontIconClass&&!Ge.includes("mat-ligature-font")&&(this._previousFontIconClass&&Pe.classList.remove(this._previousFontIconClass),this.fontIcon&&Pe.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(Pe){return"string"==typeof Pe?Pe.trim().split(" ")[0]:Pe}_prependPathToReferences(Pe){const Ge=this._elementsWithExternalReferences;Ge&&Ge.forEach((vt,Kt)=>{vt.forEach(Dn=>{Kt.setAttribute(Dn.name,`url('${Pe}#${Dn.value}')`)})})}_cacheChildrenWithExternalReferences(Pe){const Ge=Pe.querySelectorAll(Dr),vt=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let Kt=0;Kt<Ge.length;Kt++)Sr.forEach(Dn=>{const st=Ge[Kt],nt=st.getAttribute(Dn),wt=nt?nt.match(ps):null;if(wt){let Bt=vt.get(st);Bt||(Bt=[],vt.set(st,Bt)),Bt.push({name:Dn,value:wt[1]})}})}_updateSvgIcon(Pe){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),Pe){const[Ge,vt]=this._splitIconName(Pe);Ge&&(this._svgNamespace=Ge),vt&&(this._svgName=vt),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(vt,Ge).pipe((0,pt.q)(1)).subscribe(Kt=>this._setSvgElement(Kt),Kt=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${Ge}:${vt}! ${Kt.message}`))})}}}return Vt.\u0275fac=function(Pe){return new(Pe||Vt)(f.Y36(f.SBq),f.Y36(yr),f.$8M("aria-hidden"),f.Y36(rs),f.Y36(f.qLn),f.Y36(Cs,8))},Vt.\u0275cmp=f.Xpm({type:Vt,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:8,hostBindings:function(Pe,Ge){2&Pe&&(f.uIk("data-mat-icon-type",Ge._usingFontIcon()?"font":"svg")("data-mat-icon-name",Ge._svgName||Ge.fontIcon)("data-mat-icon-namespace",Ge._svgNamespace||Ge.fontSet)("fontIcon",Ge._usingFontIcon()?Ge.fontIcon:null),f.ekj("mat-icon-inline",Ge.inline)("mat-icon-no-color","primary"!==Ge.color&&"accent"!==Ge.color&&"warn"!==Ge.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[f.qOj],ngContentSelectors:Mn,decls:1,vars:0,template:function(Pe,Ge){1&Pe&&(f.F$t(),f.Hsn(0))},styles:[".mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0}),Vt})(),wr=(()=>{class Vt{}return Vt.\u0275fac=function(Pe){return new(Pe||Vt)},Vt.\u0275mod=f.oAB({type:Vt}),Vt.\u0275inj=f.cJS({imports:[_.BQ,_.BQ]}),Vt})()},1481:(wn,dt,L)=>{L.d(dt,{Dx:()=>Hn,H7:()=>it,b2:()=>Ji,q6:()=>Ai,se:()=>vn});var f=L(6895),_=L(4650);class re extends f.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Te extends re{static makeCurrent(){(0,f.HT)(new Te)}onAndCancel(ot,Fe,ht){return ot.addEventListener(Fe,ht,!1),()=>{ot.removeEventListener(Fe,ht,!1)}}dispatchEvent(ot,Fe){ot.dispatchEvent(Fe)}remove(ot){ot.parentNode&&ot.parentNode.removeChild(ot)}createElement(ot,Fe){return(Fe=Fe||this.getDefaultDocument()).createElement(ot)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(ot){return ot.nodeType===Node.ELEMENT_NODE}isShadowRoot(ot){return ot instanceof DocumentFragment}getGlobalEventTarget(ot,Fe){return"window"===Fe?window:"document"===Fe?ot:"body"===Fe?ot.body:null}getBaseHref(ot){const Fe=function He(){return ke=ke||document.querySelector("base"),ke?ke.getAttribute("href"):null}();return null==Fe?null:function xe(Je){Ze=Ze||document.createElement("a"),Ze.setAttribute("href",Je);const ot=Ze.pathname;return"/"===ot.charAt(0)?ot:`/${ot}`}(Fe)}resetBaseElement(){ke=null}getUserAgent(){return window.navigator.userAgent}getCookie(ot){return(0,f.Mx)(document.cookie,ot)}}let Ze,ke=null;const ze=new _.OlP("TRANSITION_ID"),Me=[{provide:_.ip1,useFactory:function pe(Je,ot,Fe){return()=>{Fe.get(_.CZH).donePromise.then(()=>{const ht=(0,f.q)(),Yt=ot.querySelectorAll(`style[ng-transition="${Je}"]`);for(let un=0;un<Yt.length;un++)ht.remove(Yt[un])})}},deps:[ze,f.K0,_.zs3],multi:!0}];let yt=(()=>{class Je{build(){return new XMLHttpRequest}}return Je.\u0275fac=function(Fe){return new(Fe||Je)},Je.\u0275prov=_.Yz7({token:Je,factory:Je.\u0275fac}),Je})();const pt=new _.OlP("EventManagerPlugins");let Lt=(()=>{class Je{constructor(Fe,ht){this._zone=ht,this._eventNameToPlugin=new Map,Fe.forEach(Yt=>{Yt.manager=this}),this._plugins=Fe.slice().reverse()}addEventListener(Fe,ht,Yt){return this._findPluginFor(ht).addEventListener(Fe,ht,Yt)}addGlobalEventListener(Fe,ht,Yt){return this._findPluginFor(ht).addGlobalEventListener(Fe,ht,Yt)}getZone(){return this._zone}_findPluginFor(Fe){const ht=this._eventNameToPlugin.get(Fe);if(ht)return ht;const Yt=this._plugins;for(let un=0;un<Yt.length;un++){const Kn=Yt[un];if(Kn.supports(Fe))return this._eventNameToPlugin.set(Fe,Kn),Kn}throw new Error(`No event manager plugin found for event ${Fe}`)}}return Je.\u0275fac=function(Fe){return new(Fe||Je)(_.LFG(pt),_.LFG(_.R0b))},Je.\u0275prov=_.Yz7({token:Je,factory:Je.\u0275fac}),Je})();class an{constructor(ot){this._doc=ot}addGlobalEventListener(ot,Fe,ht){const Yt=(0,f.q)().getGlobalEventTarget(this._doc,ot);if(!Yt)throw new Error(`Unsupported event target ${Yt} for event ${Fe}`);return this.addEventListener(Yt,Fe,ht)}}let It=(()=>{class Je{constructor(){this.usageCount=new Map}addStyles(Fe){for(const ht of Fe)1===this.changeUsageCount(ht,1)&&this.onStyleAdded(ht)}removeStyles(Fe){for(const ht of Fe)0===this.changeUsageCount(ht,-1)&&this.onStyleRemoved(ht)}onStyleRemoved(Fe){}onStyleAdded(Fe){}getAllStyles(){return this.usageCount.keys()}changeUsageCount(Fe,ht){const Yt=this.usageCount;let un=Yt.get(Fe)??0;return un+=ht,un>0?Yt.set(Fe,un):Yt.delete(Fe),un}ngOnDestroy(){for(const Fe of this.getAllStyles())this.onStyleRemoved(Fe);this.usageCount.clear()}}return Je.\u0275fac=function(Fe){return new(Fe||Je)},Je.\u0275prov=_.Yz7({token:Je,factory:Je.\u0275fac}),Je})(),Mt=(()=>{class Je extends It{constructor(Fe){super(),this.doc=Fe,this.styleRef=new Map,this.hostNodes=new Set,this.resetHostNodes()}onStyleAdded(Fe){for(const ht of this.hostNodes)this.addStyleToHost(ht,Fe)}onStyleRemoved(Fe){const ht=this.styleRef;ht.get(Fe)?.forEach(un=>un.remove()),ht.delete(Fe)}ngOnDestroy(){super.ngOnDestroy(),this.styleRef.clear(),this.resetHostNodes()}addHost(Fe){this.hostNodes.add(Fe);for(const ht of this.getAllStyles())this.addStyleToHost(Fe,ht)}removeHost(Fe){this.hostNodes.delete(Fe)}addStyleToHost(Fe,ht){const Yt=this.doc.createElement("style");Yt.textContent=ht,Fe.appendChild(Yt);const un=this.styleRef.get(ht);un?un.push(Yt):this.styleRef.set(ht,[Yt])}resetHostNodes(){const Fe=this.hostNodes;Fe.clear(),Fe.add(this.doc.head)}}return Je.\u0275fac=function(Fe){return new(Fe||Je)(_.LFG(f.K0))},Je.\u0275prov=_.Yz7({token:Je,factory:Je.\u0275fac}),Je})();const Ae={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},_t=/%COMP%/g,z=new _.OlP("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function Ft(Je,ot){return ot.flat(100).map(Fe=>Fe.replace(_t,Je))}function gn(Je){return ot=>{if("__ngUnwrap__"===ot)return Je;!1===Je(ot)&&(ot.preventDefault(),ot.returnValue=!1)}}let vn=(()=>{class Je{constructor(Fe,ht,Yt,un){this.eventManager=Fe,this.sharedStylesHost=ht,this.appId=Yt,this.removeStylesOnCompDestory=un,this.rendererByCompId=new Map,this.defaultRenderer=new Pt(Fe)}createRenderer(Fe,ht){if(!Fe||!ht)return this.defaultRenderer;const Yt=this.getOrCreateRenderer(Fe,ht);return Yt instanceof Ut?Yt.applyToHost(Fe):Yt instanceof Tt&&Yt.applyStyles(),Yt}getOrCreateRenderer(Fe,ht){const Yt=this.rendererByCompId;let un=Yt.get(ht.id);if(!un){const Kn=this.eventManager,vi=this.sharedStylesHost,yr=this.removeStylesOnCompDestory;switch(ht.encapsulation){case _.ifc.Emulated:un=new Ut(Kn,vi,ht,this.appId,yr);break;case _.ifc.ShadowDom:return new Gt(Kn,vi,Fe,ht);default:un=new Tt(Kn,vi,ht,yr)}un.onDestroy=()=>Yt.delete(ht.id),Yt.set(ht.id,un)}return un}ngOnDestroy(){this.rendererByCompId.clear()}begin(){}end(){}}return Je.\u0275fac=function(Fe){return new(Fe||Je)(_.LFG(Lt),_.LFG(Mt),_.LFG(_.AFp),_.LFG(z))},Je.\u0275prov=_.Yz7({token:Je,factory:Je.\u0275fac}),Je})();class Pt{constructor(ot){this.eventManager=ot,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(ot,Fe){return Fe?document.createElementNS(Ae[Fe]||Fe,ot):document.createElement(ot)}createComment(ot){return document.createComment(ot)}createText(ot){return document.createTextNode(ot)}appendChild(ot,Fe){(jt(ot)?ot.content:ot).appendChild(Fe)}insertBefore(ot,Fe,ht){ot&&(jt(ot)?ot.content:ot).insertBefore(Fe,ht)}removeChild(ot,Fe){ot&&ot.removeChild(Fe)}selectRootElement(ot,Fe){let ht="string"==typeof ot?document.querySelector(ot):ot;if(!ht)throw new Error(`The selector "${ot}" did not match any elements`);return Fe||(ht.textContent=""),ht}parentNode(ot){return ot.parentNode}nextSibling(ot){return ot.nextSibling}setAttribute(ot,Fe,ht,Yt){if(Yt){Fe=Yt+":"+Fe;const un=Ae[Yt];un?ot.setAttributeNS(un,Fe,ht):ot.setAttribute(Fe,ht)}else ot.setAttribute(Fe,ht)}removeAttribute(ot,Fe,ht){if(ht){const Yt=Ae[ht];Yt?ot.removeAttributeNS(Yt,Fe):ot.removeAttribute(`${ht}:${Fe}`)}else ot.removeAttribute(Fe)}addClass(ot,Fe){ot.classList.add(Fe)}removeClass(ot,Fe){ot.classList.remove(Fe)}setStyle(ot,Fe,ht,Yt){Yt&(_.JOm.DashCase|_.JOm.Important)?ot.style.setProperty(Fe,ht,Yt&_.JOm.Important?"important":""):ot.style[Fe]=ht}removeStyle(ot,Fe,ht){ht&_.JOm.DashCase?ot.style.removeProperty(Fe):ot.style[Fe]=""}setProperty(ot,Fe,ht){ot[Fe]=ht}setValue(ot,Fe){ot.nodeValue=Fe}listen(ot,Fe,ht){return"string"==typeof ot?this.eventManager.addGlobalEventListener(ot,Fe,gn(ht)):this.eventManager.addEventListener(ot,Fe,gn(ht))}}function jt(Je){return"TEMPLATE"===Je.tagName&&void 0!==Je.content}class Gt extends Pt{constructor(ot,Fe,ht,Yt){super(ot),this.sharedStylesHost=Fe,this.hostEl=ht,this.shadowRoot=ht.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const un=Ft(Yt.id,Yt.styles);for(const Kn of un){const vi=document.createElement("style");vi.textContent=Kn,this.shadowRoot.appendChild(vi)}}nodeOrShadowRoot(ot){return ot===this.hostEl?this.shadowRoot:ot}appendChild(ot,Fe){return super.appendChild(this.nodeOrShadowRoot(ot),Fe)}insertBefore(ot,Fe,ht){return super.insertBefore(this.nodeOrShadowRoot(ot),Fe,ht)}removeChild(ot,Fe){return super.removeChild(this.nodeOrShadowRoot(ot),Fe)}parentNode(ot){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(ot)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Tt extends Pt{constructor(ot,Fe,ht,Yt,un=ht.id){super(ot),this.sharedStylesHost=Fe,this.removeStylesOnCompDestory=Yt,this.rendererUsageCount=0,this.styles=Ft(un,ht.styles)}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class Ut extends Tt{constructor(ot,Fe,ht,Yt,un){const Kn=Yt+"-"+ht.id;super(ot,Fe,ht,un,Kn),this.contentAttr=function ct(Je){return"_ngcontent-%COMP%".replace(_t,Je)}(Kn),this.hostAttr=function bt(Je){return"_nghost-%COMP%".replace(_t,Je)}(Kn)}applyToHost(ot){this.applyStyles(),this.setAttribute(ot,this.hostAttr,"")}createElement(ot,Fe){const ht=super.createElement(ot,Fe);return super.setAttribute(ht,this.contentAttr,""),ht}}let Et=(()=>{class Je extends an{constructor(Fe){super(Fe)}supports(Fe){return!0}addEventListener(Fe,ht,Yt){return Fe.addEventListener(ht,Yt,!1),()=>this.removeEventListener(Fe,ht,Yt)}removeEventListener(Fe,ht,Yt){return Fe.removeEventListener(ht,Yt)}}return Je.\u0275fac=function(Fe){return new(Fe||Je)(_.LFG(f.K0))},Je.\u0275prov=_.Yz7({token:Je,factory:Je.\u0275fac}),Je})();const rn=["alt","control","meta","shift"],Zt={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},_n={alt:Je=>Je.altKey,control:Je=>Je.ctrlKey,meta:Je=>Je.metaKey,shift:Je=>Je.shiftKey};let sn=(()=>{class Je extends an{constructor(Fe){super(Fe)}supports(Fe){return null!=Je.parseEventName(Fe)}addEventListener(Fe,ht,Yt){const un=Je.parseEventName(ht),Kn=Je.eventCallback(un.fullKey,Yt,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,f.q)().onAndCancel(Fe,un.domEventName,Kn))}static parseEventName(Fe){const ht=Fe.toLowerCase().split("."),Yt=ht.shift();if(0===ht.length||"keydown"!==Yt&&"keyup"!==Yt)return null;const un=Je._normalizeKey(ht.pop());let Kn="",vi=ht.indexOf("code");if(vi>-1&&(ht.splice(vi,1),Kn="code."),rn.forEach(vs=>{const is=ht.indexOf(vs);is>-1&&(ht.splice(is,1),Kn+=vs+".")}),Kn+=un,0!=ht.length||0===un.length)return null;const yr={};return yr.domEventName=Yt,yr.fullKey=Kn,yr}static matchEventFullKeyCode(Fe,ht){let Yt=Zt[Fe.key]||Fe.key,un="";return ht.indexOf("code.")>-1&&(Yt=Fe.code,un="code."),!(null==Yt||!Yt)&&(Yt=Yt.toLowerCase()," "===Yt?Yt="space":"."===Yt&&(Yt="dot"),rn.forEach(Kn=>{Kn!==Yt&&(0,_n[Kn])(Fe)&&(un+=Kn+".")}),un+=Yt,un===ht)}static eventCallback(Fe,ht,Yt){return un=>{Je.matchEventFullKeyCode(un,Fe)&&Yt.runGuarded(()=>ht(un))}}static _normalizeKey(Fe){return"esc"===Fe?"escape":Fe}}return Je.\u0275fac=function(Fe){return new(Fe||Je)(_.LFG(f.K0))},Je.\u0275prov=_.Yz7({token:Je,factory:Je.\u0275fac}),Je})();const Ai=(0,_.eFA)(_._c5,"browser",[{provide:_.Lbi,useValue:f.bD},{provide:_.g9A,useValue:function oi(){Te.makeCurrent()},multi:!0},{provide:f.K0,useFactory:function Cr(){return(0,_.RDi)(document),document},deps:[]}]),zn=new _.OlP(""),Mi=[{provide:_.rWj,useClass:class Ne{addToWindow(ot){_.dqk.getAngularTestability=(ht,Yt=!0)=>{const un=ot.findTestabilityInTree(ht,Yt);if(null==un)throw new Error("Could not find testability for element.");return un},_.dqk.getAllAngularTestabilities=()=>ot.getAllTestabilities(),_.dqk.getAllAngularRootElements=()=>ot.getAllRootElements(),_.dqk.frameworkStabilizers||(_.dqk.frameworkStabilizers=[]),_.dqk.frameworkStabilizers.push(ht=>{const Yt=_.dqk.getAllAngularTestabilities();let un=Yt.length,Kn=!1;const vi=function(yr){Kn=Kn||yr,un--,0==un&&ht(Kn)};Yt.forEach(function(yr){yr.whenStable(vi)})})}findTestabilityInTree(ot,Fe,ht){return null==Fe?null:ot.getTestability(Fe)??(ht?(0,f.q)().isShadowRoot(Fe)?this.findTestabilityInTree(ot,Fe.host,!0):this.findTestabilityInTree(ot,Fe.parentElement,!0):null)}},deps:[]},{provide:_.lri,useClass:_.dDg,deps:[_.R0b,_.eoX,_.rWj]},{provide:_.dDg,useClass:_.dDg,deps:[_.R0b,_.eoX,_.rWj]}],Tn=[{provide:_.zSh,useValue:"root"},{provide:_.qLn,useFactory:function Pi(){return new _.qLn},deps:[]},{provide:pt,useClass:Et,multi:!0,deps:[f.K0,_.R0b,_.Lbi]},{provide:pt,useClass:sn,multi:!0,deps:[f.K0]},{provide:vn,useClass:vn,deps:[Lt,Mt,_.AFp,z]},{provide:_.FYo,useExisting:vn},{provide:It,useExisting:Mt},{provide:Mt,useClass:Mt,deps:[f.K0]},{provide:Lt,useClass:Lt,deps:[pt,_.R0b]},{provide:f.JF,useClass:yt,deps:[]},[]];let Ji=(()=>{class Je{constructor(Fe){}static withServerTransition(Fe){return{ngModule:Je,providers:[{provide:_.AFp,useValue:Fe.appId},{provide:ze,useExisting:_.AFp},Me]}}}return Je.\u0275fac=function(Fe){return new(Fe||Je)(_.LFG(zn,12))},Je.\u0275mod=_.oAB({type:Je}),Je.\u0275inj=_.cJS({providers:[...Tn,...Mi],imports:[f.ez,_.hGG]}),Je})(),Hn=(()=>{class Je{constructor(Fe){this._doc=Fe}getTitle(){return this._doc.title}setTitle(Fe){this._doc.title=Fe||""}}return Je.\u0275fac=function(Fe){return new(Fe||Je)(_.LFG(f.K0))},Je.\u0275prov=_.Yz7({token:Je,factory:function(Fe){let ht=null;return ht=Fe?new Fe:function Pr(){return new Hn((0,_.LFG)(f.K0))}(),ht},providedIn:"root"}),Je})();typeof window<"u"&&window;let it=(()=>{class Je{}return Je.\u0275fac=function(Fe){return new(Fe||Je)},Je.\u0275prov=_.Yz7({token:Je,factory:function(Fe){let ht=null;return ht=Fe?new(Fe||Je):_.LFG(St),ht},providedIn:"root"}),Je})(),St=(()=>{class Je extends it{constructor(Fe){super(),this._doc=Fe}sanitize(Fe,ht){if(null==ht)return null;switch(Fe){case _.q3G.NONE:return ht;case _.q3G.HTML:return(0,_.qzn)(ht,"HTML")?(0,_.z3N)(ht):(0,_.EiD)(this._doc,String(ht)).toString();case _.q3G.STYLE:return(0,_.qzn)(ht,"Style")?(0,_.z3N)(ht):ht;case _.q3G.SCRIPT:if((0,_.qzn)(ht,"Script"))return(0,_.z3N)(ht);throw new Error("unsafe value used in a script context");case _.q3G.URL:return(0,_.qzn)(ht,"URL")?(0,_.z3N)(ht):(0,_.mCW)(String(ht));case _.q3G.RESOURCE_URL:if((0,_.qzn)(ht,"ResourceURL"))return(0,_.z3N)(ht);throw new Error(`unsafe value used in a resource URL context (see ${_.JZr})`);default:throw new Error(`Unexpected SecurityContext ${Fe} (see ${_.JZr})`)}}bypassSecurityTrustHtml(Fe){return(0,_.JVY)(Fe)}bypassSecurityTrustStyle(Fe){return(0,_.L6k)(Fe)}bypassSecurityTrustScript(Fe){return(0,_.eBb)(Fe)}bypassSecurityTrustUrl(Fe){return(0,_.LAX)(Fe)}bypassSecurityTrustResourceUrl(Fe){return(0,_.pB0)(Fe)}}return Je.\u0275fac=function(Fe){return new(Fe||Je)(_.LFG(f.K0))},Je.\u0275prov=_.Yz7({token:Je,factory:function(Fe){let ht=null;return ht=Fe?new Fe:function qt(Je){return new St(Je.get(f.K0))}(_.LFG(_.zs3)),ht},providedIn:"root"}),Je})()},7799:(wn,dt,L)=>{L.d(dt,{F0:()=>Lr,rH:()=>po,Bz:()=>Gl,lC:()=>Bs});var f=L(4650),_=L(8996),re=L(9646),Te=L(1135),ke=L(6805),He=L(9841),Ze=L(7272),xe=L(9770),ze=L(9635),pe=L(2843),Me=L(9751),Ne=L(515),yt=L(727),pt=L(4482),Lt=L(5403);function an(){return(0,pt.e)((p,a)=>{let h=null;p._refCount++;const T=(0,Lt.x)(a,void 0,void 0,void 0,()=>{if(!p||p._refCount<=0||0<--p._refCount)return void(h=null);const P=p._connection,X=h;h=null,P&&(!X||P===X)&&P.unsubscribe(),a.unsubscribe()});p.subscribe(T),T.closed||(h=p.connect())})}class It extends Me.y{constructor(a,h){super(),this.source=a,this.subjectFactory=h,this._subject=null,this._refCount=0,this._connection=null,(0,pt.A)(a)&&(this.lift=a.lift)}_subscribe(a){return this.getSubject().subscribe(a)}getSubject(){const a=this._subject;return(!a||a.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:a}=this;this._subject=this._connection=null,a?.unsubscribe()}connect(){let a=this._connection;if(!a){a=this._connection=new yt.w0;const h=this.getSubject();a.add(this.source.subscribe((0,Lt.x)(h,void 0,()=>{this._teardown(),h.complete()},T=>{this._teardown(),h.error(T)},()=>this._teardown()))),a.closed&&(this._connection=null,a=yt.w0.EMPTY)}return a}refCount(){return an()(this)}}var Mt=L(7579),Ae=L(6895),_t=L(4004),Qe=L(3900),Ue=L(5698),lt=L(8675),kt=L(9300),Ye=L(5577),z=L(590),ct=L(4351),bt=L(8505),Ft=L(262),gn=L(5026);function vn(p){return p<=0?()=>Ne.E:(0,pt.e)((a,h)=>{let T=[];a.subscribe((0,Lt.x)(h,P=>{T.push(P),p<T.length&&T.shift()},()=>{for(const P of T)h.next(P);h.complete()},void 0,()=>{T=null}))})}var Pt=L(8068),Ht=L(6590),Ot=L(4671);function jt(p,a){const h=arguments.length>=2;return T=>T.pipe(p?(0,kt.h)((P,X)=>p(P,X,T)):Ot.y,vn(1),h?(0,Ht.d)(a):(0,Pt.T)(()=>new ke.K))}var Tt=L(9718),Ut=L(8746),Et=L(8189),rn=L(1481);const Zt="primary",_n=Symbol("RouteTitle");class sn{constructor(a){this.params=a||{}}has(a){return Object.prototype.hasOwnProperty.call(this.params,a)}get(a){if(this.has(a)){const h=this.params[a];return Array.isArray(h)?h[0]:h}return null}getAll(a){if(this.has(a)){const h=this.params[a];return Array.isArray(h)?h:[h]}return[]}get keys(){return Object.keys(this.params)}}function bn(p){return new sn(p)}function fi(p,a,h){const T=h.path.split("/");if(T.length>p.length||"full"===h.pathMatch&&(a.hasChildren()||T.length<p.length))return null;const P={};for(let X=0;X<T.length;X++){const ce=T[X],We=p[X];if(ce.startsWith(":"))P[ce.substring(1)]=We;else if(ce!==We.path)return null}return{consumed:p.slice(0,T.length),posParams:P}}function Bn(p,a){const h=p?Object.keys(p):void 0,T=a?Object.keys(a):void 0;if(!h||!T||h.length!=T.length)return!1;let P;for(let X=0;X<h.length;X++)if(P=h[X],!Qn(p[P],a[P]))return!1;return!0}function Qn(p,a){if(Array.isArray(p)&&Array.isArray(a)){if(p.length!==a.length)return!1;const h=[...p].sort(),T=[...a].sort();return h.every((P,X)=>T[X]===P)}return p===a}function oi(p){return Array.prototype.concat.apply([],p)}function Pi(p){return p.length>0?p[p.length-1]:null}function ii(p,a){for(const h in p)p.hasOwnProperty(h)&&a(p[h],h)}function Ai(p){return(0,f.CqO)(p)?p:(0,f.QGY)(p)?(0,_.D)(Promise.resolve(p)):(0,re.of)(p)}const zn=!1,Mi={exact:function Gn(p,a,h){if(!Vi(p.segments,a.segments)||!Pn(p.segments,a.segments,h)||p.numberOfChildren!==a.numberOfChildren)return!1;for(const T in a.children)if(!p.children[T]||!Gn(p.children[T],a.children[T],h))return!1;return!0},subset:Pr},Tn={exact:function ri(p,a){return Bn(p,a)},subset:function Yi(p,a){return Object.keys(a).length<=Object.keys(p).length&&Object.keys(a).every(h=>Qn(p[h],a[h]))},ignored:()=>!0};function Ji(p,a,h){return Mi[h.paths](p.root,a.root,h.matrixParams)&&Tn[h.queryParams](p.queryParams,a.queryParams)&&!("exact"===h.fragment&&p.fragment!==a.fragment)}function Pr(p,a,h){return Hn(p,a,a.segments,h)}function Hn(p,a,h,T){if(p.segments.length>h.length){const P=p.segments.slice(0,h.length);return!(!Vi(P,h)||a.hasChildren()||!Pn(P,h,T))}if(p.segments.length===h.length){if(!Vi(p.segments,h)||!Pn(p.segments,h,T))return!1;for(const P in a.children)if(!p.children[P]||!Pr(p.children[P],a.children[P],T))return!1;return!0}{const P=h.slice(0,p.segments.length),X=h.slice(p.segments.length);return!!(Vi(p.segments,P)&&Pn(p.segments,P,T)&&p.children[Zt])&&Hn(p.children[Zt],a,X,T)}}function Pn(p,a,h){return a.every((T,P)=>Tn[h](p[P].parameters,T.parameters))}class On{constructor(a=new Nn([],{}),h={},T=null){this.root=a,this.queryParams=h,this.fragment=T}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=bn(this.queryParams)),this._queryParamMap}toString(){return $r.serialize(this)}}class Nn{constructor(a,h){this.segments=a,this.children=h,this.parent=null,ii(h,(T,P)=>T.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return $n(this)}}class Ni{constructor(a,h){this.path=a,this.parameters=h}get parameterMap(){return this._parameterMap||(this._parameterMap=bn(this.parameters)),this._parameterMap}toString(){return rt(this)}}function Vi(p,a){return p.length===a.length&&p.every((h,T)=>h.path===a[T].path)}let er=(()=>{class p{}return p.\u0275fac=function(h){return new(h||p)},p.\u0275prov=f.Yz7({token:p,factory:function(){return new Fi},providedIn:"root"}),p})();class Fi{parse(a){const h=new ot(a);return new On(h.parseRootSegment(),h.parseQueryParams(),h.parseFragment())}serialize(a){const h=`/${Oi(a.root,!0)}`,T=function Le(p){const a=Object.keys(p).map(h=>{const T=p[h];return Array.isArray(T)?T.map(P=>`${be(h)}=${be(P)}`).join("&"):`${be(h)}=${be(T)}`}).filter(h=>!!h);return a.length?`?${a.join("&")}`:""}(a.queryParams);return`${h}${T}${"string"==typeof a.fragment?`#${function $(p){return encodeURI(p)}(a.fragment)}`:""}`}}const $r=new Fi;function $n(p){return p.segments.map(a=>rt(a)).join("/")}function Oi(p,a){if(!p.hasChildren())return $n(p);if(a){const h=p.children[Zt]?Oi(p.children[Zt],!1):"",T=[];return ii(p.children,(P,X)=>{X!==Zt&&T.push(`${X}:${Oi(P,!1)}`)}),T.length>0?`${h}(${T.join("//")})`:h}{const h=function gr(p,a){let h=[];return ii(p.children,(T,P)=>{P===Zt&&(h=h.concat(a(T,P)))}),ii(p.children,(T,P)=>{P!==Zt&&(h=h.concat(a(T,P)))}),h}(p,(T,P)=>P===Zt?[Oi(p.children[Zt],!1)]:[`${P}:${Oi(T,!1)}`]);return 1===Object.keys(p.children).length&&null!=p.children[Zt]?`${$n(p)}/${h[0]}`:`${$n(p)}/(${h.join("//")})`}}function dn(p){return encodeURIComponent(p).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function be(p){return dn(p).replace(/%3B/gi,";")}function ne(p){return dn(p).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function de(p){return decodeURIComponent(p)}function ye(p){return de(p.replace(/\+/g,"%20"))}function rt(p){return`${ne(p.path)}${function Nt(p){return Object.keys(p).map(a=>`;${ne(a)}=${ne(p[a])}`).join("")}(p.parameters)}`}const Be=/^[^\/()?;=#]+/;function it(p){const a=p.match(Be);return a?a[0]:""}const qt=/^[^=?&#]+/,Mn=/^[^&#]+/;class ot{constructor(a){this.url=a,this.remaining=a}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Nn([],{}):new Nn([],this.parseChildren())}parseQueryParams(){const a={};if(this.consumeOptional("?"))do{this.parseQueryParam(a)}while(this.consumeOptional("&"));return a}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const a=[];for(this.peekStartsWith("(")||a.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),a.push(this.parseSegment());let h={};this.peekStartsWith("/(")&&(this.capture("/"),h=this.parseParens(!0));let T={};return this.peekStartsWith("(")&&(T=this.parseParens(!1)),(a.length>0||Object.keys(h).length>0)&&(T[Zt]=new Nn(a,h)),T}parseSegment(){const a=it(this.remaining);if(""===a&&this.peekStartsWith(";"))throw new f.vHH(4009,zn);return this.capture(a),new Ni(de(a),this.parseMatrixParams())}parseMatrixParams(){const a={};for(;this.consumeOptional(";");)this.parseParam(a);return a}parseParam(a){const h=it(this.remaining);if(!h)return;this.capture(h);let T="";if(this.consumeOptional("=")){const P=it(this.remaining);P&&(T=P,this.capture(T))}a[de(h)]=de(T)}parseQueryParam(a){const h=function St(p){const a=p.match(qt);return a?a[0]:""}(this.remaining);if(!h)return;this.capture(h);let T="";if(this.consumeOptional("=")){const ce=function Je(p){const a=p.match(Mn);return a?a[0]:""}(this.remaining);ce&&(T=ce,this.capture(T))}const P=ye(h),X=ye(T);if(a.hasOwnProperty(P)){let ce=a[P];Array.isArray(ce)||(ce=[ce],a[P]=ce),ce.push(X)}else a[P]=X}parseParens(a){const h={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const T=it(this.remaining),P=this.remaining[T.length];if("/"!==P&&")"!==P&&";"!==P)throw new f.vHH(4010,zn);let X;T.indexOf(":")>-1?(X=T.slice(0,T.indexOf(":")),this.capture(X),this.capture(":")):a&&(X=Zt);const ce=this.parseChildren();h[X]=1===Object.keys(ce).length?ce[Zt]:new Nn([],ce),this.consumeOptional("//")}return h}peekStartsWith(a){return this.remaining.startsWith(a)}consumeOptional(a){return!!this.peekStartsWith(a)&&(this.remaining=this.remaining.substring(a.length),!0)}capture(a){if(!this.consumeOptional(a))throw new f.vHH(4011,zn)}}function Fe(p){return p.segments.length>0?new Nn([],{[Zt]:p}):p}function ht(p){const a={};for(const T of Object.keys(p.children)){const X=ht(p.children[T]);(X.segments.length>0||X.hasChildren())&&(a[T]=X)}return function Yt(p){if(1===p.numberOfChildren&&p.children[Zt]){const a=p.children[Zt];return new Nn(p.segments.concat(a.segments),a.children)}return p}(new Nn(p.segments,a))}function un(p){return p instanceof On}const Kn=!1;function is(p,a,h,T,P){if(0===h.length)return Tr(a.root,a.root,a.root,T,P);const X=function rs(p){if("string"==typeof p[0]&&1===p.length&&"/"===p[0])return new Cs(!0,0,p);let a=0,h=!1;const T=p.reduce((P,X,ce)=>{if("object"==typeof X&&null!=X){if(X.outlets){const We={};return ii(X.outlets,(mt,on)=>{We[on]="string"==typeof mt?mt.split("/"):mt}),[...P,{outlets:We}]}if(X.segmentPath)return[...P,X.segmentPath]}return"string"!=typeof X?[...P,X]:0===ce?(X.split("/").forEach((We,mt)=>{0==mt&&"."===We||(0==mt&&""===We?h=!0:".."===We?a++:""!=We&&P.push(We))}),P):[...P,X]},[]);return new Cs(h,a,T)}(h);return X.toRoot()?Tr(a.root,a.root,new Nn([],{}),T,P):function ce(mt){const on=function Dr(p,a,h,T){if(p.isAbsolute)return new Qi(a.root,!0,0);if(-1===T)return new Qi(h,h===a.root,0);return function ps(p,a,h){let T=p,P=a,X=h;for(;X>P;){if(X-=P,T=T.parent,!T)throw new f.vHH(4005,Kn&&"Invalid number of '../'");P=T.segments.length}return new Qi(T,!1,P-X)}(h,T+(Gr(p.commands[0])?0:1),p.numberOfDoubleDots)}(X,a,p.snapshot?._urlSegment,mt),ln=on.processChildren?Vt(on.segmentGroup,on.index,X.commands):wr(on.segmentGroup,on.index,X.commands);return Tr(a.root,on.segmentGroup,ln,T,P)}(p.snapshot?._lastPathIndex)}function Gr(p){return"object"==typeof p&&null!=p&&!p.outlets&&!p.segmentPath}function os(p){return"object"==typeof p&&null!=p&&p.outlets}function Tr(p,a,h,T,P){let ce,X={};T&&ii(T,(mt,on)=>{X[on]=Array.isArray(mt)?mt.map(ln=>`${ln}`):`${mt}`}),ce=p===a?h:ji(p,a,h);const We=Fe(ht(ce));return new On(We,X,P)}function ji(p,a,h){const T={};return ii(p.children,(P,X)=>{T[X]=P===a?h:ji(P,a,h)}),new Nn(p.segments,T)}class Cs{constructor(a,h,T){if(this.isAbsolute=a,this.numberOfDoubleDots=h,this.commands=T,a&&T.length>0&&Gr(T[0]))throw new f.vHH(4003,Kn&&"Root segment cannot have matrix parameters");const P=T.find(os);if(P&&P!==Pi(T))throw new f.vHH(4004,Kn&&"{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Qi{constructor(a,h,T){this.segmentGroup=a,this.processChildren=h,this.index=T}}function wr(p,a,h){if(p||(p=new Nn([],{})),0===p.segments.length&&p.hasChildren())return Vt(p,a,h);const T=function et(p,a,h){let T=0,P=a;const X={match:!1,pathIndex:0,commandIndex:0};for(;P<p.segments.length;){if(T>=h.length)return X;const ce=p.segments[P],We=h[T];if(os(We))break;const mt=`${We}`,on=T<h.length-1?h[T+1]:null;if(P>0&&void 0===mt)break;if(mt&&on&&"object"==typeof on&&void 0===on.outlets){if(!Kt(mt,on,ce))return X;T+=2}else{if(!Kt(mt,{},ce))return X;T++}P++}return{match:!0,pathIndex:P,commandIndex:T}}(p,a,h),P=h.slice(T.commandIndex);if(T.match&&T.pathIndex<p.segments.length){const X=new Nn(p.segments.slice(0,T.pathIndex),{});return X.children[Zt]=new Nn(p.segments.slice(T.pathIndex),p.children),Vt(X,0,P)}return T.match&&0===P.length?new Nn(p.segments,{}):T.match&&!p.hasChildren()?Pe(p,a,h):T.match?Vt(p,0,P):Pe(p,a,h)}function Vt(p,a,h){if(0===h.length)return new Nn(p.segments,{});{const T=function Ar(p){return os(p[0])?p[0].outlets:{[Zt]:p}}(h),P={};return!T[Zt]&&p.children[Zt]&&1===p.numberOfChildren&&0===p.children[Zt].segments.length?Vt(p.children[Zt],a,h):(ii(T,(X,ce)=>{"string"==typeof X&&(X=[X]),null!==X&&(P[ce]=wr(p.children[ce],a,X))}),ii(p.children,(X,ce)=>{void 0===T[ce]&&(P[ce]=X)}),new Nn(p.segments,P))}}function Pe(p,a,h){const T=p.segments.slice(0,a);let P=0;for(;P<h.length;){const X=h[P];if(os(X)){const mt=Ge(X.outlets);return new Nn(T,mt)}if(0===P&&Gr(h[0])){T.push(new Ni(p.segments[a].path,vt(h[0]))),P++;continue}const ce=os(X)?X.outlets[Zt]:`${X}`,We=P<h.length-1?h[P+1]:null;ce&&We&&Gr(We)?(T.push(new Ni(ce,vt(We))),P+=2):(T.push(new Ni(ce,{})),P++)}return new Nn(T,{})}function Ge(p){const a={};return ii(p,(h,T)=>{"string"==typeof h&&(h=[h]),null!==h&&(a[T]=Pe(new Nn([],{}),0,h))}),a}function vt(p){const a={};return ii(p,(h,T)=>a[T]=`${h}`),a}function Kt(p,a,h){return p==h.path&&Bn(a,h.parameters)}const Dn="imperative";class st{constructor(a,h){this.id=a,this.url=h}}class nt extends st{constructor(a,h,T="imperative",P=null){super(a,h),this.type=0,this.navigationTrigger=T,this.restoredState=P}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class wt extends st{constructor(a,h,T){super(a,h),this.urlAfterRedirects=T,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Bt extends st{constructor(a,h,T,P){super(a,h),this.reason=T,this.code=P,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class mn extends st{constructor(a,h,T,P){super(a,h),this.reason=T,this.code=P,this.type=16}}class Wn extends st{constructor(a,h,T,P){super(a,h),this.error=T,this.target=P,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class xn extends st{constructor(a,h,T,P){super(a,h),this.urlAfterRedirects=T,this.state=P,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class _r extends st{constructor(a,h,T,P){super(a,h),this.urlAfterRedirects=T,this.state=P,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ii extends st{constructor(a,h,T,P,X){super(a,h),this.urlAfterRedirects=T,this.state=P,this.shouldActivate=X,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class ms extends st{constructor(a,h,T,P){super(a,h),this.urlAfterRedirects=T,this.state=P,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class As extends st{constructor(a,h,T,P){super(a,h),this.urlAfterRedirects=T,this.state=P,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class dr{constructor(a){this.route=a,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Qs{constructor(a){this.route=a,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class bs{constructor(a){this.snapshot=a,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Vr{constructor(a){this.snapshot=a,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Qr{constructor(a){this.snapshot=a,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ao{constructor(a){this.snapshot=a,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ci{constructor(a,h,T){this.routerEvent=a,this.position=h,this.anchor=T,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let or=(()=>{class p{createUrlTree(h,T,P,X,ce,We){return is(h||T.root,P,X,ce,We)}}return p.\u0275fac=function(h){return new(h||p)},p.\u0275prov=f.Yz7({token:p,factory:p.\u0275fac}),p})(),wi=(()=>{class p{}return p.\u0275fac=function(h){return new(h||p)},p.\u0275prov=f.Yz7({token:p,factory:function(a){return or.\u0275fac(a)},providedIn:"root"}),p})();class Xn{constructor(a){this._root=a}get root(){return this._root.value}parent(a){const h=this.pathFromRoot(a);return h.length>1?h[h.length-2]:null}children(a){const h=cr(a,this._root);return h?h.children.map(T=>T.value):[]}firstChild(a){const h=cr(a,this._root);return h&&h.children.length>0?h.children[0].value:null}siblings(a){const h=xo(a,this._root);return h.length<2?[]:h[h.length-2].children.map(P=>P.value).filter(P=>P!==a)}pathFromRoot(a){return xo(a,this._root).map(h=>h.value)}}function cr(p,a){if(p===a.value)return a;for(const h of a.children){const T=cr(p,h);if(T)return T}return null}function xo(p,a){if(p===a.value)return[a];for(const h of a.children){const T=xo(p,h);if(T.length)return T.unshift(a),T}return[]}class Li{constructor(a,h){this.value=a,this.children=h}toString(){return`TreeNode(${this.value})`}}function ar(p){const a={};return p&&p.children.forEach(h=>a[h.value.outlet]=h),a}class vr extends Xn{constructor(a,h){super(a),this.snapshot=h,Ws(this,a)}toString(){return this.snapshot.toString()}}function Ti(p,a){const h=function nr(p,a){const ce=new zi([],{},{},"",{},Zt,a,null,p.root,-1,{});return new Ms("",new Li(ce,[]))}(p,a),T=new Te.X([new Ni("",{})]),P=new Te.X({}),X=new Te.X({}),ce=new Te.X({}),We=new Te.X(""),mt=new Or(T,P,ce,We,X,Zt,a,h.root);return mt.snapshot=h.root,new vr(new Li(mt,[]),h)}class Or{constructor(a,h,T,P,X,ce,We,mt){this.url=a,this.params=h,this.queryParams=T,this.fragment=P,this.data=X,this.outlet=ce,this.component=We,this.title=this.data?.pipe((0,_t.U)(on=>on[_n]))??(0,re.of)(void 0),this._futureSnapshot=mt}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,_t.U)(a=>bn(a)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,_t.U)(a=>bn(a)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Us(p,a="emptyOnly"){const h=p.pathFromRoot;let T=0;if("always"!==a)for(T=h.length-1;T>=1;){const P=h[T],X=h[T-1];if(P.routeConfig&&""===P.routeConfig.path)T--;else{if(X.component)break;T--}}return function as(p){return p.reduce((a,h)=>({params:{...a.params,...h.params},data:{...a.data,...h.data},resolve:{...h.data,...a.resolve,...h.routeConfig?.data,...h._resolvedData}}),{params:{},data:{},resolve:{}})}(h.slice(T))}class zi{get title(){return this.data?.[_n]}constructor(a,h,T,P,X,ce,We,mt,on,ln,Un){this.url=a,this.params=h,this.queryParams=T,this.fragment=P,this.data=X,this.outlet=ce,this.component=We,this.routeConfig=mt,this._urlSegment=on,this._lastPathIndex=ln,this._resolve=Un}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=bn(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=bn(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(T=>T.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Ms extends Xn{constructor(a,h){super(h),this.url=a,Ws(this,h)}toString(){return Ao(this._root)}}function Ws(p,a){a.value._routerState=p,a.children.forEach(h=>Ws(p,h))}function Ao(p){const a=p.children.length>0?` { ${p.children.map(Ao).join(", ")} } `:"";return`${p.value}${a}`}function bo(p){if(p.snapshot){const a=p.snapshot,h=p._futureSnapshot;p.snapshot=h,Bn(a.queryParams,h.queryParams)||p.queryParams.next(h.queryParams),a.fragment!==h.fragment&&p.fragment.next(h.fragment),Bn(a.params,h.params)||p.params.next(h.params),function ui(p,a){if(p.length!==a.length)return!1;for(let h=0;h<p.length;++h)if(!Bn(p[h],a[h]))return!1;return!0}(a.url,h.url)||p.url.next(h.url),Bn(a.data,h.data)||p.data.next(h.data)}else p.snapshot=p._futureSnapshot,p.data.next(p._futureSnapshot.data)}function qo(p,a){const h=Bn(p.params,a.params)&&function Hi(p,a){return Vi(p,a)&&p.every((h,T)=>Bn(h.parameters,a[T].parameters))}(p.url,a.url);return h&&!(!p.parent!=!a.parent)&&(!p.parent||qo(p.parent,a.parent))}function Vs(p,a,h){if(h&&p.shouldReuseRoute(a.value,h.value.snapshot)){const T=h.value;T._futureSnapshot=a.value;const P=function ko(p,a,h){return a.children.map(T=>{for(const P of h.children)if(p.shouldReuseRoute(T.value,P.value.snapshot))return Vs(p,T,P);return Vs(p,T)})}(p,a,h);return new Li(T,P)}{if(p.shouldAttach(a.value)){const X=p.retrieve(a.value);if(null!==X){const ce=X.route;return ce.value._futureSnapshot=a.value,ce.children=a.children.map(We=>Vs(p,We)),ce}}const T=function Xr(p){return new Or(new Te.X(p.url),new Te.X(p.params),new Te.X(p.queryParams),new Te.X(p.fragment),new Te.X(p.data),p.outlet,p.component,p)}(a.value),P=a.children.map(X=>Vs(p,X));return new Li(T,P)}}const Di="ngNavigationCancelingError";function Xs(p,a){const{redirectTo:h,navigationBehaviorOptions:T}=un(a)?{redirectTo:a,navigationBehaviorOptions:void 0}:a,P=us(!1,0,a);return P.url=h,P.navigationBehaviorOptions=T,P}function us(p,a,h){const T=new Error("NavigationCancelingError: "+(p||""));return T[Di]=!0,T.cancellationCode=a,h&&(T.url=h),T}function kr(p){return ir(p)&&un(p.url)}function ir(p){return p&&p[Di]}class Rs{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new gs,this.attachRef=null}}let gs=(()=>{class p{constructor(){this.contexts=new Map}onChildOutletCreated(h,T){const P=this.getOrCreateContext(h);P.outlet=T,this.contexts.set(h,P)}onChildOutletDestroyed(h){const T=this.getContext(h);T&&(T.outlet=null,T.attachRef=null)}onOutletDeactivated(){const h=this.contexts;return this.contexts=new Map,h}onOutletReAttached(h){this.contexts=h}getOrCreateContext(h){let T=this.getContext(h);return T||(T=new Rs,this.contexts.set(h,T)),T}getContext(h){return this.contexts.get(h)||null}}return p.\u0275fac=function(h){return new(h||p)},p.\u0275prov=f.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"}),p})();const Js=!1;let Bs=(()=>{class p{constructor(){this.activated=null,this._activatedRoute=null,this.name=Zt,this.activateEvents=new f.vpe,this.deactivateEvents=new f.vpe,this.attachEvents=new f.vpe,this.detachEvents=new f.vpe,this.parentContexts=(0,f.f3M)(gs),this.location=(0,f.f3M)(f.s_b),this.changeDetector=(0,f.f3M)(f.sBO),this.environmentInjector=(0,f.f3M)(f.lqb)}ngOnChanges(h){if(h.name){const{firstChange:T,previousValue:P}=h.name;if(T)return;this.isTrackedInParentContexts(P)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(P)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(h){return this.parentContexts.getContext(h)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const h=this.parentContexts.getContext(this.name);h?.route&&(h.attachRef?this.attach(h.attachRef,h.route):this.activateWith(h.route,h.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new f.vHH(4012,Js);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new f.vHH(4012,Js);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new f.vHH(4012,Js);this.location.detach();const h=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(h.instance),h}attach(h,T){this.activated=h,this._activatedRoute=T,this.location.insert(h.hostView),this.attachEvents.emit(h.instance)}deactivate(){if(this.activated){const h=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(h)}}activateWith(h,T){if(this.isActivated)throw new f.vHH(4013,Js);this._activatedRoute=h;const P=this.location,ce=h.snapshot.component,We=this.parentContexts.getOrCreateContext(this.name).children,mt=new Hs(h,We,P.injector);if(T&&function Ks(p){return!!p.resolveComponentFactory}(T)){const on=T.resolveComponentFactory(ce);this.activated=P.createComponent(on,P.length,mt)}else this.activated=P.createComponent(ce,{index:P.length,injector:mt,environmentInjector:T??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return p.\u0275fac=function(h){return new(h||p)},p.\u0275dir=f.lG2({type:p,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[f.TTD]}),p})();class Hs{constructor(a,h,T){this.route=a,this.childContexts=h,this.parent=T}get(a,h){return a===Or?this.route:a===gs?this.childContexts:this.parent.get(a,h)}}let lo=(()=>{class p{}return p.\u0275fac=function(h){return new(h||p)},p.\u0275cmp=f.Xpm({type:p,selectors:[["ng-component"]],standalone:!0,features:[f.jDz],decls:1,vars:0,template:function(h,T){1&h&&f._UZ(0,"router-outlet")},dependencies:[Bs],encapsulation:2}),p})();function Zr(p,a){return p.providers&&!p._injector&&(p._injector=(0,f.MMx)(p.providers,a,`Route: ${p.path}`)),p._injector??a}function ho(p){const a=p.children&&p.children.map(ho),h=a?{...p,children:a}:{...p};return!h.component&&!h.loadComponent&&(a||h.loadChildren)&&h.outlet&&h.outlet!==Zt&&(h.component=lo),h}function Kr(p){return p.outlet||Zt}function rr(p,a){const h=p.filter(T=>Kr(T)===a);return h.push(...p.filter(T=>Kr(T)!==a)),h}function _o(p){if(!p)return null;if(p.routeConfig?._injector)return p.routeConfig._injector;for(let a=p.parent;a;a=a.parent){const h=a.routeConfig;if(h?._loadedInjector)return h._loadedInjector;if(h?._injector)return h._injector}return null}class Bi{constructor(a,h,T,P){this.routeReuseStrategy=a,this.futureState=h,this.currState=T,this.forwardEvent=P}activate(a){const h=this.futureState._root,T=this.currState?this.currState._root:null;this.deactivateChildRoutes(h,T,a),bo(this.futureState.root),this.activateChildRoutes(h,T,a)}deactivateChildRoutes(a,h,T){const P=ar(h);a.children.forEach(X=>{const ce=X.value.outlet;this.deactivateRoutes(X,P[ce],T),delete P[ce]}),ii(P,(X,ce)=>{this.deactivateRouteAndItsChildren(X,T)})}deactivateRoutes(a,h,T){const P=a.value,X=h?h.value:null;if(P===X)if(P.component){const ce=T.getContext(P.outlet);ce&&this.deactivateChildRoutes(a,h,ce.children)}else this.deactivateChildRoutes(a,h,T);else X&&this.deactivateRouteAndItsChildren(h,T)}deactivateRouteAndItsChildren(a,h){a.value.component&&this.routeReuseStrategy.shouldDetach(a.value.snapshot)?this.detachAndStoreRouteSubtree(a,h):this.deactivateRouteAndOutlet(a,h)}detachAndStoreRouteSubtree(a,h){const T=h.getContext(a.value.outlet),P=T&&a.value.component?T.children:h,X=ar(a);for(const ce of Object.keys(X))this.deactivateRouteAndItsChildren(X[ce],P);if(T&&T.outlet){const ce=T.outlet.detach(),We=T.children.onOutletDeactivated();this.routeReuseStrategy.store(a.value.snapshot,{componentRef:ce,route:a,contexts:We})}}deactivateRouteAndOutlet(a,h){const T=h.getContext(a.value.outlet),P=T&&a.value.component?T.children:h,X=ar(a);for(const ce of Object.keys(X))this.deactivateRouteAndItsChildren(X[ce],P);T&&(T.outlet&&(T.outlet.deactivate(),T.children.onOutletDeactivated()),T.attachRef=null,T.resolver=null,T.route=null)}activateChildRoutes(a,h,T){const P=ar(h);a.children.forEach(X=>{this.activateRoutes(X,P[X.value.outlet],T),this.forwardEvent(new ao(X.value.snapshot))}),a.children.length&&this.forwardEvent(new Vr(a.value.snapshot))}activateRoutes(a,h,T){const P=a.value,X=h?h.value:null;if(bo(P),P===X)if(P.component){const ce=T.getOrCreateContext(P.outlet);this.activateChildRoutes(a,h,ce.children)}else this.activateChildRoutes(a,h,T);else if(P.component){const ce=T.getOrCreateContext(P.outlet);if(this.routeReuseStrategy.shouldAttach(P.snapshot)){const We=this.routeReuseStrategy.retrieve(P.snapshot);this.routeReuseStrategy.store(P.snapshot,null),ce.children.onOutletReAttached(We.contexts),ce.attachRef=We.componentRef,ce.route=We.route.value,ce.outlet&&ce.outlet.attach(We.componentRef,We.route.value),bo(We.route.value),this.activateChildRoutes(a,null,ce.children)}else{const We=_o(P.snapshot),mt=We?.get(f._Vd)??null;ce.attachRef=null,ce.route=P,ce.resolver=mt,ce.injector=We,ce.outlet&&ce.outlet.activateWith(P,ce.injector),this.activateChildRoutes(a,null,ce.children)}}else this.activateChildRoutes(a,null,T)}}class Bo{constructor(a){this.path=a,this.route=this.path[this.path.length-1]}}class Mr{constructor(a,h){this.component=a,this.route=h}}function Es(p,a,h){const T=p._root;return Jr(T,a?a._root:null,h,[T.value])}function qs(p,a){const h=Symbol(),T=a.get(p,h);return T===h?"function"!=typeof p||(0,f.Z0I)(p)?a.get(p):p:T}function Jr(p,a,h,T,P={canDeactivateChecks:[],canActivateChecks:[]}){const X=ar(a);return p.children.forEach(ce=>{(function Io(p,a,h,T,P={canDeactivateChecks:[],canActivateChecks:[]}){const X=p.value,ce=a?a.value:null,We=h?h.getContext(p.value.outlet):null;if(ce&&X.routeConfig===ce.routeConfig){const mt=function ai(p,a,h){if("function"==typeof h)return h(p,a);switch(h){case"pathParamsChange":return!Vi(p.url,a.url);case"pathParamsOrQueryParamsChange":return!Vi(p.url,a.url)||!Bn(p.queryParams,a.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!qo(p,a)||!Bn(p.queryParams,a.queryParams);default:return!qo(p,a)}}(ce,X,X.routeConfig.runGuardsAndResolvers);mt?P.canActivateChecks.push(new Bo(T)):(X.data=ce.data,X._resolvedData=ce._resolvedData),Jr(p,a,X.component?We?We.children:null:h,T,P),mt&&We&&We.outlet&&We.outlet.isActivated&&P.canDeactivateChecks.push(new Mr(We.outlet.component,ce))}else ce&&fo(a,We,P),P.canActivateChecks.push(new Bo(T)),Jr(p,null,X.component?We?We.children:null:h,T,P)})(ce,X[ce.value.outlet],h,T.concat([ce.value]),P),delete X[ce.value.outlet]}),ii(X,(ce,We)=>fo(ce,h.getContext(We),P)),P}function fo(p,a,h){const T=ar(p),P=p.value;ii(T,(X,ce)=>{fo(X,P.component?a?a.children.getContext(ce):null:a,h)}),h.canDeactivateChecks.push(new Mr(P.component&&a&&a.outlet&&a.outlet.isActivated?a.outlet.component:null,P))}function _s(p){return"function"==typeof p}function tr(p){return p instanceof ke.K||"EmptyError"===p?.name}const pn=Symbol("INITIAL_VALUE");function Si(){return(0,Qe.w)(p=>(0,He.a)(p.map(a=>a.pipe((0,Ue.q)(1),(0,lt.O)(pn)))).pipe((0,_t.U)(a=>{for(const h of a)if(!0!==h){if(h===pn)return pn;if(!1===h||h instanceof On)return h}return!0}),(0,kt.h)(a=>a!==pn),(0,Ue.q)(1)))}function la(p){return(0,ze.z)((0,bt.b)(a=>{if(un(a))throw Xs(0,a)}),(0,_t.U)(a=>!0===a))}const Rr={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Os(p,a,h,T,P){const X=No(p,a,h);return X.matched?function ca(p,a,h,T){const P=a.canMatch;if(!P||0===P.length)return(0,re.of)(!0);const X=P.map(ce=>{const We=qs(ce,p);return Ai(function en(p){return p&&_s(p.canMatch)}(We)?We.canMatch(a,h):p.runInContext(()=>We(a,h)))});return(0,re.of)(X).pipe(Si(),la())}(T=Zr(a,T),a,h).pipe((0,_t.U)(ce=>!0===ce?X:{...Rr})):(0,re.of)(X)}function No(p,a,h){if(""===a.path)return"full"===a.pathMatch&&(p.hasChildren()||h.length>0)?{...Rr}:{matched:!0,consumedSegments:[],remainingSegments:h,parameters:{},positionalParamSegments:{}};const P=(a.matcher||fi)(h,p,a);if(!P)return{...Rr};const X={};ii(P.posParams,(We,mt)=>{X[mt]=We.path});const ce=P.consumed.length>0?{...X,...P.consumed[P.consumed.length-1].parameters}:X;return{matched:!0,consumedSegments:P.consumed,remainingSegments:h.slice(P.consumed.length),parameters:ce,positionalParamSegments:P.posParams??{}}}function Ho(p,a,h,T){if(h.length>0&&function Zs(p,a,h){return h.some(T=>jo(p,a,T)&&Kr(T)!==Zt)}(p,h,T)){const X=new Nn(a,function Co(p,a,h,T){const P={};P[Zt]=T,T._sourceSegment=p,T._segmentIndexShift=a.length;for(const X of h)if(""===X.path&&Kr(X)!==Zt){const ce=new Nn([],{});ce._sourceSegment=p,ce._segmentIndexShift=a.length,P[Kr(X)]=ce}return P}(p,a,T,new Nn(h,p.children)));return X._sourceSegment=p,X._segmentIndexShift=a.length,{segmentGroup:X,slicedSegments:[]}}if(0===h.length&&function ya(p,a,h){return h.some(T=>jo(p,a,T))}(p,h,T)){const X=new Nn(p.segments,function wo(p,a,h,T,P){const X={};for(const ce of T)if(jo(p,h,ce)&&!P[Kr(ce)]){const We=new Nn([],{});We._sourceSegment=p,We._segmentIndexShift=a.length,X[Kr(ce)]=We}return{...P,...X}}(p,a,h,T,p.children));return X._sourceSegment=p,X._segmentIndexShift=a.length,{segmentGroup:X,slicedSegments:h}}const P=new Nn(p.segments,p.children);return P._sourceSegment=p,P._segmentIndexShift=a.length,{segmentGroup:P,slicedSegments:h}}function jo(p,a,h){return(!(p.hasChildren()||a.length>0)||"full"!==h.pathMatch)&&""===h.path}function To(p,a,h,T){return!!(Kr(p)===T||T!==Zt&&jo(a,h,p))&&("**"===p.path||No(a,p,h).matched)}function Qo(p,a,h){return 0===a.length&&!p.children[h]}const La=!1;class zo{constructor(a){this.segmentGroup=a||null}}class El{constructor(a){this.urlTree=a}}function ds(p){return(0,pe._)(new zo(p))}function Ua(p){return(0,pe._)(new El(p))}class il{constructor(a,h,T,P,X){this.injector=a,this.configLoader=h,this.urlSerializer=T,this.urlTree=P,this.config=X,this.allowRedirects=!0}apply(){const a=Ho(this.urlTree.root,[],[],this.config).segmentGroup,h=new Nn(a.segments,a.children);return this.expandSegmentGroup(this.injector,this.config,h,Zt).pipe((0,_t.U)(X=>this.createUrlTree(ht(X),this.urlTree.queryParams,this.urlTree.fragment))).pipe((0,Ft.K)(X=>{if(X instanceof El)return this.allowRedirects=!1,this.match(X.urlTree);throw X instanceof zo?this.noMatchError(X):X}))}match(a){return this.expandSegmentGroup(this.injector,this.config,a.root,Zt).pipe((0,_t.U)(P=>this.createUrlTree(ht(P),a.queryParams,a.fragment))).pipe((0,Ft.K)(P=>{throw P instanceof zo?this.noMatchError(P):P}))}noMatchError(a){return new f.vHH(4002,La)}createUrlTree(a,h,T){const P=Fe(a);return new On(P,h,T)}expandSegmentGroup(a,h,T,P){return 0===T.segments.length&&T.hasChildren()?this.expandChildren(a,h,T).pipe((0,_t.U)(X=>new Nn([],X))):this.expandSegment(a,T,h,T.segments,P,!0)}expandChildren(a,h,T){const P=[];for(const X of Object.keys(T.children))"primary"===X?P.unshift(X):P.push(X);return(0,_.D)(P).pipe((0,ct.b)(X=>{const ce=T.children[X],We=rr(h,X);return this.expandSegmentGroup(a,We,ce,X).pipe((0,_t.U)(mt=>({segment:mt,outlet:X})))}),(0,gn.R)((X,ce)=>(X[ce.outlet]=ce.segment,X),{}),jt())}expandSegment(a,h,T,P,X,ce){return(0,_.D)(T).pipe((0,ct.b)(We=>this.expandSegmentAgainstRoute(a,h,T,We,P,X,ce).pipe((0,Ft.K)(on=>{if(on instanceof zo)return(0,re.of)(null);throw on}))),(0,z.P)(We=>!!We),(0,Ft.K)((We,mt)=>{if(tr(We))return Qo(h,P,X)?(0,re.of)(new Nn([],{})):ds(h);throw We}))}expandSegmentAgainstRoute(a,h,T,P,X,ce,We){return To(P,h,X,ce)?void 0===P.redirectTo?this.matchSegmentAgainstRoute(a,h,P,X,ce):We&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(a,h,T,P,X,ce):ds(h):ds(h)}expandSegmentAgainstRouteUsingRedirect(a,h,T,P,X,ce){return"**"===P.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(a,T,P,ce):this.expandRegularSegmentAgainstRouteUsingRedirect(a,h,T,P,X,ce)}expandWildCardWithParamsAgainstRouteUsingRedirect(a,h,T,P){const X=this.applyRedirectCommands([],T.redirectTo,{});return T.redirectTo.startsWith("/")?Ua(X):this.lineralizeSegments(T,X).pipe((0,Ye.z)(ce=>{const We=new Nn(ce,{});return this.expandSegment(a,We,h,ce,P,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(a,h,T,P,X,ce){const{matched:We,consumedSegments:mt,remainingSegments:on,positionalParamSegments:ln}=No(h,P,X);if(!We)return ds(h);const Un=this.applyRedirectCommands(mt,P.redirectTo,ln);return P.redirectTo.startsWith("/")?Ua(Un):this.lineralizeSegments(P,Un).pipe((0,Ye.z)(sr=>this.expandSegment(a,h,T,sr.concat(on),ce,!1)))}matchSegmentAgainstRoute(a,h,T,P,X){return"**"===T.path?(a=Zr(T,a),T.loadChildren?(T._loadedRoutes?(0,re.of)({routes:T._loadedRoutes,injector:T._loadedInjector}):this.configLoader.loadChildren(a,T)).pipe((0,_t.U)(We=>(T._loadedRoutes=We.routes,T._loadedInjector=We.injector,new Nn(P,{})))):(0,re.of)(new Nn(P,{}))):Os(h,T,P,a).pipe((0,Qe.w)(({matched:ce,consumedSegments:We,remainingSegments:mt})=>ce?this.getChildConfig(a=T._injector??a,T,P).pipe((0,Ye.z)(ln=>{const Un=ln.injector??a,sr=ln.routes,{segmentGroup:jr,slicedSegments:ur}=Ho(h,We,mt,sr),wa=new Nn(jr.segments,jr.children);if(0===ur.length&&wa.hasChildren())return this.expandChildren(Un,sr,wa).pipe((0,_t.U)(Aa=>new Nn(We,Aa)));if(0===sr.length&&0===ur.length)return(0,re.of)(new Nn(We,{}));const So=Kr(T)===X;return this.expandSegment(Un,wa,sr,ur,So?Zt:X,!0).pipe((0,_t.U)(na=>new Nn(We.concat(na.segments),na.children)))})):ds(h)))}getChildConfig(a,h,T){return h.children?(0,re.of)({routes:h.children,injector:a}):h.loadChildren?void 0!==h._loadedRoutes?(0,re.of)({routes:h._loadedRoutes,injector:h._loadedInjector}):function Ro(p,a,h,T){const P=a.canLoad;if(void 0===P||0===P.length)return(0,re.of)(!0);const X=P.map(ce=>{const We=qs(ce,p);return Ai(function ie(p){return p&&_s(p.canLoad)}(We)?We.canLoad(a,h):p.runInContext(()=>We(a,h)))});return(0,re.of)(X).pipe(Si(),la())}(a,h,T).pipe((0,Ye.z)(P=>P?this.configLoader.loadChildren(a,h).pipe((0,bt.b)(X=>{h._loadedRoutes=X.routes,h._loadedInjector=X.injector})):function $a(p){return(0,pe._)(us(La,3))}())):(0,re.of)({routes:[],injector:a})}lineralizeSegments(a,h){let T=[],P=h.root;for(;;){if(T=T.concat(P.segments),0===P.numberOfChildren)return(0,re.of)(T);if(P.numberOfChildren>1||!P.children[Zt])return a.redirectTo,(0,pe._)(new f.vHH(4e3,La));P=P.children[Zt]}}applyRedirectCommands(a,h,T){return this.applyRedirectCreateUrlTree(h,this.urlSerializer.parse(h),a,T)}applyRedirectCreateUrlTree(a,h,T,P){const X=this.createSegmentGroup(a,h.root,T,P);return new On(X,this.createQueryParams(h.queryParams,this.urlTree.queryParams),h.fragment)}createQueryParams(a,h){const T={};return ii(a,(P,X)=>{if("string"==typeof P&&P.startsWith(":")){const We=P.substring(1);T[X]=h[We]}else T[X]=P}),T}createSegmentGroup(a,h,T,P){const X=this.createSegments(a,h.segments,T,P);let ce={};return ii(h.children,(We,mt)=>{ce[mt]=this.createSegmentGroup(a,We,T,P)}),new Nn(X,ce)}createSegments(a,h,T,P){return h.map(X=>X.path.startsWith(":")?this.findPosParam(a,X,P):this.findOrReturn(X,T))}findPosParam(a,h,T){const P=T[h.path.substring(1)];if(!P)throw new f.vHH(4001,La);return P}findOrReturn(a,h){let T=0;for(const P of h){if(P.path===a.path)return h.splice(T),P;T++}return a}}class Do{}class S{constructor(a,h,T,P,X,ce,We){this.injector=a,this.rootComponentType=h,this.config=T,this.urlTree=P,this.url=X,this.paramsInheritanceStrategy=ce,this.urlSerializer=We}recognize(){const a=Ho(this.urlTree.root,[],[],this.config.filter(h=>void 0===h.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,a,Zt).pipe((0,_t.U)(h=>{if(null===h)return null;const T=new zi([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Zt,this.rootComponentType,null,this.urlTree.root,-1,{}),P=new Li(T,h),X=new Ms(this.url,P);return this.inheritParamsAndData(X._root),X}))}inheritParamsAndData(a){const h=a.value,T=Us(h,this.paramsInheritanceStrategy);h.params=Object.freeze(T.params),h.data=Object.freeze(T.data),a.children.forEach(P=>this.inheritParamsAndData(P))}processSegmentGroup(a,h,T,P){return 0===T.segments.length&&T.hasChildren()?this.processChildren(a,h,T):this.processSegment(a,h,T,T.segments,P)}processChildren(a,h,T){return(0,_.D)(Object.keys(T.children)).pipe((0,ct.b)(P=>{const X=T.children[P],ce=rr(h,P);return this.processSegmentGroup(a,ce,X,P)}),(0,gn.R)((P,X)=>P&&X?(P.push(...X),P):null),function Gt(p,a=!1){return(0,pt.e)((h,T)=>{let P=0;h.subscribe((0,Lt.x)(T,X=>{const ce=p(X,P++);(ce||a)&&T.next(X),!ce&&T.complete()}))})}(P=>null!==P),(0,Ht.d)(null),jt(),(0,_t.U)(P=>{if(null===P)return null;const X=ve(P);return function N(p){p.sort((a,h)=>a.value.outlet===Zt?-1:h.value.outlet===Zt?1:a.value.outlet.localeCompare(h.value.outlet))}(X),X}))}processSegment(a,h,T,P,X){return(0,_.D)(h).pipe((0,ct.b)(ce=>this.processSegmentAgainstRoute(ce._injector??a,ce,T,P,X)),(0,z.P)(ce=>!!ce),(0,Ft.K)(ce=>{if(tr(ce))return Qo(T,P,X)?(0,re.of)([]):(0,re.of)(null);throw ce}))}processSegmentAgainstRoute(a,h,T,P,X){if(h.redirectTo||!To(h,T,P,X))return(0,re.of)(null);let ce;if("**"===h.path){const We=P.length>0?Pi(P).parameters:{},mt=at(T)+P.length,on=new zi(P,We,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,k(h),Kr(h),h.component??h._loadedComponent??null,h,gt(T),mt,te(h));ce=(0,re.of)({snapshot:on,consumedSegments:[],remainingSegments:[]})}else ce=Os(T,h,P,a).pipe((0,_t.U)(({matched:We,consumedSegments:mt,remainingSegments:on,parameters:ln})=>{if(!We)return null;const Un=at(T)+mt.length;return{snapshot:new zi(mt,ln,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,k(h),Kr(h),h.component??h._loadedComponent??null,h,gt(T),Un,te(h)),consumedSegments:mt,remainingSegments:on}}));return ce.pipe((0,Qe.w)(We=>{if(null===We)return(0,re.of)(null);const{snapshot:mt,consumedSegments:on,remainingSegments:ln}=We;a=h._injector??a;const Un=h._loadedInjector??a,sr=function J(p){return p.children?p.children:p.loadChildren?p._loadedRoutes:[]}(h),{segmentGroup:jr,slicedSegments:ur}=Ho(T,on,ln,sr.filter(So=>void 0===So.redirectTo));if(0===ur.length&&jr.hasChildren())return this.processChildren(Un,sr,jr).pipe((0,_t.U)(So=>null===So?null:[new Li(mt,So)]));if(0===sr.length&&0===ur.length)return(0,re.of)([new Li(mt,[])]);const wa=Kr(h)===X;return this.processSegment(Un,sr,jr,ur,wa?Zt:X).pipe((0,_t.U)(So=>null===So?null:[new Li(mt,So)]))}))}}function _e(p){const a=p.value.routeConfig;return a&&""===a.path&&void 0===a.redirectTo}function ve(p){const a=[],h=new Set;for(const T of p){if(!_e(T)){a.push(T);continue}const P=a.find(X=>T.value.routeConfig===X.value.routeConfig);void 0!==P?(P.children.push(...T.children),h.add(P)):a.push(T)}for(const T of h){const P=ve(T.children);a.push(new Li(T.value,P))}return a.filter(T=>!h.has(T))}function gt(p){let a=p;for(;a._sourceSegment;)a=a._sourceSegment;return a}function at(p){let a=p,h=a._segmentIndexShift??0;for(;a._sourceSegment;)a=a._sourceSegment,h+=a._segmentIndexShift??0;return h-1}function k(p){return p.data||{}}function te(p){return p.resolve||{}}function xi(p){return"string"==typeof p.title||null===p.title}function li(p){return(0,Qe.w)(a=>{const h=p(a);return h?(0,_.D)(h).pipe((0,_t.U)(()=>a)):(0,re.of)(a)})}const yi=new f.OlP("ROUTES");let Nr=(()=>{class p{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,f.f3M)(f.Sil)}loadComponent(h){if(this.componentLoaders.get(h))return this.componentLoaders.get(h);if(h._loadedComponent)return(0,re.of)(h._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(h);const T=Ai(h.loadComponent()).pipe((0,_t.U)(hr),(0,bt.b)(X=>{this.onLoadEndListener&&this.onLoadEndListener(h),h._loadedComponent=X}),(0,Ut.x)(()=>{this.componentLoaders.delete(h)})),P=new It(T,()=>new Mt.x).pipe(an());return this.componentLoaders.set(h,P),P}loadChildren(h,T){if(this.childrenLoaders.get(T))return this.childrenLoaders.get(T);if(T._loadedRoutes)return(0,re.of)({routes:T._loadedRoutes,injector:T._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(T);const X=this.loadModuleFactoryOrRoutes(T.loadChildren).pipe((0,_t.U)(We=>{this.onLoadEndListener&&this.onLoadEndListener(T);let mt,on,ln=!1;Array.isArray(We)?on=We:(mt=We.create(h).injector,on=oi(mt.get(yi,[],f.XFs.Self|f.XFs.Optional)));return{routes:on.map(ho),injector:mt}}),(0,Ut.x)(()=>{this.childrenLoaders.delete(T)})),ce=new It(X,()=>new Mt.x).pipe(an());return this.childrenLoaders.set(T,ce),ce}loadModuleFactoryOrRoutes(h){return Ai(h()).pipe((0,_t.U)(hr),(0,Ye.z)(T=>T instanceof f.YKP||Array.isArray(T)?(0,re.of)(T):(0,_.D)(this.compiler.compileModuleAsync(T))))}}return p.\u0275fac=function(h){return new(h||p)},p.\u0275prov=f.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"}),p})();function hr(p){return function Rn(p){return p&&"object"==typeof p&&"default"in p}(p)?p.default:p}let ni=(()=>{class p{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new Mt.x,this.configLoader=(0,f.f3M)(Nr),this.environmentInjector=(0,f.f3M)(f.lqb),this.urlSerializer=(0,f.f3M)(er),this.rootContexts=(0,f.f3M)(gs),this.navigationId=0,this.afterPreactivation=()=>(0,re.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=P=>this.events.next(new Qs(P)),this.configLoader.onLoadStartListener=P=>this.events.next(new dr(P))}complete(){this.transitions?.complete()}handleNavigationRequest(h){const T=++this.navigationId;this.transitions?.next({...this.transitions.value,...h,id:T})}setupNavigations(h){return this.transitions=new Te.X({id:0,targetPageId:0,currentUrlTree:h.currentUrlTree,currentRawUrl:h.currentUrlTree,extractedUrl:h.urlHandlingStrategy.extract(h.currentUrlTree),urlAfterRedirects:h.urlHandlingStrategy.extract(h.currentUrlTree),rawUrl:h.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Dn,restoredState:null,currentSnapshot:h.routerState.snapshot,targetSnapshot:null,currentRouterState:h.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe((0,kt.h)(T=>0!==T.id),(0,_t.U)(T=>({...T,extractedUrl:h.urlHandlingStrategy.extract(T.rawUrl)})),(0,Qe.w)(T=>{let P=!1,X=!1;return(0,re.of)(T).pipe((0,bt.b)(ce=>{this.currentNavigation={id:ce.id,initialUrl:ce.rawUrl,extractedUrl:ce.extractedUrl,trigger:ce.source,extras:ce.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,Qe.w)(ce=>{const We=h.browserUrlTree.toString(),mt=!h.navigated||ce.extractedUrl.toString()!==We||We!==h.currentUrlTree.toString();if(!mt&&"reload"!==(ce.extras.onSameUrlNavigation??h.onSameUrlNavigation)){const ln="";return this.events.next(new mn(ce.id,h.serializeUrl(T.rawUrl),ln,0)),h.rawUrlTree=ce.rawUrl,ce.resolve(null),Ne.E}if(h.urlHandlingStrategy.shouldProcessUrl(ce.rawUrl))return qn(ce.source)&&(h.browserUrlTree=ce.extractedUrl),(0,re.of)(ce).pipe((0,Qe.w)(ln=>{const Un=this.transitions?.getValue();return this.events.next(new nt(ln.id,this.urlSerializer.serialize(ln.extractedUrl),ln.source,ln.restoredState)),Un!==this.transitions?.getValue()?Ne.E:Promise.resolve(ln)}),function ls(p,a,h,T){return(0,Qe.w)(P=>function Xo(p,a,h,T,P){return new il(p,a,h,T,P).apply()}(p,a,h,P.extractedUrl,T).pipe((0,_t.U)(X=>({...P,urlAfterRedirects:X}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,h.config),(0,bt.b)(ln=>{this.currentNavigation={...this.currentNavigation,finalUrl:ln.urlAfterRedirects},T.urlAfterRedirects=ln.urlAfterRedirects}),function G(p,a,h,T,P){return(0,Ye.z)(X=>function me(p,a,h,T,P,X,ce="emptyOnly"){return new S(p,a,h,T,P,ce,X).recognize().pipe((0,Qe.w)(We=>null===We?function no(p){return new Me.y(a=>a.error(p))}(new Do):(0,re.of)(We)))}(p,a,h,X.urlAfterRedirects,T.serialize(X.urlAfterRedirects),T,P).pipe((0,_t.U)(ce=>({...X,targetSnapshot:ce}))))}(this.environmentInjector,this.rootComponentType,h.config,this.urlSerializer,h.paramsInheritanceStrategy),(0,bt.b)(ln=>{if(T.targetSnapshot=ln.targetSnapshot,"eager"===h.urlUpdateStrategy){if(!ln.extras.skipLocationChange){const sr=h.urlHandlingStrategy.merge(ln.urlAfterRedirects,ln.rawUrl);h.setBrowserUrl(sr,ln)}h.browserUrlTree=ln.urlAfterRedirects}const Un=new xn(ln.id,this.urlSerializer.serialize(ln.extractedUrl),this.urlSerializer.serialize(ln.urlAfterRedirects),ln.targetSnapshot);this.events.next(Un)}));if(mt&&h.urlHandlingStrategy.shouldProcessUrl(h.rawUrlTree)){const{id:ln,extractedUrl:Un,source:sr,restoredState:jr,extras:ur}=ce,wa=new nt(ln,this.urlSerializer.serialize(Un),sr,jr);this.events.next(wa);const So=Ti(Un,this.rootComponentType).snapshot;return T={...ce,targetSnapshot:So,urlAfterRedirects:Un,extras:{...ur,skipLocationChange:!1,replaceUrl:!1}},(0,re.of)(T)}{const ln="";return this.events.next(new mn(ce.id,h.serializeUrl(T.extractedUrl),ln,1)),h.rawUrlTree=ce.rawUrl,ce.resolve(null),Ne.E}}),(0,bt.b)(ce=>{const We=new _r(ce.id,this.urlSerializer.serialize(ce.extractedUrl),this.urlSerializer.serialize(ce.urlAfterRedirects),ce.targetSnapshot);this.events.next(We)}),(0,_t.U)(ce=>T={...ce,guards:Es(ce.targetSnapshot,ce.currentSnapshot,this.rootContexts)}),function Zo(p,a){return(0,Ye.z)(h=>{const{targetSnapshot:T,currentSnapshot:P,guards:{canActivateChecks:X,canDeactivateChecks:ce}}=h;return 0===ce.length&&0===X.length?(0,re.of)({...h,guardsResult:!0}):function ma(p,a,h,T){return(0,_.D)(p).pipe((0,Ye.z)(P=>function Yo(p,a,h,T,P){const X=a&&a.routeConfig?a.routeConfig.canDeactivate:null;if(!X||0===X.length)return(0,re.of)(!0);const ce=X.map(We=>{const mt=_o(a)??P,on=qs(We,mt);return Ai(function De(p){return p&&_s(p.canDeactivate)}(on)?on.canDeactivate(p,a,h,T):mt.runInContext(()=>on(p,a,h,T))).pipe((0,z.P)())});return(0,re.of)(ce).pipe(Si())}(P.component,P.route,h,a,T)),(0,z.P)(P=>!0!==P,!0))}(ce,T,P,p).pipe((0,Ye.z)(We=>We&&function si(p){return"boolean"==typeof p}(We)?function es(p,a,h,T){return(0,_.D)(a).pipe((0,ct.b)(P=>(0,Ze.z)(function aa(p,a){return null!==p&&a&&a(new bs(p)),(0,re.of)(!0)}(P.route.parent,T),function ga(p,a){return null!==p&&a&&a(new Qr(p)),(0,re.of)(!0)}(P.route,T),function _a(p,a,h){const T=a[a.length-1],X=a.slice(0,a.length-1).reverse().map(ce=>function Yr(p){const a=p.routeConfig?p.routeConfig.canActivateChild:null;return a&&0!==a.length?{node:p,guards:a}:null}(ce)).filter(ce=>null!==ce).map(ce=>(0,xe.P)(()=>{const We=ce.guards.map(mt=>{const on=_o(ce.node)??h,ln=qs(mt,on);return Ai(function Q(p){return p&&_s(p.canActivateChild)}(ln)?ln.canActivateChild(T,p):on.runInContext(()=>ln(T,p))).pipe((0,z.P)())});return(0,re.of)(We).pipe(Si())}));return(0,re.of)(X).pipe(Si())}(p,P.path,h),function to(p,a,h){const T=a.routeConfig?a.routeConfig.canActivate:null;if(!T||0===T.length)return(0,re.of)(!0);const P=T.map(X=>(0,xe.P)(()=>{const ce=_o(a)??h,We=qs(X,ce);return Ai(function ee(p){return p&&_s(p.canActivate)}(We)?We.canActivate(a,p):ce.runInContext(()=>We(a,p))).pipe((0,z.P)())}));return(0,re.of)(P).pipe(Si())}(p,P.route,h))),(0,z.P)(P=>!0!==P,!0))}(T,X,p,a):(0,re.of)(We)),(0,_t.U)(We=>({...h,guardsResult:We})))})}(this.environmentInjector,ce=>this.events.next(ce)),(0,bt.b)(ce=>{if(T.guardsResult=ce.guardsResult,un(ce.guardsResult))throw Xs(0,ce.guardsResult);const We=new Ii(ce.id,this.urlSerializer.serialize(ce.extractedUrl),this.urlSerializer.serialize(ce.urlAfterRedirects),ce.targetSnapshot,!!ce.guardsResult);this.events.next(We)}),(0,kt.h)(ce=>!!ce.guardsResult||(h.restoreHistory(ce),this.cancelNavigationTransition(ce,"",3),!1)),li(ce=>{if(ce.guards.canActivateChecks.length)return(0,re.of)(ce).pipe((0,bt.b)(We=>{const mt=new ms(We.id,this.urlSerializer.serialize(We.extractedUrl),this.urlSerializer.serialize(We.urlAfterRedirects),We.targetSnapshot);this.events.next(mt)}),(0,Qe.w)(We=>{let mt=!1;return(0,re.of)(We).pipe(function ge(p,a){return(0,Ye.z)(h=>{const{targetSnapshot:T,guards:{canActivateChecks:P}}=h;if(!P.length)return(0,re.of)(h);let X=0;return(0,_.D)(P).pipe((0,ct.b)(ce=>function Ve(p,a,h,T){const P=p.routeConfig,X=p._resolve;return void 0!==P?.title&&!xi(P)&&(X[_n]=P.title),function Dt(p,a,h,T){const P=function tn(p){return[...Object.keys(p),...Object.getOwnPropertySymbols(p)]}(p);if(0===P.length)return(0,re.of)({});const X={};return(0,_.D)(P).pipe((0,Ye.z)(ce=>function An(p,a,h,T){const P=_o(a)??T,X=qs(p,P);return Ai(X.resolve?X.resolve(a,h):P.runInContext(()=>X(a,h)))}(p[ce],a,h,T).pipe((0,z.P)(),(0,bt.b)(We=>{X[ce]=We}))),vn(1),(0,Tt.h)(X),(0,Ft.K)(ce=>tr(ce)?Ne.E:(0,pe._)(ce)))}(X,p,a,T).pipe((0,_t.U)(ce=>(p._resolvedData=ce,p.data=Us(p,h).resolve,P&&xi(P)&&(p.data[_n]=P.title),null)))}(ce.route,T,p,a)),(0,bt.b)(()=>X++),vn(1),(0,Ye.z)(ce=>X===P.length?(0,re.of)(h):Ne.E))})}(h.paramsInheritanceStrategy,this.environmentInjector),(0,bt.b)({next:()=>mt=!0,complete:()=>{mt||(h.restoreHistory(We),this.cancelNavigationTransition(We,"",2))}}))}),(0,bt.b)(We=>{const mt=new As(We.id,this.urlSerializer.serialize(We.extractedUrl),this.urlSerializer.serialize(We.urlAfterRedirects),We.targetSnapshot);this.events.next(mt)}))}),li(ce=>{const We=mt=>{const on=[];mt.routeConfig?.loadComponent&&!mt.routeConfig._loadedComponent&&on.push(this.configLoader.loadComponent(mt.routeConfig).pipe((0,bt.b)(ln=>{mt.component=ln}),(0,_t.U)(()=>{})));for(const ln of mt.children)on.push(...We(ln));return on};return(0,He.a)(We(ce.targetSnapshot.root)).pipe((0,Ht.d)(),(0,Ue.q)(1))}),li(()=>this.afterPreactivation()),(0,_t.U)(ce=>{const We=function Mo(p,a,h){const T=Vs(p,a._root,h?h._root:void 0);return new vr(T,a)}(h.routeReuseStrategy,ce.targetSnapshot,ce.currentRouterState);return T={...ce,targetRouterState:We}}),(0,bt.b)(ce=>{h.currentUrlTree=ce.urlAfterRedirects,h.rawUrlTree=h.urlHandlingStrategy.merge(ce.urlAfterRedirects,ce.rawUrl),h.routerState=ce.targetRouterState,"deferred"===h.urlUpdateStrategy&&(ce.extras.skipLocationChange||h.setBrowserUrl(h.rawUrlTree,ce),h.browserUrlTree=ce.urlAfterRedirects)}),((p,a,h)=>(0,_t.U)(T=>(new Bi(a,T.targetRouterState,T.currentRouterState,h).activate(p),T)))(this.rootContexts,h.routeReuseStrategy,ce=>this.events.next(ce)),(0,bt.b)({next:ce=>{P=!0,this.lastSuccessfulNavigation=this.currentNavigation,h.navigated=!0,this.events.next(new wt(ce.id,this.urlSerializer.serialize(ce.extractedUrl),this.urlSerializer.serialize(h.currentUrlTree))),h.titleStrategy?.updateTitle(ce.targetRouterState.snapshot),ce.resolve(!0)},complete:()=>{P=!0}}),(0,Ut.x)(()=>{P||X||this.cancelNavigationTransition(T,"",1),this.currentNavigation?.id===T.id&&(this.currentNavigation=null)}),(0,Ft.K)(ce=>{if(X=!0,ir(ce)){kr(ce)||(h.navigated=!0,h.restoreHistory(T,!0));const We=new Bt(T.id,this.urlSerializer.serialize(T.extractedUrl),ce.message,ce.cancellationCode);if(this.events.next(We),kr(ce)){const mt=h.urlHandlingStrategy.merge(ce.url,h.rawUrlTree),on={skipLocationChange:T.extras.skipLocationChange,replaceUrl:"eager"===h.urlUpdateStrategy||qn(T.source)};h.scheduleNavigation(mt,Dn,null,on,{resolve:T.resolve,reject:T.reject,promise:T.promise})}else T.resolve(!1)}else{h.restoreHistory(T,!0);const We=new Wn(T.id,this.urlSerializer.serialize(T.extractedUrl),ce,T.targetSnapshot??void 0);this.events.next(We);try{T.resolve(h.errorHandler(ce))}catch(mt){T.reject(mt)}}return Ne.E}))}))}cancelNavigationTransition(h,T,P){const X=new Bt(h.id,this.urlSerializer.serialize(h.extractedUrl),T,P);this.events.next(X),h.resolve(!1)}}return p.\u0275fac=function(h){return new(h||p)},p.\u0275prov=f.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"}),p})();function qn(p){return p!==Dn}let hs=(()=>{class p{buildTitle(h){let T,P=h.root;for(;void 0!==P;)T=this.getResolvedTitleForRoute(P)??T,P=P.children.find(X=>X.outlet===Zt);return T}getResolvedTitleForRoute(h){return h.data[_n]}}return p.\u0275fac=function(h){return new(h||p)},p.\u0275prov=f.Yz7({token:p,factory:function(){return(0,f.f3M)(Ki)},providedIn:"root"}),p})(),Ki=(()=>{class p extends hs{constructor(h){super(),this.title=h}updateTitle(h){const T=this.buildTitle(h);void 0!==T&&this.title.setTitle(T)}}return p.\u0275fac=function(h){return new(h||p)(f.LFG(rn.Dx))},p.\u0275prov=f.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"}),p})(),Po=(()=>{class p{}return p.\u0275fac=function(h){return new(h||p)},p.\u0275prov=f.Yz7({token:p,factory:function(){return(0,f.f3M)(Jt)},providedIn:"root"}),p})();class ts{shouldDetach(a){return!1}store(a,h){}shouldAttach(a){return!1}retrieve(a){return null}shouldReuseRoute(a,h){return a.routeConfig===h.routeConfig}}let Jt=(()=>{class p extends ts{}return p.\u0275fac=function(){let a;return function(T){return(a||(a=f.n5z(p)))(T||p)}}(),p.\u0275prov=f.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"}),p})();const ci=new f.OlP("",{providedIn:"root",factory:()=>({})});let pr=(()=>{class p{}return p.\u0275fac=function(h){return new(h||p)},p.\u0275prov=f.Yz7({token:p,factory:function(){return(0,f.f3M)(fs)},providedIn:"root"}),p})(),fs=(()=>{class p{shouldProcessUrl(h){return!0}extract(h){return h}merge(h,T){return h}}return p.\u0275fac=function(h){return new(h||p)},p.\u0275prov=f.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"}),p})();function Ns(p){throw p}function ys(p,a,h){return a.parse("/")}const Fr={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Jo={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Lr=(()=>{class p{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,f.f3M)(f.c2e),this.isNgZoneEnabled=!1,this.options=(0,f.f3M)(ci,{optional:!0})||{},this.errorHandler=this.options.errorHandler||Ns,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||ys,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,f.f3M)(pr),this.routeReuseStrategy=(0,f.f3M)(Po),this.urlCreationStrategy=(0,f.f3M)(wi),this.titleStrategy=(0,f.f3M)(hs),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=oi((0,f.f3M)(yi,{optional:!0})??[]),this.navigationTransitions=(0,f.f3M)(ni),this.urlSerializer=(0,f.f3M)(er),this.location=(0,f.f3M)(Ae.Ye),this.isNgZoneEnabled=(0,f.f3M)(f.R0b)instanceof f.R0b&&f.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new On,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Ti(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(h=>{this.lastSuccessfulId=h.id,this.currentPageId=h.targetPageId},h=>{this.console.warn(`Unhandled Navigation Error: ${h}`)})}resetRootComponentType(h){this.routerState.root.component=h,this.navigationTransitions.rootComponentType=h}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const h=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),Dn,h)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(h=>{const T="popstate"===h.type?"popstate":"hashchange";"popstate"===T&&setTimeout(()=>{this.navigateToSyncWithBrowser(h.url,T,h.state)},0)}))}navigateToSyncWithBrowser(h,T,P){const X={replaceUrl:!0},ce=P?.navigationId?P:null;if(P){const mt={...P};delete mt.navigationId,delete mt.\u0275routerPageId,0!==Object.keys(mt).length&&(X.state=mt)}const We=this.parseUrl(h);this.scheduleNavigation(We,T,ce,X)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(h){this.config=h.map(ho),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(h,T={}){const{relativeTo:P,queryParams:X,fragment:ce,queryParamsHandling:We,preserveFragment:mt}=T,on=mt?this.currentUrlTree.fragment:ce;let ln=null;switch(We){case"merge":ln={...this.currentUrlTree.queryParams,...X};break;case"preserve":ln=this.currentUrlTree.queryParams;break;default:ln=X||null}return null!==ln&&(ln=this.removeEmptyProps(ln)),this.urlCreationStrategy.createUrlTree(P,this.routerState,this.currentUrlTree,h,ln,on??null)}navigateByUrl(h,T={skipLocationChange:!1}){const P=un(h)?h:this.parseUrl(h),X=this.urlHandlingStrategy.merge(P,this.rawUrlTree);return this.scheduleNavigation(X,Dn,null,T)}navigate(h,T={skipLocationChange:!1}){return function mr(p){for(let a=0;a<p.length;a++){const h=p[a];if(null==h)throw new f.vHH(4008,false)}}(h),this.navigateByUrl(this.createUrlTree(h,T),T)}serializeUrl(h){return this.urlSerializer.serialize(h)}parseUrl(h){let T;try{T=this.urlSerializer.parse(h)}catch(P){T=this.malformedUriErrorHandler(P,this.urlSerializer,h)}return T}isActive(h,T){let P;if(P=!0===T?{...Fr}:!1===T?{...Jo}:T,un(h))return Ji(this.currentUrlTree,h,P);const X=this.parseUrl(h);return Ji(this.currentUrlTree,X,P)}removeEmptyProps(h){return Object.keys(h).reduce((T,P)=>{const X=h[P];return null!=X&&(T[P]=X),T},{})}scheduleNavigation(h,T,P,X,ce){if(this.disposed)return Promise.resolve(!1);let We,mt,on,ln;return ce?(We=ce.resolve,mt=ce.reject,on=ce.promise):on=new Promise((Un,sr)=>{We=Un,mt=sr}),ln="computed"===this.canceledNavigationResolution?P&&P.\u0275routerPageId?P.\u0275routerPageId:X.replaceUrl||X.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1:0,this.navigationTransitions.handleNavigationRequest({targetPageId:ln,source:T,restoredState:P,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:h,extras:X,resolve:We,reject:mt,promise:on,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),on.catch(Un=>Promise.reject(Un))}setBrowserUrl(h,T){const P=this.urlSerializer.serialize(h),X={...T.extras.state,...this.generateNgRouterState(T.id,T.targetPageId)};this.location.isCurrentPathEqualTo(P)||T.extras.replaceUrl?this.location.replaceState(P,"",X):this.location.go(P,"",X)}restoreHistory(h,T=!1){if("computed"===this.canceledNavigationResolution){const P=this.currentPageId-h.targetPageId;"popstate"!==h.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.getCurrentNavigation()?.finalUrl||0===P?this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===P&&(this.resetState(h),this.browserUrlTree=h.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(P)}else"replace"===this.canceledNavigationResolution&&(T&&this.resetState(h),this.resetUrlToCurrentUrlTree())}resetState(h){this.routerState=h.currentRouterState,this.currentUrlTree=h.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,h.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(h,T){return"computed"===this.canceledNavigationResolution?{navigationId:h,\u0275routerPageId:T}:{navigationId:h}}}return p.\u0275fac=function(h){return new(h||p)},p.\u0275prov=f.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"}),p})(),po=(()=>{class p{constructor(h,T,P,X,ce,We){this.router=h,this.route=T,this.tabIndexAttribute=P,this.renderer=X,this.el=ce,this.locationStrategy=We,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.href=null,this.commands=null,this.onChanges=new Mt.x;const mt=ce.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===mt||"area"===mt,this.isAnchorElement?this.subscription=h.events.subscribe(on=>{on instanceof wt&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(h){this._preserveFragment=(0,f.D6c)(h)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(h){this._skipLocationChange=(0,f.D6c)(h)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(h){this._replaceUrl=(0,f.D6c)(h)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(h){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",h)}ngOnChanges(h){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(h){null!=h?(this.commands=Array.isArray(h)?h:[h],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(h,T,P,X,ce){return!!(null===this.urlTree||this.isAnchorElement&&(0!==h||T||P||X||ce||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const h=null===this.href?null:(0,f.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",h)}applyAttributeValue(h,T){const P=this.renderer,X=this.el.nativeElement;null!==T?P.setAttribute(X,h,T):P.removeAttribute(X,h)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return p.\u0275fac=function(h){return new(h||p)(f.Y36(Lr),f.Y36(Or),f.$8M("tabindex"),f.Y36(f.Qsj),f.Y36(f.SBq),f.Y36(Ae.S$))},p.\u0275dir=f.lG2({type:p,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(h,T){1&h&&f.NdJ("click",function(X){return T.onClick(X.button,X.ctrlKey,X.shiftKey,X.altKey,X.metaKey)}),2&h&&f.uIk("target",T.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[f.TTD]}),p})();class Fo{}let Lo=(()=>{class p{constructor(h,T,P,X,ce){this.router=h,this.injector=P,this.preloadingStrategy=X,this.loader=ce}setUpPreloading(){this.subscription=this.router.events.pipe((0,kt.h)(h=>h instanceof wt),(0,ct.b)(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(h,T){const P=[];for(const X of T){X.providers&&!X._injector&&(X._injector=(0,f.MMx)(X.providers,h,`Route: ${X.path}`));const ce=X._injector??h,We=X._loadedInjector??ce;(X.loadChildren&&!X._loadedRoutes&&void 0===X.canLoad||X.loadComponent&&!X._loadedComponent)&&P.push(this.preloadConfig(ce,X)),(X.children||X._loadedRoutes)&&P.push(this.processRoutes(We,X.children??X._loadedRoutes))}return(0,_.D)(P).pipe((0,Et.J)())}preloadConfig(h,T){return this.preloadingStrategy.preload(T,()=>{let P;P=T.loadChildren&&void 0===T.canLoad?this.loader.loadChildren(h,T):(0,re.of)(null);const X=P.pipe((0,Ye.z)(ce=>null===ce?(0,re.of)(void 0):(T._loadedRoutes=ce.routes,T._loadedInjector=ce.injector,this.processRoutes(ce.injector??h,ce.routes))));if(T.loadComponent&&!T._loadedComponent){const ce=this.loader.loadComponent(T);return(0,_.D)([X,ce]).pipe((0,Et.J)())}return X})}}return p.\u0275fac=function(h){return new(h||p)(f.LFG(Lr),f.LFG(f.Sil),f.LFG(f.lqb),f.LFG(Fo),f.LFG(Nr))},p.\u0275prov=f.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"}),p})();const da=new f.OlP("");let ea=(()=>{class p{constructor(h,T,P,X,ce={}){this.urlSerializer=h,this.transitions=T,this.viewportScroller=P,this.zone=X,this.options=ce,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},ce.scrollPositionRestoration=ce.scrollPositionRestoration||"disabled",ce.anchorScrolling=ce.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(h=>{h instanceof nt?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=h.navigationTrigger,this.restoredId=h.restoredState?h.restoredState.navigationId:0):h instanceof wt&&(this.lastId=h.id,this.scheduleScrollEvent(h,this.urlSerializer.parse(h.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(h=>{h instanceof Ci&&(h.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(h.position):h.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(h.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(h,T){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Ci(h,"popstate"===this.lastSource?this.store[this.restoredId]:null,T))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return p.\u0275fac=function(h){f.$Z()},p.\u0275prov=f.Yz7({token:p,factory:p.\u0275fac}),p})();var Hr=(()=>((Hr=Hr||{})[Hr.COMPLETE=0]="COMPLETE",Hr[Hr.FAILED=1]="FAILED",Hr[Hr.REDIRECTING=2]="REDIRECTING",Hr))();const ro=!1;function ta(p,a){return{\u0275kind:p,\u0275providers:a}}const Xa=new f.OlP("",{providedIn:"root",factory:()=>!1});function Ja(){const p=(0,f.f3M)(f.zs3);return a=>{const h=p.get(f.z2F);if(a!==h.components[0])return;const T=p.get(Lr),P=p.get(Fs);1===p.get(Ba)&&T.initialNavigation(),p.get(Ea,null,f.XFs.Optional)?.setUpPreloading(),p.get(da,null,f.XFs.Optional)?.init(),T.resetRootComponentType(h.componentTypes[0]),P.closed||(P.next(),P.unsubscribe())}}const Fs=new f.OlP(ro?"bootstrap done indicator":"",{factory:()=>new Mt.x}),Ba=new f.OlP(ro?"initial navigation":"",{providedIn:"root",factory:()=>1});function Al(){let p=[];return p=ro?[{provide:f.Xts,multi:!0,useFactory:()=>{const a=(0,f.f3M)(Lr);return()=>a.events.subscribe(h=>{console.group?.(`Router Event: ${h.constructor.name}`),console.log(function Ls(p){if(!("type"in p))return`Unknown Router Event: ${p.constructor.name}`;switch(p.type){case 14:return`ActivationEnd(path: '${p.snapshot.routeConfig?.path||""}')`;case 13:return`ActivationStart(path: '${p.snapshot.routeConfig?.path||""}')`;case 12:return`ChildActivationEnd(path: '${p.snapshot.routeConfig?.path||""}')`;case 11:return`ChildActivationStart(path: '${p.snapshot.routeConfig?.path||""}')`;case 8:return`GuardsCheckEnd(id: ${p.id}, url: '${p.url}', urlAfterRedirects: '${p.urlAfterRedirects}', state: ${p.state}, shouldActivate: ${p.shouldActivate})`;case 7:return`GuardsCheckStart(id: ${p.id}, url: '${p.url}', urlAfterRedirects: '${p.urlAfterRedirects}', state: ${p.state})`;case 2:return`NavigationCancel(id: ${p.id}, url: '${p.url}')`;case 16:return`NavigationSkipped(id: ${p.id}, url: '${p.url}')`;case 1:return`NavigationEnd(id: ${p.id}, url: '${p.url}', urlAfterRedirects: '${p.urlAfterRedirects}')`;case 3:return`NavigationError(id: ${p.id}, url: '${p.url}', error: ${p.error})`;case 0:return`NavigationStart(id: ${p.id}, url: '${p.url}')`;case 6:return`ResolveEnd(id: ${p.id}, url: '${p.url}', urlAfterRedirects: '${p.urlAfterRedirects}', state: ${p.state})`;case 5:return`ResolveStart(id: ${p.id}, url: '${p.url}', urlAfterRedirects: '${p.urlAfterRedirects}', state: ${p.state})`;case 10:return`RouteConfigLoadEnd(path: ${p.route.path})`;case 9:return`RouteConfigLoadStart(path: ${p.route.path})`;case 4:return`RoutesRecognized(id: ${p.id}, url: '${p.url}', urlAfterRedirects: '${p.urlAfterRedirects}', state: ${p.state})`;case 15:return`Scroll(anchor: '${p.anchor}', position: '${p.position?`${p.position[0]}, ${p.position[1]}`:null}')`}}(h)),console.log(h),console.groupEnd?.()})}}]:[],ta(1,p)}const Ea=new f.OlP(ro?"router preloader":"");function Hl(p){return ta(0,[{provide:Ea,useExisting:Lo},{provide:Fo,useExisting:p}])}const el=!1,hl=new f.OlP(el?"router duplicate forRoot guard":"ROUTER_FORROOT_GUARD"),$l=[Ae.Ye,{provide:er,useClass:Fi},Lr,gs,{provide:Or,useFactory:function js(p){return p.routerState.root},deps:[Lr]},Nr,el?{provide:Xa,useValue:!0}:[]];function sc(){return new f.PXZ("Router",Lr)}let Gl=(()=>{class p{constructor(h){}static forRoot(h,T){return{ngModule:p,providers:[$l,el&&T?.enableTracing?Al().\u0275providers:[],{provide:yi,multi:!0,useValue:h},{provide:hl,useFactory:zs,deps:[[Lr,new f.FiY,new f.tp0]]},{provide:ci,useValue:T||{}},T?.useHash?{provide:Ae.S$,useClass:Ae.Do}:{provide:Ae.S$,useClass:Ae.b0},{provide:da,useFactory:()=>{const p=(0,f.f3M)(Ae.EM),a=(0,f.f3M)(f.R0b),h=(0,f.f3M)(ci),T=(0,f.f3M)(ni),P=(0,f.f3M)(er);return h.scrollOffset&&p.setOffset(h.scrollOffset),new ea(P,T,p,a,h)}},T?.preloadingStrategy?Hl(T.preloadingStrategy).\u0275providers:[],{provide:f.PXZ,multi:!0,useFactory:sc},T?.initialNavigation?wl(T):[],[{provide:Ds,useFactory:Ja},{provide:f.tb,multi:!0,useExisting:Ds}]]}}static forChild(h){return{ngModule:p,providers:[{provide:yi,multi:!0,useValue:h}]}}}return p.\u0275fac=function(h){return new(h||p)(f.LFG(hl,8))},p.\u0275mod=f.oAB({type:p}),p.\u0275inj=f.cJS({imports:[lo]}),p})();function zs(p){if(el&&p)throw new f.vHH(4007,"The Router was provided more than once. This can happen if 'forRoot' is used outside of the root injector. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function wl(p){return["disabled"===p.initialNavigation?ta(3,[{provide:f.ip1,multi:!0,useFactory:()=>{const a=(0,f.f3M)(Lr);return()=>{a.setUpLocationChangeListener()}}},{provide:Ba,useValue:2}]).\u0275providers:[],"enabledBlocking"===p.initialNavigation?ta(2,[{provide:Ba,useValue:0},{provide:f.ip1,multi:!0,deps:[f.zs3],useFactory:a=>{const h=a.get(Ae.V_,Promise.resolve());return()=>h.then(()=>new Promise(T=>{const P=a.get(Lr),X=a.get(Fs);(function ba(p,a){p.events.pipe((0,kt.h)(h=>h instanceof wt||h instanceof Bt||h instanceof Wn||h instanceof mn),(0,_t.U)(h=>h instanceof wt||h instanceof mn?Hr.COMPLETE:h instanceof Bt&&(0===h.code||1===h.code)?Hr.REDIRECTING:Hr.FAILED),(0,kt.h)(h=>h!==Hr.REDIRECTING),(0,Ue.q)(1)).subscribe(()=>{a()})})(P,()=>{T(!0)}),a.get(ni).afterPreactivation=()=>(T(!0),X.closed?(0,re.of)(void 0):X),P.initialNavigation()}))}}]).\u0275providers:[]]}const Ds=new f.OlP(el?"Router Initializer":"")},3942:(wn,dt,L)=>{L.d(dt,{Z:()=>Lt});var f=L(2090),_=L(4859),re=L(9681),Te=L(1877);class ke{constructor(It,Mt){this._delegate=It,this.firebase=Mt,(0,re._addComponent)(It,new _.wA("app-compat",()=>this,"PUBLIC")),this.container=It.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(It){this._delegate.automaticDataCollectionEnabled=It}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(It=>{this._delegate.checkDestroyed(),It()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,re.deleteApp)(this._delegate)))}_getService(It,Mt=re._DEFAULT_ENTRY_NAME){var Ae;this._delegate.checkDestroyed();const _t=this._delegate.container.getProvider(It);return!_t.isInitialized()&&"EXPLICIT"===(null===(Ae=_t.getComponent())||void 0===Ae?void 0:Ae.instantiationMode)&&_t.initialize(),_t.getImmediate({identifier:Mt})}_removeServiceInstance(It,Mt=re._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(It).clearInstance(Mt)}_addComponent(It){(0,re._addComponent)(this._delegate,It)}_addOrOverwriteComponent(It){(0,re._addOrOverwriteComponent)(this._delegate,It)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Ze=new f.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),pe=function ze(){const an=function xe(an){const It={},Mt={__esModule:!0,initializeApp:function Qe(Ye,z={}){const ct=re.initializeApp(Ye,z);if((0,f.r3)(It,ct.name))return It[ct.name];const bt=new an(ct,Mt);return It[ct.name]=bt,bt},app:_t,registerVersion:re.registerVersion,setLogLevel:re.setLogLevel,onLog:re.onLog,apps:null,SDK_VERSION:re.SDK_VERSION,INTERNAL:{registerComponent:function lt(Ye){const z=Ye.name,ct=z.replace("-compat","");if(re._registerComponent(Ye)&&"PUBLIC"===Ye.type){const bt=(Ft=_t())=>{if("function"!=typeof Ft[ct])throw Ze.create("invalid-app-argument",{appName:z});return Ft[ct]()};void 0!==Ye.serviceProps&&(0,f.ZB)(bt,Ye.serviceProps),Mt[ct]=bt,an.prototype[ct]=function(...Ft){return this._getService.bind(this,z).apply(this,Ye.multipleInstances?Ft:[])}}return"PUBLIC"===Ye.type?Mt[ct]:null},removeApp:function Ae(Ye){delete It[Ye]},useAsService:function kt(Ye,z){return"serverAuth"===z?null:z},modularAPIs:re}};function _t(Ye){if(!(0,f.r3)(It,Ye=Ye||re._DEFAULT_ENTRY_NAME))throw Ze.create("no-app",{appName:Ye});return It[Ye]}return Mt.default=Mt,Object.defineProperty(Mt,"apps",{get:function Ue(){return Object.keys(It).map(Ye=>It[Ye])}}),_t.App=an,Mt}(ke);return an.INTERNAL=Object.assign(Object.assign({},an.INTERNAL),{createFirebaseNamespace:ze,extendNamespace:function It(Mt){(0,f.ZB)(an,Mt)},createSubscribe:f.ne,ErrorFactory:f.LL,deepExtend:f.ZB}),an}(),Me=new Te.Yd("@firebase/app-compat");if((0,f.jU)()&&void 0!==self.firebase){Me.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const an=self.firebase.SDK_VERSION;an&&an.indexOf("LITE")>=0&&Me.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Lt=pe;!function pt(an){(0,re.registerVersion)("@firebase/app-compat","0.2.7",an)}()},9681:(wn,dt,L)=>{L.r(dt),L.d(dt,{FirebaseError:()=>Te.ZR,SDK_VERSION:()=>oi,_DEFAULT_ENTRY_NAME:()=>Gt,_addComponent:()=>rn,_addOrOverwriteComponent:()=>Zt,_apps:()=>Ut,_clearComponents:()=>fi,_components:()=>Et,_getProvider:()=>sn,_registerComponent:()=>_n,_removeServiceInstance:()=>bn,deleteApp:()=>Ai,getApp:()=>Cr,getApps:()=>ii,initializeApp:()=>Pi,onLog:()=>Tn,registerVersion:()=>Mi,setLogLevel:()=>Ji});var f=L(5861),_=L(4859),re=L(1877),Te=L(2090),ke=L(8766);class He{constructor($){this.container=$}getPlatformInfoString(){return this.container.getProviders().map(ne=>{if(function Ze(be){return"VERSION"===be.getComponent()?.type}(ne)){const de=ne.getImmediate();return`${de.library}/${de.version}`}return null}).filter(ne=>ne).join(" ")}}const xe="@firebase/app",pe=new re.Yd("@firebase/app"),Gt="[DEFAULT]",Tt={[xe]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Ut=new Map,Et=new Map;function rn(be,$){try{be.container.addComponent($)}catch(ne){pe.debug(`Component ${$.name} failed to register with FirebaseApp ${be.name}`,ne)}}function Zt(be,$){be.container.addOrOverwriteComponent($)}function _n(be){const $=be.name;if(Et.has($))return pe.debug(`There were multiple attempts to register component ${$}.`),!1;Et.set($,be);for(const ne of Ut.values())rn(ne,be);return!0}function sn(be,$){const ne=be.container.getProvider("heartbeat").getImmediate({optional:!0});return ne&&ne.triggerHeartbeat(),be.container.getProvider($)}function bn(be,$,ne=Gt){sn(be,$).clearInstance(ne)}function fi(){Et.clear()}const Bn=new Te.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Qn{constructor($,ne,de){this._isDeleted=!1,this._options=Object.assign({},$),this._config=Object.assign({},ne),this._name=ne.name,this._automaticDataCollectionEnabled=ne.automaticDataCollectionEnabled,this._container=de,this.container.addComponent(new _.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled($){this.checkDestroyed(),this._automaticDataCollectionEnabled=$}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted($){this._isDeleted=$}checkDestroyed(){if(this.isDeleted)throw Bn.create("app-deleted",{appName:this._name})}}const oi="9.19.1";function Pi(be,$={}){let ne=be;"object"!=typeof $&&($={name:$});const de=Object.assign({name:Gt,automaticDataCollectionEnabled:!1},$),ye=de.name;if("string"!=typeof ye||!ye)throw Bn.create("bad-app-name",{appName:String(ye)});if(ne||(ne=(0,Te.aH)()),!ne)throw Bn.create("no-options");const rt=Ut.get(ye);if(rt){if((0,Te.vZ)(ne,rt.options)&&(0,Te.vZ)(de,rt.config))return rt;throw Bn.create("duplicate-app",{appName:ye})}const Nt=new _.H0(ye);for(const Be of Et.values())Nt.addComponent(Be);const Le=new Qn(ne,de,Nt);return Ut.set(ye,Le),Le}function Cr(be=Gt){const $=Ut.get(be);if(!$&&be===Gt)return Pi();if(!$)throw Bn.create("no-app",{appName:be});return $}function ii(){return Array.from(Ut.values())}function Ai(be){return zn.apply(this,arguments)}function zn(){return(zn=(0,f.Z)(function*(be){const $=be.name;Ut.has($)&&(Ut.delete($),yield Promise.all(be.container.getProviders().map(ne=>ne.delete())),be.isDeleted=!0)})).apply(this,arguments)}function Mi(be,$,ne){var de;let ye=null!==(de=Tt[be])&&void 0!==de?de:be;ne&&(ye+=`-${ne}`);const rt=ye.match(/\s|\//),Nt=$.match(/\s|\//);if(rt||Nt){const Le=[`Unable to register library "${ye}" with version "${$}":`];return rt&&Le.push(`library name "${ye}" contains illegal characters (whitespace or "/")`),rt&&Nt&&Le.push("and"),Nt&&Le.push(`version name "${$}" contains illegal characters (whitespace or "/")`),void pe.warn(Le.join(" "))}_n(new _.wA(`${ye}-version`,()=>({library:ye,version:$}),"VERSION"))}function Tn(be,$){if(null!==be&&"function"!=typeof be)throw Bn.create("invalid-log-argument");(0,re.Am)(be,$)}function Ji(be){(0,re.Ub)(be)}const ri="firebase-heartbeat-database",Gn=1,Yi="firebase-heartbeat-store";let Pr=null;function Hn(){return Pr||(Pr=(0,ke.X3)(ri,Gn,{upgrade:(be,$)=>{0===$&&be.createObjectStore(Yi)}}).catch(be=>{throw Bn.create("idb-open",{originalErrorMessage:be.message})})),Pr}function On(){return(On=(0,f.Z)(function*(be){try{return(yield Hn()).transaction(Yi).objectStore(Yi).get(Hi(be))}catch($){if($ instanceof Te.ZR)pe.warn($.message);else{const ne=Bn.create("idb-get",{originalErrorMessage:$?.message});pe.warn(ne.message)}}})).apply(this,arguments)}function Nn(be,$){return Ni.apply(this,arguments)}function Ni(){return(Ni=(0,f.Z)(function*(be,$){try{const de=(yield Hn()).transaction(Yi,"readwrite");return yield de.objectStore(Yi).put($,Hi(be)),de.done}catch(ne){if(ne instanceof Te.ZR)pe.warn(ne.message);else{const de=Bn.create("idb-set",{originalErrorMessage:ne?.message});pe.warn(de.message)}}})).apply(this,arguments)}function Hi(be){return`${be.name}!${be.options.appId}`}class er{constructor($){this.container=$,this._heartbeatsCache=null;const ne=this.container.getProvider("app").getImmediate();this._storage=new $n(ne),this._heartbeatsCachePromise=this._storage.read().then(de=>(this._heartbeatsCache=de,de))}triggerHeartbeat(){var $=this;return(0,f.Z)(function*(){const de=$.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),ye=Fi();if(null===$._heartbeatsCache&&($._heartbeatsCache=yield $._heartbeatsCachePromise),$._heartbeatsCache.lastSentHeartbeatDate!==ye&&!$._heartbeatsCache.heartbeats.some(rt=>rt.date===ye))return $._heartbeatsCache.heartbeats.push({date:ye,agent:de}),$._heartbeatsCache.heartbeats=$._heartbeatsCache.heartbeats.filter(rt=>{const Nt=new Date(rt.date).valueOf();return Date.now()-Nt<=2592e6}),$._storage.overwrite($._heartbeatsCache)})()}getHeartbeatsHeader(){var $=this;return(0,f.Z)(function*(){if(null===$._heartbeatsCache&&(yield $._heartbeatsCachePromise),null===$._heartbeatsCache||0===$._heartbeatsCache.heartbeats.length)return"";const ne=Fi(),{heartbeatsToSend:de,unsentEntries:ye}=function $r(be,$=1024){const ne=[];let de=be.slice();for(const ye of be){const rt=ne.find(Nt=>Nt.agent===ye.agent);if(rt){if(rt.dates.push(ye.date),Oi(ne)>$){rt.dates.pop();break}}else if(ne.push({agent:ye.agent,dates:[ye.date]}),Oi(ne)>$){ne.pop();break}de=de.slice(1)}return{heartbeatsToSend:ne,unsentEntries:de}}($._heartbeatsCache.heartbeats),rt=(0,Te.L)(JSON.stringify({version:2,heartbeats:de}));return $._heartbeatsCache.lastSentHeartbeatDate=ne,ye.length>0?($._heartbeatsCache.heartbeats=ye,yield $._storage.overwrite($._heartbeatsCache)):($._heartbeatsCache.heartbeats=[],$._storage.overwrite($._heartbeatsCache)),rt})()}}function Fi(){return(new Date).toISOString().substring(0,10)}class $n{constructor($){this.app=$,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,f.Z)(function*(){return!!(0,Te.hl)()&&(0,Te.eu)().then(()=>!0).catch(()=>!1)})()}read(){var $=this;return(0,f.Z)(function*(){return(yield $._canUseIndexedDBPromise)&&(yield function Pn(be){return On.apply(this,arguments)}($.app))||{heartbeats:[]}})()}overwrite($){var ne=this;return(0,f.Z)(function*(){var de;if(yield ne._canUseIndexedDBPromise){const rt=yield ne.read();return Nn(ne.app,{lastSentHeartbeatDate:null!==(de=$.lastSentHeartbeatDate)&&void 0!==de?de:rt.lastSentHeartbeatDate,heartbeats:$.heartbeats})}})()}add($){var ne=this;return(0,f.Z)(function*(){var de;if(yield ne._canUseIndexedDBPromise){const rt=yield ne.read();return Nn(ne.app,{lastSentHeartbeatDate:null!==(de=$.lastSentHeartbeatDate)&&void 0!==de?de:rt.lastSentHeartbeatDate,heartbeats:[...rt.heartbeats,...$.heartbeats]})}})()}}function Oi(be){return(0,Te.L)(JSON.stringify({version:2,heartbeats:be})).length}!function dn(be){_n(new _.wA("platform-logger",$=>new He($),"PRIVATE")),_n(new _.wA("heartbeat",$=>new er($),"PRIVATE")),Mi(xe,"0.9.7",be),Mi(xe,"0.9.7","esm2017"),Mi("fire-js","")}("")},4859:(wn,dt,L)=>{L.d(dt,{H0:()=>xe,wA:()=>re,zt:()=>ke});var f=L(5861),_=L(2090);class re{constructor(pe,Me,Ne){this.name=pe,this.instanceFactory=Me,this.type=Ne,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(pe){return this.instantiationMode=pe,this}setMultipleInstances(pe){return this.multipleInstances=pe,this}setServiceProps(pe){return this.serviceProps=pe,this}setInstanceCreatedCallback(pe){return this.onInstanceCreated=pe,this}}const Te="[DEFAULT]";class ke{constructor(pe,Me){this.name=pe,this.container=Me,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(pe){const Me=this.normalizeInstanceIdentifier(pe);if(!this.instancesDeferred.has(Me)){const Ne=new _.BH;if(this.instancesDeferred.set(Me,Ne),this.isInitialized(Me)||this.shouldAutoInitialize())try{const yt=this.getOrInitializeService({instanceIdentifier:Me});yt&&Ne.resolve(yt)}catch{}}return this.instancesDeferred.get(Me).promise}getImmediate(pe){var Me;const Ne=this.normalizeInstanceIdentifier(pe?.identifier),yt=null!==(Me=pe?.optional)&&void 0!==Me&&Me;if(!this.isInitialized(Ne)&&!this.shouldAutoInitialize()){if(yt)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Ne})}catch(pt){if(yt)return null;throw pt}}getComponent(){return this.component}setComponent(pe){if(pe.name!==this.name)throw Error(`Mismatching Component ${pe.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=pe,this.shouldAutoInitialize()){if(function Ze(ze){return"EAGER"===ze.instantiationMode}(pe))try{this.getOrInitializeService({instanceIdentifier:Te})}catch{}for(const[Me,Ne]of this.instancesDeferred.entries()){const yt=this.normalizeInstanceIdentifier(Me);try{const pt=this.getOrInitializeService({instanceIdentifier:yt});Ne.resolve(pt)}catch{}}}}clearInstance(pe=Te){this.instancesDeferred.delete(pe),this.instancesOptions.delete(pe),this.instances.delete(pe)}delete(){var pe=this;return(0,f.Z)(function*(){const Me=Array.from(pe.instances.values());yield Promise.all([...Me.filter(Ne=>"INTERNAL"in Ne).map(Ne=>Ne.INTERNAL.delete()),...Me.filter(Ne=>"_delete"in Ne).map(Ne=>Ne._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(pe=Te){return this.instances.has(pe)}getOptions(pe=Te){return this.instancesOptions.get(pe)||{}}initialize(pe={}){const{options:Me={}}=pe,Ne=this.normalizeInstanceIdentifier(pe.instanceIdentifier);if(this.isInitialized(Ne))throw Error(`${this.name}(${Ne}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const yt=this.getOrInitializeService({instanceIdentifier:Ne,options:Me});for(const[pt,Lt]of this.instancesDeferred.entries())Ne===this.normalizeInstanceIdentifier(pt)&&Lt.resolve(yt);return yt}onInit(pe,Me){var Ne;const yt=this.normalizeInstanceIdentifier(Me),pt=null!==(Ne=this.onInitCallbacks.get(yt))&&void 0!==Ne?Ne:new Set;pt.add(pe),this.onInitCallbacks.set(yt,pt);const Lt=this.instances.get(yt);return Lt&&pe(Lt,yt),()=>{pt.delete(pe)}}invokeOnInitCallbacks(pe,Me){const Ne=this.onInitCallbacks.get(Me);if(Ne)for(const yt of Ne)try{yt(pe,Me)}catch{}}getOrInitializeService({instanceIdentifier:pe,options:Me={}}){let Ne=this.instances.get(pe);if(!Ne&&this.component&&(Ne=this.component.instanceFactory(this.container,{instanceIdentifier:(ze=pe,ze===Te?void 0:ze),options:Me}),this.instances.set(pe,Ne),this.instancesOptions.set(pe,Me),this.invokeOnInitCallbacks(Ne,pe),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,pe,Ne)}catch{}var ze;return Ne||null}normalizeInstanceIdentifier(pe=Te){return this.component?this.component.multipleInstances?pe:Te:pe}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class xe{constructor(pe){this.name=pe,this.providers=new Map}addComponent(pe){const Me=this.getProvider(pe.name);if(Me.isComponentSet())throw new Error(`Component ${pe.name} has already been registered with ${this.name}`);Me.setComponent(pe)}addOrOverwriteComponent(pe){this.getProvider(pe.name).isComponentSet()&&this.providers.delete(pe.name),this.addComponent(pe)}getProvider(pe){if(this.providers.has(pe))return this.providers.get(pe);const Me=new ke(pe,this);return this.providers.set(pe,Me),Me}getProviders(){return Array.from(this.providers.values())}}},1877:(wn,dt,L)=>{L.d(dt,{Am:()=>ze,Ub:()=>xe,Yd:()=>Ze,in:()=>_});const f=[];var _=(()=>{return(pe=_||(_={}))[pe.DEBUG=0]="DEBUG",pe[pe.VERBOSE=1]="VERBOSE",pe[pe.INFO=2]="INFO",pe[pe.WARN=3]="WARN",pe[pe.ERROR=4]="ERROR",pe[pe.SILENT=5]="SILENT",_;var pe})();const re={debug:_.DEBUG,verbose:_.VERBOSE,info:_.INFO,warn:_.WARN,error:_.ERROR,silent:_.SILENT},Te=_.INFO,ke={[_.DEBUG]:"log",[_.VERBOSE]:"log",[_.INFO]:"info",[_.WARN]:"warn",[_.ERROR]:"error"},He=(pe,Me,...Ne)=>{if(Me<pe.logLevel)return;const yt=(new Date).toISOString(),pt=ke[Me];if(!pt)throw new Error(`Attempted to log a message with an invalid logType (value: ${Me})`);console[pt](`[${yt}]  ${pe.name}:`,...Ne)};class Ze{constructor(Me){this.name=Me,this._logLevel=Te,this._logHandler=He,this._userLogHandler=null,f.push(this)}get logLevel(){return this._logLevel}set logLevel(Me){if(!(Me in _))throw new TypeError(`Invalid value "${Me}" assigned to \`logLevel\``);this._logLevel=Me}setLogLevel(Me){this._logLevel="string"==typeof Me?re[Me]:Me}get logHandler(){return this._logHandler}set logHandler(Me){if("function"!=typeof Me)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=Me}get userLogHandler(){return this._userLogHandler}set userLogHandler(Me){this._userLogHandler=Me}debug(...Me){this._userLogHandler&&this._userLogHandler(this,_.DEBUG,...Me),this._logHandler(this,_.DEBUG,...Me)}log(...Me){this._userLogHandler&&this._userLogHandler(this,_.VERBOSE,...Me),this._logHandler(this,_.VERBOSE,...Me)}info(...Me){this._userLogHandler&&this._userLogHandler(this,_.INFO,...Me),this._logHandler(this,_.INFO,...Me)}warn(...Me){this._userLogHandler&&this._userLogHandler(this,_.WARN,...Me),this._logHandler(this,_.WARN,...Me)}error(...Me){this._userLogHandler&&this._userLogHandler(this,_.ERROR,...Me),this._logHandler(this,_.ERROR,...Me)}}function xe(pe){f.forEach(Me=>{Me.setLogLevel(pe)})}function ze(pe,Me){for(const Ne of f){let yt=null;Me&&Me.level&&(yt=re[Me.level]),Ne.userLogHandler=null===pe?null:(pt,Lt,...an)=>{const It=an.map(Mt=>{if(null==Mt)return null;if("string"==typeof Mt)return Mt;if("number"==typeof Mt||"boolean"==typeof Mt)return Mt.toString();if(Mt instanceof Error)return Mt.message;try{return JSON.stringify(Mt)}catch{return null}}).filter(Mt=>Mt).join(" ");Lt>=(yt??pt.logLevel)&&pe({level:_[Lt].toLowerCase(),message:It,args:an,type:pt.name})}}}},259:(wn,dt,L)=>{L.d(dt,{C6:()=>f.getApps,KN:()=>f.registerVersion,Mq:()=>f.getApp,ZF:()=>f.initializeApp});var f=L(9681);(0,f.registerVersion)("firebase","9.19.1","app")},8784:(wn,dt,L)=>{L.d(dt,{lI:()=>jl});var f=L(5861),_=L(2090),re=L(9681),Te=L(1877),ke=L(655),He=L(4859);const Lt=function yt(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},an=new _.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Mt=new Te.Yd("@firebase/auth");function Ae(B,...w){Mt.logLevel<=Te.in.ERROR&&Mt.error(`Auth (${re.SDK_VERSION}): ${B}`,...w)}function _t(B,...w){throw kt(B,...w)}function Qe(B,...w){return kt(B,...w)}function kt(B,...w){if("string"!=typeof B){const M=w[0],K=[...w.slice(1)];return K[0]&&(K[0].appName=B.name),B._errorFactory.create(M,...K)}return an.create(B,...w)}function Ye(B,w,...M){if(!B)throw kt(w,...M)}function z(B){const w="INTERNAL ASSERTION FAILED: "+B;throw Ae(w),new Error(w)}function ct(B,w){B||z(w)}const bt=new Map;function Ft(B){ct(B instanceof Function,"Expected a class definition");let w=bt.get(B);return w?(ct(w instanceof B,"Instance stored in cache mismatched with class"),w):(w=new B,bt.set(B,w),w)}function Ht(){return"http:"===Ot()||"https:"===Ot()}function Ot(){var B;return typeof self<"u"&&(null===(B=self.location)||void 0===B?void 0:B.protocol)||null}class Tt{constructor(w,M){this.shortDelay=w,this.longDelay=M,ct(M>w,"Short delay should be less than long delay!"),this.isMobile=(0,_.uI)()||(0,_.b$)()}get(){return function jt(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Ht()||(0,_.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}class Et{static initialize(w,M,K){this.fetchImpl=w,M&&(this.headersImpl=M),K&&(this.responseImpl=K)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void z("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void z("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void z("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const rn={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Zt=new Tt(3e4,6e4);function sn(B,w,M,K){return bn.apply(this,arguments)}function bn(){return(bn=(0,f.Z)(function*(B,w,M,K,we={}){return fi(B,we,(0,f.Z)(function*(){let je={},$t={};K&&("GET"===w?$t=K:je={body:JSON.stringify(K)});const Sn=(0,_.xO)(Object.assign({key:B.config.apiKey},$t)).slice(1),Zn=yield B._getAdditionalHeaders();return Zn["Content-Type"]="application/json",B.languageCode&&(Zn["X-Firebase-Locale"]=B.languageCode),Et.fetch()(oi(B,B.config.apiHost,M,Sn),Object.assign({method:w,headers:Zn,referrerPolicy:"no-referrer"},je))}))})).apply(this,arguments)}function fi(B,w,M){return ui.apply(this,arguments)}function ui(){return(ui=(0,f.Z)(function*(B,w,M){B._canInitEmulator=!1;const K=Object.assign(Object.assign({},rn),w);try{const we=new Pi(B),je=yield Promise.race([M(),we.promise]);we.clearNetworkTimeout();const $t=yield je.json();if("needConfirmation"in $t)throw Cr(B,"account-exists-with-different-credential",$t);if(je.ok&&!("errorMessage"in $t))return $t;{const Sn=je.ok?$t.errorMessage:$t.error.message,[Zn,Ri]=Sn.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Zn)throw Cr(B,"credential-already-in-use",$t);if("EMAIL_EXISTS"===Zn)throw Cr(B,"email-already-in-use",$t);if("USER_DISABLED"===Zn)throw Cr(B,"user-disabled",$t);const Er=K[Zn]||Zn.toLowerCase().replace(/[_\s]+/g,"-");if(Ri)throw function Ue(B,w,M){const K=Object.assign(Object.assign({},Lt()),{[w]:M});return new _.LL("auth","Firebase",K).create(w,{appName:B.name})}(B,Er,Ri);_t(B,Er)}}catch(we){if(we instanceof _.ZR)throw we;_t(B,"network-request-failed",{message:String(we)})}})).apply(this,arguments)}function oi(B,w,M,K){const we=`${w}${M}?${K}`;return B.config.emulator?function Ut(B,w){ct(B.emulator,"Emulator should always be set here");const{url:M}=B.emulator;return w?`${M}${w.startsWith("/")?w.slice(1):w}`:M}(B.config,we):`${B.config.apiScheme}://${we}`}class Pi{constructor(w){this.auth=w,this.timer=null,this.promise=new Promise((M,K)=>{this.timer=setTimeout(()=>K(Qe(this.auth,"network-request-failed")),Zt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Cr(B,w,M){const K={appName:B.name};M.email&&(K.email=M.email),M.phoneNumber&&(K.phoneNumber=M.phoneNumber);const we=Qe(B,w,K);return we.customData._tokenResponse=M,we}function Ai(){return(Ai=(0,f.Z)(function*(B,w){return sn(B,"POST","/v1/accounts:delete",w)})).apply(this,arguments)}function Ji(){return(Ji=(0,f.Z)(function*(B,w){return sn(B,"POST","/v1/accounts:lookup",w)})).apply(this,arguments)}function ri(B){if(B)try{const w=new Date(Number(B));if(!isNaN(w.getTime()))return w.toUTCString()}catch{}}function Pr(){return(Pr=(0,f.Z)(function*(B,w=!1){const M=(0,_.m9)(B),K=yield M.getIdToken(w),we=Pn(K);Ye(we&&we.exp&&we.auth_time&&we.iat,M.auth,"internal-error");const je="object"==typeof we.firebase?we.firebase:void 0,$t=je?.sign_in_provider;return{claims:we,token:K,authTime:ri(Hn(we.auth_time)),issuedAtTime:ri(Hn(we.iat)),expirationTime:ri(Hn(we.exp)),signInProvider:$t||null,signInSecondFactor:je?.sign_in_second_factor||null}})).apply(this,arguments)}function Hn(B){return 1e3*Number(B)}function Pn(B){const[w,M,K]=B.split(".");if(void 0===w||void 0===M||void 0===K)return Ae("JWT malformed, contained fewer than 3 sections"),null;try{const we=(0,_.tV)(M);return we?JSON.parse(we):(Ae("Failed to decode base64 JWT payload"),null)}catch(we){return Ae("Caught error parsing JWT payload as JSON",we?.toString()),null}}function Nn(B,w){return Ni.apply(this,arguments)}function Ni(){return(Ni=(0,f.Z)(function*(B,w,M=!1){if(M)return w;try{return yield w}catch(K){throw K instanceof _.ZR&&function Hi({code:B}){return"auth/user-disabled"===B||"auth/user-token-expired"===B}(K)&&B.auth.currentUser===B&&(yield B.auth.signOut()),K}})).apply(this,arguments)}class Vi{constructor(w){this.user=w,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(w){var M;if(w){const K=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),K}{this.errorBackoff=3e4;const we=(null!==(M=this.user.stsTokenManager.expirationTime)&&void 0!==M?M:0)-Date.now()-3e5;return Math.max(0,we)}}schedule(w=!1){var M=this;if(!this.isRunning)return;const K=this.getInterval(w);this.timerId=setTimeout((0,f.Z)(function*(){yield M.iteration()}),K)}iteration(){var w=this;return(0,f.Z)(function*(){try{yield w.user.getIdToken(!0)}catch(M){return void("auth/network-request-failed"===M?.code&&w.schedule(!0))}w.schedule()})()}}class gr{constructor(w,M){this.createdAt=w,this.lastLoginAt=M,this._initializeTime()}_initializeTime(){this.lastSignInTime=ri(this.lastLoginAt),this.creationTime=ri(this.createdAt)}_copy(w){this.createdAt=w.createdAt,this.lastLoginAt=w.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function er(B){return Fi.apply(this,arguments)}function Fi(){return Fi=(0,f.Z)(function*(B){var w;const M=B.auth,K=yield B.getIdToken(),we=yield Nn(B,function Tn(B,w){return Ji.apply(this,arguments)}(M,{idToken:K}));Ye(we?.users.length,M,"internal-error");const je=we.users[0];B._notifyReloadListener(je);const $t=null!==(w=je.providerUserInfo)&&void 0!==w&&w.length?function dn(B){return B.map(w=>{var{providerId:M}=w,K=(0,ke._T)(w,["providerId"]);return{providerId:M,uid:K.rawId||"",displayName:K.displayName||null,email:K.email||null,phoneNumber:K.phoneNumber||null,photoURL:K.photoUrl||null}})}(je.providerUserInfo):[],Sn=function Oi(B,w){return[...B.filter(K=>!w.some(we=>we.providerId===K.providerId)),...w]}(B.providerData,$t),Er=!!B.isAnonymous&&!(B.email&&je.passwordHash||Sn?.length),yo={uid:je.localId,displayName:je.displayName||null,photoURL:je.photoUrl||null,email:je.email||null,emailVerified:je.emailVerified||!1,phoneNumber:je.phoneNumber||null,tenantId:je.tenantId||null,providerData:Sn,metadata:new gr(je.createdAt,je.lastLoginAt),isAnonymous:Er};Object.assign(B,yo)}),Fi.apply(this,arguments)}function $n(){return($n=(0,f.Z)(function*(B){const w=(0,_.m9)(B);yield er(w),yield w.auth._persistUserIfCurrent(w),w.auth._notifyListenersIfCurrent(w)})).apply(this,arguments)}function $(){return($=(0,f.Z)(function*(B,w){const M=yield fi(B,{},(0,f.Z)(function*(){const K=(0,_.xO)({grant_type:"refresh_token",refresh_token:w}).slice(1),{tokenApiHost:we,apiKey:je}=B.config,$t=oi(B,we,"/v1/token",`key=${je}`),Sn=yield B._getAdditionalHeaders();return Sn["Content-Type"]="application/x-www-form-urlencoded",Et.fetch()($t,{method:"POST",headers:Sn,body:K})}));return{accessToken:M.access_token,expiresIn:M.expires_in,refreshToken:M.refresh_token}})).apply(this,arguments)}class ne{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(w){Ye(w.idToken,"internal-error"),Ye(typeof w.idToken<"u","internal-error"),Ye(typeof w.refreshToken<"u","internal-error");const M="expiresIn"in w&&typeof w.expiresIn<"u"?Number(w.expiresIn):function On(B){const w=Pn(B);return Ye(w,"internal-error"),Ye(typeof w.exp<"u","internal-error"),Ye(typeof w.iat<"u","internal-error"),Number(w.exp)-Number(w.iat)}(w.idToken);this.updateTokensAndExpiration(w.idToken,w.refreshToken,M)}getToken(w,M=!1){var K=this;return(0,f.Z)(function*(){return Ye(!K.accessToken||K.refreshToken,w,"user-token-expired"),M||!K.accessToken||K.isExpired?K.refreshToken?(yield K.refresh(w,K.refreshToken),K.accessToken):null:K.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(w,M){var K=this;return(0,f.Z)(function*(){const{accessToken:we,refreshToken:je,expiresIn:$t}=yield function be(B,w){return $.apply(this,arguments)}(w,M);K.updateTokensAndExpiration(we,je,Number($t))})()}updateTokensAndExpiration(w,M,K){this.refreshToken=M||null,this.accessToken=w||null,this.expirationTime=Date.now()+1e3*K}static fromJSON(w,M){const{refreshToken:K,accessToken:we,expirationTime:je}=M,$t=new ne;return K&&(Ye("string"==typeof K,"internal-error",{appName:w}),$t.refreshToken=K),we&&(Ye("string"==typeof we,"internal-error",{appName:w}),$t.accessToken=we),je&&(Ye("number"==typeof je,"internal-error",{appName:w}),$t.expirationTime=je),$t}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(w){this.accessToken=w.accessToken,this.refreshToken=w.refreshToken,this.expirationTime=w.expirationTime}_clone(){return Object.assign(new ne,this.toJSON())}_performRefresh(){return z("not implemented")}}function de(B,w){Ye("string"==typeof B||typeof B>"u","internal-error",{appName:w})}class ye{constructor(w){var{uid:M,auth:K,stsTokenManager:we}=w,je=(0,ke._T)(w,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Vi(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=M,this.auth=K,this.stsTokenManager=we,this.accessToken=we.accessToken,this.displayName=je.displayName||null,this.email=je.email||null,this.emailVerified=je.emailVerified||!1,this.phoneNumber=je.phoneNumber||null,this.photoURL=je.photoURL||null,this.isAnonymous=je.isAnonymous||!1,this.tenantId=je.tenantId||null,this.providerData=je.providerData?[...je.providerData]:[],this.metadata=new gr(je.createdAt||void 0,je.lastLoginAt||void 0)}getIdToken(w){var M=this;return(0,f.Z)(function*(){const K=yield Nn(M,M.stsTokenManager.getToken(M.auth,w));return Ye(K,M.auth,"internal-error"),M.accessToken!==K&&(M.accessToken=K,yield M.auth._persistUserIfCurrent(M),M.auth._notifyListenersIfCurrent(M)),K})()}getIdTokenResult(w){return function Yi(B){return Pr.apply(this,arguments)}(this,w)}reload(){return function $r(B){return $n.apply(this,arguments)}(this)}_assign(w){this!==w&&(Ye(this.uid===w.uid,this.auth,"internal-error"),this.displayName=w.displayName,this.photoURL=w.photoURL,this.email=w.email,this.emailVerified=w.emailVerified,this.phoneNumber=w.phoneNumber,this.isAnonymous=w.isAnonymous,this.tenantId=w.tenantId,this.providerData=w.providerData.map(M=>Object.assign({},M)),this.metadata._copy(w.metadata),this.stsTokenManager._assign(w.stsTokenManager))}_clone(w){const M=new ye(Object.assign(Object.assign({},this),{auth:w,stsTokenManager:this.stsTokenManager._clone()}));return M.metadata._copy(this.metadata),M}_onReload(w){Ye(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=w,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(w){this.reloadListener?this.reloadListener(w):this.reloadUserInfo=w}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(w,M=!1){var K=this;return(0,f.Z)(function*(){let we=!1;w.idToken&&w.idToken!==K.stsTokenManager.accessToken&&(K.stsTokenManager.updateFromServerResponse(w),we=!0),M&&(yield er(K)),yield K.auth._persistUserIfCurrent(K),we&&K.auth._notifyListenersIfCurrent(K)})()}delete(){var w=this;return(0,f.Z)(function*(){const M=yield w.getIdToken();return yield Nn(w,function ii(B,w){return Ai.apply(this,arguments)}(w.auth,{idToken:M})),w.stsTokenManager.clearRefreshToken(),w.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(w=>Object.assign({},w)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(w,M){var K,we,je,$t,Sn,Zn,Ri,Er;const yo=null!==(K=M.displayName)&&void 0!==K?K:void 0,Gs=null!==(we=M.email)&&void 0!==we?we:void 0,Ol=null!==(je=M.phoneNumber)&&void 0!==je?je:void 0,kl=null!==($t=M.photoURL)&&void 0!==$t?$t:void 0,Zc=null!==(Sn=M.tenantId)&&void 0!==Sn?Sn:void 0,Yc=null!==(Zn=M._redirectEventId)&&void 0!==Zn?Zn:void 0,Ir=null!==(Ri=M.createdAt)&&void 0!==Ri?Ri:void 0,_c=null!==(Er=M.lastLoginAt)&&void 0!==Er?Er:void 0,{uid:ll,emailVerified:yc,isAnonymous:Rc,providerData:_l,stsTokenManager:Dl}=M;Ye(ll&&Dl,w,"internal-error");const mu=ne.fromJSON(this.name,Dl);Ye("string"==typeof ll,w,"internal-error"),de(yo,w.name),de(Gs,w.name),Ye("boolean"==typeof yc,w,"internal-error"),Ye("boolean"==typeof Rc,w,"internal-error"),de(Ol,w.name),de(kl,w.name),de(Zc,w.name),de(Yc,w.name),de(Ir,w.name),de(_c,w.name);const Qc=new ye({uid:ll,auth:w,email:Gs,emailVerified:yc,displayName:yo,isAnonymous:Rc,photoURL:kl,phoneNumber:Ol,tenantId:Zc,stsTokenManager:mu,createdAt:Ir,lastLoginAt:_c});return _l&&Array.isArray(_l)&&(Qc.providerData=_l.map(cc=>Object.assign({},cc))),Yc&&(Qc._redirectEventId=Yc),Qc}static _fromIdTokenResponse(w,M,K=!1){return(0,f.Z)(function*(){const we=new ne;we.updateFromServerResponse(M);const je=new ye({uid:M.localId,auth:w,stsTokenManager:we,isAnonymous:K});return yield er(je),je})()}}const Nt=(()=>{class B{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,f.Z)(function*(){return!0})()}_set(M,K){var we=this;return(0,f.Z)(function*(){we.storage[M]=K})()}_get(M){var K=this;return(0,f.Z)(function*(){const we=K.storage[M];return void 0===we?null:we})()}_remove(M){var K=this;return(0,f.Z)(function*(){delete K.storage[M]})()}_addListener(M,K){}_removeListener(M,K){}}return B.type="NONE",B})();function Le(B,w,M){return`firebase:${B}:${w}:${M}`}class Be{constructor(w,M,K){this.persistence=w,this.auth=M,this.userKey=K;const{config:we,name:je}=this.auth;this.fullUserKey=Le(this.userKey,we.apiKey,je),this.fullPersistenceKey=Le("persistence",we.apiKey,je),this.boundEventHandler=M._onStorageEvent.bind(M),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(w){return this.persistence._set(this.fullUserKey,w.toJSON())}getCurrentUser(){var w=this;return(0,f.Z)(function*(){const M=yield w.persistence._get(w.fullUserKey);return M?ye._fromJSON(w.auth,M):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(w){var M=this;return(0,f.Z)(function*(){if(M.persistence===w)return;const K=yield M.getCurrentUser();return yield M.removeCurrentUser(),M.persistence=w,K?M.setCurrentUser(K):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(w,M,K="authUser"){return(0,f.Z)(function*(){if(!M.length)return new Be(Ft(Nt),w,K);const we=(yield Promise.all(M.map(function(){var Ri=(0,f.Z)(function*(Er){if(yield Er._isAvailable())return Er});return function(Er){return Ri.apply(this,arguments)}}()))).filter(Ri=>Ri);let je=we[0]||Ft(Nt);const $t=Le(K,w.config.apiKey,w.name);let Sn=null;for(const Ri of M)try{const Er=yield Ri._get($t);if(Er){const yo=ye._fromJSON(w,Er);Ri!==je&&(Sn=yo),je=Ri;break}}catch{}const Zn=we.filter(Ri=>Ri._shouldAllowMigration);return je._shouldAllowMigration&&Zn.length?(je=Zn[0],Sn&&(yield je._set($t,Sn.toJSON())),yield Promise.all(M.map(function(){var Ri=(0,f.Z)(function*(Er){if(Er!==je)try{yield Er._remove($t)}catch{}});return function(Er){return Ri.apply(this,arguments)}}())),new Be(je,w,K)):new Be(je,w,K)})()}}function it(B){const w=B.toLowerCase();if(w.includes("opera/")||w.includes("opr/")||w.includes("opios/"))return"Opera";if(function Je(B=(0,_.z$)()){return/iemobile/i.test(B)}(w))return"IEMobile";if(w.includes("msie")||w.includes("trident/"))return"IE";if(w.includes("edge/"))return"Edge";if(function qt(B=(0,_.z$)()){return/firefox\//i.test(B)}(w))return"Firefox";if(w.includes("silk/"))return"Silk";if(function Fe(B=(0,_.z$)()){return/blackberry/i.test(B)}(w))return"Blackberry";if(function ht(B=(0,_.z$)()){return/webos/i.test(B)}(w))return"Webos";if(function St(B=(0,_.z$)()){const w=B.toLowerCase();return w.includes("safari/")&&!w.includes("chrome/")&&!w.includes("crios/")&&!w.includes("android")}(w))return"Safari";if((w.includes("chrome/")||function Mn(B=(0,_.z$)()){return/crios\//i.test(B)}(w))&&!w.includes("edge/"))return"Chrome";if(function ot(B=(0,_.z$)()){return/android/i.test(B)}(w))return"Android";{const K=B.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===K?.length)return K[1]}return"Other"}function is(B,w=[]){let M;switch(B){case"Browser":M=it((0,_.z$)());break;case"Worker":M=`${it((0,_.z$)())}-${B}`;break;default:M=B}const K=w.length?w.join(","):"FirebaseCore-web";return`${M}/JsCore/${re.SDK_VERSION}/${K}`}class Gr{constructor(w){this.auth=w,this.queue=[]}pushCallback(w,M){const K=je=>new Promise(($t,Sn)=>{try{$t(w(je))}catch(Zn){Sn(Zn)}});K.onAbort=M,this.queue.push(K);const we=this.queue.length-1;return()=>{this.queue[we]=()=>Promise.resolve()}}runMiddleware(w){var M=this;return(0,f.Z)(function*(){if(M.auth.currentUser===w)return;const K=[];try{for(const we of M.queue)yield we(w),we.onAbort&&K.push(we.onAbort)}catch(we){K.reverse();for(const je of K)try{je()}catch{}throw M.auth._errorFactory.create("login-blocked",{originalMessage:we?.message})}})()}}class os{constructor(w,M,K){this.app=w,this.heartbeatServiceProvider=M,this.config=K,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ji(this),this.idTokenSubscription=new ji(this),this.beforeStateQueue=new Gr(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=an,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=w.name,this.clientVersion=K.sdkClientVersion}_initializeWithPersistence(w,M){var K=this;return M&&(this._popupRedirectResolver=Ft(M)),this._initializationPromise=this.queue((0,f.Z)(function*(){var we,je;if(!K._deleted&&(K.persistenceManager=yield Be.create(K,w),!K._deleted)){if(null!==(we=K._popupRedirectResolver)&&void 0!==we&&we._shouldInitProactively)try{yield K._popupRedirectResolver._initialize(K)}catch{}yield K.initializeCurrentUser(M),K.lastNotifiedUid=(null===(je=K.currentUser)||void 0===je?void 0:je.uid)||null,!K._deleted&&(K._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var w=this;return(0,f.Z)(function*(){if(w._deleted)return;const M=yield w.assertedPersistence.getCurrentUser();if(w.currentUser||M){if(w.currentUser&&M&&w.currentUser.uid===M.uid)return w._currentUser._assign(M),void(yield w.currentUser.getIdToken());yield w._updateCurrentUser(M,!0)}})()}initializeCurrentUser(w){var M=this;return(0,f.Z)(function*(){var K;const we=yield M.assertedPersistence.getCurrentUser();let je=we,$t=!1;if(w&&M.config.authDomain){yield M.getOrInitRedirectPersistenceManager();const Sn=null===(K=M.redirectUser)||void 0===K?void 0:K._redirectEventId,Zn=je?._redirectEventId,Ri=yield M.tryRedirectSignIn(w);(!Sn||Sn===Zn)&&Ri?.user&&(je=Ri.user,$t=!0)}if(!je)return M.directlySetCurrentUser(null);if(!je._redirectEventId){if($t)try{yield M.beforeStateQueue.runMiddleware(je)}catch(Sn){je=we,M._popupRedirectResolver._overrideRedirectResult(M,()=>Promise.reject(Sn))}return je?M.reloadAndSetCurrentUserOrClear(je):M.directlySetCurrentUser(null)}return Ye(M._popupRedirectResolver,M,"argument-error"),yield M.getOrInitRedirectPersistenceManager(),M.redirectUser&&M.redirectUser._redirectEventId===je._redirectEventId?M.directlySetCurrentUser(je):M.reloadAndSetCurrentUserOrClear(je)})()}tryRedirectSignIn(w){var M=this;return(0,f.Z)(function*(){let K=null;try{K=yield M._popupRedirectResolver._completeRedirectFn(M,w,!0)}catch{yield M._setRedirectUser(null)}return K})()}reloadAndSetCurrentUserOrClear(w){var M=this;return(0,f.Z)(function*(){try{yield er(w)}catch(K){if("auth/network-request-failed"!==K?.code)return M.directlySetCurrentUser(null)}return M.directlySetCurrentUser(w)})()}useDeviceLanguage(){this.languageCode=function Gt(){if(typeof navigator>"u")return null;const B=navigator;return B.languages&&B.languages[0]||B.language||null}()}_delete(){var w=this;return(0,f.Z)(function*(){w._deleted=!0})()}updateCurrentUser(w){var M=this;return(0,f.Z)(function*(){const K=w?(0,_.m9)(w):null;return K&&Ye(K.auth.config.apiKey===M.config.apiKey,M,"invalid-user-token"),M._updateCurrentUser(K&&K._clone(M))})()}_updateCurrentUser(w,M=!1){var K=this;return(0,f.Z)(function*(){if(!K._deleted)return w&&Ye(K.tenantId===w.tenantId,K,"tenant-id-mismatch"),M||(yield K.beforeStateQueue.runMiddleware(w)),K.queue((0,f.Z)(function*(){yield K.directlySetCurrentUser(w),K.notifyAuthListeners()}))})()}signOut(){var w=this;return(0,f.Z)(function*(){return yield w.beforeStateQueue.runMiddleware(null),(w.redirectPersistenceManager||w._popupRedirectResolver)&&(yield w._setRedirectUser(null)),w._updateCurrentUser(null,!0)})()}setPersistence(w){var M=this;return this.queue((0,f.Z)(function*(){yield M.assertedPersistence.setPersistence(Ft(w))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(w){this._errorFactory=new _.LL("auth","Firebase",w())}onAuthStateChanged(w,M,K){return this.registerStateListener(this.authStateSubscription,w,M,K)}beforeAuthStateChanged(w,M){return this.beforeStateQueue.pushCallback(w,M)}onIdTokenChanged(w,M,K){return this.registerStateListener(this.idTokenSubscription,w,M,K)}toJSON(){var w;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(w=this._currentUser)||void 0===w?void 0:w.toJSON()}}_setRedirectUser(w,M){var K=this;return(0,f.Z)(function*(){const we=yield K.getOrInitRedirectPersistenceManager(M);return null===w?we.removeCurrentUser():we.setCurrentUser(w)})()}getOrInitRedirectPersistenceManager(w){var M=this;return(0,f.Z)(function*(){if(!M.redirectPersistenceManager){const K=w&&Ft(w)||M._popupRedirectResolver;Ye(K,M,"argument-error"),M.redirectPersistenceManager=yield Be.create(M,[Ft(K._redirectPersistence)],"redirectUser"),M.redirectUser=yield M.redirectPersistenceManager.getCurrentUser()}return M.redirectPersistenceManager})()}_redirectUserForId(w){var M=this;return(0,f.Z)(function*(){var K,we;return M._isInitialized&&(yield M.queue((0,f.Z)(function*(){}))),(null===(K=M._currentUser)||void 0===K?void 0:K._redirectEventId)===w?M._currentUser:(null===(we=M.redirectUser)||void 0===we?void 0:we._redirectEventId)===w?M.redirectUser:null})()}_persistUserIfCurrent(w){var M=this;return(0,f.Z)(function*(){if(w===M.currentUser)return M.queue((0,f.Z)(function*(){return M.directlySetCurrentUser(w)}))})()}_notifyListenersIfCurrent(w){w===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var w,M;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const K=null!==(M=null===(w=this.currentUser)||void 0===w?void 0:w.uid)&&void 0!==M?M:null;this.lastNotifiedUid!==K&&(this.lastNotifiedUid=K,this.authStateSubscription.next(this.currentUser))}registerStateListener(w,M,K,we){if(this._deleted)return()=>{};const je="function"==typeof M?M:M.next.bind(M),$t=this._isInitialized?Promise.resolve():this._initializationPromise;return Ye($t,this,"internal-error"),$t.then(()=>je(this.currentUser)),"function"==typeof M?w.addObserver(M,K,we):w.addObserver(M)}directlySetCurrentUser(w){var M=this;return(0,f.Z)(function*(){M.currentUser&&M.currentUser!==w&&M._currentUser._stopProactiveRefresh(),w&&M.isProactiveRefreshEnabled&&w._startProactiveRefresh(),M.currentUser=w,w?yield M.assertedPersistence.setCurrentUser(w):yield M.assertedPersistence.removeCurrentUser()})()}queue(w){return this.operations=this.operations.then(w,w),this.operations}get assertedPersistence(){return Ye(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(w){!w||this.frameworks.includes(w)||(this.frameworks.push(w),this.frameworks.sort(),this.clientVersion=is(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var w=this;return(0,f.Z)(function*(){var M;const K={"X-Client-Version":w.clientVersion};w.app.options.appId&&(K["X-Firebase-gmpid"]=w.app.options.appId);const we=yield null===(M=w.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===M?void 0:M.getHeartbeatsHeader();return we&&(K["X-Firebase-Client"]=we),K})()}}function Tr(B){return(0,_.m9)(B)}class ji{constructor(w){this.auth=w,this.observer=null,this.addObserver=(0,_.ne)(M=>this.observer=M)}get next(){return Ye(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function fr(){return window}function Hr(){return(Hr=(0,f.Z)(function*(B){return(yield sn(B,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}const Xa=1e12;class mo{constructor(w){this.auth=w,this.counter=Xa,this._widgets=new Map}render(w,M){const K=this.counter;return this._widgets.set(K,new Va(w,this.auth.name,M||{})),this.counter++,K}reset(w){var M;const K=w||Xa;null===(M=this._widgets.get(K))||void 0===M||M.delete(),this._widgets.delete(K)}getResponse(w){var M;return(null===(M=this._widgets.get(w||Xa))||void 0===M?void 0:M.getResponse())||""}execute(w){var M=this;return(0,f.Z)(function*(){var K;return null===(K=M._widgets.get(w||Xa))||void 0===K||K.execute(),""})()}}class Va{constructor(w,M,K){this.params=K,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const we="string"==typeof w?document.getElementById(w):w;Ye(we,"argument-error",{appName:M}),this.container=we,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function dl(B){const w=[],M="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let K=0;K<B;K++)w.push(M.charAt(Math.floor(Math.random()*M.length)));return w.join("")}(50);const{callback:w,"expired-callback":M}=this.params;if(w)try{w(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,M)try{M()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Ja=function Ga(B){return`__${B}${Math.floor(1e6*Math.random())}`}("rcb"),Fs=new Tt(3e4,6e4);class rl{constructor(){var w;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(w=fr().grecaptcha)||void 0===w||!w.render)}load(w,M=""){return Ye(function xa(B){return B.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(B)}(M),w,"argument-error"),this.shouldResolveImmediately(M)?Promise.resolve(fr().grecaptcha):new Promise((K,we)=>{const je=fr().setTimeout(()=>{we(Qe(w,"network-request-failed"))},Fs.get());fr()[Ja]=()=>{fr().clearTimeout(je),delete fr()[Ja];const Sn=fr().grecaptcha;if(!Sn)return void we(Qe(w,"internal-error"));const Zn=Sn.render;Sn.render=(Ri,Er)=>{const yo=Zn(Ri,Er);return this.counter++,yo},this.hostLanguage=M,K(Sn)},function ro(B){return new Promise((w,M)=>{const K=document.createElement("script");K.setAttribute("src",B),K.onload=w,K.onerror=we=>{const je=Qe("internal-error");je.customData=we,M(je)},K.type="text/javascript",K.charset="UTF-8",function ba(){var B,w;return null!==(w=null===(B=document.getElementsByTagName("head"))||void 0===B?void 0:B[0])&&void 0!==w?w:document}().appendChild(K)})}(`https://www.google.com/recaptcha/api.js??${(0,_.xO)({onload:Ja,render:"explicit",hl:M})}`).catch(()=>{clearTimeout(je),we(Qe(w,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(w){var M;return!(null===(M=fr().grecaptcha)||void 0===M||!M.render)&&(w===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Al{load(w){return(0,f.Z)(function*(){return new mo(w)})()}clearedOneInstance(){}}const Hl={theme:"light",type:"image"};class jl{constructor(w,M=Object.assign({},Hl),K){this.parameters=M,this.type="recaptcha",this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Tr(K),this.isInvisible="invisible"===this.parameters.size,Ye(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const we="string"==typeof w?document.getElementById(w):w;Ye(we,this.auth,"argument-error"),this.container=we,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Al:new rl,this.validateStartingState()}verify(){var w=this;return(0,f.Z)(function*(){w.assertNotDestroyed();const M=yield w.render(),K=w.getAssertedRecaptcha();return K.getResponse(M)||new Promise(je=>{const $t=Sn=>{Sn&&(w.tokenChangeListeners.delete($t),je(Sn))};w.tokenChangeListeners.add($t),w.isInvisible&&K.execute(M)})})()}render(){try{this.assertNotDestroyed()}catch(w){return Promise.reject(w)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(w=>{throw this.renderPromise=null,w})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(w=>{this.container.removeChild(w)})}validateStartingState(){Ye(!this.parameters.sitekey,this.auth,"argument-error"),Ye(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Ye(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(w){return M=>{if(this.tokenChangeListeners.forEach(K=>K(M)),"function"==typeof w)w(M);else if("string"==typeof w){const K=fr()[w];"function"==typeof K&&K(M)}}}assertNotDestroyed(){Ye(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var w=this;return(0,f.Z)(function*(){if(yield w.init(),!w.widgetId){let M=w.container;if(!w.isInvisible){const K=document.createElement("div");M.appendChild(K),M=K}w.widgetId=w.getAssertedRecaptcha().render(M,w.parameters)}return w.widgetId})()}init(){var w=this;return(0,f.Z)(function*(){Ye(Ht()&&!function qn(){return typeof fr().WorkerGlobalScope<"u"&&"function"==typeof fr().importScripts}(),w.auth,"internal-error"),yield function cs(){let B=null;return new Promise(w=>{"complete"!==document.readyState?(B=()=>w(),window.addEventListener("load",B)):w()}).catch(w=>{throw B&&window.removeEventListener("load",B),w})}(),w.recaptcha=yield w._recaptchaLoader.load(w.auth,w.auth.languageCode||void 0);const M=yield function ea(B){return Hr.apply(this,arguments)}(w.auth);Ye(M,w.auth,"internal-error"),w.parameters.sitekey=M})()}getAssertedRecaptcha(){return Ye(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}new Tt(2e3,1e4),new Tt(3e4,6e4),new Tt(5e3,15e3);var al="@firebase/auth";class Yl{constructor(w){this.auth=w,this.internalListeners=new Map}getUid(){var w;return this.assertAuthConfigured(),(null===(w=this.auth.currentUser)||void 0===w?void 0:w.uid)||null}getToken(w){var M=this;return(0,f.Z)(function*(){return M.assertAuthConfigured(),yield M.auth._initializationPromise,M.auth.currentUser?{accessToken:yield M.auth.currentUser.getIdToken(w)}:null})()}addAuthTokenListener(w){if(this.assertAuthConfigured(),this.internalListeners.has(w))return;const M=this.auth.onIdTokenChanged(K=>{w(K?.stsTokenManager.accessToken||null)});this.internalListeners.set(w,M),this.updateProactiveRefresh()}removeAuthTokenListener(w){this.assertAuthConfigured();const M=this.internalListeners.get(w);M&&(this.internalListeners.delete(w),M(),this.updateProactiveRefresh())}assertAuthConfigured(){Ye(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(0,_.Pz)("authIdTokenMaxAge"),function Wc(B){(0,re._registerComponent)(new He.wA("auth",(w,{options:M})=>{const K=w.getProvider("app").getImmediate(),we=w.getProvider("heartbeat"),{apiKey:je,authDomain:$t}=K.options;return((Sn,Zn)=>{Ye(je&&!je.includes(":"),"invalid-api-key",{appName:Sn.name}),Ye(!$t?.includes(":"),"argument-error",{appName:Sn.name});const Ri={apiKey:je,authDomain:$t,clientPlatform:B,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:is(B)},Er=new os(Sn,Zn,Ri);return function vn(B,w){const M=w?.persistence||[],K=(Array.isArray(M)?M:[M]).map(Ft);w?.errorMap&&B._updateErrorMap(w.errorMap),B._initializeWithPersistence(K,w?.popupRedirectResolver)}(Er,M),Er})(K,we)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((w,M,K)=>{w.getProvider("auth-internal").initialize()})),(0,re._registerComponent)(new He.wA("auth-internal",w=>{const M=Tr(w.getProvider("auth").getImmediate());return new Yl(M)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,re.registerVersion)(al,"0.22.0",function Pl(B){switch(B){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(B)),(0,re.registerVersion)(al,"0.22.0","esm2017")}("Browser")},9260:(wn,dt,L)=>{L.d(dt,{Z:()=>f.Z});var f=L(3942);f.Z.registerVersion("firebase","9.19.1","app-compat")},1848:(wn,dt,L)=>{L.r(dt);var f=L(5861),_=L(3942),re=L(2090),Te=L(9681),ke=L(1877),He=L(655),Ze=L(4859);const ze={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},Ne_EMAIL_SIGNIN="EMAIL_SIGNIN",Ne_PASSWORD_RESET="PASSWORD_RESET",Ne_RECOVER_EMAIL="RECOVER_EMAIL",Ne_REVERT_SECOND_FACTOR_ADDITION="REVERT_SECOND_FACTOR_ADDITION",Ne_VERIFY_AND_CHANGE_EMAIL="VERIFY_AND_CHANGE_EMAIL",Ne_VERIFY_EMAIL="VERIFY_EMAIL";const Lt=function yt(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},an=function pt(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},It=new re.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Ae=new ke.Yd("@firebase/auth");function _t(A,...y){Ae.logLevel<=ke.in.ERROR&&Ae.error(`Auth (${Te.SDK_VERSION}): ${A}`,...y)}function Qe(A,...y){throw Ye(A,...y)}function Ue(A,...y){return Ye(A,...y)}function lt(A,y,E){const F=Object.assign(Object.assign({},an()),{[y]:E});return new re.LL("auth","Firebase",F).create(y,{appName:A.name})}function kt(A,y,E){if(!(y instanceof E))throw E.name!==y.constructor.name&&Qe(A,"argument-error"),lt(A,"argument-error",`Type of ${y.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ye(A,...y){if("string"!=typeof A){const E=y[0],F=[...y.slice(1)];return F[0]&&(F[0].appName=A.name),A._errorFactory.create(E,...F)}return It.create(A,...y)}function z(A,y,...E){if(!A)throw Ye(y,...E)}function ct(A){const y="INTERNAL ASSERTION FAILED: "+A;throw _t(y),new Error(y)}function bt(A,y){A||ct(y)}const Ft=new Map;function gn(A){bt(A instanceof Function,"Expected a class definition");let y=Ft.get(A);return y?(bt(y instanceof A,"Instance stored in cache mismatched with class"),y):(y=new A,Ft.set(A,y),y)}function Ht(){var A;return typeof self<"u"&&(null===(A=self.location)||void 0===A?void 0:A.href)||""}function Ot(){return"http:"===jt()||"https:"===jt()}function jt(){var A;return typeof self<"u"&&(null===(A=self.location)||void 0===A?void 0:A.protocol)||null}class Ut{constructor(y,E){this.shortDelay=y,this.longDelay=E,bt(E>y,"Short delay should be less than long delay!"),this.isMobile=(0,re.uI)()||(0,re.b$)()}get(){return function Gt(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Ot()||(0,re.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Et(A,y){bt(A.emulator,"Emulator should always be set here");const{url:E}=A.emulator;return y?`${E}${y.startsWith("/")?y.slice(1):y}`:E}class rn{static initialize(y,E,F){this.fetchImpl=y,E&&(this.headersImpl=E),F&&(this.responseImpl=F)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void ct("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void ct("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void ct("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Zt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},_n=new Ut(3e4,6e4);function sn(A,y){return A.tenantId&&!y.tenantId?Object.assign(Object.assign({},y),{tenantId:A.tenantId}):y}function bn(A,y,E,F){return fi.apply(this,arguments)}function fi(){return(fi=(0,f.Z)(function*(A,y,E,F,le={}){return ui(A,le,(0,f.Z)(function*(){let Se={},At={};F&&("GET"===y?At=F:Se={body:JSON.stringify(F)});const hn=(0,re.xO)(Object.assign({key:A.config.apiKey},At)).slice(1),Fn=yield A._getAdditionalHeaders();return Fn["Content-Type"]="application/json",A.languageCode&&(Fn["X-Firebase-Locale"]=A.languageCode),rn.fetch()(Pi(A,A.config.apiHost,E,hn),Object.assign({method:y,headers:Fn,referrerPolicy:"no-referrer"},Se))}))})).apply(this,arguments)}function ui(A,y,E){return Bn.apply(this,arguments)}function Bn(){return(Bn=(0,f.Z)(function*(A,y,E){A._canInitEmulator=!1;const F=Object.assign(Object.assign({},Zt),y);try{const le=new Cr(A),Se=yield Promise.race([E(),le.promise]);le.clearNetworkTimeout();const At=yield Se.json();if("needConfirmation"in At)throw ii(A,"account-exists-with-different-credential",At);if(Se.ok&&!("errorMessage"in At))return At;{const hn=Se.ok?At.errorMessage:At.error.message,[Fn,di]=hn.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Fn)throw ii(A,"credential-already-in-use",At);if("EMAIL_EXISTS"===Fn)throw ii(A,"email-already-in-use",At);if("USER_DISABLED"===Fn)throw ii(A,"user-disabled",At);const Wi=F[Fn]||Fn.toLowerCase().replace(/[_\s]+/g,"-");if(di)throw lt(A,Wi,di);Qe(A,Wi)}}catch(le){if(le instanceof re.ZR)throw le;Qe(A,"network-request-failed",{message:String(le)})}})).apply(this,arguments)}function Qn(A,y,E,F){return oi.apply(this,arguments)}function oi(){return(oi=(0,f.Z)(function*(A,y,E,F,le={}){const Se=yield bn(A,y,E,F,le);return"mfaPendingCredential"in Se&&Qe(A,"multi-factor-auth-required",{_serverResponse:Se}),Se})).apply(this,arguments)}function Pi(A,y,E,F){const le=`${y}${E}?${F}`;return A.config.emulator?Et(A.config,le):`${A.config.apiScheme}://${le}`}class Cr{constructor(y){this.auth=y,this.timer=null,this.promise=new Promise((E,F)=>{this.timer=setTimeout(()=>F(Ue(this.auth,"network-request-failed")),_n.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function ii(A,y,E){const F={appName:A.name};E.email&&(F.email=E.email),E.phoneNumber&&(F.phoneNumber=E.phoneNumber);const le=Ue(A,y,F);return le.customData._tokenResponse=E,le}function zn(){return(zn=(0,f.Z)(function*(A,y){return bn(A,"POST","/v1/accounts:delete",y)})).apply(this,arguments)}function Tn(){return(Tn=(0,f.Z)(function*(A,y){return bn(A,"POST","/v1/accounts:update",y)})).apply(this,arguments)}function ri(){return(ri=(0,f.Z)(function*(A,y){return bn(A,"POST","/v1/accounts:lookup",y)})).apply(this,arguments)}function Gn(A){if(A)try{const y=new Date(Number(A));if(!isNaN(y.getTime()))return y.toUTCString()}catch{}}function Hn(){return(Hn=(0,f.Z)(function*(A,y=!1){const E=(0,re.m9)(A),F=yield E.getIdToken(y),le=On(F);z(le&&le.exp&&le.auth_time&&le.iat,E.auth,"internal-error");const Se="object"==typeof le.firebase?le.firebase:void 0,At=Se?.sign_in_provider;return{claims:le,token:F,authTime:Gn(Pn(le.auth_time)),issuedAtTime:Gn(Pn(le.iat)),expirationTime:Gn(Pn(le.exp)),signInProvider:At||null,signInSecondFactor:Se?.sign_in_second_factor||null}})).apply(this,arguments)}function Pn(A){return 1e3*Number(A)}function On(A){const[y,E,F]=A.split(".");if(void 0===y||void 0===E||void 0===F)return _t("JWT malformed, contained fewer than 3 sections"),null;try{const le=(0,re.tV)(E);return le?JSON.parse(le):(_t("Failed to decode base64 JWT payload"),null)}catch(le){return _t("Caught error parsing JWT payload as JSON",le?.toString()),null}}function Ni(A,y){return Hi.apply(this,arguments)}function Hi(){return(Hi=(0,f.Z)(function*(A,y,E=!1){if(E)return y;try{return yield y}catch(F){throw F instanceof re.ZR&&function Vi({code:A}){return"auth/user-disabled"===A||"auth/user-token-expired"===A}(F)&&A.auth.currentUser===A&&(yield A.auth.signOut()),F}})).apply(this,arguments)}class gr{constructor(y){this.user=y,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(y){var E;if(y){const F=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),F}{this.errorBackoff=3e4;const le=(null!==(E=this.user.stsTokenManager.expirationTime)&&void 0!==E?E:0)-Date.now()-3e5;return Math.max(0,le)}}schedule(y=!1){var E=this;if(!this.isRunning)return;const F=this.getInterval(y);this.timerId=setTimeout((0,f.Z)(function*(){yield E.iteration()}),F)}iteration(){var y=this;return(0,f.Z)(function*(){try{yield y.user.getIdToken(!0)}catch(E){return void("auth/network-request-failed"===E?.code&&y.schedule(!0))}y.schedule()})()}}class er{constructor(y,E){this.createdAt=y,this.lastLoginAt=E,this._initializeTime()}_initializeTime(){this.lastSignInTime=Gn(this.lastLoginAt),this.creationTime=Gn(this.createdAt)}_copy(y){this.createdAt=y.createdAt,this.lastLoginAt=y.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Fi(A){return $r.apply(this,arguments)}function $r(){return $r=(0,f.Z)(function*(A){var y;const E=A.auth,F=yield A.getIdToken(),le=yield Ni(A,function Ji(A,y){return ri.apply(this,arguments)}(E,{idToken:F}));z(le?.users.length,E,"internal-error");const Se=le.users[0];A._notifyReloadListener(Se);const At=null!==(y=Se.providerUserInfo)&&void 0!==y&&y.length?function be(A){return A.map(y=>{var{providerId:E}=y,F=(0,He._T)(y,["providerId"]);return{providerId:E,uid:F.rawId||"",displayName:F.displayName||null,email:F.email||null,phoneNumber:F.phoneNumber||null,photoURL:F.photoUrl||null}})}(Se.providerUserInfo):[],hn=function dn(A,y){return[...A.filter(F=>!y.some(le=>le.providerId===F.providerId)),...y]}(A.providerData,At),Wi=!!A.isAnonymous&&!(A.email&&Se.passwordHash||hn?.length),ki={uid:Se.localId,displayName:Se.displayName||null,photoURL:Se.photoUrl||null,email:Se.email||null,emailVerified:Se.emailVerified||!1,phoneNumber:Se.phoneNumber||null,tenantId:Se.tenantId||null,providerData:hn,metadata:new er(Se.createdAt,Se.lastLoginAt),isAnonymous:Wi};Object.assign(A,ki)}),$r.apply(this,arguments)}function Oi(){return(Oi=(0,f.Z)(function*(A){const y=(0,re.m9)(A);yield Fi(y),yield y.auth._persistUserIfCurrent(y),y.auth._notifyListenersIfCurrent(y)})).apply(this,arguments)}function ne(){return(ne=(0,f.Z)(function*(A,y){const E=yield ui(A,{},(0,f.Z)(function*(){const F=(0,re.xO)({grant_type:"refresh_token",refresh_token:y}).slice(1),{tokenApiHost:le,apiKey:Se}=A.config,At=Pi(A,le,"/v1/token",`key=${Se}`),hn=yield A._getAdditionalHeaders();return hn["Content-Type"]="application/x-www-form-urlencoded",rn.fetch()(At,{method:"POST",headers:hn,body:F})}));return{accessToken:E.access_token,expiresIn:E.expires_in,refreshToken:E.refresh_token}})).apply(this,arguments)}class de{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(y){z(y.idToken,"internal-error"),z(typeof y.idToken<"u","internal-error"),z(typeof y.refreshToken<"u","internal-error");const E="expiresIn"in y&&typeof y.expiresIn<"u"?Number(y.expiresIn):function Nn(A){const y=On(A);return z(y,"internal-error"),z(typeof y.exp<"u","internal-error"),z(typeof y.iat<"u","internal-error"),Number(y.exp)-Number(y.iat)}(y.idToken);this.updateTokensAndExpiration(y.idToken,y.refreshToken,E)}getToken(y,E=!1){var F=this;return(0,f.Z)(function*(){return z(!F.accessToken||F.refreshToken,y,"user-token-expired"),E||!F.accessToken||F.isExpired?F.refreshToken?(yield F.refresh(y,F.refreshToken),F.accessToken):null:F.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(y,E){var F=this;return(0,f.Z)(function*(){const{accessToken:le,refreshToken:Se,expiresIn:At}=yield function $(A,y){return ne.apply(this,arguments)}(y,E);F.updateTokensAndExpiration(le,Se,Number(At))})()}updateTokensAndExpiration(y,E,F){this.refreshToken=E||null,this.accessToken=y||null,this.expirationTime=Date.now()+1e3*F}static fromJSON(y,E){const{refreshToken:F,accessToken:le,expirationTime:Se}=E,At=new de;return F&&(z("string"==typeof F,"internal-error",{appName:y}),At.refreshToken=F),le&&(z("string"==typeof le,"internal-error",{appName:y}),At.accessToken=le),Se&&(z("number"==typeof Se,"internal-error",{appName:y}),At.expirationTime=Se),At}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(y){this.accessToken=y.accessToken,this.refreshToken=y.refreshToken,this.expirationTime=y.expirationTime}_clone(){return Object.assign(new de,this.toJSON())}_performRefresh(){return ct("not implemented")}}function ye(A,y){z("string"==typeof A||typeof A>"u","internal-error",{appName:y})}class rt{constructor(y){var{uid:E,auth:F,stsTokenManager:le}=y,Se=(0,He._T)(y,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new gr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=E,this.auth=F,this.stsTokenManager=le,this.accessToken=le.accessToken,this.displayName=Se.displayName||null,this.email=Se.email||null,this.emailVerified=Se.emailVerified||!1,this.phoneNumber=Se.phoneNumber||null,this.photoURL=Se.photoURL||null,this.isAnonymous=Se.isAnonymous||!1,this.tenantId=Se.tenantId||null,this.providerData=Se.providerData?[...Se.providerData]:[],this.metadata=new er(Se.createdAt||void 0,Se.lastLoginAt||void 0)}getIdToken(y){var E=this;return(0,f.Z)(function*(){const F=yield Ni(E,E.stsTokenManager.getToken(E.auth,y));return z(F,E.auth,"internal-error"),E.accessToken!==F&&(E.accessToken=F,yield E.auth._persistUserIfCurrent(E),E.auth._notifyListenersIfCurrent(E)),F})()}getIdTokenResult(y){return function Pr(A){return Hn.apply(this,arguments)}(this,y)}reload(){return function $n(A){return Oi.apply(this,arguments)}(this)}_assign(y){this!==y&&(z(this.uid===y.uid,this.auth,"internal-error"),this.displayName=y.displayName,this.photoURL=y.photoURL,this.email=y.email,this.emailVerified=y.emailVerified,this.phoneNumber=y.phoneNumber,this.isAnonymous=y.isAnonymous,this.tenantId=y.tenantId,this.providerData=y.providerData.map(E=>Object.assign({},E)),this.metadata._copy(y.metadata),this.stsTokenManager._assign(y.stsTokenManager))}_clone(y){const E=new rt(Object.assign(Object.assign({},this),{auth:y,stsTokenManager:this.stsTokenManager._clone()}));return E.metadata._copy(this.metadata),E}_onReload(y){z(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=y,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(y){this.reloadListener?this.reloadListener(y):this.reloadUserInfo=y}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(y,E=!1){var F=this;return(0,f.Z)(function*(){let le=!1;y.idToken&&y.idToken!==F.stsTokenManager.accessToken&&(F.stsTokenManager.updateFromServerResponse(y),le=!0),E&&(yield Fi(F)),yield F.auth._persistUserIfCurrent(F),le&&F.auth._notifyListenersIfCurrent(F)})()}delete(){var y=this;return(0,f.Z)(function*(){const E=yield y.getIdToken();return yield Ni(y,function Ai(A,y){return zn.apply(this,arguments)}(y.auth,{idToken:E})),y.stsTokenManager.clearRefreshToken(),y.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(y=>Object.assign({},y)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(y,E){var F,le,Se,At,hn,Fn,di,Wi;const ki=null!==(F=E.displayName)&&void 0!==F?F:void 0,Da=null!==(le=E.email)&&void 0!==le?le:void 0,Fl=null!==(Se=E.phoneNumber)&&void 0!==Se?Se:void 0,Ru=null!==(At=E.photoURL)&&void 0!==At?At:void 0,Ud=null!==(hn=E.tenantId)&&void 0!==hn?hn:void 0,Vd=null!==(Fn=E._redirectEventId)&&void 0!==Fn?Fn:void 0,Pu=null!==(di=E.createdAt)&&void 0!==di?di:void 0,bu=null!==(Wi=E.lastLoginAt)&&void 0!==Wi?Wi:void 0,{uid:Ou,emailVerified:Bd,isAnonymous:Ed,providerData:ku,stsTokenManager:Hd}=E;z(Ou&&Hd,y,"internal-error");const jd=de.fromJSON(this.name,Hd);z("string"==typeof Ou,y,"internal-error"),ye(ki,y.name),ye(Da,y.name),z("boolean"==typeof Bd,y,"internal-error"),z("boolean"==typeof Ed,y,"internal-error"),ye(Fl,y.name),ye(Ru,y.name),ye(Ud,y.name),ye(Vd,y.name),ye(Pu,y.name),ye(bu,y.name);const zd=new rt({uid:Ou,auth:y,email:Da,emailVerified:Bd,displayName:ki,isAnonymous:Ed,photoURL:Ru,phoneNumber:Fl,tenantId:Ud,stsTokenManager:jd,createdAt:Pu,lastLoginAt:bu});return ku&&Array.isArray(ku)&&(zd.providerData=ku.map(bf=>Object.assign({},bf))),Vd&&(zd._redirectEventId=Vd),zd}static _fromIdTokenResponse(y,E,F=!1){return(0,f.Z)(function*(){const le=new de;le.updateFromServerResponse(E);const Se=new rt({uid:E.localId,auth:y,stsTokenManager:le,isAnonymous:F});return yield Fi(Se),Se})()}}const Le=(()=>{class A{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,f.Z)(function*(){return!0})()}_set(E,F){var le=this;return(0,f.Z)(function*(){le.storage[E]=F})()}_get(E){var F=this;return(0,f.Z)(function*(){const le=F.storage[E];return void 0===le?null:le})()}_remove(E){var F=this;return(0,f.Z)(function*(){delete F.storage[E]})()}_addListener(E,F){}_removeListener(E,F){}}return A.type="NONE",A})();function Be(A,y,E){return`firebase:${A}:${y}:${E}`}class it{constructor(y,E,F){this.persistence=y,this.auth=E,this.userKey=F;const{config:le,name:Se}=this.auth;this.fullUserKey=Be(this.userKey,le.apiKey,Se),this.fullPersistenceKey=Be("persistence",le.apiKey,Se),this.boundEventHandler=E._onStorageEvent.bind(E),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(y){return this.persistence._set(this.fullUserKey,y.toJSON())}getCurrentUser(){var y=this;return(0,f.Z)(function*(){const E=yield y.persistence._get(y.fullUserKey);return E?rt._fromJSON(y.auth,E):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(y){var E=this;return(0,f.Z)(function*(){if(E.persistence===y)return;const F=yield E.getCurrentUser();return yield E.removeCurrentUser(),E.persistence=y,F?E.setCurrentUser(F):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(y,E,F="authUser"){return(0,f.Z)(function*(){if(!E.length)return new it(gn(Le),y,F);const le=(yield Promise.all(E.map(function(){var di=(0,f.Z)(function*(Wi){if(yield Wi._isAvailable())return Wi});return function(Wi){return di.apply(this,arguments)}}()))).filter(di=>di);let Se=le[0]||gn(Le);const At=Be(F,y.config.apiKey,y.name);let hn=null;for(const di of E)try{const Wi=yield di._get(At);if(Wi){const ki=rt._fromJSON(y,Wi);di!==Se&&(hn=ki),Se=di;break}}catch{}const Fn=le.filter(di=>di._shouldAllowMigration);return Se._shouldAllowMigration&&Fn.length?(Se=Fn[0],hn&&(yield Se._set(At,hn.toJSON())),yield Promise.all(E.map(function(){var di=(0,f.Z)(function*(Wi){if(Wi!==Se)try{yield Wi._remove(At)}catch{}});return function(Wi){return di.apply(this,arguments)}}())),new it(Se,y,F)):new it(Se,y,F)})()}}function qt(A){const y=A.toLowerCase();if(y.includes("opera/")||y.includes("opr/")||y.includes("opios/"))return"Opera";if(ot(y))return"IEMobile";if(y.includes("msie")||y.includes("trident/"))return"IE";if(y.includes("edge/"))return"Edge";if(St(y))return"Firefox";if(y.includes("silk/"))return"Silk";if(ht(y))return"Blackberry";if(Yt(y))return"Webos";if(Mn(y))return"Safari";if((y.includes("chrome/")||Je(y))&&!y.includes("edge/"))return"Chrome";if(Fe(y))return"Android";{const F=A.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===F?.length)return F[1]}return"Other"}function St(A=(0,re.z$)()){return/firefox\//i.test(A)}function Mn(A=(0,re.z$)()){const y=A.toLowerCase();return y.includes("safari/")&&!y.includes("chrome/")&&!y.includes("crios/")&&!y.includes("android")}function Je(A=(0,re.z$)()){return/crios\//i.test(A)}function ot(A=(0,re.z$)()){return/iemobile/i.test(A)}function Fe(A=(0,re.z$)()){return/android/i.test(A)}function ht(A=(0,re.z$)()){return/blackberry/i.test(A)}function Yt(A=(0,re.z$)()){return/webos/i.test(A)}function un(A=(0,re.z$)()){return/iphone|ipad|ipod/i.test(A)||/macintosh/i.test(A)&&/mobile/i.test(A)}function vs(A=(0,re.z$)()){return un(A)||Fe(A)||Yt(A)||ht(A)||/windows phone/i.test(A)||ot(A)}function Gr(A,y=[]){let E;switch(A){case"Browser":E=qt((0,re.z$)());break;case"Worker":E=`${qt((0,re.z$)())}-${A}`;break;default:E=A}const F=y.length?y.join(","):"FirebaseCore-web";return`${E}/JsCore/${Te.SDK_VERSION}/${F}`}class os{constructor(y){this.auth=y,this.queue=[]}pushCallback(y,E){const F=Se=>new Promise((At,hn)=>{try{At(y(Se))}catch(Fn){hn(Fn)}});F.onAbort=E,this.queue.push(F);const le=this.queue.length-1;return()=>{this.queue[le]=()=>Promise.resolve()}}runMiddleware(y){var E=this;return(0,f.Z)(function*(){if(E.auth.currentUser===y)return;const F=[];try{for(const le of E.queue)yield le(y),le.onAbort&&F.push(le.onAbort)}catch(le){F.reverse();for(const Se of F)try{Se()}catch{}throw E.auth._errorFactory.create("login-blocked",{originalMessage:le?.message})}})()}}class Tr{constructor(y,E,F){this.app=y,this.heartbeatServiceProvider=E,this.config=F,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Cs(this),this.idTokenSubscription=new Cs(this),this.beforeStateQueue=new os(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=It,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=y.name,this.clientVersion=F.sdkClientVersion}_initializeWithPersistence(y,E){var F=this;return E&&(this._popupRedirectResolver=gn(E)),this._initializationPromise=this.queue((0,f.Z)(function*(){var le,Se;if(!F._deleted&&(F.persistenceManager=yield it.create(F,y),!F._deleted)){if(null!==(le=F._popupRedirectResolver)&&void 0!==le&&le._shouldInitProactively)try{yield F._popupRedirectResolver._initialize(F)}catch{}yield F.initializeCurrentUser(E),F.lastNotifiedUid=(null===(Se=F.currentUser)||void 0===Se?void 0:Se.uid)||null,!F._deleted&&(F._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var y=this;return(0,f.Z)(function*(){if(y._deleted)return;const E=yield y.assertedPersistence.getCurrentUser();if(y.currentUser||E){if(y.currentUser&&E&&y.currentUser.uid===E.uid)return y._currentUser._assign(E),void(yield y.currentUser.getIdToken());yield y._updateCurrentUser(E,!0)}})()}initializeCurrentUser(y){var E=this;return(0,f.Z)(function*(){var F;const le=yield E.assertedPersistence.getCurrentUser();let Se=le,At=!1;if(y&&E.config.authDomain){yield E.getOrInitRedirectPersistenceManager();const hn=null===(F=E.redirectUser)||void 0===F?void 0:F._redirectEventId,Fn=Se?._redirectEventId,di=yield E.tryRedirectSignIn(y);(!hn||hn===Fn)&&di?.user&&(Se=di.user,At=!0)}if(!Se)return E.directlySetCurrentUser(null);if(!Se._redirectEventId){if(At)try{yield E.beforeStateQueue.runMiddleware(Se)}catch(hn){Se=le,E._popupRedirectResolver._overrideRedirectResult(E,()=>Promise.reject(hn))}return Se?E.reloadAndSetCurrentUserOrClear(Se):E.directlySetCurrentUser(null)}return z(E._popupRedirectResolver,E,"argument-error"),yield E.getOrInitRedirectPersistenceManager(),E.redirectUser&&E.redirectUser._redirectEventId===Se._redirectEventId?E.directlySetCurrentUser(Se):E.reloadAndSetCurrentUserOrClear(Se)})()}tryRedirectSignIn(y){var E=this;return(0,f.Z)(function*(){let F=null;try{F=yield E._popupRedirectResolver._completeRedirectFn(E,y,!0)}catch{yield E._setRedirectUser(null)}return F})()}reloadAndSetCurrentUserOrClear(y){var E=this;return(0,f.Z)(function*(){try{yield Fi(y)}catch(F){if("auth/network-request-failed"!==F?.code)return E.directlySetCurrentUser(null)}return E.directlySetCurrentUser(y)})()}useDeviceLanguage(){this.languageCode=function Tt(){if(typeof navigator>"u")return null;const A=navigator;return A.languages&&A.languages[0]||A.language||null}()}_delete(){var y=this;return(0,f.Z)(function*(){y._deleted=!0})()}updateCurrentUser(y){var E=this;return(0,f.Z)(function*(){const F=y?(0,re.m9)(y):null;return F&&z(F.auth.config.apiKey===E.config.apiKey,E,"invalid-user-token"),E._updateCurrentUser(F&&F._clone(E))})()}_updateCurrentUser(y,E=!1){var F=this;return(0,f.Z)(function*(){if(!F._deleted)return y&&z(F.tenantId===y.tenantId,F,"tenant-id-mismatch"),E||(yield F.beforeStateQueue.runMiddleware(y)),F.queue((0,f.Z)(function*(){yield F.directlySetCurrentUser(y),F.notifyAuthListeners()}))})()}signOut(){var y=this;return(0,f.Z)(function*(){return yield y.beforeStateQueue.runMiddleware(null),(y.redirectPersistenceManager||y._popupRedirectResolver)&&(yield y._setRedirectUser(null)),y._updateCurrentUser(null,!0)})()}setPersistence(y){var E=this;return this.queue((0,f.Z)(function*(){yield E.assertedPersistence.setPersistence(gn(y))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(y){this._errorFactory=new re.LL("auth","Firebase",y())}onAuthStateChanged(y,E,F){return this.registerStateListener(this.authStateSubscription,y,E,F)}beforeAuthStateChanged(y,E){return this.beforeStateQueue.pushCallback(y,E)}onIdTokenChanged(y,E,F){return this.registerStateListener(this.idTokenSubscription,y,E,F)}toJSON(){var y;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(y=this._currentUser)||void 0===y?void 0:y.toJSON()}}_setRedirectUser(y,E){var F=this;return(0,f.Z)(function*(){const le=yield F.getOrInitRedirectPersistenceManager(E);return null===y?le.removeCurrentUser():le.setCurrentUser(y)})()}getOrInitRedirectPersistenceManager(y){var E=this;return(0,f.Z)(function*(){if(!E.redirectPersistenceManager){const F=y&&gn(y)||E._popupRedirectResolver;z(F,E,"argument-error"),E.redirectPersistenceManager=yield it.create(E,[gn(F._redirectPersistence)],"redirectUser"),E.redirectUser=yield E.redirectPersistenceManager.getCurrentUser()}return E.redirectPersistenceManager})()}_redirectUserForId(y){var E=this;return(0,f.Z)(function*(){var F,le;return E._isInitialized&&(yield E.queue((0,f.Z)(function*(){}))),(null===(F=E._currentUser)||void 0===F?void 0:F._redirectEventId)===y?E._currentUser:(null===(le=E.redirectUser)||void 0===le?void 0:le._redirectEventId)===y?E.redirectUser:null})()}_persistUserIfCurrent(y){var E=this;return(0,f.Z)(function*(){if(y===E.currentUser)return E.queue((0,f.Z)(function*(){return E.directlySetCurrentUser(y)}))})()}_notifyListenersIfCurrent(y){y===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var y,E;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const F=null!==(E=null===(y=this.currentUser)||void 0===y?void 0:y.uid)&&void 0!==E?E:null;this.lastNotifiedUid!==F&&(this.lastNotifiedUid=F,this.authStateSubscription.next(this.currentUser))}registerStateListener(y,E,F,le){if(this._deleted)return()=>{};const Se="function"==typeof E?E:E.next.bind(E),At=this._isInitialized?Promise.resolve():this._initializationPromise;return z(At,this,"internal-error"),At.then(()=>Se(this.currentUser)),"function"==typeof E?y.addObserver(E,F,le):y.addObserver(E)}directlySetCurrentUser(y){var E=this;return(0,f.Z)(function*(){E.currentUser&&E.currentUser!==y&&E._currentUser._stopProactiveRefresh(),y&&E.isProactiveRefreshEnabled&&y._startProactiveRefresh(),E.currentUser=y,y?yield E.assertedPersistence.setCurrentUser(y):yield E.assertedPersistence.removeCurrentUser()})()}queue(y){return this.operations=this.operations.then(y,y),this.operations}get assertedPersistence(){return z(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(y){!y||this.frameworks.includes(y)||(this.frameworks.push(y),this.frameworks.sort(),this.clientVersion=Gr(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var y=this;return(0,f.Z)(function*(){var E;const F={"X-Client-Version":y.clientVersion};y.app.options.appId&&(F["X-Firebase-gmpid"]=y.app.options.appId);const le=yield null===(E=y.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===E?void 0:E.getHeartbeatsHeader();return le&&(F["X-Firebase-Client"]=le),F})()}}function ji(A){return(0,re.m9)(A)}class Cs{constructor(y){this.auth=y,this.observer=null,this.addObserver=(0,re.ne)(E=>this.observer=E)}get next(){return z(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Qi(A){const y=A.indexOf(":");return y<0?"":A.substr(0,y+1)}function Dr(A){if(!A)return null;const y=Number(A);return isNaN(y)?null:y}class Ar{constructor(y,E){this.providerId=y,this.signInMethod=E}toJSON(){return ct("not implemented")}_getIdTokenResponse(y){return ct("not implemented")}_linkToIdToken(y,E){return ct("not implemented")}_getReauthenticationResolver(y){return ct("not implemented")}}function wr(A,y){return Vt.apply(this,arguments)}function Vt(){return(Vt=(0,f.Z)(function*(A,y){return bn(A,"POST","/v1/accounts:resetPassword",sn(A,y))})).apply(this,arguments)}function et(A,y){return Pe.apply(this,arguments)}function Pe(){return(Pe=(0,f.Z)(function*(A,y){return bn(A,"POST","/v1/accounts:update",y)})).apply(this,arguments)}function vt(){return(vt=(0,f.Z)(function*(A,y){return bn(A,"POST","/v1/accounts:update",sn(A,y))})).apply(this,arguments)}function Dn(){return(Dn=(0,f.Z)(function*(A,y){return Qn(A,"POST","/v1/accounts:signInWithPassword",sn(A,y))})).apply(this,arguments)}function st(A,y){return nt.apply(this,arguments)}function nt(){return(nt=(0,f.Z)(function*(A,y){return bn(A,"POST","/v1/accounts:sendOobCode",sn(A,y))})).apply(this,arguments)}function Bt(){return(Bt=(0,f.Z)(function*(A,y){return st(A,y)})).apply(this,arguments)}function Wn(){return(Wn=(0,f.Z)(function*(A,y){return st(A,y)})).apply(this,arguments)}function _r(){return(_r=(0,f.Z)(function*(A,y){return st(A,y)})).apply(this,arguments)}function ms(){return(ms=(0,f.Z)(function*(A,y){return st(A,y)})).apply(this,arguments)}function dr(){return(dr=(0,f.Z)(function*(A,y){return Qn(A,"POST","/v1/accounts:signInWithEmailLink",sn(A,y))})).apply(this,arguments)}function bs(){return(bs=(0,f.Z)(function*(A,y){return Qn(A,"POST","/v1/accounts:signInWithEmailLink",sn(A,y))})).apply(this,arguments)}class Vr extends Ar{constructor(y,E,F,le=null){super("password",F),this._email=y,this._password=E,this._tenantId=le}static _fromEmailAndPassword(y,E){return new Vr(y,E,"password")}static _fromEmailAndCode(y,E,F=null){return new Vr(y,E,"emailLink",F)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(y){const E="string"==typeof y?JSON.parse(y):y;if(E?.email&&E?.password){if("password"===E.signInMethod)return this._fromEmailAndPassword(E.email,E.password);if("emailLink"===E.signInMethod)return this._fromEmailAndCode(E.email,E.password,E.tenantId)}return null}_getIdTokenResponse(y){var E=this;return(0,f.Z)(function*(){switch(E.signInMethod){case"password":return function Kt(A,y){return Dn.apply(this,arguments)}(y,{returnSecureToken:!0,email:E._email,password:E._password});case"emailLink":return function As(A,y){return dr.apply(this,arguments)}(y,{email:E._email,oobCode:E._password});default:Qe(y,"internal-error")}})()}_linkToIdToken(y,E){var F=this;return(0,f.Z)(function*(){switch(F.signInMethod){case"password":return et(y,{idToken:E,returnSecureToken:!0,email:F._email,password:F._password});case"emailLink":return function Qs(A,y){return bs.apply(this,arguments)}(y,{idToken:E,email:F._email,oobCode:F._password});default:Qe(y,"internal-error")}})()}_getReauthenticationResolver(y){return this._getIdTokenResponse(y)}}function Qr(A,y){return ao.apply(this,arguments)}function ao(){return(ao=(0,f.Z)(function*(A,y){return Qn(A,"POST","/v1/accounts:signInWithIdp",sn(A,y))})).apply(this,arguments)}class Ls extends Ar{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(y){const E=new Ls(y.providerId,y.signInMethod);return y.idToken||y.accessToken?(y.idToken&&(E.idToken=y.idToken),y.accessToken&&(E.accessToken=y.accessToken),y.nonce&&!y.pendingToken&&(E.nonce=y.nonce),y.pendingToken&&(E.pendingToken=y.pendingToken)):y.oauthToken&&y.oauthTokenSecret?(E.accessToken=y.oauthToken,E.secret=y.oauthTokenSecret):Qe("argument-error"),E}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(y){const E="string"==typeof y?JSON.parse(y):y,{providerId:F,signInMethod:le}=E,Se=(0,He._T)(E,["providerId","signInMethod"]);if(!F||!le)return null;const At=new Ls(F,le);return At.idToken=Se.idToken||void 0,At.accessToken=Se.accessToken||void 0,At.secret=Se.secret,At.nonce=Se.nonce,At.pendingToken=Se.pendingToken||null,At}_getIdTokenResponse(y){return Qr(y,this.buildRequest())}_linkToIdToken(y,E){const F=this.buildRequest();return F.idToken=E,Qr(y,F)}_getReauthenticationResolver(y){const E=this.buildRequest();return E.autoCreate=!1,Qr(y,E)}buildRequest(){const y={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)y.pendingToken=this.pendingToken;else{const E={};this.idToken&&(E.id_token=this.idToken),this.accessToken&&(E.access_token=this.accessToken),this.secret&&(E.oauth_token_secret=this.secret),E.providerId=this.providerId,this.nonce&&!this.pendingToken&&(E.nonce=this.nonce),y.postBody=(0,re.xO)(E)}return y}}function or(){return(or=(0,f.Z)(function*(A,y){return bn(A,"POST","/v1/accounts:sendVerificationCode",sn(A,y))})).apply(this,arguments)}function wi(){return(wi=(0,f.Z)(function*(A,y){return Qn(A,"POST","/v1/accounts:signInWithPhoneNumber",sn(A,y))})).apply(this,arguments)}function cr(){return(cr=(0,f.Z)(function*(A,y){const E=yield Qn(A,"POST","/v1/accounts:signInWithPhoneNumber",sn(A,y));if(E.temporaryProof)throw ii(A,"account-exists-with-different-credential",E);return E})).apply(this,arguments)}const xo={USER_NOT_FOUND:"user-not-found"};function ar(){return(ar=(0,f.Z)(function*(A,y){return Qn(A,"POST","/v1/accounts:signInWithPhoneNumber",sn(A,Object.assign(Object.assign({},y),{operation:"REAUTH"})),xo)})).apply(this,arguments)}class vr extends Ar{constructor(y){super("phone","phone"),this.params=y}static _fromVerification(y,E){return new vr({verificationId:y,verificationCode:E})}static _fromTokenResponse(y,E){return new vr({phoneNumber:y,temporaryProof:E})}_getIdTokenResponse(y){return function _i(A,y){return wi.apply(this,arguments)}(y,this._makeVerificationRequest())}_linkToIdToken(y,E){return function Xn(A,y){return cr.apply(this,arguments)}(y,Object.assign({idToken:E},this._makeVerificationRequest()))}_getReauthenticationResolver(y){return function Li(A,y){return ar.apply(this,arguments)}(y,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:y,phoneNumber:E,verificationId:F,verificationCode:le}=this.params;return y&&E?{temporaryProof:y,phoneNumber:E}:{sessionInfo:F,code:le}}toJSON(){const y={providerId:this.providerId};return this.params.phoneNumber&&(y.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(y.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(y.verificationCode=this.params.verificationCode),this.params.verificationId&&(y.verificationId=this.params.verificationId),y}static fromJSON(y){"string"==typeof y&&(y=JSON.parse(y));const{verificationId:E,verificationCode:F,phoneNumber:le,temporaryProof:Se}=y;return F||E||le||Se?new vr({verificationId:E,verificationCode:F,phoneNumber:le,temporaryProof:Se}):null}}class Or{constructor(y){var E,F,le,Se,At,hn;const Fn=(0,re.zd)((0,re.pd)(y)),di=null!==(E=Fn.apiKey)&&void 0!==E?E:null,Wi=null!==(F=Fn.oobCode)&&void 0!==F?F:null,ki=function Ti(A){switch(A){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(le=Fn.mode)&&void 0!==le?le:null);z(di&&Wi&&ki,"argument-error"),this.apiKey=di,this.operation=ki,this.code=Wi,this.continueUrl=null!==(Se=Fn.continueUrl)&&void 0!==Se?Se:null,this.languageCode=null!==(At=Fn.languageCode)&&void 0!==At?At:null,this.tenantId=null!==(hn=Fn.tenantId)&&void 0!==hn?hn:null}static parseLink(y){const E=function nr(A){const y=(0,re.zd)((0,re.pd)(A)).link,E=y?(0,re.zd)((0,re.pd)(y)).deep_link_id:null,F=(0,re.zd)((0,re.pd)(A)).deep_link_id;return(F?(0,re.zd)((0,re.pd)(F)).link:null)||F||E||y||A}(y);try{return new Or(E)}catch{return null}}}let as=(()=>{class A{constructor(){this.providerId=A.PROVIDER_ID}static credential(E,F){return Vr._fromEmailAndPassword(E,F)}static credentialWithLink(E,F){const le=Or.parseLink(F);return z(le,"argument-error"),Vr._fromEmailAndCode(E,le.code,le.tenantId)}}return A.PROVIDER_ID="password",A.EMAIL_PASSWORD_SIGN_IN_METHOD="password",A.EMAIL_LINK_SIGN_IN_METHOD="emailLink",A})();class zi{constructor(y){this.providerId=y,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(y){this.defaultLanguageCode=y}setCustomParameters(y){return this.customParameters=y,this}getCustomParameters(){return this.customParameters}}class Ms extends zi{constructor(){super(...arguments),this.scopes=[]}addScope(y){return this.scopes.includes(y)||this.scopes.push(y),this}getScopes(){return[...this.scopes]}}class Ws extends Ms{static credentialFromJSON(y){const E="string"==typeof y?JSON.parse(y):y;return z("providerId"in E&&"signInMethod"in E,"argument-error"),Ls._fromParams(E)}credential(y){return this._credential(Object.assign(Object.assign({},y),{nonce:y.rawNonce}))}_credential(y){return z(y.idToken||y.accessToken,"argument-error"),Ls._fromParams(Object.assign(Object.assign({},y),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(y){return Ws.oauthCredentialFromTaggedObject(y)}static credentialFromError(y){return Ws.oauthCredentialFromTaggedObject(y.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{oauthIdToken:E,oauthAccessToken:F,oauthTokenSecret:le,pendingToken:Se,nonce:At,providerId:hn}=y;if(!F&&!le&&!E&&!Se||!hn)return null;try{return new Ws(hn)._credential({idToken:E,accessToken:F,nonce:At,pendingToken:Se})}catch{return null}}}let Ao=(()=>{class A extends Ms{constructor(){super("facebook.com")}static credential(E){return Ls._fromParams({providerId:A.PROVIDER_ID,signInMethod:A.FACEBOOK_SIGN_IN_METHOD,accessToken:E})}static credentialFromResult(E){return A.credentialFromTaggedObject(E)}static credentialFromError(E){return A.credentialFromTaggedObject(E.customData||{})}static credentialFromTaggedObject({_tokenResponse:E}){if(!E||!("oauthAccessToken"in E)||!E.oauthAccessToken)return null;try{return A.credential(E.oauthAccessToken)}catch{return null}}}return A.FACEBOOK_SIGN_IN_METHOD="facebook.com",A.PROVIDER_ID="facebook.com",A})(),bo=(()=>{class A extends Ms{constructor(){super("google.com"),this.addScope("profile")}static credential(E,F){return Ls._fromParams({providerId:A.PROVIDER_ID,signInMethod:A.GOOGLE_SIGN_IN_METHOD,idToken:E,accessToken:F})}static credentialFromResult(E){return A.credentialFromTaggedObject(E)}static credentialFromError(E){return A.credentialFromTaggedObject(E.customData||{})}static credentialFromTaggedObject({_tokenResponse:E}){if(!E)return null;const{oauthIdToken:F,oauthAccessToken:le}=E;if(!F&&!le)return null;try{return A.credential(F,le)}catch{return null}}}return A.GOOGLE_SIGN_IN_METHOD="google.com",A.PROVIDER_ID="google.com",A})(),qo=(()=>{class A extends Ms{constructor(){super("github.com")}static credential(E){return Ls._fromParams({providerId:A.PROVIDER_ID,signInMethod:A.GITHUB_SIGN_IN_METHOD,accessToken:E})}static credentialFromResult(E){return A.credentialFromTaggedObject(E)}static credentialFromError(E){return A.credentialFromTaggedObject(E.customData||{})}static credentialFromTaggedObject({_tokenResponse:E}){if(!E||!("oauthAccessToken"in E)||!E.oauthAccessToken)return null;try{return A.credential(E.oauthAccessToken)}catch{return null}}}return A.GITHUB_SIGN_IN_METHOD="github.com",A.PROVIDER_ID="github.com",A})();class Vs extends Ar{constructor(y,E){super(y,y),this.pendingToken=E}_getIdTokenResponse(y){return Qr(y,this.buildRequest())}_linkToIdToken(y,E){const F=this.buildRequest();return F.idToken=E,Qr(y,F)}_getReauthenticationResolver(y){const E=this.buildRequest();return E.autoCreate=!1,Qr(y,E)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(y){const E="string"==typeof y?JSON.parse(y):y,{providerId:F,signInMethod:le,pendingToken:Se}=E;return F&&le&&Se&&F===le?new Vs(F,Se):null}static _create(y,E){return new Vs(y,E)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Xr extends zi{constructor(y){z(y.startsWith("saml."),"argument-error"),super(y)}static credentialFromResult(y){return Xr.samlCredentialFromTaggedObject(y)}static credentialFromError(y){return Xr.samlCredentialFromTaggedObject(y.customData||{})}static credentialFromJSON(y){const E=Vs.fromJSON(y);return z(E,"argument-error"),E}static samlCredentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{pendingToken:E,providerId:F}=y;if(!E||!F)return null;try{return Vs._create(F,E)}catch{return null}}}let Di=(()=>{class A extends Ms{constructor(){super("twitter.com")}static credential(E,F){return Ls._fromParams({providerId:A.PROVIDER_ID,signInMethod:A.TWITTER_SIGN_IN_METHOD,oauthToken:E,oauthTokenSecret:F})}static credentialFromResult(E){return A.credentialFromTaggedObject(E)}static credentialFromError(E){return A.credentialFromTaggedObject(E.customData||{})}static credentialFromTaggedObject({_tokenResponse:E}){if(!E)return null;const{oauthAccessToken:F,oauthTokenSecret:le}=E;if(!F||!le)return null;try{return A.credential(F,le)}catch{return null}}}return A.TWITTER_SIGN_IN_METHOD="twitter.com",A.PROVIDER_ID="twitter.com",A})();function Xs(A,y){return us.apply(this,arguments)}function us(){return(us=(0,f.Z)(function*(A,y){return Qn(A,"POST","/v1/accounts:signUp",sn(A,y))})).apply(this,arguments)}class kr{constructor(y){this.user=y.user,this.providerId=y.providerId,this._tokenResponse=y._tokenResponse,this.operationType=y.operationType}static _fromIdTokenResponse(y,E,F,le=!1){return(0,f.Z)(function*(){const Se=yield rt._fromIdTokenResponse(y,F,le),At=ir(F);return new kr({user:Se,providerId:At,_tokenResponse:F,operationType:E})})()}static _forOperation(y,E,F){return(0,f.Z)(function*(){yield y._updateTokensIfNecessary(F,!0);const le=ir(F);return new kr({user:y,providerId:le,_tokenResponse:F,operationType:E})})()}}function ir(A){return A.providerId?A.providerId:"phoneNumber"in A?"phone":null}function gs(){return(gs=(0,f.Z)(function*(A){var y;const E=ji(A);if(yield E._initializationPromise,null!==(y=E.currentUser)&&void 0!==y&&y.isAnonymous)return new kr({user:E.currentUser,providerId:null,operationType:"signIn"});const F=yield Xs(E,{returnSecureToken:!0}),le=yield kr._fromIdTokenResponse(E,"signIn",F,!0);return yield E._updateCurrentUser(le.user),le})).apply(this,arguments)}class Js extends re.ZR{constructor(y,E,F,le){var Se;super(E.code,E.message),this.operationType=F,this.user=le,Object.setPrototypeOf(this,Js.prototype),this.customData={appName:y.name,tenantId:null!==(Se=y.tenantId)&&void 0!==Se?Se:void 0,_serverResponse:E.customData._serverResponse,operationType:F}}static _fromErrorAndOperation(y,E,F,le){return new Js(y,E,F,le)}}function Bs(A,y,E,F){return("reauthenticate"===y?E._getReauthenticationResolver(A):E._getIdTokenResponse(A)).catch(Se=>{throw"auth/multi-factor-auth-required"===Se.code?Js._fromErrorAndOperation(A,Se,y,F):Se})}function Hs(A){return new Set(A.map(({providerId:y})=>y).filter(y=>!!y))}function lo(){return lo=(0,f.Z)(function*(A,y){const E=(0,re.m9)(A);yield co(!0,E,y);const{providerUserInfo:F}=yield function Mi(A,y){return Tn.apply(this,arguments)}(E.auth,{idToken:yield E.getIdToken(),deleteProvider:[y]}),le=Hs(F||[]);return E.providerData=E.providerData.filter(Se=>le.has(Se.providerId)),le.has("phone")||(E.phoneNumber=null),yield E.auth._persistUserIfCurrent(E),E}),lo.apply(this,arguments)}function Zr(A,y){return eo.apply(this,arguments)}function eo(){return(eo=(0,f.Z)(function*(A,y,E=!1){const F=yield Ni(A,y._linkToIdToken(A.auth,yield A.getIdToken()),E);return kr._forOperation(A,"link",F)})).apply(this,arguments)}function co(A,y,E){return Eo.apply(this,arguments)}function Eo(){return(Eo=(0,f.Z)(function*(A,y,E){yield Fi(y);const le=!1===A?"provider-already-linked":"no-such-provider";z(Hs(y.providerData).has(E)===A,y.auth,le)})).apply(this,arguments)}function Vo(A,y){return go.apply(this,arguments)}function go(){return(go=(0,f.Z)(function*(A,y,E=!1){const{auth:F}=A,le="reauthenticate";try{const Se=yield Ni(A,Bs(F,le,y,A),E);z(Se.idToken,F,"internal-error");const At=On(Se.idToken);z(At,F,"internal-error");const{sub:hn}=At;return z(A.uid===hn,F,"user-mismatch"),kr._forOperation(A,le,Se)}catch(Se){throw"auth/user-not-found"===Se?.code&&Qe(F,"user-mismatch"),Se}})).apply(this,arguments)}function uo(A,y){return Ps.apply(this,arguments)}function Ps(){return(Ps=(0,f.Z)(function*(A,y,E=!1){const F="signIn",le=yield Bs(A,F,y),Se=yield kr._fromIdTokenResponse(A,F,le);return E||(yield A._updateCurrentUser(Se.user)),Se})).apply(this,arguments)}function Xi(A,y){return ho.apply(this,arguments)}function ho(){return(ho=(0,f.Z)(function*(A,y){return uo(ji(A),y)})).apply(this,arguments)}function Kr(A,y){return rr.apply(this,arguments)}function rr(){return(rr=(0,f.Z)(function*(A,y){const E=(0,re.m9)(A);return yield co(!1,E,y.providerId),Zr(E,y)})).apply(this,arguments)}function _o(A,y){return Ts.apply(this,arguments)}function Ts(){return(Ts=(0,f.Z)(function*(A,y){return Vo((0,re.m9)(A),y)})).apply(this,arguments)}function Bo(){return(Bo=(0,f.Z)(function*(A,y){return Qn(A,"POST","/v1/accounts:signInWithCustomToken",sn(A,y))})).apply(this,arguments)}function Es(){return Es=(0,f.Z)(function*(A,y){const E=ji(A),F=yield function Bi(A,y){return Bo.apply(this,arguments)}(E,{token:y,returnSecureToken:!0}),le=yield kr._fromIdTokenResponse(E,"signIn",F);return yield E._updateCurrentUser(le.user),le}),Es.apply(this,arguments)}class Yr{constructor(y,E){this.factorId=y,this.uid=E.mfaEnrollmentId,this.enrollmentTime=new Date(E.enrolledAt).toUTCString(),this.displayName=E.displayName}static _fromServerResponse(y,E){return"phoneInfo"in E?qs._fromServerResponse(y,E):"totpInfo"in E?Jr._fromServerResponse(y,E):Qe(y,"internal-error")}}class qs extends Yr{constructor(y){super("phone",y),this.phoneNumber=y.phoneInfo}static _fromServerResponse(y,E){return new qs(E)}}class Jr extends Yr{constructor(y){super("totp",y)}static _fromServerResponse(y,E){return new Jr(E)}}function Io(A,y,E){var F;z((null===(F=E.url)||void 0===F?void 0:F.length)>0,A,"invalid-continue-uri"),z(typeof E.dynamicLinkDomain>"u"||E.dynamicLinkDomain.length>0,A,"invalid-dynamic-link-domain"),y.continueUrl=E.url,y.dynamicLinkDomain=E.dynamicLinkDomain,y.canHandleCodeInApp=E.handleCodeInApp,E.iOS&&(z(E.iOS.bundleId.length>0,A,"missing-ios-bundle-id"),y.iOSBundleId=E.iOS.bundleId),E.android&&(z(E.android.packageName.length>0,A,"missing-android-pkg-name"),y.androidInstallApp=E.android.installApp,y.androidMinimumVersionCode=E.android.minimumVersion,y.androidPackageName=E.android.packageName)}function fo(){return fo=(0,f.Z)(function*(A,y,E){const F=(0,re.m9)(A),le={requestType:"PASSWORD_RESET",email:y};E&&Io(F,le,E),yield function mn(A,y){return Wn.apply(this,arguments)}(F,le)}),fo.apply(this,arguments)}function si(){return(si=(0,f.Z)(function*(A,y,E){yield wr((0,re.m9)(A),{oobCode:y,newPassword:E})})).apply(this,arguments)}function ee(){return ee=(0,f.Z)(function*(A,y){yield function Ge(A,y){return vt.apply(this,arguments)}((0,re.m9)(A),{oobCode:y})}),ee.apply(this,arguments)}function Q(A,y){return De.apply(this,arguments)}function De(){return(De=(0,f.Z)(function*(A,y){const E=(0,re.m9)(A),F=yield wr(E,{oobCode:y}),le=F.requestType;switch(z(le,E,"internal-error"),le){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":z(F.newEmail,E,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":z(F.mfaInfo,E,"internal-error");default:z(F.email,E,"internal-error")}let Se=null;return F.mfaInfo&&(Se=Yr._fromServerResponse(ji(E),F.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===F.requestType?F.newEmail:F.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===F.requestType?F.email:F.newEmail)||null,multiFactorInfo:Se},operation:le}})).apply(this,arguments)}function ti(){return(ti=(0,f.Z)(function*(A,y){const{data:E}=yield Q((0,re.m9)(A),y);return E.email})).apply(this,arguments)}function tr(){return(tr=(0,f.Z)(function*(A,y,E){const F=ji(A),le=yield Xs(F,{returnSecureToken:!0,email:y,password:E}),Se=yield kr._fromIdTokenResponse(F,"signIn",le);return yield F._updateCurrentUser(Se.user),Se})).apply(this,arguments)}function Zo(){return Zo=(0,f.Z)(function*(A,y,E){const F=(0,re.m9)(A),le={requestType:"EMAIL_SIGNIN",email:y};z(E.handleCodeInApp,F,"argument-error"),E&&Io(F,le,E),yield function xn(A,y){return _r.apply(this,arguments)}(F,le)}),Zo.apply(this,arguments)}function ga(){return(ga=(0,f.Z)(function*(A,y,E){const F=(0,re.m9)(A),le=as.credentialWithLink(y,E||Ht());return z(le._tenantId===(F.tenantId||null),F,"tenant-id-mismatch"),Xi(F,le)})).apply(this,arguments)}function to(){return(to=(0,f.Z)(function*(A,y){return bn(A,"POST","/v1/accounts:createAuthUri",sn(A,y))})).apply(this,arguments)}function Yo(){return Yo=(0,f.Z)(function*(A,y){const F={identifier:y,continueUri:Ot()?Ht():"http://localhost"},{signinMethods:le}=yield function aa(A,y){return to.apply(this,arguments)}((0,re.m9)(A),F);return le||[]}),Yo.apply(this,arguments)}function la(){return la=(0,f.Z)(function*(A,y){const E=(0,re.m9)(A),le={requestType:"VERIFY_EMAIL",idToken:yield A.getIdToken()};y&&Io(E.auth,le,y);const{email:Se}=yield function wt(A,y){return Bt.apply(this,arguments)}(E.auth,le);Se!==A.email&&(yield A.reload())}),la.apply(this,arguments)}function Rr(){return Rr=(0,f.Z)(function*(A,y,E){const F=(0,re.m9)(A),Se={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield A.getIdToken(),newEmail:y};E&&Io(F.auth,Se,E);const{email:At}=yield function Ii(A,y){return ms.apply(this,arguments)}(F.auth,Se);At!==A.email&&(yield A.reload())}),Rr.apply(this,arguments)}function No(){return(No=(0,f.Z)(function*(A,y){return bn(A,"POST","/v1/accounts:update",y)})).apply(this,arguments)}function wo(){return wo=(0,f.Z)(function*(A,{displayName:y,photoURL:E}){if(void 0===y&&void 0===E)return;const F=(0,re.m9)(A),Se={idToken:yield F.getIdToken(),displayName:y,photoUrl:E,returnSecureToken:!0},At=yield Ni(F,function Os(A,y){return No.apply(this,arguments)}(F.auth,Se));F.displayName=At.displayName||null,F.photoURL=At.photoUrl||null;const hn=F.providerData.find(({providerId:Fn})=>"password"===Fn);hn&&(hn.displayName=F.displayName,hn.photoURL=F.photoURL),yield F._updateTokensIfNecessary(At)}),wo.apply(this,arguments)}function ya(A,y,E){return jo.apply(this,arguments)}function jo(){return(jo=(0,f.Z)(function*(A,y,E){const{auth:F}=A,Se={idToken:yield A.getIdToken(),returnSecureToken:!0};y&&(Se.email=y),E&&(Se.password=E);const At=yield Ni(A,et(F,Se));yield A._updateTokensIfNecessary(At,!0)})).apply(this,arguments)}class Qo{constructor(y,E,F={}){this.isNewUser=y,this.providerId=E,this.profile=F}}class La extends Qo{constructor(y,E,F,le){super(y,E,F),this.username=le}}class zo extends Qo{constructor(y,E){super(y,"facebook.com",E)}}class El extends La{constructor(y,E){super(y,"github.com",E,"string"==typeof E?.login?E?.login:null)}}class ds extends Qo{constructor(y,E){super(y,"google.com",E)}}class Ua extends La{constructor(y,E,F){super(y,"twitter.com",E,F)}}function za(A){const{user:y,_tokenResponse:E}=A;return y.isAnonymous&&!E?{providerId:null,isNewUser:!1,profile:null}:function To(A){var y,E;if(!A)return null;const{providerId:F}=A,le=A.rawUserInfo?JSON.parse(A.rawUserInfo):{},Se=A.isNewUser||"identitytoolkit#SignupNewUserResponse"===A.kind;if(!F&&A?.idToken){const At=null===(E=null===(y=On(A.idToken))||void 0===y?void 0:y.firebase)||void 0===E?void 0:E.sign_in_provider;if(At)return new Qo(Se,"anonymous"!==At&&"custom"!==At?At:null)}if(!F)return null;switch(F){case"facebook.com":return new zo(Se,le);case"github.com":return new El(Se,le);case"google.com":return new ds(Se,le);case"twitter.com":return new Ua(Se,le,A.screenName||null);case"custom":case"anonymous":return new Qo(Se,null);default:return new Qo(Se,F,le)}}(E)}class N{constructor(y,E,F){this.type=y,this.credential=E,this.auth=F}static _fromIdtoken(y,E){return new N("enroll",y,E)}static _fromMfaPendingCredential(y){return new N("signin",y)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(y){var E,F;if(y?.multiFactorSession){if(null!==(E=y.multiFactorSession)&&void 0!==E&&E.pendingCredential)return N._fromMfaPendingCredential(y.multiFactorSession.pendingCredential);if(null!==(F=y.multiFactorSession)&&void 0!==F&&F.idToken)return N._fromIdtoken(y.multiFactorSession.idToken)}return null}}class J{constructor(y,E,F){this.session=y,this.hints=E,this.signInResolver=F}static _fromError(y,E){const F=ji(y),le=E.customData._serverResponse,Se=(le.mfaInfo||[]).map(hn=>Yr._fromServerResponse(F,hn));z(le.mfaPendingCredential,F,"internal-error");const At=N._fromMfaPendingCredential(le.mfaPendingCredential);return new J(At,Se,function(){var hn=(0,f.Z)(function*(Fn){const di=yield Fn._process(F,At);delete le.mfaInfo,delete le.mfaPendingCredential;const Wi=Object.assign(Object.assign({},le),{idToken:di.idToken,refreshToken:di.refreshToken});switch(E.operationType){case"signIn":const ki=yield kr._fromIdTokenResponse(F,E.operationType,Wi);return yield F._updateCurrentUser(ki.user),ki;case"reauthenticate":return z(E.user,F,"internal-error"),kr._forOperation(E.user,E.operationType,Wi);default:Qe(F,"internal-error")}});return function(Fn){return hn.apply(this,arguments)}}())}resolveSignIn(y){var E=this;return(0,f.Z)(function*(){return E.signInResolver(y)})()}}class k{constructor(y){this.user=y,this.enrolledFactors=[],y._onReload(E=>{E.mfaInfo&&(this.enrolledFactors=E.mfaInfo.map(F=>Yr._fromServerResponse(y.auth,F)))})}static _fromUser(y){return new k(y)}getSession(){var y=this;return(0,f.Z)(function*(){return N._fromIdtoken(yield y.user.getIdToken(),y.user.auth)})()}enroll(y,E){var F=this;return(0,f.Z)(function*(){const le=y,Se=yield F.getSession(),At=yield Ni(F.user,le._process(F.user.auth,Se,E));return yield F.user._updateTokensIfNecessary(At),F.user.reload()})()}unenroll(y){var E=this;return(0,f.Z)(function*(){const F="string"==typeof y?y:y.uid,le=yield E.user.getIdToken();try{const Se=yield Ni(E.user,function Ke(A,y){return bn(A,"POST","/v2/accounts/mfaEnrollment:withdraw",sn(A,y))}(E.user.auth,{idToken:le,mfaEnrollmentId:F}));E.enrolledFactors=E.enrolledFactors.filter(({uid:At})=>At!==F),yield E.user._updateTokensIfNecessary(Se),yield E.user.reload()}catch(Se){throw Se}})()}}const te=new WeakMap,ge="__sak";class Ve{constructor(y,E){this.storageRetriever=y,this.type=E}_isAvailable(){try{return this.storage?(this.storage.setItem(ge,"1"),this.storage.removeItem(ge),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(y,E){return this.storage.setItem(y,JSON.stringify(E)),Promise.resolve()}_get(y){const E=this.storage.getItem(y);return Promise.resolve(E?JSON.parse(E):null)}_remove(y){return this.storage.removeItem(y),Promise.resolve()}get storage(){return this.storageRetriever()}}const li=(()=>{class A extends Ve{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(E,F)=>this.onStorageEvent(E,F),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Dt(){const A=(0,re.z$)();return Mn(A)||un(A)}()&&function is(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=vs(),this._shouldAllowMigration=!0}forAllChangedKeys(E){for(const F of Object.keys(this.listeners)){const le=this.storage.getItem(F),Se=this.localCache[F];le!==Se&&E(F,Se,le)}}onStorageEvent(E,F=!1){if(!E.key)return void this.forAllChangedKeys((hn,Fn,di)=>{this.notifyListeners(hn,di)});const le=E.key;if(F?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const hn=this.storage.getItem(le);if(E.newValue!==hn)null!==E.newValue?this.storage.setItem(le,E.newValue):this.storage.removeItem(le);else if(this.localCache[le]===E.newValue&&!F)return}const Se=()=>{const hn=this.storage.getItem(le);!F&&this.localCache[le]===hn||this.notifyListeners(le,hn)},At=this.storage.getItem(le);!function yr(){return(0,re.w1)()&&10===document.documentMode}()||At===E.newValue||E.newValue===E.oldValue?Se():setTimeout(Se,10)}notifyListeners(E,F){this.localCache[E]=F;const le=this.listeners[E];if(le)for(const Se of Array.from(le))Se(F&&JSON.parse(F))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((E,F,le)=>{this.onStorageEvent(new StorageEvent("storage",{key:E,oldValue:F,newValue:le}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(E,F){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[E]||(this.listeners[E]=new Set,this.localCache[E]=this.storage.getItem(E)),this.listeners[E].add(F)}_removeListener(E,F){this.listeners[E]&&(this.listeners[E].delete(F),0===this.listeners[E].size&&delete this.listeners[E]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(E,F){var le=()=>super._set,Se=this;return(0,f.Z)(function*(){yield le().call(Se,E,F),Se.localCache[E]=JSON.stringify(F)})()}_get(E){var F=()=>super._get,le=this;return(0,f.Z)(function*(){const Se=yield F().call(le,E);return le.localCache[E]=JSON.stringify(Se),Se})()}_remove(E){var F=()=>super._remove,le=this;return(0,f.Z)(function*(){yield F().call(le,E),delete le.localCache[E]})()}}return A.type="LOCAL",A})(),yi=(()=>{class A extends Ve{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(E,F){}_removeListener(E,F){}}return A.type="SESSION",A})();let Rn=(()=>{class A{constructor(E){this.eventTarget=E,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(E){const F=this.receivers.find(Se=>Se.isListeningto(E));if(F)return F;const le=new A(E);return this.receivers.push(le),le}isListeningto(E){return this.eventTarget===E}handleEvent(E){var F=this;return(0,f.Z)(function*(){const le=E,{eventId:Se,eventType:At,data:hn}=le.data,Fn=F.handlersMap[At];if(!Fn?.size)return;le.ports[0].postMessage({status:"ack",eventId:Se,eventType:At});const di=Array.from(Fn).map(function(){var ki=(0,f.Z)(function*(Da){return Da(le.origin,hn)});return function(Da){return ki.apply(this,arguments)}}()),Wi=yield function Nr(A){return Promise.all(A.map(function(){var y=(0,f.Z)(function*(E){try{return{fulfilled:!0,value:yield E}}catch(F){return{fulfilled:!1,reason:F}}});return function(E){return y.apply(this,arguments)}}()))}(di);le.ports[0].postMessage({status:"done",eventId:Se,eventType:At,response:Wi})})()}_subscribe(E,F){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[E]||(this.handlersMap[E]=new Set),this.handlersMap[E].add(F)}_unsubscribe(E,F){this.handlersMap[E]&&F&&this.handlersMap[E].delete(F),(!F||0===this.handlersMap[E].size)&&delete this.handlersMap[E],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return A.receivers=[],A})();function hr(A="",y=10){let E="";for(let F=0;F<y;F++)E+=Math.floor(10*Math.random());return A+E}class fr{constructor(y){this.target=y,this.handlers=new Set}removeMessageHandler(y){y.messageChannel&&(y.messageChannel.port1.removeEventListener("message",y.onMessage),y.messageChannel.port1.close()),this.handlers.delete(y)}_send(y,E,F=50){var le=this;return(0,f.Z)(function*(){const Se=typeof MessageChannel<"u"?new MessageChannel:null;if(!Se)throw new Error("connection_unavailable");let At,hn;return new Promise((Fn,di)=>{const Wi=hr("",20);Se.port1.start();const ki=setTimeout(()=>{di(new Error("unsupported_event"))},F);hn={messageChannel:Se,onMessage(Da){const Fl=Da;if(Fl.data.eventId===Wi)switch(Fl.data.status){case"ack":clearTimeout(ki),At=setTimeout(()=>{di(new Error("timeout"))},3e3);break;case"done":clearTimeout(At),Fn(Fl.data.response);break;default:clearTimeout(ki),clearTimeout(At),di(new Error("invalid_response"))}}},le.handlers.add(hn),Se.port1.addEventListener("message",hn.onMessage),le.target.postMessage({eventType:y,eventId:Wi,data:E},[Se.port2])}).finally(()=>{hn&&le.removeMessageHandler(hn)})})()}}function ni(){return window}function hs(){return typeof ni().WorkerGlobalScope<"u"&&"function"==typeof ni().importScripts}function Po(){return(Po=(0,f.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const pi="firebaseLocalStorageDb",ci=1,pr="firebaseLocalStorage",fs="fbase_key";class ks{constructor(y){this.request=y}toPromise(){return new Promise((y,E)=>{this.request.addEventListener("success",()=>{y(this.request.result)}),this.request.addEventListener("error",()=>{E(this.request.error)})})}}function Ns(A,y){return A.transaction([pr],y?"readwrite":"readonly").objectStore(pr)}function Fr(){const A=indexedDB.open(pi,ci);return new Promise((y,E)=>{A.addEventListener("error",()=>{E(A.error)}),A.addEventListener("upgradeneeded",()=>{const F=A.result;try{F.createObjectStore(pr,{keyPath:fs})}catch(le){E(le)}}),A.addEventListener("success",(0,f.Z)(function*(){const F=A.result;F.objectStoreNames.contains(pr)?y(F):(F.close(),yield function ys(){const A=indexedDB.deleteDatabase(pi);return new ks(A).toPromise()}(),y(yield Fr()))}))})}function Jo(A,y,E){return Lr.apply(this,arguments)}function Lr(){return(Lr=(0,f.Z)(function*(A,y,E){const F=Ns(A,!0).put({[fs]:y,value:E});return new ks(F).toPromise()})).apply(this,arguments)}function po(){return(po=(0,f.Z)(function*(A,y){const E=Ns(A,!1).get(y),F=yield new ks(E).toPromise();return void 0===F?null:F.value})).apply(this,arguments)}function io(A,y){const E=Ns(A,!0).delete(y);return new ks(E).toPromise()}const va=(()=>{class A{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var E=this;return(0,f.Z)(function*(){return E.db||(E.db=yield Fr()),E.db})()}_withRetries(E){var F=this;return(0,f.Z)(function*(){let le=0;for(;;)try{const Se=yield F._openDb();return yield E(Se)}catch(Se){if(le++>3)throw Se;F.db&&(F.db.close(),F.db=void 0)}})()}initializeServiceWorkerMessaging(){var E=this;return(0,f.Z)(function*(){return hs()?E.initializeReceiver():E.initializeSender()})()}initializeReceiver(){var E=this;return(0,f.Z)(function*(){E.receiver=Rn._getInstance(function Jt(){return hs()?self:null}()),E.receiver._subscribe("keyChanged",function(){var F=(0,f.Z)(function*(le,Se){return{keyProcessed:(yield E._poll()).includes(Se.key)}});return function(le,Se){return F.apply(this,arguments)}}()),E.receiver._subscribe("ping",function(){var F=(0,f.Z)(function*(le,Se){return["keyChanged"]});return function(le,Se){return F.apply(this,arguments)}}())})()}initializeSender(){var E=this;return(0,f.Z)(function*(){var F,le;if(E.activeServiceWorker=yield function Ki(){return Po.apply(this,arguments)}(),!E.activeServiceWorker)return;E.sender=new fr(E.activeServiceWorker);const Se=yield E.sender._send("ping",{},800);Se&&null!==(F=Se[0])&&void 0!==F&&F.fulfilled&&null!==(le=Se[0])&&void 0!==le&&le.value.includes("keyChanged")&&(E.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(E){var F=this;return(0,f.Z)(function*(){if(F.sender&&F.activeServiceWorker&&function ts(){var A;return(null===(A=navigator?.serviceWorker)||void 0===A?void 0:A.controller)||null}()===F.activeServiceWorker)try{yield F.sender._send("keyChanged",{key:E},F.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,f.Z)(function*(){try{if(!indexedDB)return!1;const E=yield Fr();return yield Jo(E,ge,"1"),yield io(E,ge),!0}catch{}return!1})()}_withPendingWrite(E){var F=this;return(0,f.Z)(function*(){F.pendingWrites++;try{yield E()}finally{F.pendingWrites--}})()}_set(E,F){var le=this;return(0,f.Z)(function*(){return le._withPendingWrite((0,f.Z)(function*(){return yield le._withRetries(Se=>Jo(Se,E,F)),le.localCache[E]=F,le.notifyServiceWorker(E)}))})()}_get(E){var F=this;return(0,f.Z)(function*(){const le=yield F._withRetries(Se=>function mr(A,y){return po.apply(this,arguments)}(Se,E));return F.localCache[E]=le,le})()}_remove(E){var F=this;return(0,f.Z)(function*(){return F._withPendingWrite((0,f.Z)(function*(){return yield F._withRetries(le=>io(le,E)),delete F.localCache[E],F.notifyServiceWorker(E)}))})()}_poll(){var E=this;return(0,f.Z)(function*(){const F=yield E._withRetries(At=>{const hn=Ns(At,!1).getAll();return new ks(hn).toPromise()});if(!F)return[];if(0!==E.pendingWrites)return[];const le=[],Se=new Set;for(const{fbase_key:At,value:hn}of F)Se.add(At),JSON.stringify(E.localCache[At])!==JSON.stringify(hn)&&(E.notifyListeners(At,hn),le.push(At));for(const At of Object.keys(E.localCache))E.localCache[At]&&!Se.has(At)&&(E.notifyListeners(At,null),le.push(At));return le})()}notifyListeners(E,F){this.localCache[E]=F;const le=this.listeners[E];if(le)for(const Se of Array.from(le))Se(F)}startPolling(){var E=this;this.stopPolling(),this.pollTimer=setInterval((0,f.Z)(function*(){return E._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(E,F){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[E]||(this.listeners[E]=new Set,this._get(E)),this.listeners[E].add(F)}_removeListener(E,F){this.listeners[E]&&(this.listeners[E].delete(F),0===this.listeners[E].size&&delete this.listeners[E]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return A.type="LOCAL",A})();function ba(){return(ba=(0,f.Z)(function*(A){return(yield bn(A,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Ga(A){return new Promise((y,E)=>{const F=document.createElement("script");F.setAttribute("src",A),F.onload=y,F.onerror=le=>{const Se=Ue("internal-error");Se.customData=le,E(Se)},F.type="text/javascript",F.charset="UTF-8",function ro(){var A,y;return null!==(y=null===(A=document.getElementsByTagName("head"))||void 0===A?void 0:A[0])&&void 0!==y?y:document}().appendChild(F)})}function js(A){return`__${A}${Math.floor(1e6*Math.random())}`}const mo=1e12;class Va{constructor(y){this.auth=y,this.counter=mo,this._widgets=new Map}render(y,E){const F=this.counter;return this._widgets.set(F,new dl(y,this.auth.name,E||{})),this.counter++,F}reset(y){var E;const F=y||mo;null===(E=this._widgets.get(F))||void 0===E||E.delete(),this._widgets.delete(F)}getResponse(y){var E;return(null===(E=this._widgets.get(y||mo))||void 0===E?void 0:E.getResponse())||""}execute(y){var E=this;return(0,f.Z)(function*(){var F;return null===(F=E._widgets.get(y||mo))||void 0===F||F.execute(),""})()}}class dl{constructor(y,E,F){this.params=F,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const le="string"==typeof y?document.getElementById(y):y;z(le,"argument-error",{appName:E}),this.container=le,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Ja(A){const y=[],E="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let F=0;F<A;F++)y.push(E.charAt(Math.floor(Math.random()*E.length)));return y.join("")}(50);const{callback:y,"expired-callback":E}=this.params;if(y)try{y(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,E)try{E()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Fs=js("rcb"),Ba=new Ut(3e4,6e4);class xa{constructor(){var y;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(y=ni().grecaptcha)||void 0===y||!y.render)}load(y,E=""){return z(function Al(A){return A.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(A)}(E),y,"argument-error"),this.shouldResolveImmediately(E)?Promise.resolve(ni().grecaptcha):new Promise((F,le)=>{const Se=ni().setTimeout(()=>{le(Ue(y,"network-request-failed"))},Ba.get());ni()[Fs]=()=>{ni().clearTimeout(Se),delete ni()[Fs];const hn=ni().grecaptcha;if(!hn)return void le(Ue(y,"internal-error"));const Fn=hn.render;hn.render=(di,Wi)=>{const ki=Fn(di,Wi);return this.counter++,ki},this.hostLanguage=E,F(hn)},Ga(`https://www.google.com/recaptcha/api.js??${(0,re.xO)({onload:Fs,render:"explicit",hl:E})}`).catch(()=>{clearTimeout(Se),le(Ue(y,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(y){var E;return!(null===(E=ni().grecaptcha)||void 0===E||!E.render)&&(y===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Ea{load(y){return(0,f.Z)(function*(){return new Va(y)})()}clearedOneInstance(){}}const Hl="recaptcha",jl={theme:"light",type:"image"};class cs{constructor(y,E=Object.assign({},jl),F){this.parameters=E,this.type=Hl,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=ji(F),this.isInvisible="invisible"===this.parameters.size,z(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const le="string"==typeof y?document.getElementById(y):y;z(le,this.auth,"argument-error"),this.container=le,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Ea:new xa,this.validateStartingState()}verify(){var y=this;return(0,f.Z)(function*(){y.assertNotDestroyed();const E=yield y.render(),F=y.getAssertedRecaptcha();return F.getResponse(E)||new Promise(Se=>{const At=hn=>{hn&&(y.tokenChangeListeners.delete(At),Se(hn))};y.tokenChangeListeners.add(At),y.isInvisible&&F.execute(E)})})()}render(){try{this.assertNotDestroyed()}catch(y){return Promise.reject(y)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(y=>{throw this.renderPromise=null,y})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(y=>{this.container.removeChild(y)})}validateStartingState(){z(!this.parameters.sitekey,this.auth,"argument-error"),z(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),z(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(y){return E=>{if(this.tokenChangeListeners.forEach(F=>F(E)),"function"==typeof y)y(E);else if("string"==typeof y){const F=ni()[y];"function"==typeof F&&F(E)}}}assertNotDestroyed(){z(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var y=this;return(0,f.Z)(function*(){if(yield y.init(),!y.widgetId){let E=y.container;if(!y.isInvisible){const F=document.createElement("div");E.appendChild(F),E=F}y.widgetId=y.getAssertedRecaptcha().render(E,y.parameters)}return y.widgetId})()}init(){var y=this;return(0,f.Z)(function*(){z(Ot()&&!hs(),y.auth,"internal-error"),yield function zl(){let A=null;return new Promise(y=>{"complete"!==document.readyState?(A=()=>y(),window.addEventListener("load",A)):y()}).catch(y=>{throw A&&window.removeEventListener("load",A),y})}(),y.recaptcha=yield y._recaptchaLoader.load(y.auth,y.auth.languageCode||void 0);const E=yield function Hr(A){return ba.apply(this,arguments)}(y.auth);z(E,y.auth,"internal-error"),y.parameters.sitekey=E})()}getAssertedRecaptcha(){return z(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class el{constructor(y,E){this.verificationId=y,this.onConfirmation=E}confirm(y){const E=vr._fromVerification(this.verificationId,y);return this.onConfirmation(E)}}function hl(){return(hl=(0,f.Z)(function*(A,y,E){const F=ji(A),le=yield fl(F,y,(0,re.m9)(E));return new el(le,Se=>Xi(F,Se))})).apply(this,arguments)}function sc(){return(sc=(0,f.Z)(function*(A,y,E){const F=(0,re.m9)(A);yield co(!1,F,"phone");const le=yield fl(F.auth,y,(0,re.m9)(E));return new el(le,Se=>Kr(F,Se))})).apply(this,arguments)}function Ia(){return(Ia=(0,f.Z)(function*(A,y,E){const F=(0,re.m9)(A),le=yield fl(F.auth,y,(0,re.m9)(E));return new el(le,Se=>_o(F,Se))})).apply(this,arguments)}function fl(A,y,E){return Wl.apply(this,arguments)}function Wl(){return Wl=(0,f.Z)(function*(A,y,E){var F;const le=yield E.verify();try{let Se;if(z("string"==typeof le,A,"argument-error"),z(E.type===Hl,A,"argument-error"),Se="string"==typeof y?{phoneNumber:y}:y,"session"in Se){const At=Se.session;if("phoneNumber"in Se)return z("enroll"===At.type,A,"internal-error"),(yield function ve(A,y){return bn(A,"POST","/v2/accounts/mfaEnrollment:start",sn(A,y))}(A,{idToken:At.credential,phoneEnrollmentInfo:{phoneNumber:Se.phoneNumber,recaptchaToken:le}})).phoneSessionInfo.sessionInfo;{z("signin"===At.type,A,"internal-error");const hn=(null===(F=Se.multiFactorHint)||void 0===F?void 0:F.uid)||Se.multiFactorUid;return z(hn,A,"missing-multi-factor-info"),(yield function Lo(A,y){return bn(A,"POST","/v2/accounts/mfaSignIn:start",sn(A,y))}(A,{mfaPendingCredential:At.credential,mfaEnrollmentId:hn,phoneSignInInfo:{recaptchaToken:le}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:At}=yield function lr(A,y){return or.apply(this,arguments)}(A,{phoneNumber:Se.phoneNumber,recaptchaToken:le});return At}}finally{E._reset()}}),Wl.apply(this,arguments)}function wl(){return(wl=(0,f.Z)(function*(A,y){yield Zr((0,re.m9)(A),y)})).apply(this,arguments)}let Ds=(()=>{class A{constructor(E){this.providerId=A.PROVIDER_ID,this.auth=ji(E)}verifyPhoneNumber(E,F){return fl(this.auth,E,(0,re.m9)(F))}static credential(E,F){return vr._fromVerification(E,F)}static credentialFromResult(E){return A.credentialFromTaggedObject(E)}static credentialFromError(E){return A.credentialFromTaggedObject(E.customData||{})}static credentialFromTaggedObject({_tokenResponse:E}){if(!E)return null;const{phoneNumber:F,temporaryProof:le}=E;return F&&le?vr._fromTokenResponse(F,le):null}}return A.PROVIDER_ID="phone",A.PHONE_SIGN_IN_METHOD="phone",A})();function Go(A,y){return y?gn(y):(z(A._popupRedirectResolver,A,"argument-error"),A._popupRedirectResolver)}class Y extends Ar{constructor(y){super("custom","custom"),this.params=y}_getIdTokenResponse(y){return Qr(y,this._buildIdpRequest())}_linkToIdToken(y,E){return Qr(y,this._buildIdpRequest(E))}_getReauthenticationResolver(y){return Qr(y,this._buildIdpRequest())}_buildIdpRequest(y){const E={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return y&&(E.idToken=y),E}}function p(A){return uo(A.auth,new Y(A),A.bypassAuthState)}function a(A){const{auth:y,user:E}=A;return z(E,y,"internal-error"),Vo(E,new Y(A),A.bypassAuthState)}function h(A){return T.apply(this,arguments)}function T(){return(T=(0,f.Z)(function*(A){const{auth:y,user:E}=A;return z(E,y,"internal-error"),Zr(E,new Y(A),A.bypassAuthState)})).apply(this,arguments)}class P{constructor(y,E,F,le,Se=!1){this.auth=y,this.resolver=F,this.user=le,this.bypassAuthState=Se,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(E)?E:[E]}execute(){var y=this;return new Promise(function(){var E=(0,f.Z)(function*(F,le){y.pendingPromise={resolve:F,reject:le};try{y.eventManager=yield y.resolver._initialize(y.auth),yield y.onExecution(),y.eventManager.registerConsumer(y)}catch(Se){y.reject(Se)}});return function(F,le){return E.apply(this,arguments)}}())}onAuthEvent(y){var E=this;return(0,f.Z)(function*(){const{urlResponse:F,sessionId:le,postBody:Se,tenantId:At,error:hn,type:Fn}=y;if(hn)return void E.reject(hn);const di={auth:E.auth,requestUri:F,sessionId:le,tenantId:At||void 0,postBody:Se||void 0,user:E.user,bypassAuthState:E.bypassAuthState};try{E.resolve(yield E.getIdpTask(Fn)(di))}catch(Wi){E.reject(Wi)}})()}onError(y){this.reject(y)}getIdpTask(y){switch(y){case"signInViaPopup":case"signInViaRedirect":return p;case"linkViaPopup":case"linkViaRedirect":return h;case"reauthViaPopup":case"reauthViaRedirect":return a;default:Qe(this.auth,"internal-error")}}resolve(y){bt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(y),this.unregisterAndCleanUp()}reject(y){bt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(y),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const X=new Ut(2e3,1e4);function We(){return(We=(0,f.Z)(function*(A,y,E){const F=ji(A);kt(A,y,zi);const le=Go(F,E);return new sr(F,"signInViaPopup",y,le).executeNotNull()})).apply(this,arguments)}function on(){return(on=(0,f.Z)(function*(A,y,E){const F=(0,re.m9)(A);kt(F.auth,y,zi);const le=Go(F.auth,E);return new sr(F.auth,"reauthViaPopup",y,le,F).executeNotNull()})).apply(this,arguments)}function Un(){return(Un=(0,f.Z)(function*(A,y,E){const F=(0,re.m9)(A);kt(F.auth,y,zi);const le=Go(F.auth,E);return new sr(F.auth,"linkViaPopup",y,le,F).executeNotNull()})).apply(this,arguments)}let sr=(()=>{class A extends P{constructor(E,F,le,Se,At){super(E,F,Se,At),this.provider=le,this.authWindow=null,this.pollId=null,A.currentPopupAction&&A.currentPopupAction.cancel(),A.currentPopupAction=this}executeNotNull(){var E=this;return(0,f.Z)(function*(){const F=yield E.execute();return z(F,E.auth,"internal-error"),F})()}onExecution(){var E=this;return(0,f.Z)(function*(){bt(1===E.filter.length,"Popup operations only handle one event");const F=hr();E.authWindow=yield E.resolver._openPopup(E.auth,E.provider,E.filter[0],F),E.authWindow.associatedEvent=F,E.resolver._originValidation(E.auth).catch(le=>{E.reject(le)}),E.resolver._isIframeWebStorageSupported(E.auth,le=>{le||E.reject(Ue(E.auth,"web-storage-unsupported"))}),E.pollUserCancellation()})()}get eventId(){var E;return(null===(E=this.authWindow)||void 0===E?void 0:E.associatedEvent)||null}cancel(){this.reject(Ue(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,A.currentPopupAction=null}pollUserCancellation(){const E=()=>{var F,le;this.pollId=null!==(le=null===(F=this.authWindow)||void 0===F?void 0:F.window)&&void 0!==le&&le.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Ue(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(E,X.get())};E()}}return A.currentPopupAction=null,A})();const jr="pendingRedirect",ur=new Map;class wa extends P{constructor(y,E,F=!1){super(y,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],E,void 0,F),this.eventId=null}execute(){var y=()=>super.execute,E=this;return(0,f.Z)(function*(){let F=ur.get(E.auth._key());if(!F){try{const Se=(yield function So(A,y){return Ys.apply(this,arguments)}(E.resolver,E.auth))?yield y().call(E):null;F=()=>Promise.resolve(Se)}catch(le){F=()=>Promise.reject(le)}ur.set(E.auth._key(),F)}return E.bypassAuthState||ur.set(E.auth._key(),()=>Promise.resolve(null)),F()})()}onAuthEvent(y){var E=()=>super.onAuthEvent,F=this;return(0,f.Z)(function*(){if("signInViaRedirect"===y.type)return E().call(F,y);if("unknown"!==y.type){if(y.eventId){const le=yield F.auth._redirectUserForId(y.eventId);if(le)return F.user=le,E().call(F,y);F.resolve(null)}}else F.resolve(null)})()}onExecution(){return(0,f.Z)(function*(){})()}cleanUp(){}}function Ys(){return(Ys=(0,f.Z)(function*(A,y){const E=Kl(y),F=pl(A);if(!(yield F._isAvailable()))return!1;const le="true"===(yield F._get(E));return yield F._remove(E),le})).apply(this,arguments)}function na(A,y){return Aa.apply(this,arguments)}function Aa(){return(Aa=(0,f.Z)(function*(A,y){return pl(A)._set(Kl(y),"true")})).apply(this,arguments)}function ia(A,y){ur.set(A._key(),y)}function pl(A){return gn(A._redirectPersistence)}function Kl(A){return Be(jr,A.config.apiKey,A.name)}function Ca(A,y,E){return function Z(A,y,E){return se.apply(this,arguments)}(A,y,E)}function se(){return(se=(0,f.Z)(function*(A,y,E){const F=ji(A);kt(A,y,zi),yield F._initializationPromise;const le=Go(F,E);return yield na(le,F),le._openRedirect(F,y,"signInViaRedirect")})).apply(this,arguments)}function Ee(A,y,E){return function Xe(A,y,E){return xt.apply(this,arguments)}(A,y,E)}function xt(){return(xt=(0,f.Z)(function*(A,y,E){const F=(0,re.m9)(A);kt(F.auth,y,zi),yield F.auth._initializationPromise;const le=Go(F.auth,E);yield na(le,F.auth);const Se=yield Wo(F);return le._openRedirect(F.auth,y,"reauthViaRedirect",Se)})).apply(this,arguments)}function zt(A,y,E){return function Cn(A,y,E){return Jn.apply(this,arguments)}(A,y,E)}function Jn(){return(Jn=(0,f.Z)(function*(A,y,E){const F=(0,re.m9)(A);kt(F.auth,y,zi),yield F.auth._initializationPromise;const le=Go(F.auth,E);yield co(!1,F,y.providerId),yield na(le,F.auth);const Se=yield Wo(F);return le._openRedirect(F.auth,y,"linkViaRedirect",Se)})).apply(this,arguments)}function Ei(){return(Ei=(0,f.Z)(function*(A,y){return yield ji(A)._initializationPromise,br(A,y,!1)})).apply(this,arguments)}function br(A,y){return Gi.apply(this,arguments)}function Gi(){return(Gi=(0,f.Z)(function*(A,y,E=!1){const F=ji(A),le=Go(F,y),At=yield new wa(F,le,E).execute();return At&&!E&&(delete At.user._redirectEventId,yield F._persistUserIfCurrent(At.user),yield F._setRedirectUser(null,y)),At})).apply(this,arguments)}function Wo(A){return so.apply(this,arguments)}function so(){return(so=(0,f.Z)(function*(A){const y=hr(`${A.uid}:::`);return A._redirectEventId=y,yield A.auth._setRedirectUser(A),yield A.auth._persistUserIfCurrent(A),y})).apply(this,arguments)}class Ml{constructor(y){this.auth=y,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(y){this.consumers.add(y),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,y)&&(this.sendToConsumer(this.queuedRedirectEvent,y),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(y){this.consumers.delete(y)}onEvent(y){if(this.hasEventBeenHandled(y))return!1;let E=!1;return this.consumers.forEach(F=>{this.isEventForConsumer(y,F)&&(E=!0,this.sendToConsumer(y,F),this.saveEventToCache(y))}),this.hasHandledPotentialRedirect||!function Wa(A){switch(A.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Oo(A);default:return!1}}(y)||(this.hasHandledPotentialRedirect=!0,E||(this.queuedRedirectEvent=y,E=!0)),E}sendToConsumer(y,E){var F;if(y.error&&!Oo(y)){const le=(null===(F=y.error.code)||void 0===F?void 0:F.split("auth/")[1])||"internal-error";E.onError(Ue(this.auth,le))}else E.onAuthEvent(y)}isEventForConsumer(y,E){const F=null===E.eventId||!!y.eventId&&y.eventId===E.eventId;return E.filter.includes(y.type)&&F}hasEventBeenHandled(y){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ma(y))}saveEventToCache(y){this.cachedEventUids.add(Ma(y)),this.lastProcessedEventTime=Date.now()}}function Ma(A){return[A.type,A.eventId,A.sessionId,A.tenantId].filter(y=>y).join("-")}function Oo({type:A,error:y}){return"unknown"===A&&"auth/no-auth-event"===y?.code}function sl(A){return Rl.apply(this,arguments)}function Rl(){return(Rl=(0,f.Z)(function*(A,y={}){return bn(A,"GET","/v1/projects",y)})).apply(this,arguments)}const Dc=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Sc=/^https?/;function ql(){return(ql=(0,f.Z)(function*(A){if(A.config.emulator)return;const{authorizedDomains:y}=yield sl(A);for(const E of y)try{if($s(E))return}catch{}Qe(A,"unauthorized-domain")})).apply(this,arguments)}function $s(A){const y=Ht(),{protocol:E,hostname:F}=new URL(y);if(A.startsWith("chrome-extension://")){const At=new URL(A);return""===At.hostname&&""===F?"chrome-extension:"===E&&A.replace("chrome-extension://","")===y.replace("chrome-extension://",""):"chrome-extension:"===E&&At.hostname===F}if(!Sc.test(E))return!1;if(Dc.test(A))return F===A;const le=A.replace(/\./g,"\\.");return new RegExp("^(.+\\."+le+"|"+le+")$","i").test(F)}const ml=new Ut(3e4,6e4);function fc(){const A=ni().___jsl;if(A?.H)for(const y of Object.keys(A.H))if(A.H[y].r=A.H[y].r||[],A.H[y].L=A.H[y].L||[],A.H[y].r=[...A.H[y].L],A.CP)for(let E=0;E<A.CP.length;E++)A.CP[E]=null}let ol=null;const Mu=new Ut(5e3,15e3),Wr="__/auth/iframe",Is="emulator/auth/iframe",pc={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},iu=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Cl(A){const y=A.config;z(y.authDomain,A,"auth-domain-config-required");const E=y.emulator?Et(y,Is):`https://${A.config.authDomain}/${Wr}`,F={apiKey:y.apiKey,appName:A.name,v:Te.SDK_VERSION},le=iu.get(A.config.apiHost);le&&(F.eid=le);const Se=A._getFrameworks();return Se.length&&(F.fw=Se.join(",")),`${E}?${(0,re.xO)(F).slice(1)}`}function Tl(){return Tl=(0,f.Z)(function*(A){const y=yield function Xu(A){return ol=ol||function oc(A){return new Promise((y,E)=>{var F,le,Se;function At(){fc(),gapi.load("gapi.iframes",{callback:()=>{y(gapi.iframes.getContext())},ontimeout:()=>{fc(),E(Ue(A,"network-request-failed"))},timeout:ml.get()})}if(null!==(le=null===(F=ni().gapi)||void 0===F?void 0:F.iframes)&&void 0!==le&&le.Iframe)y(gapi.iframes.getContext());else{if(null===(Se=ni().gapi)||void 0===Se||!Se.load){const hn=js("iframefcb");return ni()[hn]=()=>{gapi.load?At():E(Ue(A,"network-request-failed"))},Ga(`https://apis.google.com/js/api.js?onload=${hn}`).catch(Fn=>E(Fn))}At()}}).catch(y=>{throw ol=null,y})}(A),ol}(A),E=ni().gapi;return z(E,A,"internal-error"),y.open({where:document.body,url:Cl(A),messageHandlersFilter:E.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:pc,dontclear:!0},F=>new Promise(function(){var le=(0,f.Z)(function*(Se,At){yield F.restyle({setHideOnLeave:!1});const hn=Ue(A,"network-request-failed"),Fn=ni().setTimeout(()=>{At(hn)},Mu.get());function di(){ni().clearTimeout(Fn),Se(F)}F.ping(di).then(di,()=>{At(hn)})});return function(Se,At){return le.apply(this,arguments)}}()))}),Tl.apply(this,arguments)}const Bc={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Hc=500,Ra=600,xc="_blank",mc="http://localhost";class fu{constructor(y){this.window=y,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const pu="__/auth/handler",Ac="emulator/auth/handler";function zc(A,y,E,F,le,Se){z(A.config.authDomain,A,"auth-domain-config-required"),z(A.config.apiKey,A,"invalid-api-key");const At={apiKey:A.config.apiKey,appName:A.name,authType:E,redirectUrl:F,v:Te.SDK_VERSION,eventId:le};if(y instanceof zi){y.setDefaultLanguage(A.languageCode),At.providerId=y.providerId||"",(0,re.xb)(y.getCustomParameters())||(At.customParameters=JSON.stringify(y.getCustomParameters()));for(const[Fn,di]of Object.entries(Se||{}))At[Fn]=di}if(y instanceof Ms){const Fn=y.getScopes().filter(di=>""!==di);Fn.length>0&&(At.scopes=Fn.join(","))}A.tenantId&&(At.tid=A.tenantId);const hn=At;for(const Fn of Object.keys(hn))void 0===hn[Fn]&&delete hn[Fn];return`${function ha({config:A}){return A.emulator?Et(A,Ac):`https://${A.authDomain}/${pu}`}(A)}?${(0,re.xO)(hn).slice(1)}`}const Mc="webStorageSupport",ra=class ac{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=yi,this._completeRedirectFn=br,this._overrideRedirectResult=ia}_openPopup(y,E,F,le){var Se=this;return(0,f.Z)(function*(){var At;bt(null===(At=Se.eventManagers[y._key()])||void 0===At?void 0:At.manager,"_initialize() not called before _openPopup()");const hn=zc(y,E,F,Ht(),le);return function Ka(A,y,E,F=Hc,le=Ra){const Se=Math.max((window.screen.availHeight-le)/2,0).toString(),At=Math.max((window.screen.availWidth-F)/2,0).toString();let hn="";const Fn=Object.assign(Object.assign({},Bc),{width:F.toString(),height:le.toString(),top:Se,left:At}),di=(0,re.z$)().toLowerCase();E&&(hn=Je(di)?xc:E),St(di)&&(y=y||mc,Fn.scrollbars="yes");const Wi=Object.entries(Fn).reduce((Da,[Fl,Ru])=>`${Da}${Fl}=${Ru},`,"");if(function vi(A=(0,re.z$)()){var y;return un(A)&&!(null===(y=window.navigator)||void 0===y||!y.standalone)}(di)&&"_self"!==hn)return function jc(A,y){const E=document.createElement("a");E.href=A,E.target=y;const F=document.createEvent("MouseEvent");F.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),E.dispatchEvent(F)}(y||"",hn),new fu(null);const ki=window.open(y||"",hn,Wi);z(ki,A,"popup-blocked");try{ki.focus()}catch{}return new fu(ki)}(y,hn,hr())})()}_openRedirect(y,E,F,le){var Se=this;return(0,f.Z)(function*(){return yield Se._originValidation(y),function qn(A){ni().location.href=A}(zc(y,E,F,Ht(),le)),new Promise(()=>{})})()}_initialize(y){const E=y._key();if(this.eventManagers[E]){const{manager:le,promise:Se}=this.eventManagers[E];return le?Promise.resolve(le):(bt(Se,"If manager is not set, promise should be"),Se)}const F=this.initAndGetManager(y);return this.eventManagers[E]={promise:F},F.catch(()=>{delete this.eventManagers[E]}),F}initAndGetManager(y){var E=this;return(0,f.Z)(function*(){const F=yield function Ha(A){return Tl.apply(this,arguments)}(y),le=new Ml(y);return F.register("authEvent",Se=>(z(Se?.authEvent,y,"invalid-auth-event"),{status:le.onEvent(Se.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),E.eventManagers[y._key()]={manager:le},E.iframes[y._key()]=F,le})()}_isIframeWebStorageSupported(y,E){this.iframes[y._key()].send(Mc,{type:Mc},le=>{var Se;const At=null===(Se=le?.[0])||void 0===Se?void 0:Se[Mc];void 0!==At&&E(!!At),Qe(y,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(y){const E=y._key();return this.originValidationPromises[E]||(this.originValidationPromises[E]=function Uo(A){return ql.apply(this,arguments)}(y)),this.originValidationPromises[E]}get _shouldInitProactively(){return vs()||Mn()||un()}};class lc{constructor(y){this.factorId=y}_process(y,E,F){switch(E.type){case"enroll":return this._finalizeEnroll(y,E.credential,F);case"signin":return this._finalizeSignIn(y,E.credential);default:return ct("unexpected MultiFactorSessionType")}}}class gc extends lc{constructor(y){super("phone"),this.credential=y}static _fromCredential(y){return new gc(y)}_finalizeEnroll(y,E,F){return function $e(A,y){return bn(A,"POST","/v2/accounts/mfaEnrollment:finalize",sn(A,y))}(y,{idToken:E,displayName:F,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(y,E){return function da(A,y){return bn(A,"POST","/v2/accounts/mfaSignIn:finalize",sn(A,y))}(y,{mfaPendingCredential:E,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let $c=(()=>{class A{constructor(){}static assertion(E){return gc._fromCredential(E)}}return A.FACTOR_ID="phone",A})();var Gc="@firebase/auth";class Pl{constructor(y){this.auth=y,this.internalListeners=new Map}getUid(){var y;return this.assertAuthConfigured(),(null===(y=this.auth.currentUser)||void 0===y?void 0:y.uid)||null}getToken(y){var E=this;return(0,f.Z)(function*(){return E.assertAuthConfigured(),yield E.auth._initializationPromise,E.auth.currentUser?{accessToken:yield E.auth.currentUser.getIdToken(y)}:null})()}addAuthTokenListener(y){if(this.assertAuthConfigured(),this.internalListeners.has(y))return;const E=this.auth.onIdTokenChanged(F=>{y(F?.stsTokenManager.accessToken||null)});this.internalListeners.set(y,E),this.updateProactiveRefresh()}removeAuthTokenListener(y){this.assertAuthConfigured();const E=this.internalListeners.get(y);E&&(this.internalListeners.delete(y),E(),this.updateProactiveRefresh())}assertAuthConfigured(){z(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function w(){return window}(0,re.Pz)("authIdTokenMaxAge"),function gl(A){(0,Te._registerComponent)(new Ze.wA("auth",(y,{options:E})=>{const F=y.getProvider("app").getImmediate(),le=y.getProvider("heartbeat"),{apiKey:Se,authDomain:At}=F.options;return((hn,Fn)=>{z(Se&&!Se.includes(":"),"invalid-api-key",{appName:hn.name}),z(!At?.includes(":"),"argument-error",{appName:hn.name});const di={apiKey:Se,authDomain:At,clientPlatform:A,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Gr(A)},Wi=new Tr(hn,Fn,di);return function Pt(A,y){const E=y?.persistence||[],F=(Array.isArray(E)?E:[E]).map(gn);y?.errorMap&&A._updateErrorMap(y.errorMap),A._initializeWithPersistence(F,y?.popupRedirectResolver)}(Wi,E),Wi})(F,le)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((y,E,F)=>{y.getProvider("auth-internal").initialize()})),(0,Te._registerComponent)(new Ze.wA("auth-internal",y=>{const E=ji(y.getProvider("auth").getImmediate());return new Pl(E)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,Te.registerVersion)(Gc,"0.22.0",function Wc(A){switch(A){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(A)),(0,Te.registerVersion)(Gc,"0.22.0","esm2017")}("Browser");const M=2e3;function we(){return we=(0,f.Z)(function*(A,y,E){var F;const{BuildInfo:le}=w();bt(y.sessionId,"AuthEvent did not contain a session ID");const Se=yield function yo(A){return Gs.apply(this,arguments)}(y.sessionId),At={};return un()?At.ibi=le.packageName:Fe()?At.apn=le.packageName:Qe(A,"operation-not-supported-in-this-environment"),le.displayName&&(At.appDisplayName=le.displayName),At.sessionId=Se,zc(A,E,y.type,void 0,null!==(F=y.eventId)&&void 0!==F?F:void 0,At)}),we.apply(this,arguments)}function $t(){return($t=(0,f.Z)(function*(A){const{BuildInfo:y}=w(),E={};un()?E.iosBundleId=y.packageName:Fe()?E.androidPackageName=y.packageName:Qe(A,"operation-not-supported-in-this-environment"),yield sl(A,E)})).apply(this,arguments)}function Ri(){return(Ri=(0,f.Z)(function*(A,y,E){const{cordova:F}=w();let le=()=>{};try{yield new Promise((Se,At)=>{let hn=null;function Fn(){var ki;Se();const Da=null===(ki=F.plugins.browsertab)||void 0===ki?void 0:ki.close;"function"==typeof Da&&Da(),"function"==typeof E?.close&&E.close()}function di(){hn||(hn=window.setTimeout(()=>{At(Ue(A,"redirect-cancelled-by-user"))},M))}function Wi(){"visible"===document?.visibilityState&&di()}y.addPassiveListener(Fn),document.addEventListener("resume",di,!1),Fe()&&document.addEventListener("visibilitychange",Wi,!1),le=()=>{y.removePassiveListener(Fn),document.removeEventListener("resume",di,!1),document.removeEventListener("visibilitychange",Wi,!1),hn&&window.clearTimeout(hn)}})}finally{le()}})).apply(this,arguments)}function Gs(){return(Gs=(0,f.Z)(function*(A){const y=function Ol(A){if(bt(/[0-9a-zA-Z]+/.test(A),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(A);const y=new ArrayBuffer(A.length),E=new Uint8Array(y);for(let F=0;F<A.length;F++)E[F]=A.charCodeAt(F);return E}(A),E=yield crypto.subtle.digest("SHA-256",y);return Array.from(new Uint8Array(E)).map(le=>le.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}const kl=20;class Zc extends Ml{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(y=>{this.resolveInialized=y})}addPassiveListener(y){this.passiveListeners.add(y)}removePassiveListener(y){this.passiveListeners.delete(y)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(y){return this.resolveInialized(),this.passiveListeners.forEach(E=>E(y)),super.onEvent(y)}initialized(){var y=this;return(0,f.Z)(function*(){yield y.initPromise})()}}function _c(A){return ll.apply(this,arguments)}function ll(){return(ll=(0,f.Z)(function*(A){const y=yield _l()._get(Dl(A));return y&&(yield _l()._remove(Dl(A))),y})).apply(this,arguments)}function Rc(){const A=[],y="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let E=0;E<kl;E++){const F=Math.floor(Math.random()*y.length);A.push(y.charAt(F))}return A.join("")}function _l(){return gn(li)}function Dl(A){return Be("authEvent",A.config.apiKey,A.name)}function cc(A){if(!A?.includes("?"))return{};const[y,...E]=A.split("?");return(0,re.zd)(E.join("?"))}const b=class U{constructor(){this._redirectPersistence=yi,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=br,this._overrideRedirectResult=ia}_initialize(y){var E=this;return(0,f.Z)(function*(){const F=y._key();let le=E.eventManagers.get(F);return le||(le=new Zc(y),E.eventManagers.set(F,le),E.attachCallbackListeners(y,le)),le})()}_openPopup(y){Qe(y,"operation-not-supported-in-this-environment")}_openRedirect(y,E,F,le){var Se=this;return(0,f.Z)(function*(){!function Er(A){var y,E,F,le,Se,At,hn,Fn,di,Wi;const ki=w();z("function"==typeof(null===(y=ki?.universalLinks)||void 0===y?void 0:y.subscribe),A,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),z(typeof(null===(E=ki?.BuildInfo)||void 0===E?void 0:E.packageName)<"u",A,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),z("function"==typeof(null===(Se=null===(le=null===(F=ki?.cordova)||void 0===F?void 0:F.plugins)||void 0===le?void 0:le.browsertab)||void 0===Se?void 0:Se.openUrl),A,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),z("function"==typeof(null===(Fn=null===(hn=null===(At=ki?.cordova)||void 0===At?void 0:At.plugins)||void 0===hn?void 0:hn.browsertab)||void 0===Fn?void 0:Fn.isAvailable),A,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),z("function"==typeof(null===(Wi=null===(di=ki?.cordova)||void 0===di?void 0:di.InAppBrowser)||void 0===Wi?void 0:Wi.open),A,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(y);const At=yield Se._initialize(y);yield At.initialized(),At.resetRedirect(),function Ss(){ur.clear()}(),yield Se._originValidation(y);const hn=function Yc(A,y,E=null){return{type:y,eventId:E,urlResponse:null,sessionId:Rc(),postBody:null,tenantId:A.tenantId,error:Ue(A,"no-auth-event")}}(y,F,le);yield function Ir(A,y){return _l()._set(Dl(A),y)}(y,hn);const Fn=yield function K(A,y,E){return we.apply(this,arguments)}(y,hn,E),di=yield function Sn(A){const{cordova:y}=w();return new Promise(E=>{y.plugins.browsertab.isAvailable(F=>{let le=null;F?y.plugins.browsertab.openUrl(A):le=y.InAppBrowser.open(A,function Kn(A=(0,re.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(A)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(A)}()?"_blank":"_system","location=yes"),E(le)})})}(Fn);return function Zn(A,y,E){return Ri.apply(this,arguments)}(y,At,di)})()}_isIframeWebStorageSupported(y,E){throw new Error("Method not implemented.")}_originValidation(y){const E=y._key();return this.originValidationPromises[E]||(this.originValidationPromises[E]=function je(A){return $t.apply(this,arguments)}(y)),this.originValidationPromises[E]}attachCallbackListeners(y,E){const{universalLinks:F,handleOpenURL:le,BuildInfo:Se}=w(),At=setTimeout((0,f.Z)(function*(){yield _c(y),E.onEvent(D())}),500),hn=function(){var Wi=(0,f.Z)(function*(ki){clearTimeout(At);const Da=yield _c(y);let Fl=null;Da&&ki?.url&&(Fl=function yc(A,y){var E,F;const le=function Qc(A){const y=cc(A),E=y.link?decodeURIComponent(y.link):void 0,F=cc(E).link,le=y.deep_link_id?decodeURIComponent(y.deep_link_id):void 0;return cc(le).link||le||F||E||A}(y);if(le.includes("/__/auth/callback")){const Se=cc(le),At=Se.firebaseError?function mu(A){try{return JSON.parse(A)}catch{return null}}(decodeURIComponent(Se.firebaseError)):null,hn=null===(F=null===(E=At?.code)||void 0===E?void 0:E.split("auth/"))||void 0===F?void 0:F[1],Fn=hn?Ue(hn):null;return Fn?{type:A.type,eventId:A.eventId,tenantId:A.tenantId,error:Fn,urlResponse:null,sessionId:null,postBody:null}:{type:A.type,eventId:A.eventId,tenantId:A.tenantId,sessionId:A.sessionId,urlResponse:le,postBody:null}}return null}(Da,ki.url)),E.onEvent(Fl||D())});return function(Da){return Wi.apply(this,arguments)}}();typeof F<"u"&&"function"==typeof F.subscribe&&F.subscribe(null,hn);const Fn=le,di=`${Se.packageName.toLowerCase()}://`;w().handleOpenURL=function(){var Wi=(0,f.Z)(function*(ki){if(ki.toLowerCase().startsWith(di)&&hn({url:ki}),"function"==typeof Fn)try{Fn(ki)}catch(Da){console.error(Da)}});return function(ki){return Wi.apply(this,arguments)}}()}};function D(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Ue("no-auth-event")}}const Ct=1e3;function Qt(){var A;return(null===(A=self?.location)||void 0===A?void 0:A.protocol)||null}function ei(A=(0,re.z$)()){return!("file:"!==Qt()&&"ionic:"!==Qt()&&"capacitor:"!==Qt()||!A.toLowerCase().match(/iphone|ipad|ipod|android/))}function uc(){try{const A=self.localStorage,y=hr();if(A)return A.setItem(y,"1"),A.removeItem(y),!function Xl(A=(0,re.z$)()){return function zr(){return(0,re.w1)()&&11===document?.documentMode}()||function fa(A=(0,re.z$)()){return/Edge\/\d+/.test(A)}(A)}()||(0,re.hl)()}catch{return Jl()&&(0,re.hl)()}return!1}function Jl(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Pc(){return(function Ln(){return"http:"===Qt()||"https:"===Qt()}()||(0,re.ru)()||ei())&&!function jn(){return(0,re.b$)()||(0,re.UG)()}()&&uc()&&!Jl()}function vc(){return ei()&&typeof document<"u"}function Oa(){return(Oa=(0,f.Z)(function*(){return!!vc()&&new Promise(A=>{const y=setTimeout(()=>{A(!1)},Ct);document.addEventListener("deviceready",()=>{clearTimeout(y),A(!0)})})})).apply(this,arguments)}const Ta={LOCAL:"local",NONE:"none",SESSION:"session"},ec=z,tc="persistence";function Nl(A){return bc.apply(this,arguments)}function bc(){return(bc=(0,f.Z)(function*(A){yield A._initializationPromise;const y=nc(),E=Be(tc,A.config.apiKey,A.name);y&&y.setItem(E,A._getPersistence())})).apply(this,arguments)}function nc(){var A;try{return(null===(A=function Xc(){return typeof window<"u"?window:null}())||void 0===A?void 0:A.sessionStorage)||null}catch{return null}}const Ju=z;class su{constructor(){this.browserResolver=gn(ra),this.cordovaResolver=gn(b),this.underlyingResolver=null,this._redirectPersistence=yi,this._completeRedirectFn=br,this._overrideRedirectResult=ia}_initialize(y){var E=this;return(0,f.Z)(function*(){return yield E.selectUnderlyingResolver(),E.assertedUnderlyingResolver._initialize(y)})()}_openPopup(y,E,F,le){var Se=this;return(0,f.Z)(function*(){return yield Se.selectUnderlyingResolver(),Se.assertedUnderlyingResolver._openPopup(y,E,F,le)})()}_openRedirect(y,E,F,le){var Se=this;return(0,f.Z)(function*(){return yield Se.selectUnderlyingResolver(),Se.assertedUnderlyingResolver._openRedirect(y,E,F,le)})()}_isIframeWebStorageSupported(y,E){this.assertedUnderlyingResolver._isIframeWebStorageSupported(y,E)}_originValidation(y){return this.assertedUnderlyingResolver._originValidation(y)}get _shouldInitProactively(){return vc()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Ju(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var y=this;return(0,f.Z)(function*(){if(y.underlyingResolver)return;const E=yield function Oc(){return Oa.apply(this,arguments)}();y.underlyingResolver=E?y.cordovaResolver:y.browserResolver})()}}function Ld(A){return A.unwrap()}function ws(A){return gu(A)}function gu(A){const{_tokenResponse:y}=A instanceof re.ZR?A.customData:A;if(!y)return null;if(!(A instanceof re.ZR)&&"temporaryProof"in y&&"phoneNumber"in y)return Ds.credentialFromResult(A);const E=y.providerId;if(!E||E===ze.PASSWORD)return null;let F;switch(E){case ze.GOOGLE:F=bo;break;case ze.FACEBOOK:F=Ao;break;case ze.GITHUB:F=qo;break;case ze.TWITTER:F=Di;break;default:const{oauthIdToken:le,oauthAccessToken:Se,oauthTokenSecret:At,pendingToken:hn,nonce:Fn}=y;return Se||At||le||hn?hn?E.startsWith("saml.")?Vs._create(E,hn):Ls._fromParams({providerId:E,signInMethod:E,pendingToken:hn,idToken:le,accessToken:Se}):new Ws(E).credential({idToken:le,accessToken:Se,rawNonce:Fn}):null}return A instanceof re.ZR?F.credentialFromError(A):F.credentialFromResult(A)}function qa(A,y){return y.catch(E=>{throw E instanceof re.ZR&&function yd(A,y){var E;const F=null===(E=y.customData)||void 0===E?void 0:E._tokenResponse;if("auth/multi-factor-auth-required"===y?.code)y.resolver=new _u(A,function _e(A,y){var E;const F=(0,re.m9)(A),le=y;return z(y.customData.operationType,F,"argument-error"),z(null===(E=le.customData._serverResponse)||void 0===E?void 0:E.mfaPendingCredential,F,"argument-error"),J._fromError(F,le)}(A,y));else if(F){const le=gu(y),Se=y;le&&(Se.credential=le,Se.tenantId=F.tenantId||void 0,Se.email=F.email||void 0,Se.phoneNumber=F.phoneNumber||void 0)}}(A,E),E}).then(E=>{const le=E.user;return{operationType:E.operationType,credential:ws(E),additionalUserInfo:za(E),user:Za.getOrCreate(le)}})}function ou(A,y){return Jc.apply(this,arguments)}function Jc(){return(Jc=(0,f.Z)(function*(A,y){const E=yield y;return{verificationId:E.verificationId,confirm:F=>qa(A,E.confirm(F))}})).apply(this,arguments)}class _u{constructor(y,E){this.resolver=E,this.auth=function pa(A){return A.wrapped()}(y)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(y){return qa(Ld(this.auth),this.resolver.resolveSignIn(y))}}class Za{constructor(y){this._delegate=y,this.multiFactor=function G(A){const y=(0,re.m9)(A);return te.has(y)||te.set(y,k._fromUser(y)),te.get(y)}(y)}static getOrCreate(y){return Za.USER_MAP.has(y)||Za.USER_MAP.set(y,new Za(y)),Za.USER_MAP.get(y)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(y){return this._delegate.getIdTokenResult(y)}getIdToken(y){return this._delegate.getIdToken(y)}linkAndRetrieveDataWithCredential(y){return this.linkWithCredential(y)}linkWithCredential(y){var E=this;return(0,f.Z)(function*(){return qa(E.auth,Kr(E._delegate,y))})()}linkWithPhoneNumber(y,E){var F=this;return(0,f.Z)(function*(){return ou(F.auth,function $l(A,y,E){return sc.apply(this,arguments)}(F._delegate,y,E))})()}linkWithPopup(y){var E=this;return(0,f.Z)(function*(){return qa(E.auth,function ln(A,y,E){return Un.apply(this,arguments)}(E._delegate,y,su))})()}linkWithRedirect(y){var E=this;return(0,f.Z)(function*(){return yield Nl(ji(E.auth)),zt(E._delegate,y,su)})()}reauthenticateAndRetrieveDataWithCredential(y){return this.reauthenticateWithCredential(y)}reauthenticateWithCredential(y){var E=this;return(0,f.Z)(function*(){return qa(E.auth,_o(E._delegate,y))})()}reauthenticateWithPhoneNumber(y,E){return ou(this.auth,function Gl(A,y,E){return Ia.apply(this,arguments)}(this._delegate,y,E))}reauthenticateWithPopup(y){return qa(this.auth,function mt(A,y,E){return on.apply(this,arguments)}(this._delegate,y,su))}reauthenticateWithRedirect(y){var E=this;return(0,f.Z)(function*(){return yield Nl(ji(E.auth)),Ee(E._delegate,y,su)})()}sendEmailVerification(y){return function Ro(A,y){return la.apply(this,arguments)}(this._delegate,y)}unlink(y){var E=this;return(0,f.Z)(function*(){return yield function Ks(A,y){return lo.apply(this,arguments)}(E._delegate,y),E})()}updateEmail(y){return function Co(A,y){return ya((0,re.m9)(A),y,null)}(this._delegate,y)}updatePassword(y){return function Zs(A,y){return ya((0,re.m9)(A),null,y)}(this._delegate,y)}updatePhoneNumber(y){return function zs(A,y){return wl.apply(this,arguments)}(this._delegate,y)}updateProfile(y){return function Ho(A,y){return wo.apply(this,arguments)}(this._delegate,y)}verifyBeforeUpdateEmail(y,E){return function ca(A,y,E){return Rr.apply(this,arguments)}(this._delegate,y,E)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Za.USER_MAP=new WeakMap;const yu=z;let vd=(()=>{class A{constructor(E,F){if(this.app=E,F.isInitialized())return this._delegate=F.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:le}=E.options;yu(le,"invalid-api-key",{appName:E.name}),yu(le,"invalid-api-key",{appName:E.name});const Se=typeof window<"u"?su:void 0;this._delegate=F.initialize({options:{persistence:Th(le,E.name),popupRedirectResolver:Se}}),this._delegate._updateErrorMap(Lt),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Za.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(E){this._delegate.languageCode=E}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(E){this._delegate.tenantId=E}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(E,F){!function rs(A,y,E){const F=ji(A);z(F._canInitEmulator,F,"emulator-config-failed"),z(/^https?:\/\//.test(y),F,"invalid-emulator-scheme");const le=!!E?.disableWarnings,Se=Qi(y),{host:At,port:hn}=function Sr(A){const y=Qi(A),E=/(\/\/)?([^?#/]+)/.exec(A.substr(y.length));if(!E)return{host:"",port:null};const F=E[2].split("@").pop()||"",le=/^(\[[^\]]+\])(:|$)/.exec(F);if(le){const Se=le[1];return{host:Se,port:Dr(F.substr(Se.length+1))}}{const[Se,At]=F.split(":");return{host:Se,port:Dr(At)}}}(y);F.config.emulator={url:`${Se}//${At}${null===hn?"":`:${hn}`}/`},F.settings.appVerificationDisabledForTesting=!0,F.emulatorConfig=Object.freeze({host:At,port:hn,protocol:Se.replace(":",""),options:Object.freeze({disableWarnings:le})}),le||function ps(){function A(){const y=document.createElement("p"),E=y.style;y.innerText="Running in emulator mode. Do not use with production credentials.",E.position="fixed",E.width="100%",E.backgroundColor="#ffffff",E.border=".1em solid #000000",E.color="#b50000",E.bottom="0px",E.left="0px",E.margin="0px",E.zIndex="10000",E.textAlign="center",y.classList.add("firebase-emulator-warning"),document.body.appendChild(y)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",A):A())}()}(this._delegate,E,F)}applyActionCode(E){return function ie(A,y){return ee.apply(this,arguments)}(this._delegate,E)}checkActionCode(E){return Q(this._delegate,E)}confirmPasswordReset(E,F){return function _s(A,y,E){return si.apply(this,arguments)}(this._delegate,E,F)}createUserWithEmailAndPassword(E,F){var le=this;return(0,f.Z)(function*(){return qa(le._delegate,function Br(A,y,E){return tr.apply(this,arguments)}(le._delegate,E,F))})()}fetchProvidersForEmail(E){return this.fetchSignInMethodsForEmail(E)}fetchSignInMethodsForEmail(E){return function _a(A,y){return Yo.apply(this,arguments)}(this._delegate,E)}isSignInWithEmailLink(E){return function ma(A,y){return"EMAIL_SIGNIN"===Or.parseLink(y)?.operation}(0,E)}getRedirectResult(){var E=this;return(0,f.Z)(function*(){yu(Pc(),E._delegate,"operation-not-supported-in-this-environment");const F=yield function bi(A,y){return Ei.apply(this,arguments)}(E._delegate,su);return F?qa(E._delegate,Promise.resolve(F)):{credential:null,user:null}})()}addFrameworkForLogging(E){!function V(A,y){ji(A)._logFramework(y)}(this._delegate,E)}onAuthStateChanged(E,F,le){const{next:Se,error:At,complete:hn}=bd(E,F,le);return this._delegate.onAuthStateChanged(Se,At,hn)}onIdTokenChanged(E,F,le){const{next:Se,error:At,complete:hn}=bd(E,F,le);return this._delegate.onIdTokenChanged(Se,At,hn)}sendSignInLinkToEmail(E,F){return function Si(A,y,E){return Zo.apply(this,arguments)}(this._delegate,E,F)}sendPasswordResetEmail(E,F){return function ai(A,y,E){return fo.apply(this,arguments)}(this._delegate,E,F||void 0)}setPersistence(E){var F=this;return(0,f.Z)(function*(){let le;switch(function ru(A,y){ec(Object.values(Ta).includes(y),A,"invalid-persistence-type"),(0,re.b$)()?ec(y!==Ta.SESSION,A,"unsupported-persistence-type"):(0,re.UG)()?ec(y===Ta.NONE,A,"unsupported-persistence-type"):Jl()?ec(y===Ta.NONE||y===Ta.LOCAL&&(0,re.hl)(),A,"unsupported-persistence-type"):ec(y===Ta.NONE||uc(),A,"unsupported-persistence-type")}(F._delegate,E),E){case Ta.SESSION:le=yi;break;case Ta.LOCAL:le=(yield gn(va)._isAvailable())?va:li;break;case Ta.NONE:le=Le;break;default:return Qe("argument-error",{appName:F._delegate.name})}return F._delegate.setPersistence(le)})()}signInAndRetrieveDataWithCredential(E){return this.signInWithCredential(E)}signInAnonymously(){return qa(this._delegate,function Rs(A){return gs.apply(this,arguments)}(this._delegate))}signInWithCredential(E){return qa(this._delegate,Xi(this._delegate,E))}signInWithCustomToken(E){return qa(this._delegate,function Mr(A,y){return Es.apply(this,arguments)}(this._delegate,E))}signInWithEmailAndPassword(E,F){return qa(this._delegate,function pn(A,y,E){return Xi((0,re.m9)(A),as.credential(y,E))}(this._delegate,E,F))}signInWithEmailLink(E,F){return qa(this._delegate,function es(A,y,E){return ga.apply(this,arguments)}(this._delegate,E,F))}signInWithPhoneNumber(E,F){return ou(this._delegate,function Il(A,y,E){return hl.apply(this,arguments)}(this._delegate,E,F))}signInWithPopup(E){var F=this;return(0,f.Z)(function*(){return yu(Pc(),F._delegate,"operation-not-supported-in-this-environment"),qa(F._delegate,function ce(A,y,E){return We.apply(this,arguments)}(F._delegate,E,su))})()}signInWithRedirect(E){var F=this;return(0,f.Z)(function*(){return yu(Pc(),F._delegate,"operation-not-supported-in-this-environment"),yield Nl(F._delegate),Ca(F._delegate,E,su)})()}updateCurrentUser(E){return this._delegate.updateCurrentUser(E)}verifyPasswordResetCode(E){return function en(A,y){return ti.apply(this,arguments)}(this._delegate,E)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return A.Persistence=Ta,A})();function bd(A,y,E){let F=A;"function"!=typeof A&&({next:F,error:y,complete:E}=A);const le=F;return{next:At=>le(At&&Za.getOrCreate(At)),error:y,complete:E}}function Th(A,y){const E=function kc(A,y){const E=nc();if(!E)return[];const F=Be(tc,A,y);switch(E.getItem(F)){case Ta.NONE:return[Le];case Ta.LOCAL:return[va,yi];case Ta.SESSION:return[yi];default:return[]}}(A,y);if(typeof self<"u"&&!E.includes(va)&&E.push(va),typeof window<"u")for(const F of[li,yi])E.includes(F)||E.push(F);return E.includes(Le)||E.push(Le),E}class ed{constructor(){this.providerId="phone",this._delegate=new Ds(Ld(_.Z.auth()))}static credential(y,E){return Ds.credential(y,E)}verifyPhoneNumber(y,E){return this._delegate.verifyPhoneNumber(y,E)}unwrap(){return this._delegate}}ed.PHONE_SIGN_IN_METHOD=Ds.PHONE_SIGN_IN_METHOD,ed.PROVIDER_ID=Ds.PROVIDER_ID;const Ec=z;class vu{constructor(y,E,F=_.Z.app()){var le;Ec(null===(le=F.options)||void 0===le?void 0:le.apiKey,"invalid-api-key",{appName:F.name}),this._delegate=new cs(y,E,F.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Sh(A){A.INTERNAL.registerComponent(new Ze.wA("auth-compat",y=>{const E=y.getProvider("app-compat").getImmediate(),F=y.getProvider("auth");return new vd(E,F)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Ne_EMAIL_SIGNIN,PASSWORD_RESET:Ne_PASSWORD_RESET,RECOVER_EMAIL:Ne_RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:Ne_REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:Ne_VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:Ne_VERIFY_EMAIL}},EmailAuthProvider:as,FacebookAuthProvider:Ao,GithubAuthProvider:qo,GoogleAuthProvider:bo,OAuthProvider:Ws,SAMLAuthProvider:Xr,PhoneAuthProvider:ed,PhoneMultiFactorGenerator:$c,RecaptchaVerifier:vu,TwitterAuthProvider:Di,Auth:vd,AuthCredential:Ar,Error:re.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),A.registerVersion("@firebase/auth-compat","0.3.7")}(_.Z)},8766:(wn,dt,L)=>{L.d(dt,{Lj:()=>Qe,X3:()=>_t});var f=L(5861);const _=(z,ct)=>ct.some(bt=>z instanceof bt);let re,Te;const Ze=new WeakMap,xe=new WeakMap,ze=new WeakMap,pe=new WeakMap,Me=new WeakMap;let pt={get(z,ct,bt){if(z instanceof IDBTransaction){if("done"===ct)return xe.get(z);if("objectStoreNames"===ct)return z.objectStoreNames||ze.get(z);if("store"===ct)return bt.objectStoreNames[1]?void 0:bt.objectStore(bt.objectStoreNames[0])}return Mt(z[ct])},set:(z,ct,bt)=>(z[ct]=bt,!0),has:(z,ct)=>z instanceof IDBTransaction&&("done"===ct||"store"===ct)||ct in z};function It(z){return"function"==typeof z?function an(z){return z!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function He(){return Te||(Te=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(z)?function(...ct){return z.apply(Ae(this),ct),Mt(Ze.get(this))}:function(...ct){return Mt(z.apply(Ae(this),ct))}:function(ct,...bt){const Ft=z.call(Ae(this),ct,...bt);return ze.set(Ft,ct.sort?ct.sort():[ct]),Mt(Ft)}}(z):(z instanceof IDBTransaction&&function yt(z){if(xe.has(z))return;const ct=new Promise((bt,Ft)=>{const gn=()=>{z.removeEventListener("complete",vn),z.removeEventListener("error",Pt),z.removeEventListener("abort",Pt)},vn=()=>{bt(),gn()},Pt=()=>{Ft(z.error||new DOMException("AbortError","AbortError")),gn()};z.addEventListener("complete",vn),z.addEventListener("error",Pt),z.addEventListener("abort",Pt)});xe.set(z,ct)}(z),_(z,function ke(){return re||(re=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(z,pt):z)}function Mt(z){if(z instanceof IDBRequest)return function Ne(z){const ct=new Promise((bt,Ft)=>{const gn=()=>{z.removeEventListener("success",vn),z.removeEventListener("error",Pt)},vn=()=>{bt(Mt(z.result)),gn()},Pt=()=>{Ft(z.error),gn()};z.addEventListener("success",vn),z.addEventListener("error",Pt)});return ct.then(bt=>{bt instanceof IDBCursor&&Ze.set(bt,z)}).catch(()=>{}),Me.set(ct,z),ct}(z);if(pe.has(z))return pe.get(z);const ct=It(z);return ct!==z&&(pe.set(z,ct),Me.set(ct,z)),ct}const Ae=z=>Me.get(z);function _t(z,ct,{blocked:bt,upgrade:Ft,blocking:gn,terminated:vn}={}){const Pt=indexedDB.open(z,ct),Ht=Mt(Pt);return Ft&&Pt.addEventListener("upgradeneeded",Ot=>{Ft(Mt(Pt.result),Ot.oldVersion,Ot.newVersion,Mt(Pt.transaction))}),bt&&Pt.addEventListener("blocked",()=>bt()),Ht.then(Ot=>{vn&&Ot.addEventListener("close",()=>vn()),gn&&Ot.addEventListener("versionchange",()=>gn())}).catch(()=>{}),Ht}function Qe(z,{blocked:ct}={}){const bt=indexedDB.deleteDatabase(z);return ct&&bt.addEventListener("blocked",()=>ct()),Mt(bt).then(()=>{})}const Ue=["get","getKey","getAll","getAllKeys","count"],lt=["put","add","delete","clear"],kt=new Map;function Ye(z,ct){if(!(z instanceof IDBDatabase)||ct in z||"string"!=typeof ct)return;if(kt.get(ct))return kt.get(ct);const bt=ct.replace(/FromIndex$/,""),Ft=ct!==bt,gn=lt.includes(bt);if(!(bt in(Ft?IDBIndex:IDBObjectStore).prototype)||!gn&&!Ue.includes(bt))return;const vn=function(){var Pt=(0,f.Z)(function*(Ht,...Ot){const jt=this.transaction(Ht,gn?"readwrite":"readonly");let Gt=jt.store;return Ft&&(Gt=Gt.index(Ot.shift())),(yield Promise.all([Gt[bt](...Ot),gn&&jt.done]))[0]});return function(Ot){return Pt.apply(this,arguments)}}();return kt.set(ct,vn),vn}!function Lt(z){pt=z(pt)}(z=>({...z,get:(ct,bt,Ft)=>Ye(ct,bt)||z.get(ct,bt,Ft),has:(ct,bt)=>!!Ye(ct,bt)||z.has(ct,bt)}))},5861:(wn,dt,L)=>{function f(re,Te,ke,He,Ze,xe,ze){try{var pe=re[xe](ze),Me=pe.value}catch(Ne){return void ke(Ne)}pe.done?Te(Me):Promise.resolve(Me).then(He,Ze)}function _(re){return function(){var Te=this,ke=arguments;return new Promise(function(He,Ze){var xe=re.apply(Te,ke);function ze(Me){f(xe,He,Ze,ze,pe,"next",Me)}function pe(Me){f(xe,He,Ze,ze,pe,"throw",Me)}ze(void 0)})}}L.d(dt,{Z:()=>_})}},wn=>{wn(wn.s=1981)}]);